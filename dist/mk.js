!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mk=e():t.mk=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="<%=baseUrl%>/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(34),i=n(36),a=r(i),s=n(19),u=r(s),l=n(15),f=r(l),c=n(29),h=n(55),d=n(54),p=n(11),y=r(p),_=n(2),v=n(6),g=n(17),m=n(43),b=r(m),E=n(4),w=r(E),x=n(1),O=r(x),T=n(9),P=r(T),C=n(23),M=r(C),I=n(31),L=r(I),S=n(10),R=r(S),N=n(21),k=r(N),D=n(22),j=r(D),F=n(24),A=n(45),U=n(46),G=r(U),Y=n(53),K=r(Y),V=n(16),B=r(V),z=n(52),H=r(z),X=n(27),W=r(X),q=n(13),Z=r(q),J=n(47),Q=r(J),$=n(58),tt=r($),et=n(38),nt=r(et),rt=n(64),ot=r(rt),it=n(63),at=r(it),st=n(37),ut=r(st),lt=n(40),ft=r(lt),ct=n(5),ht=r(ct),dt=n(41),pt=r(dt),yt=n(48),_t=r(yt),vt=n(39),gt=r(vt),mt=n(20),bt=r(mt),Et=n(42),wt=r(Et),xt=n(25),Ot=r(xt),Tt=n(74),Pt=r(Tt),Ct=n(49),Mt=r(Ct),It=n(75),Lt=r(It),St=n(69),Rt=r(St),Nt=n(70),kt=r(Nt),Dt=n(72),jt=r(Dt),Ft=n(30),At=r(Ft),Ut=n(71),Gt=r(Ut),Yt="2.3.0";e.default={Config:o.Config,Coordinate:h.Coordinate,Canvas:d.Canvas,Event:b.default,SelectEvent:pt.default,FeatureEvent:_t.default,ModifyEvent:gt.default,EventManager:w.default,Counter:a.default,Helpers:u.default,ImageState:F.ImageState,ImageEvent:A.ImageEvent,SingleImage:G.default,Geometry:O.default,Extent:P.default,Point:M.default,Line:L.default,Polygon:R.default,MutilPolygon:k.default,Parallelogram:j.default,Style:g.Style,PointStyle:K.default,LineStyle:B.default,FillStyle:H.default,TextStyle:W.default,FeatureLayer:Z.default,SingleImageLayer:Q.default,Draw:tt.default,DrawEvent:nt.default,BrowserEvent:ht.default,EventType:v.EventType,Feature:Ot.default,Map:Pt.default,View:Mt.default,Overlay:Lt.default,GeometryUtil:y.default,ExtentUtil:_.ExtentUtil,Select:ot.default,Modify:at.default,DragPan:ut.default,Control:bt.default,Zoom:wt.default,Obj:f.default,Math:c.Math,MouseWheelZoom:ft.default,GeoJSON:Rt.default,version:Yt,intersects:kt.default,splitPolygonByPolyline:jt.default,contains:At.default,polygonWithHole:Gt.default},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(2),c=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n._extent=null,n.stride=2,n}return a(e,t),e.prototype.pointInExtent=function(t){return f.ExtentUtil.containsPoint(this.extent,t)},e.prototype.intersect=function(t){return!1},e.prototype.getCoordinates=function(){return[]},e.prototype.getFormShowPosition=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[]},e.prototype.getFlatInteriorPoint=function(){return[]},e.prototype.containsXY=function(t,e){return!0},e.prototype.move=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments[2]},e.prototype.scale=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments[1]},e.prototype.rotate=function(t,e){},e.prototype.simplify=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:1},e.prototype.toJSON=function(){},e.prototype.clone=function(){},s(e,[{key:"geometryType",get:function(){return e.UNDEFINED}},{key:"extent",get:function(){return this._extent}},{key:"anticlockwise",get:function(){var t=this.geometryType,n=this.getCoordinates(),r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;return t===e.LINE?(i=[0,0],a=n[0],s=n[1]):t!==e.POLYGON&&t!==e.EXTENT||(i=n[0],a=n[1],s=n[2]),r=[a[0]-i[0],a[1]-i[1]],o=[s[0]-a[0],s[1]-a[1]],r[0]*o[1]-o[0]*r[1]<0}}]),e}(l.default);e.default=c,c.POINT="point",c.MULTI_POINT="multi_point",c.LINE="line",c.MULTI_LINE="multi_line",c.POLYGON="polygon",c.MULTI_POLYGON="multi_polygon",c.EXTENT="extent",c.CIRCLE="circle",c.PARALLELOGRAM="parallelogram",c.UNDEFINED="undefined",t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.ExtentUtil={};n.createEmpty=function(){return[1/0,1/0,-(1/0),-(1/0)]},n.createOrUpdateFromFlatCoordinates=function(t,e,r,i,a){var s=n.createOrUpdateEmpty(a);return o(s,t,e,r,i)};var r=function(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)},o=function(t,e,n,o,i){for(;n<o;n+=i)r(t,e[n],e[n+1]);return t};n.createOrUpdateEmpty=function(t){return n.createOrUpdate(1/0,1/0,-(1/0),-(1/0),t)},n.createOrUpdate=function(t,e,n,r,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=r,o):[t,e,n,r]},n.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},n.createScaleExtent=function(t,e){return[t.x-e,t.y-e,t.x+e,t.y+e]},n.boundingExtentFromTwoPoints=function(t,e){var n=0,r=0,o=0,i=0;return t[0]>e[0]?(n=e[0],o=t[0]):(n=t[0],o=e[0]),t[1]>e[1]?(r=e[1],i=t[1]):(r=t[1],i=e[1]),[n,r,o,i]},n.boundingExtent=function(t){for(var e=n.createEmpty(),r=0,o=t.length;r<o;++r)n.extendCoordinate(e,t[r]);return[n.getBottomLeft(e),n.getBottomRight(e),n.getTopRight(e),n.getTopLeft(e),n.getBottomLeft(e)]},n.boundingSimpleExtent=function(t){for(var e=n.createEmpty(),r=0,o=t.length;r<o;++r)n.extendCoordinate(e,t[r]);return e},n.extendCoordinate=function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},n.getBottomRight=function(t){return[t[2],t[1]]},n.getBottomLeft=function(t){return[t[0],t[1]]},n.getTopRight=function(t){return[t[2],t[3]]},n.getTopLeft=function(t){return[t[0],t[3]]},n.containsPoint=function(t,e){var n=e[0],r=e[1];return Array.isArray(t)?t[0]<=n&&n<=t[2]&&t[1]<=r&&r<=t[3]:t.xmin-1<=n&&n<=t.xmax+1&&t.ymin-1<=r&&r<=t.ymax+1},n.buffer=function(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},n.minMaxToRing=function(t,e,n,r){var o=[[t,e],[n,e],[n,r],[t,r],[t,e]];return o},n.getHeight=function(t){return t[3]-t[1]},n.getWidth=function(t){return t[2]-t[0]},n.updateExtent=function(t,e,n){var r=n[0],o=r.index,i=t.getCoordinates(),a=i[o],s=i[o+1],u=r.isVertex;return u?0===o||4===o?(i[0]=e,i[4]=e,i[1][1]=e[1],i[3][0]=e[0]):1===o?(i[1]=e,i[2][0]=e[0],i[0][1]=e[1],i[4]=i[0]):2===o?(i[2]=e,i[1][0]=e[0],i[3][1]=e[1]):3===o&&(i[3]=e,i[2][1]=e[1],i[0][0]=e[0],i[4]=i[0]):(a[0]===s[0]&&(i[o][0]=e[0],i[o+1][0]=e[0]),a[1]===s[1]&&(i[o][1]=e[1],i[o+1][1]=e[1]),3===o&&(i[0]=i[4]),0===o&&(i[4]=i[0])),i},n.getIntersection=function(t,e,r){var o=r?r:n.createEmpty();return n.intersects(t,e)&&(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]),o},n.intersects=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},n.containsExtent=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},n.isEmpty=function(t){return t[2]<t[0]||t[3]<t[1]},n.getForViewAndSize=function(t,e,r,o,i){var a=e*o[0]/2,s=e*o[1]/2,u=Math.cos(r),l=Math.sin(r),f=a*u,c=a*l,h=s*u,d=s*l,p=t[0],y=t[1],_=p-f+d,v=p-f-d,g=p+f-d,m=p+f+d,b=y-c-h,E=y-c+h,w=y+c+h,x=y+c-h;return n.createOrUpdate(Math.min(_,v,g,m),Math.min(b,E,w,x),Math.max(_,v,g,m),Math.max(b,E,w,x),i)},e.default={ExtentUtil:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(43),l=r(u),f=n(36),c=n(6),h=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n._id=(0,f.getUid)(),n._revision=0,n}return a(e,t),e.prototype.changed=function(){++this._revision,this.dispatchEvent(c.EventType.CHANGE)},s(e,[{key:"id",get:function(){return this._id}},{key:"revision",get:function(){return this._revision}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.ol_lm;return n?n[e]:void 0}function i(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=o(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);n!==-1&&e.splice(n,1),0===e.length&&f(t.target,t.type)}l.default.clear(t)}}function a(t,e,n,r,o){var i=d(t),a=i[e];a||(a=i[e]=[]);var s=h(a,n,r,!1);return s?o||(s.callOnce=!1):(s={bindTo:r,callOnce:!!o,listener:n,target:t,type:e},t.addEventListener(e,c(s)),a.push(s)),s}function s(t,e,n,r){return a(t,e,n,r,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.getListeners=o,e.unlistenByKey=i,e.listen=a,e.listenOnce=s;var u=n(15),l=r(u),f=function(t,e){var n=o(t,e);if(n){for(var r=0,i=n.length;r<i;++r)t.removeEventListener(e,n[r].boundListener),l.default.clear(n[r]);n.length=0;var a=t.ol_lm;a&&(Reflect.deleteProperty(a,e),0===Object.keys(a).length)}},c=function(t){var e=function(e){var n=t.listener,r=t.bindTo||t.target;return t.callOnce&&i(t),n.call(r,e)};return t.boundListener=e,e},h=function(t,e,n,r){for(var o=void 0,i=0,a=t.length;i<a;++i)if(o=t[i],o.listener===e&&o.bindTo===n)return r&&(o.deleteIndex=i),o},d=function(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e};e.default={getListeners:o,listen:a,listenOnce:s,unlistenByKey:i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),u=r(s),l=function(t){function e(n,r,a){o(this,e);var s=i(this,t.call(this));return s.type=a,s.map=n,s.originalEvent=r,s.pixel=n.getEventPixel(r),s.coordinate=n.getCoordinateFromPixel(s.pixel),s.pointerId=0,s}return a(e,t),e.prototype.preventDefault=function(){this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},e}(u.default);e.default=l,l.SINGLE_CLICK="singleclick",l.CLICK="click",l.DBLCLICK="dblclick",l.MOUSE_DRAG="mousedrag",l.MOUSE_DOWN="mousedown",l.MOUSE_MOVE="mousemove",l.MOUSE_UP="mouseup",l.MOUSE_OVER="mouseover",l.MOUSE_OUT="mouseout",l.WHEEL="wheel",l.MOUSE_WHEEL="mousewheel",l.KEYDOWN="keydown",l.KEYPRESS="keypress",t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.EventType={};n.CHANGE="change",n.VIEW_CHANGED="viewchanged",n.ERROR="error",n.LOAD="load",n.RESIZE="resize",e.default={EventType:n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Transform={tmp_:new Array(6),create:function(){return[1,0,0,1,0,0]},reset:function(t){return t.set(t,1,0,0,1,0,0)},transform2D:function(t,e,n,r,o,i){var a=i?i:[],s=0,u=void 0;for(u=e;u<n;u+=r){var l=t[u],f=t[u+1];a[s++]=o[0]*l+o[2]*f+o[4],a[s++]=o[1]*l+o[3]*f+o[5]}return i&&a.length!=s&&(a.length=s),a},multiply:function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],l=e[1],f=e[2],c=e[3],h=e[4],d=e[5];return t[0]=n*u+o*l,t[1]=r*u+i*l,t[2]=n*f+o*c,t[3]=r*f+i*c,t[4]=n*h+o*d+a,t[5]=r*h+i*d+s,t},set:function(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t},setFromArray:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},apply:function(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e},rotate:function(t,e){var n=Math.cos(e),r=Math.sin(e);return t.multiply(t,t.set(t.tmp_,n,r,-r,n,0,0))},scale:function(t,e,n){return t.multiply(t,t.set(t.tmp_,e,0,0,n,0,0))},translate:function(t,e,n){return t.multiply(t,t.set(t.tmp_,1,0,0,1,e,n))},compose:function(t,e,n,r,o,i,a,s){var u=Math.sin(i),l=Math.cos(i);return t[0]=r*l,t[1]=o*u,t[2]=-r*u,t[3]=o*l,t[4]=a*r*l-s*r*u+e,t[5]=a*o*u+s*o*l+n,t},invert:function(t){var e=n.determinant(t),r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5];return t[0]=a/e,t[1]=-o/e,t[2]=-i/e,t[3]=r/e,t[4]=(i*u-a*s)/e,t[5]=-(r*u-o*s)/e,t},determinant:function(t){return t[0]*t[3]-t[1]*t[2]}};e.default={Transform:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(5),c=r(f),h=n(15),d=r(h),p=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n.active=!0,n._mapRenderKey=null,n.targetPointers=null,n._trackedPointers={},n.handlingDownUpSequence=!1,n}return a(e,t),e.prototype.applyHandleEventOption=function(t){this.handleMouseEvent=t.handleMouseEvent?t.handleMouseEvent:this.handleMouseEvent,this._handleDownEvent=t.handleDownEvent?t.handleDownEvent:function(){return!1},this._handleDragEvent=t.handleDragEvent?t.handleDragEvent:function(){},this._handleMoveEvent=t.handleMoveEvent?t.handleMoveEvent:function(){},this._handleUpEvent=t.handleUpEvent?t.handleUpEvent:function(){return!1}},e.prototype.handleMouseEvent=function(t){var e=!1;if(this._updateTrackedPointers(t),this.handlingDownUpSequence){if(t.type===c.default.MOUSE_DRAG)this._handleDragEvent(t);else if(t.type===c.default.MOUSE_UP){var n=this._handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type===c.default.MOUSE_DOWN){var r=this._handleDownEvent(t);this.handlingDownUpSequence=r,e=this.shouldStopEvent(r)}else t.type===c.default.MOUSE_MOVE&&this._handleMoveEvent(t);return!e},e.prototype._isPointerDraggingEvent=function(t){var e=t.type;return e===c.default.MOUSE_DOWN||e===c.default.MOUSE_DRAG||e===c.default.MOUSE_UP},e.prototype._updateTrackedPointers=function(t){if(this._isPointerDraggingEvent(t)){var e=t;t.type==c.default.MOUSE_UP?delete this._trackedPointers[e.pointerId]:t.type==c.default.MOUSE_DOWN?this._trackedPointers[e.pointerId]=e:e.pointerId in this._trackedPointers&&(this._trackedPointers[e.pointerId]=e),this.targetPointers=d.default.getValues(this._trackedPointers)}},e.prototype.pan=function(t,e){var n=t.center;n&&(t.center=[n[0]+e[0],n[1]+e[1]])},e.prototype.zoomByDelta=function(t,e,n,r){var o=t.resolution,i=t.constrainResolution(o,e,0);if(n&&void 0!==i&&i!==o){var a=t.center,s=t.calculateCenterZoom(i,n);s=t.constrainCenter(s),n=[(i*a[0]-o*s[0])/(i-o),(i*a[1]-o*s[1])/(i-o)]}this.zoomWithoutConstraints(t,i,n,r)},e.prototype.zoomWithoutConstraints=function(t,e,n,r){if(e){var o=t.resolution,i=t.center;if(void 0!==o&&i&&e!==o&&r)t.resolution=e;else{if(n){var a=t.calculateCenterZoom(e,n);t.center=a}t.resolution=e}}},e.prototype.getViewDataExtent=function(){return this._dataExtent||(this._dataExtent=this.map.view.dataExtent),this._dataExtent},e.prototype.coordinateBeyond=function(t){if(this.map.allowCoordinatesBeyondImage)return t;if(void 0===t)return t;var e=new Array(2),n=void 0,r=void 0;try{n=t[0],r=t[1]}catch(t){}e[0]=n,e[1]=r,n<=0&&(e[0]=0),r<=0&&(e[1]=0);var o=this.getViewDataExtent();return o&&(n>=o[2]&&(e[0]=o[2]),r>=o[3]&&(e[1]=o[3])),e},e.prototype.shouldStopEvent=function(t){return t},s(e,[{key:"map",get:function(){return this._map},set:function(t){this._map=t}},{key:"active",get:function(){return this._active},set:function(t){this._active=t}}]),e}(l.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),f=n(2),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,e);var u=i(this,t.call(this));return u._xmin=n,u._ymin=r,u._xmax=a,u._ymax=s,u._rings=[],u._flatInteriorPointRevision=-1,u._flatInteriorPoint=null,u}return a(e,t),e.prototype.containsXY=function(t,e){return f.ExtentUtil.containsPoint(this,[t,e])},e.prototype.getFlatInteriorPoint=function(){return this._flatInteriorPointRevision!==this.revision&&(this._flatInteriorPointRevision=this.revision,this._flatInteriorPoint=[this.xmin,this.ymin]),this._flatInteriorPoint},e.prototype.move=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=void 0;n&&n.beyond&&(r=n.beyond);var o=[this.xmin,this.ymin],i=this.width,a=this.height,s=new Array(2);s[0]=o[0]+t,s[1]=o[1]+e,r&&(o[0]<r.xmin&&(o[0]=r.xmin,s[0]=o[0]),o[0]+i+t>=r.xmax&&(s[0]=o[0]),o[1]<r.ymin&&(o[1]=r.ymin,s[1]=o[1]),o[1]+a+e>=r.ymax&&(s[1]=o[1]));var u=[s,[s[0]+i,s[1]],[s[0]+i,s[1]+a],[s[0],s[1]+a],s];this.setCoordinates(u)},e.prototype.getCoordinates=function(){return 0===this._rings.length&&0!==this.xmin&&0!==this.ymin&&0!==this.xmax&&0!==this.ymax&&(this._rings=f.ExtentUtil.minMaxToRing(this.xmin,this.ymin,this.xmax,this.ymax)),this._rings},e.prototype.getFormShowPosition1=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[(this.xmin+this.xmax)/2-t,this.ymin-e]},e.prototype.getFormShowPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[this.xmin-t,this.ymin-e]},e.prototype.setCoordinates=function(t){this.rings=t;var e=f.ExtentUtil.boundingSimpleExtent(t);this.xmin=e[0],this.ymin=e[1],this.xmax=e[2],this.ymax=e[3],this.changed()},e.prototype.getCoordinateIndex=function(t){return this.getCoordinates().findIndex(function(e){return e[0]===t[0]&&e[1]===t[1]})},e.prototype.clone=function(){return new e(this.xmin,this.ymin,this.xmax,this.ymax)},s(e,[{key:"geometryType",get:function(){return l.default.EXTENT}},{key:"centerX",get:function(){return(this.xmax+this.xmin)/2}},{key:"centerY",get:function(){return(this.ymax+this.ymin)/2}},{key:"width",get:function(){return Math.abs(this.xmax-this.xmin)}},{key:"height",get:function(){return Math.abs(this.ymax-this.ymin)}},{key:"extent",get:function(){return this}},{key:"xmin",get:function(){return this._xmin},set:function(t){this._xmin=t,this.changed()}},{key:"ymin",get:function(){return this._ymin},set:function(t){this._ymin=t,this.changed()}},{key:"xmax",get:function(){return this._xmax},set:function(t){this._xmax=t,this.changed()}},{key:"ymax",get:function(){return this._ymax},set:function(t){this._ymax=t,this.changed()}},{key:"rings",get:function(){return 0===this._rings.length&&0!==this.xmin&&0!==this.ymin&&0!==this.xmax&&0!==this.ymax&&(this._rings=f.ExtentUtil.minMaxToRing(this.xmin,this.ymin,this.xmax,this.ymax)),this._rings},set:function(t){this._rings=t;var e=f.ExtentUtil.boundingSimpleExtent(t);this.xmin=e[0],this.ymin=e[1],this.xmax=e[2],this.ymax=e[3]}}]),e}(l.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(32),d=n(33),p=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e);var r=i(this,t.call(this));return r._rings=[],r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r.setCoordinates(n),r}return a(e,t),e.prototype.addRing=function(t){this.rings.push(t),this._extent=null},e.prototype.containsXY=function(t,e){var n=this,r=this.getCoordinates(),o=r[0],i=!1;if(this._inOneRing(t,e,o)&&(i=!0),r.length>1&&i){var a=r.slice(1),s=a.some(function(r){return n._inOneRing(t,e,r)});s&&(i=!1)}return i},e.prototype._inOneRing=function(t,e,n){for(var r=t,o=e,i=!1,a=0,s=n.length,u=s-1;a<s;u=a,a++){var l=n[a][0],f=n[a][1],c=n[u][0],h=n[u][1];if(l===r&&f===o||c===r&&h===o)return!0;if(f<o&&h>=o||f>=o&&h<o){var d=l+(o-f)*(c-l)/(h-f);if(d===r)return!0;d>r&&(i=!i)}}return i},e.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){var t=[this.extent.centerX,this.extent.centerY],e=[2*this.getCoordinates()[0].length],n=this.getOrientedFlatCoordinates();this._flatInteriorPoint=(0,h.linearRings)(n,0,e,this.stride,t,0),this._flatInteriorPointRevision=this.revision}return this._flatInteriorPoint},e.prototype.getOrientedFlatCoordinates=function(){var t=void 0,e=[],n=this.getCoordinates()[0];n.forEach(function(t){e.push(t[0],t[1])});var r=[e.length];return(0,d.linearRingsAreOriented)(e,0,r,this.stride)?t=e:(t=e.slice(),t.length=(0,d.orientLinearRings)(t,0,r,this.stride)),t},e.prototype.hasHoles=function(){return this.getCoordinates().length>1},e.prototype.getCoordinates=function(){return this.rings},e.prototype.getFormShowPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCoordinates()[0];if(0!==n.length){var r=n[n.length-2];return[r[0]-t,r[1]-e]}},e.prototype.setCoordinates=function(t){this.rings=t,this._extent=null,this.stride=2,this.changed()},e.prototype.getCoordinateIndex=function(t){for(var e=this.getCoordinates(),n=0,r=e.length;n<r;n++)for(var o=e[n],i=0,a=o.length;i<a;i++){var s=o[i];if(s[0]===t[0]&&s[1]===t[1])return{ringIndex:n,index:i}}return{ringIndex:-1,index:-1}},e.prototype.clone=function(){var t=this.getCoordinates(),n=[],r=[];t.forEach(function(t){t.forEach(function(t){r.push([t[0],t[1]])}),n.push(r),r=[]});var o=new e;return o.setCoordinates(n),o},s(e,[{key:"extent",get:function(){if(null===this._extent){var t=this.getCoordinates();if(t.length>0){var e=t[0],n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=!0,s=!1,u=void 0;try{for(var l,f=e[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;n=Math.min(n,h[0]),r=Math.min(r,h[1]),o=Math.max(o,h[0]),i=Math.max(i,h[1])}}catch(t){s=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}this._extent=new c.default(n,r,o,i)}}return this._extent}},{key:"geometryType",get:function(){return l.default.POLYGON}},{key:"rings",get:function(){return this._rings},set:function(t){this._rings=t,this._extent=null}}]),e}(l.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var r=n?n:2,o=l(t.x,t.y,e.x,e.y);return o<=r}function i(t,e,n){for(var r=e.path,o=a,i=t.x,s=t.y,u=!1,l=0,f=r.length-1;l<f;l++){var c=r[l],h=r[l+1],d=o(i,s,c.x,c.y,h.x,h.y);if(d=Math.sqrt(d),d<=n){u=!0;break}}return u}function a(t,e,n,r,o,i){var a=o-n,s=i-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=o,r=i):u>0&&(n+=a*u,r+=s*u)}return l(t,e,n,r)}function s(t,e){var n=c(t,e);return l(t[0],t[1],n[0],n[1])}function u(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function l(t,e,n,r){var o=n-t,i=r-e;return o*o+i*i}function f(t,e){return Math.sqrt(l(t[0],t[1],e[0],e[1]))}function c(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=o[0],s=o[1],u=i[0],l=i[1],f=u-a,c=l-s,h=0===f&&0===c?0:(f*(n-a)+c*(r-s))/(f*f+c*c||0),d=void 0,p=void 0;return h<=0?(d=a,p=s):h>=1?(d=u,p=l):(d=a+h*f,p=s+h*c),[d,p]}function h(t,e,n,r,o,i){if(0===n.length)return!1;if(!d(t,e,n[0],r,o,i))return!1;var a=void 0,s=void 0;for(a=1,s=n.length;a<s;++a)if(d(t,n[a-1],n[a],r,o,i))return!1;return!0}function d(t,e,n,r,o,i){for(var a=0,s=t[n-r],u=t[n-r+1];e<n;e+=r){var l=t[e],f=t[e+1];u<=i?f>i&&(l-s)*(i-u)-(o-s)*(f-u)>0&&a++:f<=i&&(l-s)*(i-u)-(o-s)*(f-u)<0&&a--,s=l,u=f}return 0!==a}function p(t,e,n,r,o){var i=void 0,a=void 0,s=void 0,u=void 0,l=void 0;return i=n-t,a=r-e,s=Math.sqrt(o*o/(a/i*(a/i)+1)),s=i>0?Math.sqrt(o*o/(a/i*(a/i)+1)):-Math.sqrt(o*o/(a/i*(a/i)+1)),u=n+s,l=r+a/i*s,[u,l]}function y(t){if(!t)return t;var e=void 0,n=t.geometryType;if(n===v.default.POLYGON)e=t.getCoordinates()[0];else if(n===v.default.LINE){e=t.getCoordinates();for(var r=e.slice(1,e.length-2),o=[e[0]],i=0,a=r.length;i<a;i+=2)o.push(r[i]);o.push(e[e.length-1]),t.setCoordinates(o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.pointIntersectPoint=o,e.pointIntersectLine=i,e.squaredSegmentDistance=a,e.squaredDistanceToSegment=s,e.equals=u,e.squaredDistance=l,e.distance=f,e.closestOnSegment=c,e.linearRingsContainsXY=h,e.linearRingContainsXY=d,e.getPointInExtendedLineByDistanceFromAB=p,e.simplify=y;var _=n(1),v=r(_);e.default={linearRingContainsXY:d,linearRingsContainsXY:h,pointIntersectPoint:o,squaredDistance:l,closestOnSegment:c,getPointInExtendedLineByDistanceFromAB:p,equals:u,simplify:y,distance:f}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e){n(this,t),this.propagatinoStopped=!1,this.type=e,this.target=null};e.default=r,r.stopPropagation=function(t){return t.stopPropagation()},r.preventDefault=function(t){return t.preventDefault()},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(44),l=r(u),f=n(17),c=n(2),h=n(48),d=r(h),p=n(6),y=n(4),_=n(1),v=r(_),g=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this,n));return r._features=[],r._style=null,r._styleFunction=null,r._featureChangeKeys=new Map,r.style=n.style,n.features&&r.addFeatures(n.features),r.zIndex=n.zIndex||2,r._renderBuffer=void 0!==n.renderBufferValue?n.renderBufferValue:100,r}return a(e,t),e.prototype.clear=function(){if(0!==this._features.length){this._features=[];var t=y.unlistenByKey;this._featureChangeKeys.forEach(function(e){t(e)}),this._featureChangeKeys.clear(),this.dispatchEvent(new d.default(d.default.EventType.CLEAR)),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),this.changed()}},e.prototype.findFeature=function(t){var e=this.features;return e.find(function(e){return e.id===t})},e.prototype.addFeatures=function(t){return!!Array.isArray(t)&&(this._addFeaturesInner(t),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),void this.changed())},e.prototype.hasFeature=function(t){if(null===t||void 0===t)return!1;var e=t.id,n=this.features,r=n.findIndex(function(t){return t.id===e});return r>-1},e.prototype._addFeaturesInner=function(t){var e=this;t.forEach(function(t){e.hasFeature(t)||(e.features.push(t),e._setupChangeEvents(t.id,t),e.dispatchEvent(new d.default(d.default.EventType.ADD_FEATURE,t)))})},e.prototype.addFeature=function(t){return!!t&&(this._addFeaturesInner([t]),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),void this.changed())},e.prototype.forEachFeatureAtPiexl=function(t,e,n,r){var o=this._getCurrentExtentFeatures(),i=this._getIntersectedFeatures(e,o),a=e[0],s=e[1],u={tolerance:r*t.viewState.resolution},l=i.filter(function(t){return t.geometry.containsXY(a,s,u)});return l},e.prototype._getIntersectedFeatures=function(t,e){return e.filter(function(e){return e.geometry.pointInExtent(t)})},e.prototype._getCurrentExtentFeatures=function(){
return this.features},e.prototype.removeFeature=function(t){var e=this.features;if(0===e.length)return!1;var n=t.id,r=e.findIndex(function(t){return t.id===n});r>-1&&(e.splice(r,1),this._featureChangeKeys.delete(n),this.dispatchEvent(new d.default(d.default.EventType.REMOVE_FEATURE,t)),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),this.changed())},e.prototype._setupChangeEvents=function(t,e){this._featureChangeKeys.set(t,(0,y.listen)(e,p.EventType.CHANGE,this._handleFeatureChange,this))},e.prototype._handleFeatureChange=function(){this.changed()},e.prototype.loadFeature=function(t){var e=this.features,n=c.ExtentUtil.intersects,r=c.ExtentUtil.createOrUpdate,o=[],i=[],a=[];return e.forEach(function(e){if(e.display){var s=e.geometry,u=s.extent,l=r(u.xmin,u.ymin,u.xmax,u.ymax);if(n(l,t)){var f=s.geometryType;f===v.default.POINT||f===v.default.MULTI_POINT?i.push(e):f===v.default.LINE||f===v.default.MULTI_LINE?a.push(e):o.push(e)}}}),[].concat(o,a,i)},s(e,[{key:"features",get:function(){return this._features}},{key:"style",set:function(t){this._style=void 0!==t?t:f.Style.defaultFunction(),this._styleFunction=null===t?void 0:f.Style.createFunction(this._style)},get:function(){return null===this._style&&(this._style=f.Style.defaultFunction()),this._style}},{key:"renderBuffer",get:function(){return this._renderBuffer},set:function(t){this._renderBuffer!==t&&(this._renderBuffer=t)}},{key:"styleFunction",get:function(){return this._styleFunction}}]),e}(l.default);e.default=g,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.type===l.default.SINGLE_CLICK}function i(t){return t.type===l.default.MOUSE_WHEEL||t.type===l.default.WHEEL}function a(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}function s(t){var e=t.originalEvent.target,n=e.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n}Object.defineProperty(e,"__esModule",{value:!0}),e.singleClick=o,e.mouseWheel=i,e.noModifierKeys=a,e.targetNotEditable=s;var u=n(5),l=r(u);e.default={singleClick:o,mouseWheel:i,noModifierKeys:a,targetNotEditable:s}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){n(this,t)}return t.getValues=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.clear=function(t){for(var e in t)Reflect.deleteProperty(t,e)},t.objectToMap=function(t){var e=new Map,n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(t)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.set(s,t[s])}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e},t.mapToObject=function(t){if(void 0===t||null===t)return{};var e={};return t.forEach(function(t,n){e[n]=t}),e},t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(35),l=r(u),f=n(27),c=r(f),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[255,255,255],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.SOLID,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.LineCap.BUTT,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.LineJion.MITER,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10;o(this,e);var h=i(this,t.call(this,n,s,r));return h.width=a,h.lineCap=u,h.lineJion=l,h.miterLimit=f,h.textStyle=new c.default,h}return a(e,t),e.prototype.clone=function(){var t=new e(this.color,this.alpha,this.width,this.style,this.lineCap,this.lineJion,this.miterLimit);return this.textStyle&&(t.textStyle=this.textStyle),t},s(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"lineCap",set:function(t){this._lineCap=t},get:function(){return this._lineCap}},{key:"lineJion",set:function(t){this._lineJion=t},get:function(){return this._lineJion}},{key:"miterLimit",set:function(t){this._miterLimit=t},get:function(){return this._miterLimit}}]),e}(l.default);e.default=h,h.SOLID="solid",h.DASH="dash",h.DOT="dot",h.DASHDOT="dashdot",h.DASHDOTDOT="dashdotdot",h.NULL="none",h.LineCap={BUTT:"butt",ROUND:"round",SQUARE:"square"},h.LineJion={MITER:"miter",BEVEL:"bevel",ROUND:"round"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Style=void 0;var o=n(1),i=r(o),a=n(52),s=r(a),u=n(16),l=r(u),f=n(53),c=r(f),h=e.Style={};h.defaultFunction=function(){if(!h._default){var t=[255,255,255],e=[0,153,255],n=1.5;h._default={},h._default[i.default.POLYGON]=[new s.default(t,new l.default(e,1,1.25),.2)],h._default[i.default.MULTI_POLYGON]=h._default[i.default.POLYGON],h._default[i.default.PARALLELOGRAM]=h._default[i.default.POLYGON],h._default[i.default.EXTENT]=h._default[i.default.POLYGON],h._default[i.default.LINE]=[new l.default(e,1,n)],h._default[i.default.POINT]=[new c.default(10,t,1,new l.default(e,1,n))]}return h._default},h.createDefaultEditing=function(){var t={},e=[255,255,255],n=[0,153,255],r=1.5;return t[i.default.POLYGON]=[new s.default(e,new l.default(n,1,1),.2)],t[i.default.MULTI_POLYGON]=t[i.default.POLYGON],t[i.default.EXTENT]=t[i.default.POLYGON],t[i.default.PARALLELOGRAM]=t[i.default.POLYGON],t[i.default.LINE]=[new l.default(e,1,r+1,l.default.LineCap.ROUND,l.default.LineJion.ROUND),new l.default(n,1,r,l.default.LineCap.ROUND,l.default.LineJion.ROUND)],t[i.default.MULTI_LINE]=t[i.default.LINE],t[i.default.POINT]=[new c.default(10,e,.1,new l.default(n,1,2))],t[i.default.MULTI_POINT]=t[i.default.POINT],t},h.createDefaultSelecting=function(){var t={},e=[255,255,255],n=[0,153,255],r=3,o=new l.default(e,1,r+2,l.default.LineCap.ROUND,l.default.LineJion.ROUND),a=new l.default(n,1,r,l.default.LineCap.ROUND,l.default.LineJion.ROUND);return t[i.default.POLYGON]=[new s.default(e,o,.5),new s.default(e,a,0)],t[i.default.MULTI_POLYGON]=t[i.default.POLYGON],t[i.default.EXTENT]=t[i.default.POLYGON],t[i.default.LINE]=[o,a],t[i.default.MULTI_LINE]=t[i.default.LINE],t[i.default.POINT]=[new c.default(12,n,1,new l.default(n,1,1))],t[i.default.MULTI_POINT]=t[i.default.POINT],t},h.createFunction=function(t){var e=void 0;if("function"==typeof t)e=t;else{var n=void 0;n=Array.isArray(t)?t:[t],e=function(t){return n[0][t.geometry.geometryType]}}return e},e.default={Style:h}},function(t,e){"use strict";function n(t,e){var n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function r(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)}function o(t){var e=t.offsetHeight,n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}function i(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function a(t){for(;t.lastChild;)t.removeChild(t.lastChild)}Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvasContext2D=n,e.outerWidth=r,e.outerHeight=o,e.removeNode=i,e.removeChildren=a,e.default={createCanvasContext2D:n,outerWidth:r,outerHeight:o,removeChildren:a,removeNode:i}},function(t,e){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t[0];n!=(0|n)&&(n=n+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+n+", "+r+" , "+o+" , "+e+" )"}Object.defineProperty(e,"__esModule",{value:!0}),e.colorToString=n,e.default={colorToString:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(18),c=n(4),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._element=n.element?n.element:null,r._target=null,r._map=null,r._listenerKeys=[],n.target&&(r.target=n.target),r}return a(e,t),s(e,[{key:"map",get:function(){return this._map},set:function(t){if(this.map&&(0,f.removeNode)(this._element),this._listenerKeys.forEach(function(t){return(0,c.unlistenByKey)(t)}),this._listenerKeys.length=0,this._map=t,this._map){var e=this._target?this._target:t.overlayContainerStopEvent;e.appendChild(this._element),t.render()}}},{key:"target",set:function(t){this._target="string"==typeof t?document.getElementById(t):t}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),f=r(l),c=n(10),h=r(c),d=n(9),p=r(d),y=n(32),_=n(33),v=function(t){function e(n){i(this,e);var r=a(this,t.call(this));return r._polygons=[],r.stride=2,r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r.setCoordinates(n),r}return s(e,t),e.prototype.getCoordinates=function(){return this._polygons},e.prototype.setCoordinates=function(t){this._polygons=t,this._extent=null,this.changed()},e.prototype.getPolygon=function(t){if(t<0&&this._polygons.length<t)return null;var e=this._polygons[t],n=[],r=[];e.forEach(function(t){t.forEach(function(t){r.push([t[0],t[1]])}),n.push(r),r=[]});var o=new h.default(n);return o},e.prototype.getFormShowPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getPolygon(0),r=n.getCoordinates()[0];if(0!==r.length){var o=r[r.length-2];return[o[0]-t,o[1]-e]}},e.prototype.containsXY=function(t,e){for(var n=this._polygons,r=0,o=n.length;r<o;r++){var i=this.getPolygon(r);if(i.containsXY(t,e))return!0}return!1},e.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){this._flatInteriorPointRevision=this.revision;var t=this._polygons,e=[],n=[],r=[];t.forEach(function(t){var e=t[0];r.push(e)}),r.sort(function(t,e){return t.length-e.length});var o=0;r.forEach(function(t){var r=2*t.length+o;n.push([r]),o=r,t.forEach(function(t){e.push(t[0],t[1])})});var i=(0,y.centerLinearRingss)(e,0,n,this.stride);this._flatInteriorPoint=(0,y.linearRingss)(this.getOrientedFlatCoordinates(e,n),0,n,this.stride,i)}return this._flatInteriorPoint},e.prototype.getOrientedFlatCoordinates=function(t,e){var n=void 0;return(0,_.linearRingssAreOriented)(t,0,e,this.stride)?n=t:(n=[].concat(o(t)),n.length=(0,_.orientLinearRingss)(n,0,e,this.stride)),n},e.prototype.getCoordinateIndex=function(t){for(var e=this.getCoordinates(),n=0,r=e.length;n<r;n++)for(var o=e[n],i=0,a=o.length;i<a;i++)for(var s=o[i],u=0,l=s.length;u<l;u++){var f=s[u];if(f[0]===t[0]&&f[1]===t[1])return{polygonIndex:n,ringIndex:i,index:u}}return{polygonIndex:-1,ringIndex:-1,index:-1}},e.prototype.clone=function(){var t=[];this._polygons.forEach(function(e){var n=[],r=[];e.forEach(function(t){t.forEach(function(t){r.push([t[0],t[1]])}),n.push(r)}),t.push(n),n=[]});var n=new e(t);return n},e.prototype.convertToPolygons=function(){var t=this,e=[];return this._polygons.forEach(function(n,r){e.push(t.getPolygon(r))}),e},u(e,[{key:"geometryType",get:function(){return f.default.MULTI_POLYGON}},{key:"extent",get:function(){if(null===this._extent){var t=this.getCoordinates();if(t.length>0){var e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;t.forEach(function(t){var i=t[0],a=!0,s=!1,u=void 0;try{for(var l,f=i[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var c=l.value;e=Math.min(e,c[0]),n=Math.min(n,c[1]),r=Math.max(r,c[0]),o=Math.max(o,c[1])}}catch(t){s=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}}),this._extent=new p.default(e,n,r,o)}}return this._extent}}]),e}(f.default);e.default=v,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),f=n(10),c=r(f),h=n(11),d=function(t){function e(n){return o(this,e),i(this,t.call(this,n))}return a(e,t),e.prototype.getCoordinateIndex=function(t){return this.getCoordinates()[0].findIndex(function(e){return e[0]===t[0]&&e[1]===t[1]})},e.prototype.clone=function(){return new e(this.getCoordinates())},e.getTheLastPoint=function(t){var e=t[0],n=t[1],r=t[2],o=r[0]-n[0],i=r[1]-n[1];return[e[0]+o,e[1]+i]},e.updateCoordinatesForModification=function(t,e,n,r){var o=0;n&&(o=(0,h.distance)(n,e));var i=t.getCoordinates();if(0===o)return i;var a=i[0],s=r[0],u=s.index,l=void 0,f=void 0,c=void 0;0===u||4===u?(l=a[3],f=a[0],c=a[1]):(l=a[u-1],f=a[u],c=a[u+1]);var d=(0,h.getPointInExtendedLineByDistanceFromAB)(l[0],l[1],f[0],f[1],o),p=f[0]-l[0],y=f[1]-l[1],_=e[0]-n[0],v=e[1]-n[1],g=_*p+v*y,m=d[0]-f[0],b=d[1]-f[1],E=void 0;return g<0?(d[0]=f[0]-m,d[1]=f[1]-b,E=[c[0]-m,c[1]-b]):E=[c[0]+m,c[1]+b],a[u]=d,a[u+1]=E,0===u?a[4]=a[0]:4!==u&&3!==u||(a[0]=a[4]),[a]},s(e,[{key:"geometryType",get:function(){return l.default.PARALLELOGRAM}}]),e}(c.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(2),d=n(11),p=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this));return a.x=n,a.y=r,a}return a(e,t),e.prototype.offset=function(t,n){return new e(this.x+t,this.y+n)},e.prototype.containsXY=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.tolerance?n.tolerance:2,o=this,i=(0,d.squaredDistance)(o.x,o.y,t,e);return Math.sqrt(i/2)<=r},e.prototype.update=function(t,e){this.x=t,this.y=e,this._extent=null},e.prototype.getFlatInteriorPoint=function(){return this.getCoordinates()},e.prototype.getCoordinates=function(){return[this.x,this.y]},e.prototype.getFormShowPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return[this.x-t,this.y-e]},e.prototype.setCoordinates=function(t){this.update(t[0],t[1]),this.changed()},e.prototype.getCoordinateIndex=function(){return 0},e.prototype.equal=function(t){var e=!1;return null!==t&&(e=this.x===t.x&&this.y===t.x||Number.isNaN(this.x)&&Number.isNaN(this.y)&&Number.isNaN(t.x)&&Number.isNaN(t.y)),e},e.prototype.clone=function(){return new e(this.x,this.y)},s(e,[{key:"geometryType",get:function(){return l.default.POINT}},{key:"extent",get:function(){if(!this._extent){var t=h.ExtentUtil.createScaleExtent(this,8);this._extent=new c.default(t[0],t[1],t[2],t[3])}return this._extent}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._extent=null}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._extent=null}}]),e}(l.default);e.default=p,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.ImageState={};n.IDLE=0,n.LOADING=1,n.LOADED=2,n.ERROR=3,e.default={ImageState:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),f=r(l),c=n(15),h=r(c),d=n(4),p=n(6),y=n(1),_=r(y),v=n(16),g=r(v),m=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],s=arguments[3];o(this,e);var u=i(this,t.call(this));return u._styleFunction=void 0,u._geometryChangeKey=null,u.geometry=n,u.initArribute(r),u.style=s,u.displayText=a,u.display=!0,u.textDisplay=!0,u.styleHighLight=!1,u}return a(e,t),e.prototype._handleGeometryChanged=function(){this.changed()},e.prototype.initArribute=function(t){t instanceof Object||(t={}),this._attributesMap=h.default.objectToMap(t)},e.prototype.get=function(t){if(this._attributesMap.has(t))return this._attributesMap.get(t)},e.prototype.set=function(t,e){return this._attributesMap.set(t,e)},e.prototype.delete=function(t){return this._attributesMap.delete(t)},e.prototype.forEachAttribute=function(t){this._attributesMap.forEach(t)},e.prototype.has=function(t){return this._attributesMap.has(t)},e.prototype.cloneAttributesMap=function(){var t=new Map;if(0!==this._attributesMap.size){var e=this._attributesMap.entries(),n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=s(i.value,2),l=u[0],f=u[1];t.set(l,f)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}return t},e.prototype.clone=function(){var t=void 0;if(this.style){var n=void 0;n=Array.isArray(this.style)?this.style[0].clone():this.style.clone(),t=[n]}return new e(this.geometry.clone(),this.cloneAttributesMap(),this.displayText,t)},u(e,[{key:"geometry",get:function(){return this._geometry},set:function(t){t&&(this._geometry=t,this._geometryChangeKey&&(0,d.unlistenByKey)(this._geometryChangeKey),this._geometryChangeKey=(0,d.listen)(t,p.EventType.CHANGE,this._handleGeometryChanged,this))}},{key:"styleFunction",get:function(){return this._styleFunction},set:function(t){this._styleFunction=t}},{key:"style",get:function(){return this._style},set:function(t){this._style=t}},{key:"displayText",get:function(){return this._displayText},set:function(t){this._displayText=t,this.changed()}},{key:"styleHighLight",get:function(){return this._styleHighLight},set:function(t){if(this._styleHighLight!==t&&(this._styleHighLight=t,void 0!==this.style)){for(var e=[255,255,255],n=[],r=0,o=this.style.length;r<o;r++){var i=this.style[r];n.push(i.clone())}if(this._styleHighLight){this.set("_originStyle",this.style);var a=this.geometry.geometryType;if(a===_.default.LINE){var s=n[0];s.width=s.width+1;var u=s.clone();u.width=u.width+1,u.color=e,n.unshift(u)}else if(a===_.default.POLYGON||a===_.default.MULTI_POLYGON||a===_.default.PARALLELOGRAM||a===_.default.EXTENT){var l=n[0];l.borderStyle.width=l.borderStyle.width+1;var f=l.clone();f.alpha=0,f.borderStyle.width=l.borderStyle.width+1,f.borderStyle.color=e,f.borderStyle.lineCap=g.default.LineCap.ROUND,f.borderStyle.lineJion=g.default.LineJion.ROUND,n.unshift(f)}else if(a===_.default.POINT){var c=n[0];c.size=c.size+3,c.borderStyle.width=c.borderStyle.width+1}var h=n[0].textStyle.clone(),d=h.font,p="bold "+d.split(" ")[1]+" Arial";h.font=p,n[0].textStyle=h,this.style=n}else this.get("_originStyle")&&(this.style=this.get("_originStyle"),this.delete("_originStyle"));this.changed()}}},{key:"display",get:function(){return this._display},set:function(t){this._display!==t&&(this._display=t,this.changed())}},{key:"textDisplay",get:function(){return this._textDisplay},set:function(t){this._textDisplay!==t&&(this._textDisplay=t,this.changed())}}]),e}(f.default);e.default=m,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(28),c=n(7),h=function(t){function e(n){o(this,e);var r=i(this,t.call(this));return r._context=n,r._pixelCoordinates=null,r.renderedTransform=c.Transform.create(),r}return a(e,t),e.prototype.resetRenderOption=function(){this._pixelCoordinates=null,this.renderedTransform=c.Transform.create()},e.prototype.equalsTransform=function(t,e){return(0,f.equals)(t,e)},e.prototype.render=function(t,e,n){},s(e,[{key:"context",get:function(){return this._context}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=function(t){function e(n){o(this,e);var r=i(this,t.call(this)),a=n||{};return r.text=a.text||"",r.font=a.font||e.DEFAULT_FONT,r.rotation=a.rotation||0,r.rotateWithView=a.rotateWithView,r.scale=a.scale||e.DEFAULT_SCALE,r.textAlign=a.textAlign||e.DEFAULT_TEXT_START,r.textBaseline=a.textBaseline||e.DEFAULT_BASE_LINE,r.fill=void 0!==a.fill?a.fill:e.DEFAULT_FILL_COLOR,r.stroke=void 0!==a.stroke?a.stroke:e.DEFAULT_STROKE,r.offsetX=void 0!==a.offsetX?a.offsetX:0,r.offsetY=void 0!==a.offsetY?a.offsetY:0,r}return a(e,t),e.prototype.clone=function(){return new e({font:this.font,rotation:this.rotation,rotateWithView:this.rotateWithView,scale:this.scale,text:this.text,textAlign:this.textAlign,textBaseline:this.textBaseline,fill:this.fill?this.fill.clone:void 0,stroke:this.stroke?this.stroke.clone:void 0,offsetX:this.offsetX,offsetY:this.offsetY})},s(e,[{key:"text",get:function(){return this._text},set:function(t){this._text=t}},{key:"font",get:function(){return this._font},set:function(t){this._font=t}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"rotateWithView",get:function(){return this._rotateWithView},set:function(t){this._rotateWithView=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){this._textAlign=t}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t}},{key:"fill",get:function(){return this._fill},set:function(t){this._fill=t}},{key:"stroke",get:function(){return this._stroke},set:function(t){this._stroke=t}},{key:"offsetX",get:function(){return this._offsetX},set:function(t){this._offsetX=t}},{key:"offsetY",get:function(){return this._offsetY},set:function(t){this._offsetY=t}}]),e}(l.default);e.default=f,f.DEFAULT_STROKE={color:[255,255,255],width:2,lineCap:"round",lineJion:"round"},f.DEFAULT_FILL_COLOR=[0,0,255],f.DEFAULT_FONT="normal 12px Arial",f.DEFAULT_TEXT_ALIGN="center",f.DEFAULT_TEXT_START="start",f.DEFAULT_BASE_LINE="bottom",f.DEFAULT_SCALE=10,t.exports=e.default},function(t,e){"use strict";function n(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var o=void 0;if(n>0){for(o=1;o<r;++o)if(t[o]<e)return o-1}else if(n<0){for(o=1;o<r;++o)if(t[o]<=e)return o}else for(o=1;o<r;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return r-1}function r(t,e){var n=t.length,r=Array(t.length),o=void 0;for(o=0;o<n;o++)r[o]={index:o,value:t[o]};for(r.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),o=0;o<t.length;o++)t[o]=r[o].value}function o(t,e,n){for(var r=void 0,o=void 0,i=n||a,s=0,u=t.length,l=!1;s<u;)r=s+(u-s>>1),o=+i(t[r],e),o<0?s=r+1:(u=r,l=!o);return l?s:~s}function i(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function a(t,e){return t>e?1:t<e?-1:0}Object.defineProperty(e,"__esModule",{value:!0}),e.linearFindNearest=n,e.stableSort=r,e.binarySearch=o,e.equals=i,e.numberSafeCompareFunction=a},function(t,e){"use strict";function n(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n){return t+n*(e-t)}Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=n,e.lerp=r,e.default={clamp:n,lerp:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.geometryType,r=!1;if(n===a.default.POLYGON||n===a.default.MULTI_POLYGON||n===a.default.EXTENT){var o=e.geometryType;if(o===a.default.POINT)return t.containsXY(e.x,e.y);if(o===a.default.LINE)return l(t,e);if(o===a.default.POLYGON)return f(t,e);if(o===a.default.MULTI_POLYGON)return c(t,e);if(o===a.default.PARALLELOGRAM)return f(t,new u.default(e.getCoordinates()))}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(1),a=r(i),s=n(10),u=r(s),l=function(t,e){var n=e.getCoordinates();return h(t,n)},f=function(t,e){var n=e.geometryType;if(n===a.default.POLYGON){var r=e.getCoordinates()[0];return h(t,r)}return!1},c=function(t,e){var n=e.convertToPolygons(),r=n.find(function(e){return!f(t,e)});return void 0==r},h=function(t,e){var n=e.some(function(e){return!t.containsXY(e[0],e[1])});return!n};t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(11),d=n(32),p=function(t){function e(n){o(this,e);var r=i(this,t.call(this));return r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r._path=[],r.addPath(n),r}return a(e,t),e.prototype.addPath=function(t){this.path.push(t),this._extent=null,this.changed()},e.prototype.forEachSegment=function(t,e){
this.path.forEach(t,e)},e.prototype.containsXY=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.tolerance?n.tolerance:2,o=this.path,i=h.squaredSegmentDistance,a=!1,s=0,u=o.length-1;s<u;s++){var l=o[s],f=o[s+1],c=i(t,e,l[0],l[1],f[0],f[1]);if(c=Math.sqrt(c),c<=r){a=!0;break}}return a},e.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){var t=null,e=.5,n=[],r=this.getCoordinates();r.forEach(function(t){n.push(t[0],t[1])}),this._flatInteriorPoint=(0,d.lineString)(n,0,n.length,this.stride,e,t),this._flatInteriorPointRevision=this.revision}return this._flatInteriorPoint},e.prototype.getCoordinates=function(){return this.path},e.prototype.getFormShowPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCoordinates();if(0===n.length)return null;var r=n[n.length-1];return[r[0]-t,r[1]-e]},e.prototype.setCoordinates=function(t){this.path=t,this._extent=null,this.changed()},e.prototype.getCoordinateIndex=function(t){return this.getCoordinates().findIndex(function(e){return e[0]===t[0]&&e[1]===t[1]})},e.prototype.clone=function(){var t=[];this.getCoordinates().forEach(function(e){t.push([e[0],e[1]])});var n=new e;return n.setCoordinates(t),n},s(e,[{key:"geometryType",get:function(){return l.default.LINE}},{key:"extent",get:function(){var t=this;if(null===t._extent){var e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=t.getCoordinates(),a=!0,s=!1,u=void 0;try{for(var l,f=i[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;e=Math.min(e,h[0]),n=Math.min(n,h[1]),r=Math.max(r,h[0]),o=Math.max(o,h[1])}}catch(t){s=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}t._extent=new c.default(e,n,r,o)}return t._extent}},{key:"path",get:function(){return this._path},set:function(t){this._path=t,this._extent=null}},{key:"length",get:function(){for(var t=this.getCoordinates(),e=0,n=0,r=t.length;n<r-1;n++){var o=t[n],i=t[n+1];e+=(0,h.distance)(o,i)}return e}}]),e}(l.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t,e,n,r,o,i){var a=NaN,u=NaN,f=(n-e)/r;if(1===f)a=t[e],u=t[e+1];else if(2==f)a=(1-o)*t[e]+o*t[e+r],u=(1-o)*t[e+1]+o*t[e+r+1];else if(0!==f){var c=t[e],h=t[e+1],d=0,p=[0],y=void 0;for(y=e+r;y<n;y+=r){var _=t[y],v=t[y+1];d+=Math.sqrt((_-c)*(_-c)+(v-h)*(v-h)),p.push(d),c=_,h=v}var g=o*d,m=(0,s.binarySearch)(p,g);if(m<0){var b=(g-p[-m-2])/(p[-m-1]-p[-m-2]),E=e+(-m-2)*r;a=(0,l.lerp)(t[E],t[E+r],b),u=(0,l.lerp)(t[E+1],t[E+r+1],b)}else a=t[e+m*r],u=t[e+m*r+1]}return i?(i[0]=a,i[1]=u,i):[a,u]}function o(t,e,n,r,o,i,a){var l=void 0,f=void 0,c=void 0,h=void 0,d=void 0,p=void 0,y=void 0,_=o[i+1],v=[],g=n[0];for(h=t[g-r],p=t[g-r+1],l=e;l<g;l+=r)d=t[l],y=t[l+1],(_<=p&&y<=_||p<=_&&_<=y)&&(c=(_-p)/(y-p)*(d-h)+h,v.push(c)),h=d,p=y;var m=NaN,b=-(1/0);for(v.sort(s.numberSafeCompareFunction),h=v[0],l=1,f=v.length;l<f;++l){d=v[l];var E=Math.abs(d-h);E>b&&(c=(h+d)/2,(0,u.linearRingsContainsXY)(t,e,n,r,c,_)&&(m=c,b=E)),h=d}return isNaN(m)&&(m=o[i]),a?(a.push(m,_),a):[m,_]}function i(t,e,n,r,i){var a=[],s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s];a=o(t,e,l,r,i,2*s,a),e=l[l.length-1]}return a}function a(t,e,n,r){var o=[],i=void 0,a=void 0,s=f.ExtentUtil.createEmpty();for(i=0,a=n.length;i<a;++i){var u=n[i];s=f.ExtentUtil.createOrUpdateFromFlatCoordinates(t,e,u[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=u[u.length-1]}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.lineString=r,e.linearRings=o,e.linearRingss=i,e.centerLinearRingss=a;var s=n(28),u=n(11),l=n(29),f=n(2)},function(t,e){"use strict";function n(t,e,n,o,i){var a=void 0,s=void 0;for(a=0,s=n.length;a<s;++a)e=r(t,e,n[a],o,i);return e}function r(t,e,n,r,o){var i=void 0!==o&&o,s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s],f=a(t,e,l,r),c=0===s?i&&f||!i&&!f:i&&!f||!i&&f;c&&(t=t.reverse()),e=l}return e}function o(t,e,n,r,o){var a=void 0,s=void 0;for(a=0,s=n.length;a<s;++a)if(!i(t,e,n[a],r,o))return!1;return!0}function i(t,e,n,r,o){var i=void 0!==o&&o,s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s],f=a(t,e,l,r);if(0===s){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;e=l}return!0}function a(t,e,n,r){for(var o=0,i=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];o+=(s-i)*(u+a),i=s,a=u}return o>0}Object.defineProperty(e,"__esModule",{value:!0}),e.orientLinearRingss=n,e.orientLinearRings=r,e.linearRingssAreOriented=o,e.linearRingsAreOriented=i,e.linearRingIsClockwise=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Config={};n.DEBUG=!0,n.DEFAULT_ZOOM_FACTOR=2,n.DEFAULT_MAX_ZOOM=10,n.DEFAULT_MIN_ZOOM=0,n.MOUSE_WHEEL_ZOOM_MAXDELTA=1,n.DEFAULT_TILE_SIZE=256,e.default={Config:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=function(t){function e(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,e);var s=i(this,t.call(this));return s.color=n,s.style=r,s.alpha=a,s.textStyle=null,s}return a(e,t),e.prototype.clone=function(){},s(e,[{key:"color",get:function(){return this._color},set:function(t){this._color=t}},{key:"style",get:function(){return this._style},set:function(t){this._style=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){return this._alpha=t}},{key:"textStyle",get:function(){return this._textStyle},set:function(t){this._textStyle=t}}]),e}(l.default);e.default=f,t.exports=e.default},function(t,e){"use strict";function n(){return r++}Object.defineProperty(e,"__esModule",{value:!0}),e.getUid=n;var r=0;e.default={getUid:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(14),f=n(55),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleDragEvent:r._handleDragEvent}),r.targetPointers=[],r.lastCentroid=null,r._kinetic=n.kinetic,r.lastCentroid=null,r._lastPointersCount=null,r._condition=n.condition?n.condition:l.noModifierKeys,r._noKinetic=!1,r}return a(e,t),e.prototype._handleDownEvent=function(t){return!!(this.targetPointers.length>0&&this._condition(t))&&(this.lastCentroid=null,this._kinetic&&this._kinetic.begin(),this._noKinetic=this.targetPointers.length>1,!0)},e.prototype._handleDragEvent=function(t){var e=this.targetPointers,n=this.centroid(e);if(e.length===this._lastPointersCount){if(this._kinetic&&this._kinetic.update(n[0],n[1]),this.lastCentroid){var r=this.lastCentroid[0]-n[0],o=this.lastCentroid[1]-n[1],i=t.map,a=i.view,s=a.getViewState(),u=[r,o];f.Coordinate.scale(u,s.resolution),f.Coordinate.rotate(u,s.rotation),f.Coordinate.add(u,s.center),a.center=u}}else this._kinetic&&this._kinetic.begin();this.lastCentroid=n,this._lastPointersCount=e.length},e.prototype.centroid=function(t){for(var e=t.length,n=0,r=0,o=0;o<e;o++)n+=t[o].originalEvent.clientX,r+=t[o].originalEvent.clientY;return[n/e,r/e]},e}(u.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n));return a.feature=r,a}return a(e,t),e}(u.default);e.default=l,l.EventType={DRAW_START:"drawstart",DRAWING:"drawing",DRAW_END:"drawend"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r,a){o(this,e);var s=i(this,t.call(this,n));return s.features=r,s.browserEvent=a,s}return a(e,t),e}(u.default);e.default=l,l.EventType={MODIFY_START:"modifystart",MODIFY_END:"modifyend"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(34),h=n(14),d=n(29),p=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._delta=0,r._useAnchor=void 0===n.useAnchor||n.useAnchor,r._duration=void 0!==n.duration?n.duration:250,r._lastAnchor=null,r._startTime=void 0,r._timeout=void 0!==n.timeout?n.timeout:80,r._timeoutId=void 0,r._mode=void 0,r}return a(e,t),e.prototype.handleMouseEvent=function(t){var e=this;if(!(0,h.mouseWheel)(t))return!0;t.preventDefault();var n=t.map,r=t.originalEvent;this._useAnchor&&(this._lastAnchor=t.coordinate);var o=void 0;if(t.type==f.default.WHEEL?o=r.deltaY:t.type==f.default.MOUSE_WHEEL&&(o=-r.wheelDeltaY),0===o)return!1;var i=Date.now();void 0===this._startTime&&(this._startTime=i),this._delta+=o;var a=Math.max(this._timeout-(i-this._startTime),0);return clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){return e._handleWheelZoom(n)},a),!1},e.prototype._handleWheelZoom=function(t){var e=t.view,n=c.Config.MOUSE_WHEEL_ZOOM_MAXDELTA,r=(0,d.clamp)(this._delta,-n,n);this.zoomByDelta(e,-r,this._lastAnchor,this._duration),this._mode=void 0,this._delta=0,this._lastAnchor=null,this._startTime=void 0,this._timeoutId=void 0},e}(u.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r,a){o(this,e);var s=i(this,t.call(this,n));return s.selectedFeatures=r,s.browserEvent=a,s}return a(e,t),e}(u.default);e.default=l,l.EventType={SELECT:"select"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(20),u=r(s),l=n(5),f=r(l),c=n(4),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=void 0!==n.className?n.className:"dt-zoom",a=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",u=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"放大",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"缩小",d=document.createElement("button");d.className=r+"-in",d.setAttribute("type","button"),d.title=l,d.appendChild("string"==typeof s?document.createTextNode(s):s);var p=document.createElement("button");p.className=r+"-out",p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u);var y=r+" dt-unselectable dt-control",_=document.createElement("div");_.className=y,_.appendChild(d),_.appendChild(p);var v=i(this,t.call(this,{element:_,target:n.target}));return v._delta=a,(0,c.listen)(d,f.default.CLICK,v._handleClick,v),(0,c.listen)(p,f.default.CLICK,v._handleClickIn,v),v}return a(e,t),e.prototype._handleClickIn=function(t){t.preventDefault(),this._zoomByDelta(-this._delta)},e.prototype._handleClick=function(t){t.preventDefault(),this._zoomByDelta(this._delta)},e.prototype._zoomByDelta=function(t){var e=this.map,n=e.view;if(n){var r=n.resolution;if(r){var o=n.constrainResolution(r,t);n.resolution=o}}},e}(u.default);e.default=h,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){n(this,t),this._pendingRemovals={},this._listeners={},this._dispatching={},this.nullFunction=function(){}}return t.prototype.getListeners=function(t){return this._listeners[t]},t.prototype.hasListener=function(t){return t?Reflect.has(this._listeners,t):Object.keys(this._listeners).length>0},t.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);Reflect.has(this._pendingRemovals,t)?(n[r]=this.nullFunction,++this._pendingRemovals[t]):(n.splice(r,1),0===n.length&&Reflect.deleteProperty(this._listeners,t))}},t.prototype.addEventListener=function(t,e){var n=this._listeners[t];n||(n=this._listeners[t]=[]),n.indexOf(e)===-1&&n.push(e)},t.prototype.dispatchEvent=function(t){var e="string"==typeof t?{type:t}:t,n=e.type;e.target=this;var r=this._listeners[n],o=void 0;if(r){Reflect.has(this._dispatching,n)||(this._dispatching[n]=0,this._pendingRemovals[n]=0),++this._dispatching[n];for(var i=0,a=r.length;i<a;++i)if(r[i].call(this,e)===!1||e.propagationStopped){o=!1;break}if(--this._dispatching[n],0===this._dispatching[n]){var s=this._pendingRemovals[n];for(Reflect.deleteProperty(this._pendingRemovals,n);s--;)this.removeEventListener(n,this.nullFunction);Reflect.deleteProperty(this._dispatching,n)}return o}},t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(4),c=n(6),h=function(t){function e(n){o(this,e);var r=i(this,t.call(this)),a=Object.assign({},n);return r.name=a.name||"",r.visible=!0,r.datasource=[],r.opacity=void 0!==a.opacity?n.opacity:1,r.dataExtent=null,r.maxResolution=0,r.minResolution=0,r.zIndex=a.zIndex||0,r._mapRenderKey=null,r}return a(e,t),e.prototype.loadFeature=function(){return this.features},s(e,[{key:"map",get:function(){return this._map},set:function(t){this._mapRenderKey&&((0,f.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),t&&(this._map=t,this._mapRenderKey=(0,f.listen)(this,c.EventType.CHANGE,t.render,t),this.changed())}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this.changed())}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity=t}},{key:"minResolution",get:function(){return this._minResolution},set:function(t){this._minResolution=t}},{key:"maxResolution",get:function(){return this._maxResolution},set:function(t){this._maxResolution=t}},{key:"dataExtent",get:function(){},set:function(t){this._dataExtent=t}},{key:"datasouce",get:function(){return this._datasource}},{key:"datasource",set:function(t){this._datasource=t}},{key:"zIndex",get:function(){return this._zIndex},set:function(t){this._zIndex!==t&&(this._zIndex=t)}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n));return a.image=r,a}return a(e,t),e}(u.default);e.default=l,l.Type={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(68),l=r(u),f=n(24),c=n(15),h=r(c),d=n(2),p=n(6),y=n(4),_=n(36),v=function(t){function e(n,r,a,s,u,l,c){o(this,e);var h=i(this,t.call(this,n,r,a,f.ImageState.IDLE,s));return h._src=u,h.domImage=new Image,null!==l&&(h.getDomImage().crossOrigin=l),h._imageByContext={},h._imageListenerKeys=null,h.state=f.ImageState.IDLE,h._imageLoadFunction=c,h}return a(e,t),e.prototype.getDomImage=function(t){if(void 0!==t){var e=void 0,n=(0,_.getUid)(t);return n in this._imageByContext?this._imageByContext[n]:(e=h.default.isEmpty(this._imageByContext)?this._domImage:this._domImage.cloneNode(!1),this._imageByContext[n]=e,e)}return this._domImage},e.prototype._handleImageError=function(){this.state=f.ImageState.ERROR,this._unlistenImage(),this.changed()},e.prototype._handleImageLoad=function(){void 0===this.resolution&&(this.resolution=d.ExtentUtil.getHeight(this.extent)/this.getDomImage().height),this.state=f.ImageState.LOADED,this._unlistenImage(),this.changed()},e.prototype.load=function(){this.state!==f.ImageState.IDLE&&this.state!==f.ImageState.ERROR||(this.state=f.ImageState.LOADING,this.changed(),this._imageListenerKeys=[(0,y.listenOnce)(this.getDomImage(),p.EventType.ERROR,this._handleImageError,this),(0,y.listenOnce)(this.getDomImage(),p.EventType.LOAD,this._handleImageLoad,this)],this._imageLoadFunction(this,this._src))},e.prototype._unlistenImage=function(){this._imageListenerKeys.forEach(y.unlistenByKey),this._imageListenerKeys=null},s(e,[{key:"domImage",set:function(t){this._domImage=t}}]),e}(l.default);e.default=v,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(44),l=r(u),f=n(46),c=r(f),h=n(4),d=n(18),p=n(45),y=r(p),_=n(6),v=n(24),g=n(2),m=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this,n)),a=n.imageExtent;r.dataExtent=a;var s=void 0!==n.crossOrigin?n.crossOrigin:null,u=void 0!==n.imageLoadFunction?n.imageLoadFunction:r.defaultImageLoadFunction;return r.attributions=n.attributions,r._singleImage=new c.default(a,void 0,1,r.attributions,n.url,s,u),r._imageSize=n.imageSize?n.imageSize:null,(0,h.listen)(r.singleImage,_.EventType.CHANGE,r.handleImageChange,r),r.zIndex=0,r}return a(e,t),e.prototype.defaultImageLoadFunction=function(t,e){t.getDomImage().src=e},e.prototype.getImageInternal=function(t){return g.ExtentUtil.intersects(t,this.singleImage.extent)?this.singleImage:null},e.prototype.handleImageChange=function(t){if(this.singleImage.state===v.ImageState.LOADED){var e=this.singleImage.extent,n=this.singleImage.getDomImage(),r=void 0,o=void 0;this._imageSize?(r=this._imageSize[0],o=this._imageSize[1]):(r=n.width,o=n.height);var i=g.ExtentUtil.getHeight(e)/o,a=Math.ceil(g.ExtentUtil.getWidth(e)/i);if(a!==r){var s=(0,d.createCanvasContext2D)(a,o),u=s.canvas;s.drawImage(n,0,0,r,o,0,0,u.width,u.height),this.singleImage.domImage=u}}this._dispatchImageEvent(t)},e.prototype._dispatchImageEvent=function(t){var e=t.target;switch(e.state){case v.ImageState.LOADING:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADSTART,e));break;case v.ImageState.LOADED:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADEND,e));break;case v.ImageState.ERROR:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADERROR,e))}},s(e,[{key:"imageSrc",set:function(t){this._singleImage._src=t,this._singleImage.domImage=new Image,this._singleImage.state=v.ImageState.IDLE}},{key:"singleImage",get:function(){return this._singleImage}},{key:"attributions",set:function(t){this._attributes=t},get:function(){return this._attributes||null}}]),e}(l.default);e.default=m,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n));return a.feature=r,a}return a(e,t),e}(u.default);e.default=l,l.EventType={ADD_FEATURE:"addfeature",REMOVE_FEATURE:"removefeature",CLEAR:"clear",FEATURE_COLLECTION_CHANGED:"featurecollectionchanged"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(2),c=n(34),h=n(28),d=n(29),p=function(t){function e(n){o(this,e);var r=i(this,t.call(this)),a=Object.assign({},n);return r._applyOptions(a),r}return a(e,t),e.prototype._applyOptions=function(t){var e=this._createResolutionConstraint(t);this._maxResolution=e.maxResolution,this._minResolution=e.minResolution,this._zoomFactor=e.zoomFactor,this._resolutions=t.resolutions,this._minZoom=e.minZoom;var n=this._createCenterConstraint(t),r=e.constraint,o=this._createRotationConstraint(t);this._constraints={center:n,resolution:r,rotation:o},this.center=void 0!==t.center?t.center:this._calculateCenter(),this.resolution=void 0!==t.resolution?t.resolution:this.constrainResolution(this._maxResolution,t.zoom-this._minZoom),this._originalCenter=this.center,this._originalResolution=this.resolution,this.rotation=0,this.dataExtent=e.extent,this._options=t},e.prototype._createRotationConstraint=function(){return 0},e.prototype._createCenterConstraint=function(){return function(t){return t}},e.prototype._createResolutionConstraint=function(t){var e=void 0,n=void 0,r=void 0,o=void 0,i=c.Config.DEFAULT_MAX_ZOOM,a=c.Config.DEFAULT_ZOOM_FACTOR,s=c.Config.DEFAULT_MIN_ZOOM,u=c.Config.DEFAULT_TILE_SIZE,l=void 0!==t.minZoom?t.minZoom:s,h=void 0!==t.maxZoom?t.maxZoom:i,d=void 0!==t.zoomFactor?t.zoomFactor:a,p=t.projection;if(o=p.extent,void 0!==t.resolutions){var y=t.resolutions;n=y[0],r=y[y.length-1],e=this.createSnapToResolutions(y)}else{var _=Math.max(f.ExtentUtil.getWidth(o),f.ExtentUtil.getHeight(o)),v=_/u/Math.pow(a,s),g=v/Math.pow(a,i-s);n=t.maxResolution,void 0!==n?l=0:n=v/Math.pow(d,l),r=t.minResolution,void 0===r&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(d,h):v/Math.pow(d,h):g),h=l+Math.floor(Math.log(n/r)/Math.log(d)),r=n/Math.pow(d,h-l),e=this.createSnapToPower(d,n,h-l)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:l,zoomFactor:d,extent:o}},e.prototype.createSnapToPower=function(t,e,n){return function(r,o,i){if(void 0!==r){var a=-i/2+.5,s=Math.floor(Math.log(e/r)/Math.log(t)+a),u=Math.max(s+o,0);void 0!==n&&(u=Math.min(u,n));var l=e/Math.pow(t,u);return l}}},e.prototype.createSnapToResolutions=function(t){return function(e,n,r){if(void 0!==e){var o=(0,h.linearFindNearest)(t,e,r);o=(0,d.clamp)(o+n,0,t.length-1);var i=Math.floor(o);if(o!=i&&i<t.length-1){var a=t[i]/t[i+1];return t[i]/Math.pow(a,o-i)}return t[i]}}},e.prototype._calculateCenter=function(){return[500,500]},e.prototype.getViewState=function(){var t=this.center,e=this.resolution,n=this.rotation;return{center:t.slice(),resolution:e,rotation:n}},e.prototype.constrainResolution=function(t,e,n){var r=e||0,o=n||0;return this._constraints.resolution(t,r,o)},e.prototype.calculateCenterZoom=function(t,e){var n=void 0,r=this.center,o=this.resolution;if(void 0!==r&&void 0!==o){var i=e[0]-t*(e[0]-r[0])/o,a=e[1]-t*(e[1]-r[1])/o;n=[i,a]}return n},e.prototype.constrainCenter=function(t){return this._constraints.center=t,this._center=t,!0},s(e,[{key:"center",get:function(){return this._center},set:function(t){this.constrainCenter(t),this.changed()}},{key:"resolution",get:function(){return this._resolution},set:function(t){this._resolution=t,this.changed()}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"dataExtent",get:function(){return this._dataExtent},set:function(t){this._dataExtent=t}},{key:"minResolution",get:function(){return this._minResolution}},{key:"maxResolution",get:function(){return this._maxResolution}},{key:"originalCenter",get:function(){return this._originalCenter}},{key:"originalResolution",get:function(){return this._originalResolution}}]),e}(l.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{
constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(7),c=n(2),h=n(24),d=n(6),p=n(54),y=n(4),_=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this));return a._context=r,a._layer=n,a.renderedResolution=void 0,a._transform=c.ExtentUtil.createEmpty(),a}return a(e,t),e.prototype.getTransform=function(t,e){var n=t.viewState,r=1,o=r*t.size[0]/2,i=r*t.size[1]/2,a=r/n.resolution,s=a,u=-n.rotation,l=-n.center[0]+e,c=-n.center[1];return f.Transform.compose(this._transform,o,i,a,s,u,l,c)},e.prototype.loadImage=function(t){var e=t.state;return e!==h.ImageState.LOADED&&e!==h.ImageState.ERROR&&(0,y.listen)(t,d.EventType.CHANGE,this._handleImageChange,this),e===h.ImageState.IDLE&&(t.load(),e=t.state),e===h.ImageState.LOADED},e.prototype._handleImageChange=function(t){var e=t.target;e.state===h.ImageState.LOADED&&this.renderIfReadyAndVisible()},e.prototype.renderIfReadyAndVisible=function(){var t=this.layer;t.visible&&t.changed()},e.prototype.clip=function(t,e,n){var r=e.pixelRatio,o=e.size[0]*r,i=e.size[1]*r,a=e.viewState.rotation,s=c.ExtentUtil.getTopLeft(n),u=c.ExtentUtil.getTopRight(n),l=c.ExtentUtil.getBottomRight(n),h=c.ExtentUtil.getBottomLeft(n);f.Transform.apply(e.toPixelTransform,s),f.Transform.apply(e.toPixelTransform,u),f.Transform.apply(e.toPixelTransform,l),f.Transform.apply(e.toPixelTransform,h),t.save(),p.Canvas.rotateAtOffset(t,-a,o/2,i/2),t.beginPath(),t.moveTo(s[0]*r,s[1]*r),t.lineTo(u[0]*r,u[1]*r),t.lineTo(l[0]*r,l[1]*r),t.lineTo(h[0]*r,h[1]*r),t.clip(),p.Canvas.rotateAtOffset(t,a,o/2,i/2)},e.prototype.prepareFrame=function(t){},e.prototype.composeFrame=function(t,e){},e.prototype.postCompose=function(t,e,n){},e.prototype.preCompose=function(t,e,n){},s(e,[{key:"layer",get:function(){return this._layer}},{key:"context",get:function(){return this._context}}]),e}(l.default);e.default=_,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.RenderEventType={};n.PRERENDER="prerender",n.POSTRENDER="postrender",n.RENDER="render"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(35),l=r(u),f=n(27),c=r(f),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[255,255,255],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.SOLID;o(this,e);var u=i(this,t.call(this,n,s,a));return u._borderStyle=r,u.textStyle=new c.default,u}return a(e,t),e.prototype.clone=function(){var t=new e(this.color,this.borderStyle.clone(),this.alpha,this.style);return this.textStyle&&(t.textStyle=this.textStyle),t},s(e,[{key:"borderStyle",get:function(){return this._borderStyle},set:function(t){return this._borderStyle=t}}]),e}(l.default);e.default=h,h.SOLID="solid",t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(35),l=r(u),f=n(27),c=r(f),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:e.CIRCLE;o(this,e);var d=i(this,t.call(this,r,h,a));return d._size=n,d._xoffset=u,d._yoffset=l,d._angle=f,d._borderStyle=s,d.textStyle=new c.default,d}return a(e,t),e.prototype.clone=function(){var t=new e(this.size,this.color,this.alpha,this.borderStyle.clone(),this.xoffset,this.yoffset,this.angle,this.style);return this.textStyle&&(t.textStyle=this.textStyle),t},s(e,[{key:"size",get:function(){return this._size},set:function(t){this._size=t}},{key:"xoffset",get:function(){return this._xoffset},set:function(t){this._xoffset=t}},{key:"yoffset",get:function(){return this._yoffset},set:function(t){this._yoffset=t}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}},{key:"borderStyle",get:function(){return this._borderStyle},set:function(t){this._borderStyle=t}}]),e}(l.default);e.default=h,h.CIRCLE="circle",h.SQUARE="square",h.CROSS="cross",h.X="x",h.TRIANGLE="triangle",t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Canvas={};n.rotateAtOffset=function(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))},e.default={Canvas:n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Coordinate={};n.add=function(t,e){return t[0]+=e[0],t[1]+=e[1],t},n.rotate=function(t,e){var n=Math.cos(e),r=Math.sin(e),o=t[0]*n-t[1]*r,i=t[1]*n+t[0]*r;return t[0]=o,t[1]=i,t},n.scale=function(t,e){return t[0]*=e,t[1]*=e,t},e.default={Coordinate:n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.functions={};n.TURE=function(){return!0},n.FALSE=function(){return!1},e.default={functions:n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Set,n=new a.default(-.005,.05,100),r=void 0===t.dragPan||t.dragPan;r&&e.add(new u.default({kinetic:n}));var o=void 0===t.mouseWheelZoom||t.mouseWheelZoom;o&&e.add(new f.default({constrainResolution:t.constrainResolution,duration:t.zoomDuration}));var i=void 0===t.keyboard||t.keyborad;return i&&(e.add(new h.default(t)),e.add(new _.default(t)),e.add(new p.default({delta:t.zoomDelta}))),e}Object.defineProperty(e,"__esModule",{value:!0}),e.componentsDefaults=o;var i=n(62),a=r(i),s=n(37),u=r(s),l=n(40),f=r(l),c=n(59),h=r(c),d=n(61),p=r(d),y=n(60),_=r(y);e.default={componentsDefaults:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=r(u),f=n(17),c=n(13),h=r(c),d=n(25),p=r(d),y=n(1),_=r(y),v=n(23),g=r(v),m=n(31),b=r(m),E=n(10),w=r(E),x=n(21),O=r(x),T=n(9),P=r(T),C=n(2),M=n(11),I=n(4),L=n(5),S=r(L),R=n(38),N=r(R),k=n(22),D=r(k),j=n(56),F=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleMouseEvent:r.handleMouseEvent,handleUpEvent:r._handleUpEvent}),r._mapRenderKey=null,r._drawLayer=n.drawLayer?n.drawLayer:null,r._downPointPx=null,r._finishCoordinate=null,r.drawMode=e.getDrawMode(n.type),r._sketchCoords=null,r._sketchLine=null,r._finishCondition=n.finishCondition?n.finishCondition:j.functions.TURE,r._hasFinishConditionOptions=!!n.finishCondition,r._undoCondition=void 0!==n.undoCondition?n.undoCondition:j.functions.TURE,r._hasUndoConditionOptions=!!n.undoCondition,r._undoStep=n.freehandUndoStep?n.freehandUndoStep:2,(n.undoCondition||n.finishCondition)&&(0,I.listen)(document,"keyup",r._handleKeyboardEvent,r),r._sketchLayer=new h.default({name:"sketch layer for draw component"}),r._sketchLayer.style=r.getDefaultStyleFunction(),r._sketchPoint=null,r._enableSketchPoint=!!n.enableSketchPoint&&n.enableSketchPoint,r._sketchFeature=null,r._geometryFunction=null,r._sketchLineCoords=null,r._freehand=!!n.freehand&&n.freehand,r._snapTolerance=n.snapTolerance?n.snapTolerance:2,r._maxLinePoints=n.maxLinePoints?n.maxLinePoints:1/0,r._maxPolygonPoints=n.maxPolygonPoints?n.maxPolygonPoints:1/0,r._minPoints=n.minPoints?n.minPoints:r.drawMode===e.DrawMode.POLYGON?3:2,r._condition=n.condition?n.condition:j.functions.TURE,r._shouldHandle=!1,r._squaredClickTolerance=n.clickUpTolerance?n.clickUpTolerance*n.clickUpTolerance:36,r}return a(e,t),e.prototype._finishCheck=function(){if(this.drawMode===e.DrawMode.POLYGON){if(null===this._sketchFeature)return!1;var t=this._sketchFeature.geometry.getCoordinates();if(t[0].length<4)return!1}if(this.drawMode===e.DrawMode.LINE){if(null===this._sketchFeature)return!1;var n=this._sketchFeature.geometry.getCoordinates();if(n.length<=2)return!1}return!0},e.prototype._handleKeyboardEvent=function(t){this._hasFinishConditionOptions&&this._finishCondition(t)&&this._finishCheck()&&this._finishDrawing(),this._hasUndoConditionOptions&&this._undoCondition(t)&&this.undoDrawing()},e.prototype._existInDrawMode=function(t){if("string"==typeof t&&t.constructor===String){var n=e.DrawMode,r=t.toUpperCase();if(r===e.DrawMode.UNDEFINED.toUpperCase())return!1;for(var o in n)if(r===n[o].toUpperCase())return!0}return!1},e.prototype._geometryFactory=function(){var t=void 0,n=this.drawMode;return n===e.DrawMode.POINT?t=g.default:n===e.DrawMode.LINE?t=b.default:n===e.DrawMode.POLYGON?t=w.default:n===e.DrawMode.EXTENT?t=P.default:n===e.DrawMode.PARALLELOGRAM&&(t=D.default),t},e.prototype._initGeometryFunction=function(){var t=this,n=function(n,r){var o=t.drawMode,i=r;if(i)o===e.DrawMode.POLYGON||o===e.DrawMode.PARALLELOGRAM||o===e.DrawMode.LINE?i.setCoordinates(n):o===e.DrawMode.EXTENT&&i.setCoordinates(C.ExtentUtil.boundingExtent(n));else{var a=t._geometryFactory();i=new a(n[0],n[1])}return i};return n},e.prototype._freehandEnable=function(){var t=this.drawMode;return(t===e.DrawMode.POLYGON||t===e.DrawMode.LINE)&&this._freehand},e.prototype.handleMouseEvent=function(e){var n=e.originalEvent.buttons;if(2===n)return!1;e.coordinate=this.coordinateBeyond(e.coordinate);var r=this._freehandEnable(),o=!0,i=e.type;return r&&i===S.default.MOUSE_DRAG&&null!==this._sketchFeature?this._addToDrawing(e):i===S.default.MOUSE_MOVE?o=this._handleMove(e):i===S.default.DBLCLICK&&(o=!1),t.prototype.handleMouseEvent.call(this,e)&&o},e.prototype._handleMove=function(t){if(this._downPointPx&&(!this._freehand&&this._shouldHandle||this._freehand&&!this._shouldHandle)){var e=this._downPointPx,n=t.pixel,r=e[0]-n[0],o=e[1]-n[1],i=r*r+o*o;this._shouldHandle=this._freehand?i>this._squaredClickTolerance:i<=this._squaredClickTolerance}return this._finishCoordinate?this._modifyDrawing(t):this._updateSketchPoint(t),!0},e.prototype._handleDownEvent=function(t){return this._shouldHandle=!this._freehand,this._freehand?(this._downPointPx=t.pixel,this._finishCoordinate||this._startDrawing(t),!1):!!this._condition(t)&&(this._downPointPx=t.pixel,!0)},e.prototype._handleUpEvent=function(t){if(this.drawMode!==e.DrawMode.UNDEFINED){var n=!0,r=this.drawMode;return this._handleMove(t),this._shouldHandle?this._finishCoordinate?r===e.DrawMode.CIRCLE||(r===e.DrawMode.EXTENT?this._finishDrawing():this._atFinish(t)?this._finishCondition(t)&&this._finishDrawing():this._addToDrawing(t)):(this._startDrawing(t),this.drawMode===e.DrawMode.POINT&&this._finishDrawing()):this._freehand&&!this._finishCondition&&(this._finishCoordinate=null,this._abortDrawing()),n}},e.prototype._startDrawing=function(t){var n=t.coordinate;this._finishCoordinate=n;var r=this.drawMode;r===e.DrawMode.POINT?this._sketchCoords=n.slice():r===e.DrawMode.POLYGON?(this._sketchCoords=[[n.slice(),n.slice()]],this._sketchLineCoords=this._sketchCoords[0]):r===e.DrawMode.PARALLELOGRAM?(this._sketchCoords=[[n.slice(),n.slice()]],this._sketchLineCoords=this._sketchCoords[0]):(this._sketchCoords=[n.slice(),n.slice()],r===e.DrawMode.EXTENT&&(this._sketchLineCoords=this._sketchCoords)),this._sketchLineCoords&&(this._sketchLine=new p.default(new b.default(this._sketchLineCoords)));var o=this.geometryFunction(this._sketchCoords);this._sketchFeature=new p.default,this._sketchFeature.geometry=o,this._updateSketchFeatures(),this.dispatchEvent(new N.default(N.default.EventType.DRAW_START,this._sketchFeature))},e.prototype._modifyDrawing=function(t){var n=t.coordinate,r=this._sketchFeature.geometry,o=null,i=null,a=this.drawMode;if(a===e.DrawMode.POINT)i=this._sketchCoords,i[0]=n[0],i[1]=n[1];else if(a===e.DrawMode.POLYGON)o=this._sketchCoords[0],i=o[o.length-1],this._atFinish(t)&&(n=this._finishCoordinate.slice()),i[0]=n[0],i[1]=n[1];else if(a===e.DrawMode.PARALLELOGRAM){o=this._sketchCoords[0],i=o[o.length-1],o.length>3?(o=o.slice(0,2),o.push(n)):(i[0]=n[0],i[1]=n[1]);var s=o[o.length-2];if(s[0]!==i[0]&&s[1]!==i[1]&&3===o.length){var u=D.default.getTheLastPoint(o);o.push(u,o[0]),this._sketchCoords=[o],this._sketchLineCoords=o}}else o=this._sketchCoords,i=o[o.length-1],i[0]=n[0],i[1]=n[1];if(this._freehand){var l=this._sketchCoords[0];if(l.length>2){var f=l[l.length-1],c=l[l.length-2];f[0]===c[0]&&f[1]===c[1]&&l.pop()}}if(this.geometryFunction(this._sketchCoords,r),this._sketchPoint){var h=this._sketchPoint.geometry;h.update(n[0],n[1])}var d=void 0;if(a===e.DrawMode.EXTENT){this._sketchLine||(this._sketchLine=new p.default(new b.default(null)));var y=r.getCoordinates();d=this._sketchLine.geometry,d.path=y}else this._sketchLineCoords&&(d=this._sketchLine.geometry,d.path=this._sketchLineCoords);this._updateSketchFeatures(),this.dispatchEvent(new N.default(N.default.EventType.DRAWING,this._sketchFeature))},e.prototype._addToDrawing=function(t){var n=t.coordinate,r=this._sketchFeature.geometry,o=void 0,i=void 0,a=this.drawMode;if(a===e.DrawMode.LINE){if(this._finishCoordinate=n.slice(),o=this._sketchCoords,o.length>this._maxLinePoints&&(this._freehand?o.pop():i=!0),this._freehand&&o.length>1){var s=o[o.length-1];s[0]===n[0]&&s[1]===n[1]&&o.pop()}o.push(n.slice()),this.geometryFunction(o,r)}else a===e.DrawMode.POLYGON?(o=this._sketchCoords[0],o.length>this._maxPolygonPoints&&(this._freehand?o.pop():i=!0),o.push(n.slice()),i&&(this._finishCoordinate=o[0]),this.geometryFunction(this._sketchCoords,r)):a===e.DrawMode.PARALLELOGRAM&&(o=this._sketchCoords[0],o.push(n.slice()),i=o.length>this._maxPolygonPoints,i&&(this._finishCoordinate=o[0]),this.geometryFunction(this._sketchCoords,r));this._updateSketchFeatures(),i&&this._finishDrawing()},e.prototype._abortDrawing=function(){this._finishCoordinate=null;var t=this._sketchFeature;return t&&(this._sketchFeature=null,this._sketchPoint=null,this._sketchLine=null,this._sketchLayer.clear()),t},e.prototype.finishDrawing=function(){this._finishCheck()&&this._finishDrawing()},e.prototype._finishDrawing=function(){if(null===this._sketchFeature)return void this.dispatchEvent(new N.default(N.default.EventType.DRAW_END));var t=this._abortDrawing(),n=this._sketchCoords,r=t.geometry,o=this.drawMode;o===e.DrawMode.LINE?(n.pop(),this.geometryFunction(n,r)):o===e.DrawMode.POLYGON&&(n[0].pop(),n[0].push(n[0][0]),this.geometryFunction(n,r)),o===_.default.MULTI_POINT||o===_.default.MULTI_LINE||o===_.default.MULTI_POLYGON&&(t.geometry=new O.default([n])),this._freehand&&(0,M.simplify)(t.geometry),this._drawLayer&&(t.style=void 0,this._drawLayer.addFeatures([t])),this.dispatchEvent(new N.default(N.default.EventType.DRAW_END,t))},e.prototype._atFinish=function(t){var n=!1;if(this._sketchFeature){if(this._freehand&&this._finishCondition)return!1;var r=!1,o=[this._finishCoordinate],i=this.drawMode;if(i===e.DrawMode.LINE?r=this._sketchCoords.length>this._minPoints:i===e.DrawMode.POLYGON?(r=this._sketchCoords[0].length>this._minPoints,o=[this._sketchCoords[0][0],this._sketchCoords[0][this._sketchCoords[0].length-2]]):i===e.DrawMode.PARALLELOGRAM&&(n=5===this._sketchCoords[0].length),r)for(var a=this.map,s=0,u=o.length;s<u;s++){var l=o[s],f=a.getPixelFromCoordinate(l),c=t.pixel,h=c[0]-f[0],d=c[1]-f[1],p=this._freehand,y=p?1:this._snapTolerance;if(n=Math.sqrt(h*h+d*d)<=y){this._finishCoordinate=l;break}}}return n},e.prototype._updateSketchPoint=function(t){var e=t.coordinate;if(this._enableSketchPoint)if(null===this._sketchPoint){var n=new g.default(e[0],e[1]);this._sketchPoint=new p.default(n),this._updateSketchFeatures()}else{var r=this._sketchPoint.geometry;r.setCoordinates(e)}},e.prototype._autoPan=function(t){var e=t.pixel,n=this.map.size,r=e[0],o=e[1];r<=2||o<=2||r>=n[0]-5||o>=n[1]-5},e.prototype._updateSketchFeatures=function(){var t=[];this._sketchFeature&&t.push(this._sketchFeature),this._sketchLine&&t.push(this._sketchLine),this._sketchPoint&&t.push(this._sketchPoint),this._sketchLayer.clear(),this._sketchLayer.addFeatures(t)},e.prototype.undoDrawing=function(){var t=this.drawMode,n=1,r=2;if(this._freehand&&(n=this._undoStep,r=3),t===e.DrawMode.LINE){if(this._sketchFeature){var o=this._sketchFeature.geometry.getCoordinates();o.length+n>2?(o.splice(o.length-2,n),1===o.length?(this._abortDrawing(),this._finishDrawing()):this._sketchFeature.changed()):(this._abortDrawing(),this._finishDrawing())}}else if(t===e.DrawMode.POLYGON&&this._sketchFeature){var i=this._sketchFeature.geometry.getCoordinates()[0];i.length+n>r?(i.splice(i.length-r,n),1===i.length?(this._abortDrawing(),this._finishDrawing()):this._sketchFeature.changed()):(this._abortDrawing(),this._finishDrawing())}},e.prototype._updateState=function(){var t=this.map,e=this.active;t&&e||this._abortDrawing(),this._sketchLayer.map=t},e.prototype.getDefaultStyleFunction=function(){var t=f.Style.createDefaultEditing();return function(e){return t[e.geometry.geometryType]}},e.prototype.shouldStopEvent=function(){return!!this._freehand},s(e,[{key:"geometryFunction",get:function(){return this._geometryFunction||(this._geometryFunction=this._initGeometryFunction()),this._geometryFunction}},{key:"drawMode",get:function(){return this._drawMode},set:function(t){var n=this._existInDrawMode(t);this.active=!!n,this._drawMode=n?t:e.DrawMode.UNDEFINED,this._sketchLineCoords=null,this._abortDrawing(),this._minPoints=this._drawMode===e.DrawMode.POLYGON?3:2}},{key:"map",get:function(){return this._map},set:function(t){this._mapRenderKey&&((0,I.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),t&&(this._map=t,t.addLayer(this._sketchLayer)),this._updateState()}},{key:"drawLayer",get:function(){return this._drawLayer}},{key:"freehand",get:function(){return this._freehand},set:function(t){this._freehand=t}},{key:"active",get:function(){return this._active},set:function(t){this._active=t,this._active===!1&&(this._sketchLayer&&this._sketchLayer.clear(),this._sketchPoint=null)}}]),e}(l.default);e.default=F,F.getDrawMode=function(t){var e=F.DrawMode.UNDEFINED;switch(t){case _.default.POINT:case _.default.MULTI_POINT:e=F.DrawMode.POINT;break;case _.default.LINE:case _.default.MULTI_LINE:e=F.DrawMode.LINE;break;case _.default.POLYGON:case _.default.MULTI_POLYGON:e=F.DrawMode.POLYGON;break;case _.default.EXTENT:e=F.DrawMode.EXTENT;break;case _.default.PARALLELOGRAM:e=F.DrawMode.PARALLELOGRAM}return e},F.DrawMode={POINT:"Point",LINE:"Line",POLYGON:"Polygon",CIRCLE:"Circle",EXTENT:"Extent",PARALLELOGRAM:"Parallelogram",UNDEFINED:"undefined"},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(14),f=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._defaultCondition=function(t){var e=t.originalEvent.keyCode;return(0,l.noModifierKeys)(t)&&(0,l.targetNotEditable)(t)&&36===e},r._condition=n.condition?n.condition:r._defaultCondition,r}return a(e,t),e.prototype.handleMouseEvent=function(t){var e=!1;return this._condition(t)&&this._goToHome(),!e},e.prototype._goToHome=function(){var t=this.map.view;if(t){var e=t.originalCenter,n=t.originalResolution;t.center=e,t.resolution=n}},e}(u.default);e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(14),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._defaultCondition=function(t){var e=t.originalEvent.keyCode;return(0,c.noModifierKeys)(t)&&(0,c.targetNotEditable)(t)&&(40===e||37===e||39===e||38===e)},r._condition=void 0!==n.condition?n.condition:r._defaultCondition,r._duration=void 0!==n.duration?n.duration:100,r._pixelDelta=void 0!==n.pixelDelta?n.pixelDelta:128,r}return a(e,t),e.prototype.handleMouseEvent=function(e){var n=!1;if(e.type===f.default.KEYDOWN){var r=e.originalEvent,o=r.keyCode;if(this._condition(e)){var i=e.map,a=i.view,s=a.resolution*this._pixelDelta,u=0,l=0;40===o?l=s:37===o?u=-s:39===o?u=s:l=-s;var c=[u,l];t.prototype.pan.call(this,a,c,null),e.preventDefault(),n=!0}}return!n},e}(u.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(14),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._condition=n.condition?n.condition:c.targetNotEditable,r._delta=n.delta?n.delta:1,r}return a(e,t),e.prototype.handleMouseEvent=function(e){var n=!1;if(e.type==f.default.KEYDOWN||e.type==f.default.KEYPRESS){var r=e.originalEvent,o=r.charCode;if(this._condition(e)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=e.map,a=o=="+".charCodeAt(0)?this._delta:-this._delta,s=i.view;t.prototype.zoomByDelta.call(this,s,a,void 0,null),e.preventDefault(),n=!0}}return!n},e}(u.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),u=r(s),l=function(t){function e(n,r,a){o(this,e);var s=i(this,t.call(this));return s._decay=n,s._minVelocity=r,s._delay=a,s._points=[],s._angle=0,s._initialVelocity=0,s}return a(e,t),e.prototype.begin=function(){this._points.length=0,this._angle=0,this._initialVelocity=0},e.prototype.update=function(t,e){this._points.push(t,e,Date.now())},e.prototype.end=function(){if(this._points.length<6)return!1;var t=Date.now()-this._delay,e=this._points.length-3;if(this._points[e+2]<t)return!1;for(var n=e-3;n>0&&this._points[n+2]>t;)n-=3;var r=this._points[e+2]-this._points[n+2],o=this._points[e]-this._points[n],i=this._points[e+1]-this._points[n+1];return this._angle=Math.atan2(i,o),this._initialVelocity=Math.sqrt(o*o+i*i)/r,this._initialVelocity>this._minVelocity},e.prototype.getDistance=function(){return(this._minVelocity-this._initialVelocity)/this._decay},e.prototype.angle=function(){return this._angle},e}(u.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=r(u),f=n(5),c=r(f),h=n(1),d=r(h),p=n(23),y=r(p),_=n(22),v=r(_),g=n(4),m=n(6),b=n(39),E=r(b),w=n(25),x=r(w),O=n(13),T=r(O),P=n(17),C=n(2),M=n(11),I=n(14),L=n(56),S=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this,n));r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleDragEvent:r._handleDragEvent,handleUpEvent:r._handleUpEvent}),r._features=[],r._pixelTolerance=n.pixelTolerance?n.pixelTolerance:10,r._movableGeometrys=n.movableGeometrys?n.movableGeometrys:["extent"],r._hasMoveableGeometrys=!0;var a=r._movableGeometrys;return null!==a&&void 0!==a||(r._hasMoveableGeometrys=!1),Array.isArray(a)&&0===a.length&&(r._hasMoveableGeometrys=!1),r.movableGeometrySet,r._hasMoveableGeometrys&&(r.movableGeometrySet=new Set(r._movableGeometrys)),r._deleteCondition=n.deleteCondition?n.deleteCondition:r._defaultDeleteCondition,r._vertexEditableCondition=n.vertexEditableCondition?n.vertexEditableCondition:L.functions.TURE,r._edgeEditableCondition=n.edgeEditableCondition?n.edgeEditableCondition:L.functions.TURE,r._snappedToVertex=!1,r._snapSegments=null,r._vertexFeature=null,r.features=n.features||[],r._lastPixel=[0,0],r._overLayer=new T.default({style:n.style?n.style:r.getDefaultStyleFunction(),zIndex:1e3}),r.active=!0,r._dragSegments=[],r._modified=!1,r._changingFeature=!0,r._ignoreNextSingleClick=!1,r._shouldAddToVertexs=!1,r._insertVertices=[],r._downPoint=null,r._currentMovedGeometry=null,r._oldEditedVertex=null,r}return a(e,t),e.prototype.handleMouseEvent=function(e){if(!(e instanceof c.default))return!0;e.coordinate=this.coordinateBeyond(e.coordinate),this.lastPointerEvent_=e;var n=!1;return e.type!=c.default.MOUSE_MOVE||this.handlingDownUpSequence||this._handlePointerMove(e),this._vertexFeature&&this._deleteCondition(e)&&(n=!(e.type!==c.default.SINGLE_CLICK||!this._ignoreNextSingleClick)||this.removePoint()),e.type==c.default.SINGLE_CLICK&&(this._ignoreNextSingleClick=!1),t.prototype.handleMouseEvent.call(this,e)&&!n},e.prototype.removePoint=function(){if(this._lastPointerEvent&&this._lastPointerEvent.type!=c.default.MOUSE_DRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this._removeVertex(),this.dispatchEvent(new E.default(E.default.EventType.MODIFY_END,this.features,t)),this._modified=!1,!0}return!1},e.prototype._compareIndexes=function(t,e){return t.index-e.index},e.prototype._willModifyFeatures=function(t){this._modified||(this._modified=!0,this.dispatchEvent(new E.default(E.default.EventType.MODIFY_START,this.features,t)))},e.prototype._handleDownEvent=function(t){var e=this;this._downPoint=t.coordinate,this._dragSegments.length=0,this._modified=!1;var n=t.coordinate,r=this._vertexFeature;if(r){var o=[this._snapSegments];return this._shouldAddToVertexs=!0,this._insertVertices=o,!!this._vertexFeature}if(this._hasMoveableGeometrys){var i=this.features.filter(function(t){var r=t.geometry;return e.movableGeometrySet.has(r.geometryType)&&r.containsXY(n[0],n[1])});return i.length>0&&(this._currentMovedGeometry=i[0],!0)}},e.prototype._handlePointerMove=function(t){this._lastPixel=t.pixel,this._handlePointerAtPixel(t.pixel,t.map)},e.prototype._handlePointerAtPixel=function(t,n){var r=this,o=n.getCoordinateFromPixel(t),i=function(t,e){var n=r._pointDistanceToSegment(o,t),i=r._pointDistanceToSegment(o,e);return n-i};if(this._snapSegments=null,0!==this.features.length){var a=this._getInExtent(this.features,o,this._pixelTolerance);if(a.length>0){a.sort(i);var s=a[0],u=s.geometry,l=u.geometryType,f=s.segment,c=this._closestOnSegment(o,s),h=n.getPixelFromCoordinate(c),p=(0,
M.distance)(t,h);if(p<=this._pixelTolerance){this._snapSegments=s;var y=!1;if(l===d.default.CIRCLE&&s.index===e.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this._snappedToVertex=!0;else{if(this._vertexEditableCondition(s)){var _=n.getPixelFromCoordinate(f[0]),v=n.getPixelFromCoordinate(f[1]),g=(0,M.squaredDistance)(h[0],h[1],_[0],_[1]),m=(0,M.squaredDistance)(h[0],h[1],v[0],v[1]);if(p=Math.sqrt(Math.min(g,m)),this._snappedToVertex=p<=this._pixelTolerance,this._snappedToVertex){c=g>m?f[1]:f[0];var b=u.getCoordinateIndex(c);l===d.default.POLYGON||l===d.default.PARALLELOGRAM?(this._snapSegments.index=b.index,this._snapSegments.ringIndex=b.ringIndex):l===d.default.MULTI_POLYGON?(this._snapSegments.index=b.index,this._snapSegments.ringIndex=b.ringIndex,this._snapSegments.polygonIndex=b.polygonIndex):this._snapSegments.index=b,this._snapSegments.isVertex=!0,y=!0}}l===d.default.PARALLELOGRAM&&(this._snapSegments.index=s.index,this._snapSegments.ringIndex=s.ringIndex)}return void(this._edgeEditableCondition(s)||y?this._createOrUpdateVertexFeature(c):this._snapSegments=null)}}this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null)}},e.prototype._handleDragEvent=function(t){this._ignoreNextSingleClick=!1;var n=t.coordinate;if(this._shouldAddToVertexs){for(var r=this._vertexFeature,o=r.geometry.getCoordinates(),i=this._insertVertices,a=i.length-1;a>=0;--a)this._insertVertex(i[a],o);this._shouldAddToVertexs=!1}var s=this._dragSegments,u=s.length;if(0!==u){this._willModifyFeatures(t);for(var l=0;l<u;++l){var f=s[l],c=f[0],h=c.depth,p=c.geometry,y=null,_=c.segment,g=f.index;switch(p.geometryType){case d.default.POINT:y=n,_[0]=_[1]=n;break;case d.default.MULTI_POINT:y=p.getCoordinates(),y[c.index]=n,_[0]=_[1]=n;break;case d.default.LINE:y=p.getCoordinates(),y[c.index]=n;break;case d.default.MULTI_LINE:y=p.getCoordinates(),y[h[0]][c.index+g]=n,_[g]=n;break;case d.default.POLYGON:y=p.getCoordinates(),y[c.ringIndex][c.index]=n,0===c.index&&(y[c.ringIndex][y[c.ringIndex].length-1]=n);break;case d.default.PARALLELOGRAM:y=v.default.updateCoordinatesForModification(p,n,this._oldEditedVertex,f),this._oldEditedVertex=n;break;case d.default.EXTENT:y=C.ExtentUtil.updateExtent(p,n,f);break;case d.default.MULTI_POLYGON:y=p.getCoordinates(),y[c.polygonIndex][c.ringIndex][c.index]=n,0===c.index&&(y[c.polygonIndex][c.ringIndex][y[c.polygonIndex][c.ringIndex].length-1]=n);break;case d.default.CIRCLE:_[0]=_[1]=n,c.index===e.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this._changingFeature=!0,p.setCenter(n),this._changingFeature=!1):(this._changingFeature=!0,p.setRadius((0,M.distance)(p.getCenter(),n)),this._changingFeature=!1)}y&&this._setGeometryCoordinates(p,y)}this._createOrUpdateVertexFeature(n)}else if(this._currentMovedGeometry){var m=this._downPoint,b=n[0]-m[0],w=n[1]-m[1];this._currentMovedGeometry.geometry.move(b,w,{beyond:{xmin:0,ymin:0,xmax:this.map.view.dataExtent[2],ymax:this.map.view.dataExtent[3]}}),this.dispatchEvent(new E.default(E.default.EventType.MODIFY_END,this._currentMovedGeometry.clone(),t)),this.changed(),this._downPoint=n}},e.prototype._handleUpEvent=function(t){var e=null;return this._dragSegments.length>0&&(e=this._dragSegments[0][0].feature.clone()),this._dragSegments.length=0,this._shouldAddToVertexs=!1,this._insertVertices=[],this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._oldEditedVertex=null,this._downPoint=null,this._currentMovedGeometry=null,this._modified&&(this.dispatchEvent(new E.default(E.default.EventType.MODIFY_END,e,t)),this._modified=!1),!1},e.prototype._insertVertex=function(t,e){var n=t.segment,r=t.feature,o=t.geometry,i=t.depth,a=t.isVertex,s=t.index,u=void 0;switch(o.geometryType){case d.default.MULTI_LINE:u=o.getCoordinates(),u[i[0]].splice(s+1,0,e);break;case d.default.POLYGON:u=o.getCoordinates(),a||(u[t.ringIndex].splice(s+1,0,e),s+=1);break;case d.default.MULTI_POLYGON:u=o.getCoordinates(),a||(u[t.polygonIndex][t.ringIndex].splice(s+1,0,e),s+=1);break;case d.default.LINE:u=o.getCoordinates(),a||(u.splice(s+1,0,e),s+=1);break;case d.default.POINT:u=o.getCoordinates(),u=e;break;case d.default.EXTENT:u=o.getCoordinates();break;case d.default.PARALLELOGRAM:break;default:return}this._setGeometryCoordinates(o,u);var l={segment:[n[0],e],feature:r,geometry:o,depth:i,index:s,ringIndex:t.ringIndex,polygonIndex:t.polygonIndex,isVertex:a};this._dragSegments.push([l,1]),this._ignoreNextSingleClick=!0},e.prototype._getInExtent=function(t,e,n){var r=[],o=C.ExtentUtil;return t.forEach(function(t){var i=t.geometry,a=i.extent,s=o.buffer([a.xmin,a.ymin,a.xmax,a.ymax],n);if(o.containsPoint(s,e)){var u=i.geometryType;if(u===d.default.POINT){var l=i.getCoordinates(),f=(0,M.distance)(l,e);f<=n&&r.push({feature:t,geometry:i,segment:[l,l],index:0})}else if(u===d.default.POLYGON||u===d.default.PARALLELOGRAM){var c=i.getCoordinates();c.forEach(function(a,s){for(var u=0,l=a.length-1;u<l;u++){var f=a[u],c=a[u+1],h=o.boundingExtentFromTwoPoints(f,c),d=o.buffer(h,n);if(C.ExtentUtil.containsPoint(d,e)){var p=[f,c];r.push({feature:t,geometry:i,segment:p,index:u,ringIndex:s})}}})}else if(u===d.default.MULTI_POLYGON){var h=i.getCoordinates();h.forEach(function(a,s){a.forEach(function(a,u){for(var l=0,f=a.length-1;l<f;l++){var c=a[l],h=a[l+1],d=o.boundingExtentFromTwoPoints(c,h),p=o.buffer(d,n);if(C.ExtentUtil.containsPoint(p,e)){var y=[c,h];r.push({feature:t,geometry:i,segment:y,polygonIndex:s,index:l,ringIndex:u})}}})})}else if(u===d.default.EXTENT||u===d.default.LINE)for(var p=i.getCoordinates(),y=0,_=p.length-1;y<_;y++){var v=p[y],g=p[y+1],m=o.boundingExtentFromTwoPoints(v,g),b=o.buffer(m,n);if(C.ExtentUtil.containsPoint(b,e)){var E=[v,g];r.push({feature:t,geometry:i,segment:E,index:y})}}}}),r},e.prototype._setGeometryCoordinates=function(t,e){e&&(this._changingFeature=!0,t.setCoordinates(e),this._changingFeature=!1)},e.prototype._pointDistanceToSegment=function(t,n){var r=n.geometry;if(r.geometryType===d.default.CIRCLE){var o=r;if(n.index===e.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var i=(0,M.squaredDistance)(o.getCenter(),t),a=Math.sqrt(i)-o.getRadius();return a*a}}return(0,M.squaredDistanceToSegment)(t,n.segment)},e.prototype._closestOnSegment=function(t,e){return(0,M.closestOnSegment)(t,e.segment)},e.prototype._createOrUpdateVertexFeature=function(t){var e=this._vertexFeature;if(e){var n=e.geometry;n.update(t[0],t[1]),this._overLayer.changed()}else e=new x.default(new y.default(t[0],t[1])),this._vertexFeature=e,this._overLayer.addFeature(e)},e.prototype.getDefaultStyleFunction=function(){var t=P.Style.createDefaultEditing();return function(){return t[d.default.POINT]}},e.prototype._defaultDeleteCondition=function(t){return(0,I.noModifierKeys)(t)&&(0,I.singleClick)(t)},s(e,[{key:"features",get:function(){return this._features},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._features=t,this._snapSegments=null,this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._hasMoveableGeometrys=0!==t.length,this._dragSegments=[],this._snappedToVertex=!1}},{key:"active",get:function(){return this._active},set:function(t){this._vertexFeature&&!t&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._active=t}},{key:"map",get:function(){return this._map},set:function(t){this._mapRenderKey&&((0,g.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),t&&(this._map=t,this._mapRenderKey=(0,g.listen)(this,m.EventType.CHANGE,t.render,t),t.addLayer(this._overLayer))}}]),e}(l.default);e.default=S,S.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,S.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=r(u),f=n(5),c=r(f),h=n(13),d=r(h),p=n(4),y=n(6),_=n(17),v=n(41),g=r(v),m=Symbol("hasmutilselected"),b=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._hitTolerance=n.hitTolerance?n.hitTolerance:6,r._hasSelectedStyle=!1,r._multiSelectMode=!1,r._selectLayer=new d.default,n.style?(r._selectLayer.style=n.style,r._hasSelectedStyle=!0):r._hasSelectedStyle=!1,r._selectFeatures=[],r.selectMode=n.selectMode?n.selectMode:c.default.CLICK,r._selectMultiMode=n.selectMultiMode?n.selectMultiMode:function(){return!0},n.selectMultiMode&&(0,p.listen)(document,"keydown",r._handleCtrlKeyDwon,r),n.selectMultiMode&&(0,p.listen)(document,"keyup",r._handleCtrlKeyUp,r),r}return a(e,t),e.prototype._condition=function(t){return this.selectMode===t.type},e.prototype._keyPress=function(){},e.prototype._handleCtrlKeyDwon=function(t){this._selectMultiMode(t)&&(this._multiSelectMode=!0)},e.prototype._handleCtrlKeyUp=function(t){this._selectMultiMode(t)&&(this._multiSelectMode=!1)},e.prototype.handleMouseEvent=function(t){var e=this;if(!this._condition(t))return!0;var n=t.map,r=t.pixel,o=this._hitTolerance;this._multiSelectMode||this.clear(),n.forEachFeatureAtPiexl(r,function(t){t.length>0&&(e.selectFeatures=t)},o),this.selectFeatures.length>0&&(this._forEachStyle(),this._selectLayer.addFeatures(this.selectFeatures)),this.dispatchEvent(new g.default(g.default.EventType.SELECT,this.selectFeatures,t))},e.prototype.clear=function(){this._selectLayer.clear(),this.selectFeatures.forEach(function(t){t.styleHighLight=!1,t.delete(m)}),this.selectFeatures=[]},e.prototype._isInSelectFeatures=function(t){var e=this.selectFeatures,n=e.find(function(e){return e.id===t.id});return void 0!==n},e.prototype._updateState=function(){var t=this.map;this.active;t.addLayer(this._selectLayer)},e.prototype._watchFeatures=function(){},e.prototype._forEachStyle=function(){if(!this._hasSelectedStyle){var t=this.selectFeatures;t.forEach(function(t){t.get(m)||(t.styleHighLight=!0,t.set(m,!0))})}},e.prototype.getDefaultStyleFunction=function(){var t=_.Style.createDefaultEditing();return function(e){return t[e.geometry.geometryType]}},s(e,[{key:"selectFeatures",get:function(){return this._selectFeatures},set:function(t){var e=this;0===t.length?this._selectFeatures=[]:t.forEach(function(t){e._isInSelectFeatures(t)||e._selectFeatures.push(t)})}},{key:"map",get:function(){return this._map},set:function(t){this._mapRenderKey&&((0,p.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),t&&(this._map=t,this._mapRenderKey=(0,p.listen)(this,y.EventType.CHANGE,t.render,t)),this._updateState()}},{key:"selectMode",get:function(){return this._selectMode},set:function(t){this._selectMode!==t&&(this._selectMode=t,this.clear())}}]),e}(l.default);e.default=b,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=void 0===t.zoom||t.zoom;n&&e.push(new a.default(t.zoomOptions));var r=void 0===t.home||t.home;r&&e.push(new u.default(t.homeOptions));var o=void 0===t.zoomPercentage||t.zoomPercentage;return o&&e.push(new f.default(t.zoomPercentageOptions)),e}Object.defineProperty(e,"__esModule",{value:!0}),e.controlDefaults=o;var i=n(42),a=r(i),s=n(66),u=r(s),l=n(67),f=r(l);e.default={controlDefaults:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(20),u=r(s),l=n(5),f=r(l),c=n(4),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=n.className?n.className:"dt-zoom-extent",a=n.homeLabel?n.homeLabel:"H",s=n.homeLabelTip?n.homeLabelTip:"全图",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof a?document.createTextNode(a):a);var l=r+" dt-unselectable dt-control",h=document.createElement("div");h.className=l,h.appendChild(u);var d=i(this,t.call(this,{element:h,target:n.target}));return(0,c.listen)(u,f.default.CLICK,d._handleClick,d),d}return a(e,t),e.prototype._handleClick=function(t){t.preventDefault(),this._goToHome()},e.prototype._goToHome=function(){var t=this.map.view;if(t){var e=t.originalCenter,n=t.originalResolution;t.center=e,t.resolution=n}},e}(u.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(20),l=r(u),f=n(18),c=n(4),h=n(6),d=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));r._map=void 0;var a=n.className?n.className:"dt-scale-line";return r._innerElement=document.createElement("DIV"),r._innerElement.className=a+"-inner",r._element=document.createElement("DIV"),r._element.className=a+" dt-unselectable",r._element.appendChild(r._innerElement),r}return a(e,t),e.prototype.render=function(){var t=this.map.view,e=(1/t.resolution).toFixed(2),n="&#8195;缩放比"+100*e+"% &#8195;";this._innerElement.innerHTML=n},s(e,[{key:"map",get:function(){return this._map},set:function(t){if(this.map&&(0,f.removeNode)(this._element),this._listenerKeys.forEach(function(t){return(0,c.unlistenByKey)(t)}),this._listenerKeys.length=0,this._map=t,this._map){var e=this._target?this._target:t.overlayContainerStopEvent;e.appendChild(this._element),this._listenerKeys.push((0,c.listen)(t,h.EventType.VIEW_CHANGED,this.render,this)),this.render()}}}]),e}(l.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=function(t){function e(n,r,a,s,u){o(this,e);var l=i(this,t.call(this));return l._attributions=u,l._extent=n,l._pixelRatio=a,l._resolution=r,l._state=s,l}return a(e,t),e.prototype.getDomImage=function(t){return t},e.prototype.load=function(){},s(e,[{key:"attributions",get:function(){return this._attributions}},{key:"extent",get:function(){return this._extent}},{key:"pixelRatio",get:function(){return this._pixelRatio}},{key:"resolution",get:function(){return this._resolution},set:function(t){this._resolution!==t&&(this._resolution=t)}},{key:"state",get:function(){return this._state},set:function(t){this.state!==t&&(this._state=t)}}]),e}(l.default);e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(23),u=r(s),l=n(10),f=r(l),c=n(21),h=r(c),d=n(31),p=r(d),y=n(9),_=r(y),v=n(22),g=r(v),m=n(25),b=r(m),E=n(15),w=r(E),x=function(){function t(){o(this,t)}return t.read=function(t){var e=[];if(t){var n=t.features;return n.forEach(function(t){if("Feature"===t.type&&t.geometry){var n=void 0,r=t.geometry,o=r.type;if("Point"===o?n=u.default:"LineString"===o?n=p.default:"Polygon"===o?n=f.default:"ExtentPolygon"===o?n=_.default:"MutilPolygon"===o?n=h.default:"ParallelogramPolygon"===o&&(n=g.default),void 0===n)throw new Error("包含未定义的 Geometry 类型");var i=r.coordinates,a=new n;a.setCoordinates(i);var s=void 0;t.properties&&(s=t.properties);var l=t.title,c=new b.default(a,s,l);e.push(c)}}),e}},t.write=function(e){var n=[];return e.forEach(function(e){var r=w.default.mapToObject(e._attributesMap);Reflect.deleteProperty(r,"_originStyle"),Reflect.deleteProperty(r,"Symbol(hasmutilselected)"),n.push({type:"Feature",geometry:{type:t.getGeoJSONGeometryType(e.geometry),coordinates:e.geometry.getCoordinates()},properties:r,title:e.displayText})}),{type:"FeatureCollection",features:n}},t.getGeoJSONGeometryType=function(t){var e=t.geometryType,n=void 0;switch(e){case a.default.POINT:n="Point";break;case a.default.LINE:n="LineString";break;case a.default.POLYGON:n="Polygon";break;case a.default.MULTI_POLYGON:n="MutilPolygon";break;case a.default.EXTENT:n="ExtentPolygon";break;case a.default.PARALLELOGRAM:n="ParallelogramPolygon"}return n},t}();e.default=x,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(null===t||void 0===t||null===e||void 0===e)return!1;var n=t.extent,r=e.extent,o=[n.xmin,n.ymin,n.xmax,n.ymax],i=[r.xmin,r.ymin,r.xmax,r.ymax];if(!s.ExtentUtil.intersects(o,i))return!1;var f=t.geometryType,d=!1;switch(f){case a.default.POINT:d=u(t,e);break;case a.default.LINE:d=l(t,e);break;case a.default.POLYGON:case a.default.EXTENT:d=e.geometryType===a.default.MULTI_POLYGON?h(e,t):c(t,e);break;case a.default.MULTI_POLYGON:d=h(t,e)}return d}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(1),a=r(i),s=n(2),u=function(t,e){var n=e.geometryType;switch(n){case a.default.POINT:case a.default.LINE:case a.default.POLYGON:case a.default.MULTI_POLYGON:case a.default.EXTENT:return e.containsXY(t.x,t.y)}return!1},l=function(t,e){var n=e.geometryType;switch(n){case a.default.POINT:return t.containsXY(e.x,e.y);case a.default.LINE:return f(t,e);case a.default.POLYGON:case a.default.EXTENT:return d(t,e)}},f=function(t,e){var n=t.getCoordinates(),r=e.getCoordinates();return _(n,r)},c=function(t,e){var n=e.geometryType;switch(n){case a.default.POINT:return t.containsXY(e.x,e.y);case a.default.LINE:return d(e,t);case a.default.POLYGON:case a.default.MUTIL_POLYGON:case a.default.EXTENT:return p(t,e)}},h=function(t,e){var n=e.geometryType;switch(n){case a.default.POINT:return t.containsXY(e.x,e.y);case a.default.POLYGON:case a.default.MULTI_POLYGON:case a.default.EXTENT:return y(t,e)}},d=function(t,e){var n=t.getCoordinates(),r=e.getCoordinates();e.geometryType!==a.default.POLYGON&&e.geometry!==a.default.MULTI_POLYGON||(r=r[0]);var o=_(n,r);if(!o)for(var i=0,s=n.length;i<s;++i){var u=n[i];if(o=e.containsXY(u[0],u[1]))break}return o},p=function(t,e){var n=t.getCoordinates(),r=e.getCoordinates();t.geometryType===a.default.POLYGON&&(n=n[0]),e.geometryType===a.default.POLYGON&&(r=r[0]);var o=_(n,r);if(!o)for(var i=0,s=n.length;i<s;++i){var u=n[i];if(o=e.containsXY(u[0],u[1]))break}if(!o)for(var l=0,f=r.length;l<f;++l){var c=r[l];if(o=t.containsXY(c[0],c[1]))break}return o},y=function(t,e){var n=_,r=t.getCoordinates(),o=[],i=e.geometryType;i==a.default.EXTENT?o=[e.getCoordinates()]:i==a.default.POLYGON?o=[e.getCoordinates()[0]]:i==a.default.MULTI_POLYGON&&(o=e.getCoordinates());var s=r.find(function(t){var e=o.find(function(e){return n(t[0],e)});return void 0!==e});return void 0!==s},_=function(t,e){for(var n=!1,r=v(t),o=v(e),i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,f=void 0,c=void 0,h=void 0,d=0,p=r.length;d<p;++d){i=r[d],a=i.x1,s=i.x2,u=i.y1,l=i.y2;for(var y=0,_=o.length;y<_&&(f=o[y],!(f.x1>s));++y)if(!(f.x2<a)&&(c=f.y1,h=f.y2,!(Math.min(c,h)>Math.max(u,l))&&!(Math.max(c,h)<Math.min(u,l))&&g(i,f))){n=!0;break}}return n},v=function(t){function e(t,e){return t.x1-e.x1}for(var n=t.length-1,r=new Array(n),o=void 0,i=void 0,a=0;a<n;++a)o=t[a],i=t[a+1],o[0]<i[0]?r[a]={x1:o[0],y1:o[1],x2:i[0],y2:i[1]}:r[a]={x1:i[0],y1:i[1],x2:o[0],y2:o[1]};return r.sort(e)},g=function(t,e,n){var r=n&&n.point,o=n&&n.tolerance,i=!1,a=t.x1-e.x1,s=t.y1-e.y1,u=t.x2-t.x1,l=t.y2-t.y1,f=e.y2-e.y1,c=e.x2-e.x1,h=f*u-c*l,d=c*s-f*a,p=u*s-l*a;if(0==h)0==d&&0==p&&(i=!0);else{var y=d/h,_=p/h;if(y>=0&&y<=1&&_>=0&&_<=1)if(r){var v=t.x1+y*u,g=t.y1+y*l;i={x:v,y:g}}else i=!0}if(o){var b=void 0;if(i){if(r)for(var E=[t,e],w=void 0,x=void 0,O=void 0,T=0;T<2;++T){w=E[T];for(var P=1;P<3;++P)if(x=w["x"+P],O=w["y"+P],b=Math.sqrt(Math.pow(x-i.x,2)+Math.pow(O-i.y,2)),b<o){i.x=x,i.y=O;break}}}else for(var C=[t,e],M=void 0,I=void 0,L=void 0,S=void 0,R=0;R<2;++R){M=C[R],I=C[(R+1)%2];for(var N=1;N<3;++N)if(L={x:M["x"+N],y:M["y"+N]},S=m(L,I),S.distance<o){i=!r||{x:L.x,y:L.y};break}}}return i},m=function(t,e){var n=b(t,e);return n.distance=Math.sqrt(n.distance),n},b=function(t,e){var n=t.x,r=t.y,o=e.x1,i=e.y1,a=e.x2,s=e.y2,u=a-o,l=s-i,f=(u*(n-o)+l*(r-i))/(Math.pow(u,2)+Math.pow(l,2)),c=void 0,h=void 0;return f<=0?(c=o,h=i):f>=1?(c=a,h=s):(c=o+f*u,h=i+f*l),{distance:Math.pow(c-n,2)+Math.pow(h-r,2),x:c,y:h,along:f}};t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.clone(),r=e.clone(),i=n,s=r.getCoordinates(),f=n.getCoordinates(),h=n.geometryType;if(h===a.default.POLYGON){if((0,c.default)(n,r)){var d=s[0],p=f[0],y=[],_=[];d.forEach(function(t){y.push(t[0],t[1])}),p.forEach(function(t){_.push(t[0],t[1])});var v=(0,l.linearRingIsClockwise)(y,0,y.length,2),g=(0,l.linearRingIsClockwise)(_,0,_.length,2);f.length>1?v!==g?f.push(d.slice()):f.push(d.slice().reverse()):v!==g?f.push(d.slice()):f.push(d.slice().reverse())}}else if(h===a.default.MULTI_POLYGON){var m=n.convertToPolygons(),b=[];m.forEach(function(t){var e=o(t,r);b.push(e)});var E=[];b.forEach(function(t){E.push(t.getCoordinates())});var w=new u.default;w.setCoordinates(E),i=w}return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(1),a=r(i),s=n(21),u=r(s),l=n(33),f=n(30),c=r(f);t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.clone(),r=e.clone(),o=n.getCoordinates()[0],i=r.getCoordinates(),a=m(o,i);if(0===a.length||a.length%2===1)return[];var s=y(a,i),u=p(a,s),f=v(a,o),c=d(f,u),h=[];return c.forEach(function(t){var e=[];t.forEach(function(t){e.push([t[0],t[1]])});var n=new l.default;n.setCoordinates([e]),h.push(n)}),x(n,h,r),h}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(30),a=r(i),s=n(2),u=n(10),l=r(u),f=Symbol("isDividedPoint"),c=Symbol("alreadyUsed"),h=Symbol("dividePoint"),d=function(t,e){for(var n=0,r=t.length,o=function(t,e){return e.find(function(e){return e[0]===t[0]&&e[1]===t[1]})},i=function(t){for(var n=0,r=e.length;n<r;n++){var o=e[n],i=o[0],a=o[o.length-1];if(i[0]===t[0]&&i[1]===t[1])return o;if(a[0]===t[0]&&a[1]===t[1]){var s=[].concat(o);return s.reverse()}}},a=function(e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(o[0]===e[0]&&o[1]===e[1])return n===t.length-1?o:t[n+1]}},s=[],u=[],l=function t(e,n){if(n.length>1){var r=n[0];if(r[0]===e[0]&&r[1]===e[1])return n.push(e),!0}if(e.length>=3&&e[2]===f){var o=i(e);o.forEach(function(t){n.push(t)});var s=n[0],u=n[n.length-1];if(s[0]===u[0]&&s[1]===u[1])return!0;var l=o[o.length-1],c=a(l);t(c,n)}else if(2===e.length){n.push(e);var h=a(e);t(h,n)}},h=function(t,e){e.forEach(function(e){o(e,t)&&(2===e.length?e.push(c):3===e.length&&e[2]===f?e.push("1"):4===e.length&&"1"===e[3]&&(e[3]="2"))})},d=function(t,n){for(var r=e,o=0,i=0,a=r.length;i<a;i++){var s=r[i];o=0;for(var u=0,l=s.length;u<l;u++){var f=s[u];if(f[0]===t[0]&&f[1]===t[1]&&o++,f[0]===n[0]&&f[1]===n[1]&&o++,2===o)return!0}}return!1};n<r-1;n++){var p=t[n];if(2===p.length){o(p,s)||s.push(p);var y=t[n+1];l(y,s),h(s,t),u.push(s),s=[]}else if(3===p.length&&p[2]===f){o(p,s)||s.push(p);var _=t[n+1];l(_,s),h(s,t),u.push(s),s=[]}else if(4===p.length&&"1"===p[3]){var v=t[n+1];v.length>=3&&v[2]===f&&d(p,v)?v=p:o(p,s)||s.push(p),l(v,s),h(s,t);var g=s[0],m=s[s.length-1];g[0]===m[0]&&g[1]===m[1]||s.push(g),u.push(s),s=[]}}return u},p=function(t,e){for(var n=[],r=[],o=!1,i=0,a=e.length;i<a;i++){var s=e[i];o!==!1||3!==s.length?o&&2===s.length?r.push(s):o&&3===s.length&&(r.push([s[0],s[1]]),o=!1,n.push(r),r=[]):(r.push([s[0],s[1]]),o=!0)}return n},y=function(t,e){for(var n=function(e,n){return t.filter(function(t){var r=t.intersectFrom.fromPoint,o=t.intersectFrom.endPoint;return r[0]===e[0]&&r[1]===e[1]&&o[0]===n[0]&&o[1]===n[1]})},r=function(t){return a.find(function(e){return e[0]===t[0]&&e[1]===t[1]})},o=e.length,i=0,a=[];i<o-1;i++){var s=e[i],u=e[i+1];r(s)||a.push(s);var l=n(s,u);0!==l.length&&(1===l.length?a.push([l[0].point.x,l[0].point.y,h]):!function(){var t={x:s[0],y:s[1]};l.sort(function(e,n){return _(e.point,t)-_(n.point,t)}),l.forEach(function(t){a.push([t.point.x,t.point.y,h])})}()),r(u)||a.push(u)}return a},_=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},v=function(t,e){for(var n=[],r=function(e,n){return t.filter(function(t){var r=t.originPoint,o=r.fromPoint,i=r.toPoint;return e[0]===o[0]&&e[1]===o[1]&&n[0]===i[0]&&n[1]===i[1]})},o=e.length,i=0;i<o-1;i++){var a=e[i],s=e[i+1];n.push(a);var u=r(a,s);u.length>0&&(u.length>1&&!function(){var t={x:a[0],y:a[1]};u.sort(function(e,n){return _(e.point,t)-_(n.point,t)})}(),u.forEach(function(t){var e=t.point;n.push([e.x,e.y,f])}))}return n.push(n[0]),n},g=function(t,e){for(var n=s.ExtentUtil,r=n.boundingExtentFromTwoPoints(e[0],e[1]),o=n.buffer(r,4),i={x1:e[0][0],y1:e[0][1],x2:e[1][0],y2:e[1][1]},a=[],u=0,l=t.length-1;u<l;u++){var f=t[u],c=t[u+1],h=n.boundingExtentFromTwoPoints(f,c);if(n.intersects(h,o)){var d={x1:f[0],y1:f[1],x2:c[0],y2:c[1]},p=b(d,i,{point:!0});p instanceof Object&&a.push({point:p,originPoint:{fromPoint:f,toPoint:c},index:u})}}return a},m=function(t,e){for(var n=g,r=[],o=function(o,i){var a=e[o],s=e[o+1],u=n(t,[a,s]);u.forEach(function(t){t.intersectIndex=o,t.intersectFrom={fromPoint:a,endPoint:s}}),r=r.concat(u)},i=0,a=e.length-1;i<a;i++)o(i,a);return r},b=function(t,e,n){var r=n&&n.point,o=n&&n.tolerance,i=!1,a=t.x1-e.x1,s=t.y1-e.y1,u=t.x2-t.x1,l=t.y2-t.y1,f=e.y2-e.y1,c=e.x2-e.x1,h=f*u-c*l,d=c*s-f*a,p=u*s-l*a;if(0==h)0==d&&0==p&&(i=!0);else{var y=d/h,_=p/h;if(y>=0&&y<=1&&_>=0&&_<=1)if(r){var v=t.x1+y*u,g=t.y1+y*l;i={x:v,y:g}}else i=!0}if(o){var m=void 0;if(i){if(r)for(var b=[t,e],w=void 0,x=void 0,O=void 0,T=0;T<2;++T){w=b[T];for(var P=1;P<3;++P)if(x=w["x"+P],O=w["y"+P],m=Math.sqrt(Math.pow(x-i.x,2)+Math.pow(O-i.y,2)),m<o){i.x=x,i.y=O;break}}}else for(var C=[t,e],M=void 0,I=void 0,L=void 0,S=void 0,R=0;R<2;++R){M=C[R],I=C[(R+1)%2];for(var N=1;N<3;++N)if(L={x:M["x"+N],y:M["y"+N]},S=E(L,I),S.distance<o){i=!r||{x:L.x,y:L.y};break}}}return i},E=function(t,e){var n=w(t,e);return n.distance=Math.sqrt(n.distance),n},w=function(t,e){var n=t.x,r=t.y,o=e.x1,i=e.y1,a=e.x2,s=e.y2,u=a-o,l=s-i,f=(u*(n-o)+l*(r-i))/(Math.pow(u,2)+Math.pow(l,2)),c=void 0,h=void 0;return f<=0?(c=o,h=i):f>=1?(c=a,h=s):(c=o+f*u,h=i+f*l),{distance:Math.pow(c-n,2)+Math.pow(h-r,2),x:c,y:h,along:f}},x=function(t,e,n){if(t.hasHoles())for(var r=function(t,e){var n=new l.default([t]),r=e.find(function(t){return(0,a.default)(t,n)});r&&r.getCoordinates().push(t)},o=t.getCoordinates(),i=n,s=1,u=o.length;s<u;s++){var f=m(o[s],i);0===f.length&&r(o[s],e)}};t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),u=r(s),l=n(4),f=n(5),c=r(f),h=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this));return a.map=n,a._element=r,a._dragging=!1,a._down=null,a._dragListenerKeys=[],a._clickTimeoutId=0,a._mapping={mousedown:a._mousedown,mousemove:a._mousemove,mouseup:a._mouseup,mouseover:a._mouseover,mouseout:a._mouseout},a._registerSource(),a}return a(e,t),e.prototype._registerSource=function(){var t=this,e=this.getEvents();e.forEach(function(e){return(0,l.listen)(t._element,e,t._mapping[e],t)})},e.prototype.getEvents=function(){return Object.keys(this._mapping)},e.prototype._mousedown=function(t){var e=new c.default(this.map,t,c.default.MOUSE_DOWN);if(this.dispatchEvent(e),this._dragging=!1,this._down=t,0===this._dragListenerKeys.length){var n=document;this._dragListenerKeys.push((0,l.listen)(n,c.default.MOUSE_MOVE,this._mousemove,this),(0,l.listen)(n,c.default.MOUSE_UP,this._mouseup,this))}},e.prototype._mousemove=function(t){var e=new c.default(this.map,t,c.default.MOUSE_MOVE);if(null!==e.coordinate&&(this.dispatchEvent(e),this._isMoving(t))){this._dragging=!0;var n=new c.default(this.map,t,c.default.MOUSE_DRAG,this._dragging);this.dispatchEvent(n)}},e.prototype._mouseup=function(t){var e=new c.default(this.map,t,c.default.MOUSE_UP);this.dispatchEvent(e),!this._dragging&&this._down&&this._emulateClick(this._down),this._dragListenerKeys.forEach(l.unlistenByKey),this._dragListenerKeys.length=0,this._dragging=!1,this._down=null},e.prototype._mouseover=function(t){var e=new c.default(this.map,t,c.default.MOUSE_OVER);this.dispatchEvent(e)},e.prototype._mouseout=function(t){var e=new c.default(this.map,t,c.default.MOUSE_OUT);this.dispatchEvent(e)},e.prototype._emulateClick=function(t){var e=new c.default(this.map,t,c.default.CLICK);this.dispatchEvent(e),0!==this._clickTimeoutId?(clearTimeout(this._clickTimeoutId),this._clickTimeoutId=0,e=new c.default(this.map,t,c.default.DBLCLICK),this.dispatchEvent(e)):this._clickTimeoutId=setTimeout(function(){
this._clickTimeoutId=0;var e=new c.default(this.map,t,c.default.SINGLE_CLICK);this.dispatchEvent(e)}.bind(this),250)},e.prototype._isMoving=function(t){return null!==this._down&&(t.clientX!==this._down.clientX||t.clientY!==this._down.clientY)},e}(u.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),f=r(l),c=n(76),h=r(c),d=n(73),p=r(d),y=n(5),_=r(y),v=n(49),g=r(v),m=n(13),b=r(m),E=n(4),w=n(7),x=n(6),O=n(2),T=n(57),P=n(65),C=function(t){function e(n){i(this,e);var r=a(this,t.call(this));r._frameState=null,r._layers=[],r._toPixelTransform=w.Transform.create(),r._toCoordinateTransform=w.Transform.create(),r._animationDelayKey=void 0,r._components=[],r._controls=[],r._delta=1,r._createViewport(),r._overlayContainer=document.createElement("DIV"),r._overlayContainer.className="dt-overlaycontainer",r.viewport.appendChild(r._overlayContainer),r._overlayContainerStopEvent=document.createElement("DIV"),r._overlayContainerStopEvent.className="dt-overlaycontainer-stopevent";var o=[_.default.CLICK,_.default.DBLCLICK,_.default.MOUSE_DOWN,_.default.MOUSE_UP,_.default.MOUSE_WHEEL,_.default.WHEEL];o.forEach(function(t){(0,E.listen)(r._overlayContainerStopEvent,t,function(t){t.stopPropagation()})}),r.viewport.appendChild(r._overlayContainerStopEvent);var s=e.parseOptionsInner(n);return r.allowCoordinatesBeyondImage=n.allowCoordinatesBeyondImage||!1,r._renderer=new s.rendererClass(r.viewport,r),r._createBrowserEventHandler(),r._animationDelay=function(){r._animationDelayKey=void 0,r._renderFrame(Date.now())},r.layers=s.values.layers,r.target=s.values.target,r.view=s.values.view,s.components.forEach(function(t){return r.addComponents(t)}),s.controls.forEach(function(t){return r.addControl(t)}),r._overlayIdIndex={},r._overlays=s.overlays,r._overlays.forEach(function(t){return r._addOverlayInternal(t)}),(0,E.listen)(r.view,x.EventType.CHANGE,r._handleViewChange,r),r.dispatchEvent(x.EventType.VIEW_CHANGED),(0,E.listen)(r.viewport,_.default.MOUSE_WHEEL,r._handleMouseWheelEvent,r),(0,E.listen)(r.viewport,_.default.WHEEL,r._handleMouseWheelEvent,r),r}return s(e,t),e.prototype._createViewport=function(){var t=document.createElement("DIV");t.className="dt-viewport",t.style.position="relative",t.style.overflow="hidden",t.style.width="100%",t.style.height="100%",this._viewport=t},e.prototype._createRenderer=function(){this._renderer=new h.default(this.viewport,this)},e.prototype._createBrowserEventHandler=function(){this._browserEventHandler=new p.default(this,this.viewport);for(var t in _.default)(0,E.listen)(this._browserEventHandler,_.default[t],this._handleBrowserEvent,this)},e.prototype._handleMouseWheelEvent=function(t){var e=t.type,n=new _.default(this,t,e);this._handleBrowserEvent(n)},e.prototype._handleKeyboardEvent=function(t){var e=t.type,n=new _.default(this,t,e);this._handleBrowserEvent(n)},e.prototype._handleBrowserEvent=function(t){var e=this.components,n=void 0;if(this.dispatchEvent(t)!==!1)for(n=e.length-1;n>=0;n--){var r=e[n];if(r.active){var o=r.handleMouseEvent(t);if(!o)break}}},e.prototype._renderFrame=function(){var t=this.size,e=this.view,n=null,r=O.ExtentUtil.createEmpty(),o=e.getViewState();n={size:t,viewState:o,pixelRatio:1,extent:r,toPixelTransform:this._toPixelTransform,toCoordinateTransform:this._toCoordinateTransform},n&&(n.extent=O.ExtentUtil.getForViewAndSize(o.center,o.resolution,o.rotation,n.size,r)),this._frameState=n,this._renderer.renderFrame(n)},e.prototype.render=function(){void 0===this._animationDelayKey&&(this._animationDelayKey=window.requestAnimationFrame(this._animationDelay))},e.prototype._handleViewChange=function(){this.render(),this.dispatchEvent(x.EventType.VIEW_CHANGED)},e.prototype.isRendered=function(){return!!this._frameState},e.prototype.addComponents=function(t){this.components.push(t),t.map=this},e.prototype.addControl=function(t){this.controls.push(t),t.map=this},e.prototype.addLayer=function(t){this.layers.push(t),t.map=this},e.prototype.getFeaturesLayer=function(){return this.layers.filter(function(t){return t instanceof b.default})},e.prototype._addOverlayInternal=function(t){var e=t.overlayId;void 0!==e&&(this._overlayIdIndex[e.toString()]=t),t.map=this},e.prototype.getTargetElement=function(){var t=this.target;return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.forEachFeatureAtPiexl=function(t,e,n){if(this._frameState){for(var r=this.getCoordinateFromPixel(t),o=n,i=this.getFeaturesLayer(),a=null,s=0,u=i.length;s<u;s++){var l=i[s];if(l.visible&&(a=l.forEachFeatureAtPiexl(this._frameState,r,e,o)))return e(a,l)}return a}},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.size=[t.offsetWidth-Number.parseFloat(e.borderLeftWidth)-Number.parseFloat(e.paddingLeft)-Number.parseFloat(e.paddingRight)-Number.parseFloat(e.borderRightWidth),t.offsetHeight-Number.parseFloat(e.borderTopWidth)-Number.parseFloat(e.paddingTop)-Number.parseFloat(e.paddingBottom)-Number.parseFloat(e.borderBottomWidth)]}else this.size=void 0},e.prototype.getEventPixel=function(t){var e=this.viewport.getBoundingClientRect(),n=t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getCoordinateFromPixel=function(t){var e=this._frameState;return e?w.Transform.apply(e.toCoordinateTransform,t.slice()):null},e.prototype.getPixelFromCoordinate=function(t){var e=this._frameState;return e?w.Transform.apply(e.toPixelTransform,t.slice(0,2)):null},e.prototype.zoomIn=function(){this._zoomByDelta(this._delta)},e.prototype.zoomOut=function(){this._zoomByDelta(-this._delta)},e.prototype._zoomByDelta=function(t){var e=this.view;if(e){var n=e.resolution;if(n){var r=e.constrainResolution(n,t);e.resolution=r}}},e.prototype.switchToOverview=function(){var t=this.view;if(t){var e=t.originalCenter,n=t.originalResolution;t.center=e,t.resolution=n}},e.parseOptionsInner=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=h.default,n={};n.view=void 0!==t.view?t.view:new g.default,n.target=t.target,n.layers=void 0!==t.layers?t.layers:[];var r=void 0;r=t.components?t.components:(0,T.componentsDefaults)();var i=void 0;i=t.controls?t.controls:(0,P.controlDefaults)();var a=void 0;return void 0!==t.overlays?Array.isArray(t.overlays)&&(a=[].concat(o(t.overlays))):a=[],{rendererClass:e,components:r,controls:i,values:n,overlays:a}},u(e,[{key:"overlayContainer",get:function(){return this._overlayContainer}},{key:"overlayContainerStopEvent",get:function(){return this._overlayContainerStopEvent}},{key:"viewport",get:function(){return this._viewport}},{key:"size",get:function(){return this._size},set:function(t){this._size=t}},{key:"components",get:function(){return this._components}},{key:"controls",get:function(){return this._controls}},{key:"layers",get:function(){return this._layers},set:function(t){var e=this;Array.isArray(t)&&t.forEach(function(t){e.addLayer(t)})}},{key:"target",get:function(){return this._target},set:function(t){this._target=t;var e=document.getElementById(this._target);e.appendChild(this.viewport),(0,E.listen)(document,_.default.KEYDOWN,this._handleKeyboardEvent,this),(0,E.listen)(document,_.default.KEYPRESS,this._handleKeyboardEvent,this);var n=this.updateSize.bind(this);window.addEventListener(x.EventType.RESIZE,n,!1),this.updateSize(),this.render()}}]),e}(f.default);e.default=C,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=n(4),c=n(51),h=n(2),d=n(18),p=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._element=void 0,r._map=void 0,r._offset=void 0,r._position=void 0,r._positioning=void 0,r._overlay=n.id,r._insertFirst=void 0===n.insertFirst||n.insertFirst,r._stopEvent=void 0===n.stopEvent||n.stopEvent,r._element=document.createElement("DIV"),r._element.className="dt-overlay-container dt-selectable",r._element.style.position="absolute",r.autoPan=void 0!==n.autoPan&&n.autoPan,r._autoPanAnimation=n.autoPanAnimation||{},r._autoPanMargin=void 0!==n.autoPanMargin?n.autoPanMargin:20,r._rendered={_bottom:"",_left:"",_right:"",_top:"",_visible:!0},r._mapPostrenderListenerKey=null,void 0!==n.element&&(r.popupEelement=n.element),r.offset=void 0!==n.offset?n.offset:[0,0],r.positioning=void 0!==n.positioning?n.positioning:y.TOP_LEFT,void 0!==n.position&&(r.position=n.position),r}return a(e,t),e.prototype.render=function(){this.updatePixelPosition()},e.prototype.updatePixelPosition=function(){var t=this.map;if(t){var e=this.position;if(!t||!t.isRendered()||!e)return void this.setVisible(!1);var n=t.getPixelFromCoordinate(e),r=t.size;this.updateRenderedPosition(n,r)}},e.prototype.updateRenderedPosition=function(t,e){var n=this._element.style,r=this.offset,o=this.positioning;this.setVisible(!0);var i=r[0],a=r[1];if(o==y.BOTTOM_RIGHT||o==y.CENTER_RIGHT||o==y.TOP_RIGHT){""!==this._rendered.left_&&(this._rendered.left_=n.left="");var s=Math.round(e[0]-t[0]-i)+"px";this._rendered.right_!=s&&(this._rendered.right_=n.right=s)}else{""!==this._rendered.right_&&(this._rendered.right_=n.right=""),o!=y.BOTTOM_CENTER&&o!=y.CENTER_CENTER&&o!=y.TOP_CENTER||(i-=this._element.offsetWidth/2);var u=Math.round(t[0]+i)+"px";this._rendered.left_!=u&&(this._rendered.left_=n.left=u)}if(o==y.BOTTOM_LEFT||o==y.BOTTOM_CENTER||o==y.BOTTOM_RIGHT){""!==this._rendered.top_&&(this._rendered.top_=n.top="");var l=Math.round(e[1]-t[1]-a)+"px";this._rendered.bottom_!=l&&(this._rendered.bottom_=n.bottom=l)}else{""!==this._rendered.bottom_&&(this._rendered.bottom_=n.bottom=""),o!=y.CENTER_LEFT&&o!=y.CENTER_CENTER&&o!=y.CENTER_RIGHT||(a-=this._element.offsetHeight/2);var f=Math.round(t[1]+a)+"px";this._rendered.top_!=f&&(this._rendered.top_=n.top=f)}},e.prototype.setVisible=function(t){this._rendered.visible!==t&&(this._element.style.display=t?"":"none",this._rendered.visible=t)},e.prototype._panIntoView=function(){var t=this.map;if(t&&t.getTargetElement()){var e=this._getRect(t.getTargetElement(),t.size),n=this.popupEelement;if(0!==n.clientHeight||0!==n.clientWidth){var r=this._getRect(n,[(0,d.outerWidth)(n),(0,d.outerHeight)(n)]),o=this._autoPanMargin;if(!h.ExtentUtil.containsExtent(e,r)){var i=r[0]-e[0],a=e[2]-r[2],s=r[1]-e[1],u=e[3]-r[3],l=[0,0];if(i<0?l[0]=i-o:a<0&&(l[0]=Math.abs(a)+o),s<0?l[1]=s-o:u<0&&(l[1]=Math.abs(u)+o),0!==l[0]||0!==l[1]){var f=t.view.center,c=t.getPixelFromCoordinate(f),p=[c[0]+l[0],c[1]+l[1]];t.view.center=t.getCoordinateFromPixel(p)}}}}},e.prototype._getRect=function(t,e){var n=t.getBoundingClientRect(),r=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[r,o,r+e[0],o+e[1]]},e.prototype._setElement=function(){(0,d.removeChildren)(this._element);var t=this.popupEelement;t&&this._element.appendChild(t)},s(e,[{key:"overlayId",get:function(){return this._overlayId}},{key:"popupEelement",get:function(){return this._popupEelement},set:function(t){this._popupEelement=t,this._setElement()}},{key:"map",get:function(){return this._map},set:function(t){if(this._map=t,this._map){var e=this._map;this._mapPostrenderListenerKey=(0,f.listen)(e,c.RenderEventType.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this._stopEvent?e.overlayContainerStopEvent:e.overlayContainer;this._insertFirst?n.insertBefore(this._element,n.childNodes[0]||null):n.appendChild(this._element)}}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this.updatePixelPosition()}},{key:"position",get:function(){return this._position},set:function(t){this._position=t,this.updatePixelPosition(),this._position&&this.autoPan&&this._panIntoView()}},{key:"positioning",get:function(){return this._positioning},set:function(t){this._positioning=t,this.updatePixelPosition()}}]),e}(l.default);e.default=p;var y={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(47),l=r(u),f=n(13),c=r(f),h=n(83),d=r(h),p=n(77),y=r(p),_=n(78),v=r(_),g=n(18),m=n(7),b=n(51),E=n(28),w=n(84),x=r(w),O=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n,r));return a._context=null,a._canvas=null,a._rendererVisible=!0,a._layerRenderers=[],a._transform=m.Transform.create(),a._addToContainer(n),a}return a(e,t),e.prototype._addToContainer=function(t){var e=this.context;this._canvas=e.canvas,this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.className="dt-unselectable",t.insertBefore(this._canvas,t.childNodes[0]||null)},e.prototype.renderFrame=function(t){var e=this;if(null!==this.map){if(!t&&this._rendererVisible)return this._canvas.style.display="none",void(this._rendererVisible=!1);var n=this.context,r=t.size[0],o=t.size[1];this._canvas.width!==r||this._canvas.height!==o?(this._canvas.width=r,this._canvas.height=o):(this._canvas.width=r,this._canvas.height=o);var i=this.map.layers;(0,E.stableSort)(i,this.sortByZIndex),this.updateTransform(t),this._dispatchComposeEvent(b.RenderEventType.PRERENDER,t),i.forEach(function(r){if(r.visible){var o=e.getLayerRenderer(r);o.prepareFrame(t)&&o.composeFrame(t,n)}}),this._dispatchComposeEvent(b.RenderEventType.POSTRENDER,t)}},e.prototype.getLayerRenderer=function(t){var e=t.id.toString();if(e in this._layerRenderers)return this._layerRenderers[e];var n=this.createLayerRenderer(t);return this._layerRenderers[e]=n,n},e.prototype.createLayerRenderer=function(t){return t instanceof l.default?new v.default(t,this.context):t instanceof c.default?new y.default(t,this.context,this.map):null},e.prototype.updateTransform=function(t){var e=t.viewState,n=t.toPixelTransform,r=t.toCoordinateTransform,o=t.size,i=e.resolution,a=e.center,s=e.rotation;m.Transform.compose(n,o[0]/2,o[1]/2,1/i,1/i,-s,-a[0],-a[1]),m.Transform.invert(m.Transform.setFromArray(r,n))},e.prototype.sortByZIndex=function(t,e){return t.zIndex-e.zIndex},e.prototype._dispatchComposeEvent=function(t,e){var n=this.map,r=this.context;if(n.hasListener(t)){var o=new x.default(t,e,r,null);n.dispatchEvent(o)}},s(e,[{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._context||(this._context=(0,g.createCanvasContext2D)()),this._context}}]),e}(d.default);e.default=O,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(50),u=r(s),l=n(80),f=r(l),c=n(79),h=r(c),d=n(81),p=r(d),y=n(82),_=r(y),v=n(7),g=n(2),m=function(t){function e(n,r,a){o(this,e);var s=i(this,t.call(this,n,r));return s._map=a,s._geometryRenderGroup=new Map,s._textRender=new _.default(s.context),s._maxExtent=null,s._renderFeatures=[],s._renderResolution=Number.NaN,s._renderExtent=[1/0,1/0,-(1/0),-(1/0)],s._renderRevision=NaN,s._cacheableThisTime=!0,s}return a(e,t),e.prototype._getGeometryRender=function(t){var n=t.geometryType;return this._geometryRenderGroup.has(n)||this._geometryRenderGroup.set(n,new e.GeometryRender[n](this.context)),this._geometryRenderGroup.get(n)},e.prototype._renderFeaturesInOrder=function(t){return null===t||void 0===t?t:0===t.length?t:void 0},e.prototype._calculaterFeaturesFontSize=function(t){var e=this._map.view,n=e._originalResolution,r=e._resolutions,o=e._resolution;if(r){var i=r.findIndex(function(t){return t==n}),a=r.findIndex(function(t){return t==o}),s=a-i;s<=0&&(s=0);var u=12+2*s;u>=24&&(u=24),t.forEach(function(t){var e=t.style[0],n=e.textStyle.font,r=n.split(" ")[0]+" "+u+"px Arial";e.textStyle.font=r})}},e.prototype.prepareFrame=function(t){var e=this.layer,n=t.extent,r=t.viewState,o=r.resolution,i=e.revision,a=e.renderBuffer,s=g.ExtentUtil.buffer(n,a*o);this._renderResolution===o&&this._renderRevision===i&&g.ExtentUtil.containsExtent(this._renderExtent,s)&&(this._cacheableThisTime=!0);var u=this.layer.loadFeature(s);return this._cacheableThisTime=!1,this._renderFeatures=u,this._maxExtent=s,this._renderResolution=o,this._renderExtent=s,this._renderRevision=i,0!==u.length},e.prototype.composeFrame=function(t,e){var n=this,r=t,o=r.viewState,i=this.layer,a=this._renderFeatures,s=o.resolution,u=this.getTransform(r,0);return this.preCompose(e,r,u),this._clipExtent(u,e),a.forEach(function(t){var e=void 0;if(t.style)e=t.style;else{var r=i.styleFunction;r&&(e=r(t,s),t.style=n._cloneRenderStyle(e))}var o=n._getGeometryRender(t.geometry);n._resetRender(o),o.render(t,e,u),t.textDisplay&&(n._calculaterFeaturesFontSize([t]),n._textRender.render(t,t.style,u))}),e.restore(),this.postCompose(e,r,u),!0},e.prototype._cloneRenderStyle=function(t){if(t){var e=[];return t.forEach(function(t){e.push(t.clone())}),e}return null},e.prototype._clipExtent=function(t,e){var n=this.getClipCoords(t);e.save(),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},e.prototype.getClipCoords=function(t){var e=this._maxExtent,n=e[0],r=e[1],o=e[2],i=e[3],a=[n,r,n,i,o,i,o,r];return v.Transform.transform2D(a,0,8,2,t,a),a},e.prototype._resetRender=function(t){this._cacheableThisTime||t.resetRenderOption()},e.prototype.preCompose=function(){},e.prototype.postCompose=function(){},e}(u.default);e.default=m,m.GeometryRender={},m.GeometryRender.point=f.default,m.GeometryRender.line=h.default,m.GeometryRender.polygon=p.default,m.GeometryRender.multi_polygon=p.default,m.GeometryRender.extent=p.default,m.GeometryRender.parallelogram=p.default,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(50),l=r(u),f=n(7),c=n(2),h=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._image=null,r._imageTransform=f.Transform.create(),r.coordinateToCanvasPixelTransform=f.Transform.create(),r}return a(e,t),e.prototype.prepareFrame=function(t){var e=t.pixelRatio,n=t.size,r=t.viewState,o=r.center,i=r.resolution,a=void 0,s=this.layer,u=t.extent;if(!c.ExtentUtil.isEmpty(u)){var l=r.projection;if(a=s.getImageInternal(u,i,e,l)){var h=this.loadImage(a);h&&(this._image=a)}}if(this._image){a=this._image;var d=a.extent,p=a.resolution,y=a.pixelRatio,_=e*p/(i*y),v=f.Transform.compose(this.imageTransform,e*n[0]/2,e*n[1]/2,_,-_,0,y*(d[0]-o[0])/p,y*(o[1]-d[3])/p);f.Transform.compose(this.coordinateToCanvasPixelTransform,e*n[0]/2-v[4],e*n[1]/2-v[5],e/i,-e/i,0,-o[0],-o[1])}return!!this.image},e.prototype.composeFrame=function(t,e){this.preCompose(e,t);var n=this.image;if(n){var r=void 0,o=void 0!==r&&!c.ExtentUtil.containsExtent(r,t.extent)&&c.ExtentUtil.intersects(r,t.extent);o&&this.clip(e,t,r);var i=this.layer,a=this.imageTransform,s=e.globalAlpha;e.globalAlpha=i.opacity;var u=a[4],l=a[5],f=n.width*a[0],h=n.height*a[3];e.imageSmoothingEnabled=!1,e.drawImage(n,0,0,+n.width,+n.height,Math.round(u),Math.round(l),Math.round(f),Math.round(h)),e.globalAlpha=s,o&&e.restore()}this.postCompose(e,t)},s(e,[{key:"image",get:function(){return this._image?this._image.getDomImage():null}},{key:"imageTransform",get:function(){return this._imageTransform}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(26),u=r(s),l=n(16),f=r(l),c=n(19),h=n(7),d=function(t){function e(n){return o(this,e),i(this,t.call(this,n))}return a(e,t),e.prototype.render=function(t,e,n){if(t){var r=this.context,o=e,i=t.geometry,a=h.Transform.transform2D,s=[];if(this._pixelCoordinates&&this.equalsTransform(n,this.renderedTransform))s=this._pixelCoordinates;else{var u=i.getCoordinates();u.forEach(function(t){var e=a(t,0,t.length,2,n);e[0]=e[0]+.5|0,e[1]=e[1]+.5|0,s.push(e)}),this._pixelCoordinates=s,h.Transform.setFromArray(this.renderedTransform,n)}for(var l=o.length,d=0;d<l;d++){var p=o[d],y={coordinates:s,width:p.width,strokeStyle:(0,c.colorToString)(p.color,p.alpha),lineCap:p.lineCap,lineJion:p.lineJion,miterLimit:p.miterLimit,hasDash:p.style===f.default.DASH};this.drawLine(r,y)}}},e.prototype.drawLine=function(t,e){t.save(),t.strokeStyle=e.strokeStyle,t.lineWidth=e.width,t.lineCap=e.lineCap,t.lineJoin=e.lineJion,t.miterLimit=e.miterLimit,t.beginPath();var n=e.coordinates;t.moveTo(n[0][0],n[0][1]);for(var r=0,o=n.length;r<o-1;r++)t.lineTo(n[r+1][0],n[r+1][1]);e.hasDash&&t.setLineDash([5,5]),t.stroke(),t.closePath(),t.restore()},e}(u.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(26),u=r(s),l=n(19),f=n(7),c=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._pixelCoordinates=[],r}return a(e,t),e.prototype.render=function(t,e,n){if(t)for(var r=this.context,o=e,i=t.geometry,a=[i.x,i.y],s=f.Transform.transform2D(a,0,a.length,2,n,this._pixelCoordinates),u=s[0],c=s[1],h=o.length,d=0;d<h;d++){var p=o[d],y={centerX:u+.5|0,centerY:c+.5|0,radius:p.size/2||p.borderStyle.width/2,fillStyle:(0,l.colorToString)(p.color,p.alpha),borderStyle:p.borderStyle};this.drawCircle(r,y)}},e.prototype.drawCircle=function(t,e){t.save(),t.beginPath(),t.arc(e.centerX,e.centerY,e.radius,0,2*Math.PI,!0),e.fillStyle&&(t.fillStyle=e.fillStyle,t.fill());var n=e.borderStyle;n&&(t.strokeStyle=(0,l.colorToString)(n.color,n.alpha),t.lineWidth=n.width,n.lineDash&&t.setLineDash(n.lineDash),t.stroke()),t.closePath(),t.restore()},e}(u.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=r(s),l=n(26),f=r(l),c=n(16),h=r(c),d=n(7),p=n(19),y=function(t){function e(n){return o(this,e),i(this,t.call(this,n))}return a(e,t),e.prototype.render=function(t,e,n){if(t){var r=this.context,o=e,i=t.geometry,a=d.Transform.transform2D,s=i.getCoordinates();if(i.geometryType===u.default.EXTENT&&(s=[s]),!s)return!1;if(0===s.length)return!1;var l=[],f=[];if(this._pixelCoordinates&&this.equalsTransform(n,this.renderedTransform))f=this._pixelCoordinates;else{if(i.geometryType===u.default.MULTI_POLYGON){var c=[];s.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=a(t,0,t.length,2,n);e[0]=e[0]+.5|0,e[1]=e[1]+.5|0,l.push(e)}),c.push(l),l=[]}),f.push(c),c=[]}),this.renderMutilPolygon(r,o,f)}else s.forEach(function(t){t.forEach(function(t){var e=a(t,0,t.length,2,n);e[0]=e[0]+.5|0,e[1]=e[1]+.5|0,l.push(e)}),f.push(l),l=[]});this.renderPolygon(r,o,f)}return this._pixelCoordinates=f,d.Transform.setFromArray(this.renderedTransform,n),!0}},e.prototype.renderMutilPolygon=function(t,e,n){var r=this;n.forEach(function(n){r.renderPolygon(t,e,n)})},e.prototype.renderPolygon=function(t,e,n){for(var r=e.length,o=0;o<r;o++){var i=e[o],a={coordinates:n,fillStyle:(0,p.colorToString)(i.color,i.alpha),borderStyle:i.borderStyle};this.drawStylePolygon(t,a)}},e.prototype.drawStylePolygon=function(t,e){t.save(),e.fillStyle&&(t.fillStyle=e.fillStyle);var n=e.borderStyle;n&&(t.strokeStyle=(0,p.colorToString)(n.color,n.alpha),t.lineWidth=n.width,n.style===h.default.DASH&&t.setLineDash([5,5]));var r=e.coordinates;r.forEach(function(e,n){0===n&&t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var r=1,o=e.length;r<o;r++){var i=e[r];t.lineTo(i[0],i[1])}t.closePath()}),t.fill(),t.stroke(),t.restore()},e}(f.default);e.default=y,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(26),u=r(s),l=n(7),f=n(19),c=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._pixelCoordinates=[],r}return a(e,t),e.prototype.render=function(t,e,n){var r=e[0].textStyle;if(t.displayText&&r){var o=String(t.displayText);r.text=o;var i=this.context;i.save();var a=t.geometry,s=a.getFlatInteriorPoint();this._pixelCoordinates=[];for(var u=l.Transform.transform2D(s,0,s.length,2,n,this._pixelCoordinates),f=0,c=u.length;f<c;f+=2){var h=u[f],d=u[f+1];this._setTextStyle(i,r);var p=r.offsetX,y=r.offsetY-3,_=!!r.stroke,v=!!r.fill,g=r.text,m=h+p,b=d+y,E=g.split("\n"),w=E.length,x=void 0,O=void 0;w>1?(x=Math.round(1.5*i.measureText("M").width),O=b-(w-1)/2*x):(x=0,O=b);for(var T=0;T<w;T++){var P=E[T];_&&i.strokeText(P,m,O),v&&i.fillText(P,m,O),O+=x}}i.restore()}},e.prototype._setTextStyle=function(t,e){var n=e.stroke;t.font=e.font,t.strokeStyle=(0,f.colorToString)(n.color,1),t.fillStyle=(0,f.colorToString)(e.fill,1),t.textBaseline=e.textBaseline,t.textAlign=e.textAlign,t.lineWidth=n.width,t.lineCap=n.lineCap,t.lineJoin=n.lineJion},e}(u.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);
}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=r(u),f=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this));return a._map=r,a}return a(e,t),e.prototype.renderFrame=function(t){},e.prototype.clear=function(){},s(e,[{key:"map",get:function(){return this._map}}]),e}(l.default);e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(t){function e(n,r,a,s){o(this,e);var u=i(this,t.call(this,n));return u.frameState=r,u.trasform=s,u.context=a,u}return a(e,t),e}(u.default);e.default=l,t.exports=e.default}])});
//# sourceMappingURL=mk.js.map