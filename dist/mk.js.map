{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///mk.js","webpack:///webpack/bootstrap 9eabc2638e23621fdd98","webpack:///./src/main.js","webpack:///./src/geometry/geometry.js","webpack:///./src/geometry/support/extentutil.js","webpack:///./src/core/baseobject.js","webpack:///./src/core/eventmanager.js","webpack:///./src/meek/browserevent.js","webpack:///./src/meek/eventtype.js","webpack:///./src/data/matrix/transform.js","webpack:///./src/components/component.js","webpack:///./src/geometry/extent.js","webpack:///./src/geometry/polygon.js","webpack:///./src/geometry/support/geometryutil.js","webpack:///./src/core/baseevent.js","webpack:///./src/lyr/featurelayer.js","webpack:///./src/utils/mousekey.js","webpack:///./src/utils/obj.js","webpack:///./src/style/linestyle.js","webpack:///./src/style/style.js","webpack:///./src/utils/domutil.js","webpack:///./src/utils/helpers.js","webpack:///./src/control/control.js","webpack:///./src/geometry/mutilpolygon.js","webpack:///./src/geometry/parallelogram.js","webpack:///./src/geometry/point.js","webpack:///./src/lyr/image/imagestate.js","webpack:///./src/meek/feature.js","webpack:///./src/renderer/render/geomertyrender.js","webpack:///./src/style/textstyle.js","webpack:///./src/utils/array.js","webpack:///./src/utils/math.js","webpack:///./src/geometry/analysis/contains.js","webpack:///./src/geometry/line.js","webpack:///./src/geometry/support/interpolate.js","webpack:///./src/geometry/support/orient.js","webpack:///./src/meek/config.js","webpack:///./src/style/basestyle.js","webpack:///./src/utils/counter.js","webpack:///./src/components/dragpan.js","webpack:///./src/components/drawevent.js","webpack:///./src/components/modifyevent.js","webpack:///./src/components/mousewheelzoom.js","webpack:///./src/components/selectevent.js","webpack:///./src/control/zoom.js","webpack:///./src/core/event.js","webpack:///./src/lyr/baselayer.js","webpack:///./src/lyr/image/imageevent.js","webpack:///./src/lyr/image/singleimage.js","webpack:///./src/lyr/singleimagelayer.js","webpack:///./src/meek/featureevent.js","webpack:///./src/meek/view.js","webpack:///./src/renderer/canvas/layerrenderer.js","webpack:///./src/renderer/rendereventtype.js","webpack:///./src/style/fillstyle.js","webpack:///./src/style/pointstyle.js","webpack:///./src/utils/canvas.js","webpack:///./src/utils/coordinate.js","webpack:///./src/utils/functions.js","webpack:///./src/components/componentdefaults.js","webpack:///./src/components/draw.js","webpack:///./src/components/keyboardhome.js","webpack:///./src/components/keyboardpan.js","webpack:///./src/components/keyboardzoom.js","webpack:///./src/components/kinetic.js","webpack:///./src/components/modify.js","webpack:///./src/components/select.js","webpack:///./src/control/controldefaults.js","webpack:///./src/control/home.js","webpack:///./src/control/zoompercentage.js","webpack:///./src/core/baseimage.js","webpack:///./src/data/json/geojson.js","webpack:///./src/geometry/analysis/intersects.js","webpack:///./src/geometry/analysis/polygonwithhole.js","webpack:///./src/geometry/analysis/splitpolygon.js","webpack:///./src/meek/browsereventhandler.js","webpack:///./src/meek/map.js","webpack:///./src/meek/overlay.js","webpack:///./src/renderer/canvas/canvasrenderer.js","webpack:///./src/renderer/canvas/featurelayerrenderer.js","webpack:///./src/renderer/canvas/imagelayerrenderer.js","webpack:///./src/renderer/render/linerender.js","webpack:///./src/renderer/render/pointrender.js","webpack:///./src/renderer/render/polygonrender.js","webpack:///./src/renderer/render/textrender.js","webpack:///./src/renderer/renderer.js","webpack:///./src/renderer/renderevent.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_config","_counter","_counter2","_helpers","_helpers2","_obj","_obj2","_math","_coordinate","_canvas","_geometryutil","_geometryutil2","_extentutil","_eventtype","_style","_event","_event2","_eventmanager","_eventmanager2","_geometry","_geometry2","_extent","_extent2","_point","_point2","_line","_line2","_polygon","_polygon2","_mutilpolygon","_mutilpolygon2","_parallelogram","_parallelogram2","_imagestate","_imageevent","_singleimage","_singleimage2","_pointstyle","_pointstyle2","_linestyle","_linestyle2","_fillstyle","_fillstyle2","_textstyle","_textstyle2","_featurelayer","_featurelayer2","_singleimagelayer","_singleimagelayer2","_draw","_draw2","_drawevent","_drawevent2","_select","_select2","_modify","_modify2","_dragpan","_dragpan2","_mousewheelzoom","_mousewheelzoom2","_browserevent","_browserevent2","_selectevent","_selectevent2","_featureevent","_featureevent2","_modifyevent","_modifyevent2","_control","_control2","_zoom","_zoom2","_feature","_feature2","_map","_map2","_view","_view2","_overlay","_overlay2","_geojson","_geojson2","_intersects","_intersects2","_splitpolygon","_splitpolygon2","_contains","_contains2","_polygonwithhole","_polygonwithhole2","version","Config","Coordinate","Canvas","Event","SelectEvent","FeatureEvent","ModifyEvent","EventManager","Counter","Helpers","ImageState","ImageEvent","SingleImage","Geometry","Extent","Point","Line","Polygon","MutilPolygon","Parallelogram","Style","PointStyle","LineStyle","FillStyle","TextStyle","FeatureLayer","SingleImageLayer","Draw","DrawEvent","BrowserEvent","EventType","Feature","Map","View","Overlay","GeometryUtil","ExtentUtil","Select","Modify","DragPan","Control","Zoom","Obj","Math","MouseWheelZoom","GeoJSON","intersects","splitPolygonByPolyline","contains","polygonWithHole","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_baseobject","_baseobject2","_BaseObject","_this","stride","pointInExtent","coordinate","containsPoint","extent","intersect","geomtry","getCoordinates","getFormShowPosition","arguments","undefined","getFlatInteriorPoint","containsXY","x","y","move","scale","rotate","angle","anchor","simplify","toJSON","clone","get","UNDEFINED","geometryType","coordinates","fp","sp","f1","f2","f3","LINE","POLYGON","EXTENT","BaseObject","POINT","MULTI_POINT","MULTI_LINE","MULTI_POLYGON","CIRCLE","PARALLELOGRAM","createEmpty","Infinity","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","opt_extent","createOrUpdateEmpty","extendFlatCoordinates","extendXY","min","max","createOrUpdate","minX","minY","maxX","maxY","getCenter","createScaleExtent","center","boundingExtentFromTwoPoints","point1","point2","xmin","ymin","xmax","ymax","boundingExtent","ii","extendCoordinate","getBottomLeft","getBottomRight","getTopRight","getTopLeft","boundingSimpleExtent","point","Array","isArray","buffer","optExtent","minMaxToRing","ring","getHeight","getWidth","updateExtent","geometry","newCoordinates","dragSegments","dragSegment","index","extentCoordinates","segment1","segment2","isVertex","getIntersection","extent1","extent2","intersection","containsExtent","isEmpty","getForViewAndSize","resolution","rotation","size","dx","dy","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","_Event","_id","getUid","_revision","changed","dispatchEvent","CHANGE","getListeners","type","listenerMap","ol_lm","unlistenByKey","removeEventListener","boundListener","listeners","deleteIndex","indexOf","splice","removeListeners","clear","listen","listener","optThis","optOnce","getListenerMap","listenerObj","findListener","callOnce","bindTo","addEventListener","bindListener","push","listenOnce","opt_this","Reflect","deleteProperty","keys","evt","optSetDeleteIndex","map","oriEvent","eventTyle","originalEvent","pixel","getEventPixel","getCoordinateFromPixel","pointerId","preventDefault","stopPropagation","SINGLE_CLICK","CLICK","DBLCLICK","MOUSE_DRAG","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","MOUSE_OVER","MOUSE_OUT","WHEEL","MOUSE_WHEEL","KEYDOWN","KEYPRESS","VIEW_CHANGED","ERROR","LOAD","RESIZE","Transform","tmp_","reset","transform","set","transform2D","opt_dest","dest","j","multiply","transform1","transform2","a1","b1","c1","d1","e1","a2","b2","c2","d2","e2","a","b","d","e","f","setFromArray","apply","translate","compose","dx1","dy1","sx","sy","dx2","dy2","invert","det","determinant","mat","Component","active","_mapRenderKey","targetPointers","_trackedPointers","handlingDownUpSequence","applyHandleEventOption","options","handleMouseEvent","_handleDownEvent","handleDownEvent","_handleDragEvent","handleDragEvent","_handleMoveEvent","handleMoveEvent","_handleUpEvent","handleUpEvent","browserEvent","stopEvent","_updateTrackedPointers","handledUp","handled","shouldStopEvent","_isPointerDraggingEvent","event","getValues","pan","view","delta","currentCenter","zoomByDelta","opt_anchor","opt_duration","currentResolution","constrainResolution","calculateCenterZoom","constrainCenter","zoomWithoutConstraints","getViewDataExtent","_dataExtent","dataExtent","coordinateBeyond","allowCoordinatesBeyondImage","newCoordinate","_active","_Geometry","_xmin","_ymin","_xmax","_ymax","_rings","_flatInteriorPointRevision","_flatInteriorPoint","revision","opts","beyond","minPoint","width","height","newMinPoint","newCoordiante","setCoordinates","getFormShowPosition1","offsetX","offsetY","rings","extentArr","getCoordinateIndex","coord","findIndex","points","abs","_interpolate","_orient","addRing","_this2","coords","outRing","_inOneRing","coordsTemp","slice","inHole","some","px","py","flag","l","tx","ty","flatCenter","centerX","centerY","ends","orientedFlatCoordinates","getOrientedFlatCoordinates","linearRings","forEach","linearRingsAreOriented","orientLinearRings","hasHoles","lastPoint","len","jLen","ringIndex","outRings","newPolygon","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","pointIntersectPoint","pointA","pointB","tolerance","toleranceDistance","distance","squaredDistance","pointIntersectLine","line","path","squaredSegmentDistanceFn","squaredSegmentDistance","find","nowP","nextP","sqrt","t","squaredDistanceToSegment","segment","closestCoordinate","closestOnSegment","equals","coordinate1","coordinate2","coord1","coord2","start","along","linearRingsContainsXY","linearRingContainsXY","wn","getPointInExtendedLineByDistanceFromAB","xa","ya","xb","yb","xab","yab","xbd","xd","yd","geoType","sliceCoords","newCoords","BaseEvent","propagatinoStopped","_baselayer","_baselayer2","_BaseLayer","_features","_styleFunction","_featureChangeKeys","style","features","addFeatures","zIndex","_renderBuffer","renderBufferValue","unlistenByKeyFn","CLEAR","FEATURE_COLLECTION_CHANGED","findFeature","_addFeaturesInner","hasFeature","feature","featureId","_setupChangeEvents","ADD_FEATURE","addFeature","forEachFeatureAtPiexl","frameState","piexl","callback","_getCurrentExtentFeatures","extentFeatures","_getIntersectedFeatures","piexlX","piexlY","viewState","result","filter","removeFeature","delete","REMOVE_FEATURE","featureKey","_handleFeatureChange","loadFeature","newFeatures","pointFeatures","lineFeatures","display","geometryExtent","concat","defaultFunction","createFunction","BaseLayer","singleClick","mouseWheel","noModifierKeys","altKey","metaKey","ctrlKey","shiftKey","targetNotEditable","mapBrowserEvent","tagName","object","values","property","objectToMap","ke","mapToObject","_basestyle","_basestyle2","_BaseStyle","color","alpha","SOLID","lineCap","LineCap","BUTT","lineJion","LineJion","MITER","miterLimit","textStyle","newStyle","_width","_lineCap","_lineJion","_miterLimit","BaseStyle","DASH","DOT","DASHDOT","DASHDOTDOT","NULL","ROUND","SQUARE","BEVEL","_default","white","blue","createDefaultEditing","styles","createDefaultSelecting","outsideLine","insideLine","styleFunction","createCanvasContext2D","optWidth","optHeight","canvas","document","createElement","getContext","outerWidth","element","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","outerHeight","offsetHeight","marginTop","marginBottom","removeNode","node","parentNode","removeChild","removeChildren","lastChild","colorToString","r","g","_domutil","_element","_target","_listenerKeys","overlayContainerStopEvent","appendChild","render","getElementById","_toConsumableArray","arr","arr2","from","_polygons","getPolygon","innerRing","polygon","polygons","onePolygon","endss","orderArray","sort","arr1","lastLen","currLen","flatCenters","centerLinearRingss","linearRingss","linearRingssAreOriented","orientLinearRingss","polygonCoods","iiLen","polygonIndex","allCoords","newMutilPolygon","convertToPolygons","allPolygonCoords","polyCoods","_Polygon","getTheLastPoint","firstPoint","secondPoint","thirdPoint","updateCoordinatesForModification","vertex","oldVertex","dis","oldRingsCoordinates","oldCoordinates","segement","edgeIndex","firstCoord","nowCood","otherCood","newCood1","tempXX","tempYY","tempX2","tempY2","direction","newCood2","xValue","yValue","nx","ny","opt","update","equal","geom","isNaN","extentObj","_x","_y","IDLE","LOADING","LOADED","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","attributes","displayText","_geometryChangeKey","initArribute","textDisplay","styleHighLight","_handleGeometryChanged","_attributesMap","has","forEachAttribute","cloneAttributesMap","newMap","entries","_step$value","renderStyleArr","_displayText","_styleHighLight","newStyles","s","firstStyle","cloneStyle","unshift","borderStyle","oriFont","font","boldFont","split","_display","_textDisplay","_array","_transform","GeomertyRender","context","_context","_pixelCoordinates","renderedTransform","resetRenderOption","equalsTransform","renderStyle","optOptions","text","DEFAULT_FONT","rotateWithView","DEFAULT_SCALE","textAlign","DEFAULT_TEXT_START","textBaseline","DEFAULT_BASE_LINE","fill","DEFAULT_FILL_COLOR","stroke","DEFAULT_STROKE","_text","_font","_rotation","_rotateWithView","_scale","_textAlign","_textBaseline","_fill","_stroke","_offsetX","_offsetY","DEFAULT_TEXT_ALIGN","linearFindNearest","n","stableSort","compareFnc","tmp","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","len1","clamp","lerp","polyGeometryType","isContained","targetGeometryType","polyContainsLine","polyContainsPoly","polyContainsMultiPoly","poly","lineCoords","polygonContainsLinestring","poly2","poly2Type","mutilpolygon","polys","contained","hasOne","_path","addPath","forEachSegment","interiorPoint","fraction","lineString","newLine","me","coors","np","pointX","NaN","pointY","cumulativeLengths","o","flatCentersOffset","intersections","maxSegmentLength","segmentLength","interiorPoints","opt_right","right","isClockwise","linearRingIsClockwise","reverse","edge","DEBUG","DEFAULT_ZOOM_FACTOR","DEFAULT_MAX_ZOOM","DEFAULT_MIN_ZOOM","MOUSE_WHEEL_ZOOM_MAXDELTA","DEFAULT_TILE_SIZE","_color","_alpha","_textStyle","uid","_component","_component2","_mousekey","_Component","lastCentroid","_kinetic","kinetic","_lastPointersCount","_condition","condition","_noKinetic","begin","centroid","deltaX","deltaY","getViewState","add","pointerEvents","clientX","clientY","_baseevent","_baseevent2","_BaseEvent","DRAW_START","DRAWING","DRAW_END","MODIFY_START","MODIFY_END","_delta","_useAnchor","useAnchor","_duration","duration","_lastAnchor","_startTime","_timeout","timeout","_timeoutId","_mode","wheelEvent","wheelDeltaY","now","Date","timeLeft","clearTimeout","setTimeout","_handleWheelZoom","maxDelta","selectedFeatures","SELECT","_Control","className","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","setAttribute","title","createTextNode","outElement","cssClasses","_handleClick","_handleClickIn","_zoomByDelta","newResolution","_pendingRemovals","_listeners","_dispatching","nullFunction","hasListener","optType","propagate","propagationStopped","pendingRemovals","baseOptions","assign","name","visible","datasource","opacity","maxResolution","minResolution","_visible","_opacity","_minResolution","_maxResolution","_datasource","_zIndex","image","Type","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","_baseimage","_baseimage2","_BaseImage","pixelRatio","attributions","src","crossOrigin","imageLoadFunction","_src","domImage","Image","getDomImage","_imageByContext","_imageListenerKeys","state","_imageLoadFunction","opt_context","_domImage","cloneNode","_handleImageError","_unlistenImage","_handleImageLoad","load","BaseImage","_imageevent2","imageExtent","defaultImageLoadFunction","_singleImage","url","_imageSize","imageSize","singleImage","handleImageChange","getImageInternal","imageWidth","imageHeight","targetWidth","ceil","drawImage","_dispatchImageEvent","_attributes","_innerOptions","_applyOptions","resolutionConstraint","_createResolutionConstraint","_zoomFactor","zoomFactor","_resolutions","resolutions","_minZoom","minZoom","centerConstraint","_createCenterConstraint","constraint","rotationConstraint","_createRotationConstraint","_constraints","_calculateCenter","zoom","_originalCenter","_originalResolution","_options","defaultMaxZoom","defaultZoomFactor","defaultMinZoom","defaultTileSize","maxZoom","projection","createSnapToResolutions","defaultMaxResolution","pow","defaultMinResolution","floor","log","createSnapToPower","power","opt_maxLevel","oldLevel","newLevel","reso","z","opt_delta","opt_direction","_center","_resolution","LayerRenderer","layer","_layer","renderedResolution","getTransform","loadImage","imageState","_handleImageChange","renderIfReadyAndVisible","clip","topLeft","topRight","bottomRight","bottomLeft","toPixelTransform","save","rotateAtOffset","beginPath","moveTo","lineTo","prepareFrame","frameStateOpt","composeFrame","postCompose","optTransform","preCompose","RenderEventType","PRERENDER","POSTRENDER","RENDER","_borderStyle","xoffset","yoffset","_size","_xoffset","_yoffset","_angle","CROSS","X","TRIANGLE","cosAngle","sinAngle","functions","TURE","FALSE","componentsDefaults","components","Set","Kinetic","dragPan","mouseWheelZoom","zoomDuration","keyboard","keyborad","KeyboardHome","KeyboardPan","KeyboardZoom","zoomDelta","_kinetic2","_keyboardhome","_keyboardhome2","_keyboardzoom","_keyboardzoom2","_keyboardpan","_keyboardpan2","_functions","_drawLayer","drawLayer","_downPointPx","_finishCoordinate","drawMode","getDrawMode","_sketchCoords","_sketchLine","_finishCondition","finishCondition","_hasFinishConditionOptions","_undoCondition","undoCondition","_hasUndoConditionOptions","_undoStep","freehandUndoStep","_handleKeyboardEvent","_sketchLayer","FeaureLayer","getDefaultStyleFunction","_sketchPoint","_enableSketchPoint","enableSketchPoint","_sketchFeature","_geometryFunction","_sketchLineCoords","_freehand","freehand","_snapTolerance","snapTolerance","_maxLinePoints","maxLinePoints","_maxPolygonPoints","maxPolygonPoints","_minPoints","minPoints","DrawMode","_shouldHandle","_squaredClickTolerance","clickUpTolerance","_finishCheck","pcoordinates","_finishDrawing","undoDrawing","_existInDrawMode","String","modeValue","toUpperCase","val","_geometryFactory","mode","_initGeometryFunction","geometryFunction","opt_geometry","_freehandEnable","buttons","pass","eventType","_addToDrawing","_handleMove","downPx","clickPx","_modifyDrawing","_updateSketchPoint","_startDrawing","_atFinish","_abortDrawing","startPoint","_drawMode","_updateSketchFeatures","last","lastSecondPoint","lstPoint","tempLastRing","lastPoint2","pop","sketchPointGeom","sketchLineGeom","sketchFeature","finishDrawing","MultiPolygon","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","sketchPointgeom","_autoPan","undoStep","polygonDeleteStep","_updateState","isIn","mapValue","addLayer","_defaultCondition","keyCode","_goToHome","orignalCenter","originalCenter","originalResolution","_pixelDelta","pixelDelta","keyEvent","mapUnitsDelta","charCode","charCodeAt","decay","minVelocity","delay","_decay","_minVelocity","_delay","_points","_initialVelocity","lastIndex","firstIndex","atan2","getDistance","_pixelTolerance","pixelTolerance","_movableGeometrys","movableGeometrys","_hasMoveableGeometrys","movableGeometrySet","_deleteCondition","deleteCondition","_defaultDeleteCondition","_vertexEditableCondition","vertexEditableCondition","_edgeEditableCondition","edgeEditableCondition","_snappedToVertex","_snapSegments","_vertexFeature","_lastPixel","_overLayer","_dragSegments","_modified","_changingFeature","_ignoreNextSingleClick","_shouldAddToVertexs","_insertVertices","_downPoint","_currentMovedGeometry","_oldEditedVertex","lastPointerEvent_","_handlePointerMove","removePoint","_lastPointerEvent","willModifyFeatures_","_removeVertex","_compareIndexes","_willModifyFeatures","vertexFeature","insertVertices","filters","_handlePointerAtPixel","_this3","pixelCoordinate","sortByDistance","s1","s2","_pointDistanceToSegment","nodes","_getInExtent","closestSegment","_closestOnSegment","vertexPixel","dist","vertexEditable","MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX","pixel1","pixel2","squaredDist1","squaredDist2","coordinateIndex","_createOrUpdateVertexFeature","_insertVertex","segmentData","depth","MODIFY_SEGMENT_CIRCLE_CENTER_INDEX","setCenter","setRadius","_setGeometryCoordinates","downPoint","modifiedFeature","newSegmentData","tolarance","_ExtentUtil","gometryExtent","bufferExtent","jj","nextPoints","pathExtent","pathBufferExtent","circleGeometry","distanceToCenterSquared","distanceToCircumference","getRadius","isActive","hasMutilSelectedSymbol","_hitTolerance","hitTolerance","_hasSelectedStyle","_multiSelectMode","_selectLayer","_selectFeatures","selectMode","_selectMultiMode","selectMultiMode","_handleCtrlKeyDwon","_handleCtrlKeyUp","_keyPress","selectFeatures","_forEachStyle","_isInSelectFeatures","_watchFeatures","_selectMode","controlDefaults","controls","zoomControl","zoomOptions","homeControl","home","Home","homeOptions","zoomPercentageControl","zoomPercentage","zoomPercentageOptions","_home","_home2","_zoompercentage","_zoompercentage2","homeLabel","homeLabelTip","homeElement","ZoomPercentage","_innerElement","toFixed","html","innerHTML","_attributions","_pixelRatio","_state","optContext","read","json","featuresObj","featureObj","geometryObj","Error","propertiesObj","properties","write","featuresArr","getGeoJSONGeometryType","jsonType","geometry1","geometry2","ext1Arr","ext2Arr","pointIntersectsGeometry","lineIntersectsGeometry","mutilPolygonIntersectsGeometry","polygonIntersectsGeometry","lineIntersectsLine","lineIntersectsPolygon","line1","line2","lineLinearRings1","lineLinearRings2","intersectsByLinearRings","MUTIL_POLYGON","polygonIntersectsPolygon","mutilPoly","mutilPolygonIntersectsPolygon","lineLinearRings","polygon2LinearRings","intersectsByLinearRingsFn","polygonGeometryType","oneRingIntersects","linarRing","LinearRing1","LinearRings2","segs1","getSortedSegments","segs2","seg1","seg1x1","seg1x2","seg1y1","seg1y2","seg2","seg2y1","seg2y2","jlen","segmentsIntersect","byX1","numSeg","segments","x11_21","y11_21","x12_11","y12_11","y22_21","x22_21","n1","n2","along1","along2","segs","seg","source","distanceToSegment","distanceSquaredToSegment","polygonWithHoles","polygon1","polygon2","holePolygon","resultPolygon","holeCoordinates","polygonCoordinates","holeOutRings","polygonOutRings","tempHoleOutRings","tempPolygonOutRings","holeOriented","polygonOutRingOriented","polygonsWithHole","polyWithHole","multiPolygon","targetPolygon","splitLine","lineCoordinates","dividedPointList","findIntersectionPoints","afterInsertLineCoords","insertDiveidePointsToSplitLineCoords","allPartsScliedFromLineCoords","sliceDividedPointFromLine","vertexListAfterDivide","insertDividePointsToCoordinates","results","renewal","featureCollection","arrs","handleHolesForPolygon","isDividedPointSymbol","alreadyUsedSymbol","dividePointSymbol","isInArray","singlePolygonCoords","item","findPartners","parts","ep","newParts","findNextPoint","mlen","goThrough","ePoint","ffpoint","eepoint","endPoint","nextPoint","updataStatus","isInOneSegment","onePoint","otherPoint","allPartsScliedFromLineCoordsTemp","findCount","group","jjlen","fPoint","tp","allParts","singleParts","isDividePointStart","getDividePoints","fP","eP","dp","dfPoint","intersectFrom","fromPoint","dePoint","afterArr","dividePoints","firstPointXY","item1","item2","p1","p2","afterInserted","isInDividedPointList","orialPoint","originPoint","ofPoint","oePoint","toPoint","itemDividedPoint","findOneIntersectionPoints","lineCoordinatesExtent","lineCoordinatesExtentBuffer","ntersectionPoints","intersectPoint","_findOneIntersectionPoints","_loop","intersectionPoints","ntp","intersectIndex","geometryCollection","addHoleToPolygon","needPoly","dividedPoints","BrowserEventHandler","_dragging","_down","_dragListenerKeys","_clickTimeoutId","_mapping","mousedown","_mousedown","mousemove","_mousemove","mouseup","_mouseup","mouseover","_mouseover","mouseout","_mouseout","_registerSource","events","getEvents","eventName","documentDom","_isMoving","newEvent","_emulateClick","bind","_canvasrenderer","_canvasrenderer2","_browsereventhandler","_browsereventhandler2","_componentdefaults","_controldefaults","_frameState","_layers","_toPixelTransform","_toCoordinateTransform","_animationDelayKey","_components","_controls","_createViewport","_overlayContainer","viewport","_overlayContainerStopEvent","overlayEvents","overlayEvent","optionsInner","parseOptionsInner","_renderer","rendererClass","_createBrowserEventHandler","_animationDelay","_renderFrame","layers","component","addComponents","control","addControl","_overlayIdIndex","_overlays","overlays","overlay","_addOverlayInternal","_handleViewChange","_handleMouseWheelEvent","position","overflow","_viewport","_createRenderer","CanvasRenderer","_browserEventHandler","_handleBrowserEvent","keyboardEvent","cpts","cpt","cont","toCoordinateTransform","renderFrame","window","requestAnimationFrame","isRendered","getFeaturesLayer","overlayId","toString","getTargetElement","updateSize","targetElement","computedStyle","parseFloat","viewportPosition","getBoundingClientRect","eventPosition","left","top","pixelPoint","zoomIn","zoomOut","switchToOverview","handleRize","_rendereventtype","_offset","_position","_positioning","_insertFirst","insertFirst","_stopEvent","autoPan","_autoPanAnimation","autoPanAnimation","_autoPanMargin","autoPanMargin","_rendered","_bottom","_left","_right","_top","_mapPostrenderListenerKey","popupEelement","positioning","OverlayPositioning","TOP_LEFT","updatePixelPosition","setVisible","mapSize","updateRenderedPosition","BOTTOM_RIGHT","CENTER_RIGHT","TOP_RIGHT","left_","round","right_","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","BOTTOM_LEFT","top_","bottom","bottom_","CENTER_LEFT","_panIntoView","mapRect","_getRect","clientHeight","clientWidth","overlayRect","margin","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","box","pageXOffset","pageYOffset","_setElement","pelement","_overlayId","_popupEelement","container","overlayContainer","insertBefore","childNodes","_renderer2","_featurelayerrenderer","_featurelayerrenderer2","_imagelayerrenderer","_imagelayerrenderer2","_renderevent","_renderevent2","_Renderer","_rendererVisible","_layerRenderers","_addToContainer","canvasWidth","canvasHeight","sortByZIndex","updateTransform","_dispatchComposeEvent","layerRender","getLayerRenderer","layerKey","layerRenderer","createLayerRenderer","ImageLayerRenderer","FeatureLayerRenderer","coordinateToPixelTransform","pixelToCoordinateTransform","state1","state2","composeEvent","RenderEvent","Renderer","_layerrenderer","_layerrenderer2","_pointrender","_pointrender2","_linerender","_linerender2","_polygonrender","_polygonrender2","_textrender","_textrender2","_LayerRenderer","_geometryRenderGroup","_textRender","TextRender","_maxExtent","_renderFeatures","_renderResolution","_renderExtent","_renderRevision","_cacheableThisTime","_getGeometryRender","GeometryRender","_renderFeaturesInOrder","_calculaterFeaturesFontSize","originResolution","oriIndex","curIndex","deep","fontStr","frameExtent","layerRevision","featureLayerRenderBuffer","renderBuffer","renderExtent","_clipExtent","_cloneRenderStyle","geomertyRender","_resetRender","restore","rs","flatClipCoords","getClipCoords","maxExtent","PointRender","LineRender","PolygonRender","_image","_imageTransform","coordinateToCanvasPixelTransform","viewCenter","viewResolution","imageLayer","renderedExtent","imageResolution","imagePixelRatio","imageTransform","clipped","globalAlpha","dw","dh","imageSmoothingEnabled","_geomertyrender","_geomertyrender2","_GeometryRender","ctx","styleArray","geometryCoordinates","styleObj","renderOptions","strokeStyle","hasDash","drawLine","renderOpt","lineWidth","lineJoin","setLineDash","closePath","geomerty","pixelCoordinates","radius","fillStyle","drawCircle","arc","PI","lineDash","geometryCoordinages","renderCoords","polygonCoords","renderMutilPolygon","renderPolygon","drawStylePolygon","k","kk","cd","_setTextStyle","lines","numLines","fontSize","lineY","measureText","lineIndex","lineText","strokeText","fillText","contianer","trasform"],"mappings":"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","file":"mk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mk\"] = factory();\n\telse\n\t\troot[\"mk\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mk\"] = factory();\n\telse\n\t\troot[\"mk\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"<%=baseUrl%>/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*********************!*\\\n  !*** ./src/main.js ***!\n  \\*********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(/*! meek/config */ 34);\n\t\n\tvar _counter = __webpack_require__(/*! utils/counter */ 36);\n\t\n\tvar _counter2 = _interopRequireDefault(_counter);\n\t\n\tvar _helpers = __webpack_require__(/*! utils/helpers */ 19);\n\t\n\tvar _helpers2 = _interopRequireDefault(_helpers);\n\t\n\tvar _obj = __webpack_require__(/*! utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _math = __webpack_require__(/*! utils/math */ 29);\n\t\n\tvar _coordinate = __webpack_require__(/*! utils/coordinate */ 55);\n\t\n\tvar _canvas = __webpack_require__(/*! utils/canvas */ 54);\n\t\n\tvar _geometryutil = __webpack_require__(/*! geometry/support/geometryutil */ 11);\n\t\n\tvar _geometryutil2 = _interopRequireDefault(_geometryutil);\n\t\n\tvar _extentutil = __webpack_require__(/*! geometry/support/extentutil */ 2);\n\t\n\tvar _eventtype = __webpack_require__(/*! meek/eventtype */ 6);\n\t\n\tvar _style = __webpack_require__(/*! style/style */ 17);\n\t\n\tvar _event = __webpack_require__(/*! core/event */ 43);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _eventmanager = __webpack_require__(/*! core/eventmanager */ 4);\n\t\n\tvar _eventmanager2 = _interopRequireDefault(_eventmanager);\n\t\n\tvar _geometry = __webpack_require__(/*! geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _point = __webpack_require__(/*! geometry/point */ 23);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _line = __webpack_require__(/*! geometry/line */ 31);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _polygon = __webpack_require__(/*! geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! geometry/mutilpolygon */ 21);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _parallelogram = __webpack_require__(/*! geometry/parallelogram */ 22);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _imagestate = __webpack_require__(/*! lyr/image/imagestate */ 24);\n\t\n\tvar _imageevent = __webpack_require__(/*! lyr/image/imageevent */ 45);\n\t\n\tvar _singleimage = __webpack_require__(/*! lyr/image/singleimage */ 46);\n\t\n\tvar _singleimage2 = _interopRequireDefault(_singleimage);\n\t\n\tvar _pointstyle = __webpack_require__(/*! style/pointstyle */ 53);\n\t\n\tvar _pointstyle2 = _interopRequireDefault(_pointstyle);\n\t\n\tvar _linestyle = __webpack_require__(/*! style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _fillstyle = __webpack_require__(/*! style/fillstyle */ 52);\n\t\n\tvar _fillstyle2 = _interopRequireDefault(_fillstyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! style/textstyle */ 27);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tvar _featurelayer = __webpack_require__(/*! lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _singleimagelayer = __webpack_require__(/*! lyr/singleimagelayer */ 47);\n\t\n\tvar _singleimagelayer2 = _interopRequireDefault(_singleimagelayer);\n\t\n\tvar _draw = __webpack_require__(/*! components/draw */ 58);\n\t\n\tvar _draw2 = _interopRequireDefault(_draw);\n\t\n\tvar _drawevent = __webpack_require__(/*! components/drawevent */ 38);\n\t\n\tvar _drawevent2 = _interopRequireDefault(_drawevent);\n\t\n\tvar _select = __webpack_require__(/*! components/select */ 64);\n\t\n\tvar _select2 = _interopRequireDefault(_select);\n\t\n\tvar _modify = __webpack_require__(/*! components/modify */ 63);\n\t\n\tvar _modify2 = _interopRequireDefault(_modify);\n\t\n\tvar _dragpan = __webpack_require__(/*! components/dragpan */ 37);\n\t\n\tvar _dragpan2 = _interopRequireDefault(_dragpan);\n\t\n\tvar _mousewheelzoom = __webpack_require__(/*! components/mousewheelzoom */ 40);\n\t\n\tvar _mousewheelzoom2 = _interopRequireDefault(_mousewheelzoom);\n\t\n\tvar _browserevent = __webpack_require__(/*! meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _selectevent = __webpack_require__(/*! components/selectevent */ 41);\n\t\n\tvar _selectevent2 = _interopRequireDefault(_selectevent);\n\t\n\tvar _featureevent = __webpack_require__(/*! meek/featureevent */ 48);\n\t\n\tvar _featureevent2 = _interopRequireDefault(_featureevent);\n\t\n\tvar _modifyevent = __webpack_require__(/*! components/modifyevent */ 39);\n\t\n\tvar _modifyevent2 = _interopRequireDefault(_modifyevent);\n\t\n\tvar _control = __webpack_require__(/*! control/control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _zoom = __webpack_require__(/*! control/zoom */ 42);\n\t\n\tvar _zoom2 = _interopRequireDefault(_zoom);\n\t\n\tvar _feature = __webpack_require__(/*! meek/feature */ 25);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _map = __webpack_require__(/*! meek/map */ 74);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _view = __webpack_require__(/*! meek/view */ 49);\n\t\n\tvar _view2 = _interopRequireDefault(_view);\n\t\n\tvar _overlay = __webpack_require__(/*! meek/overlay */ 75);\n\t\n\tvar _overlay2 = _interopRequireDefault(_overlay);\n\t\n\tvar _geojson = __webpack_require__(/*! data/json/geojson */ 69);\n\t\n\tvar _geojson2 = _interopRequireDefault(_geojson);\n\t\n\tvar _intersects = __webpack_require__(/*! geometry/analysis/intersects */ 70);\n\t\n\tvar _intersects2 = _interopRequireDefault(_intersects);\n\t\n\tvar _splitpolygon = __webpack_require__(/*! geometry/analysis/splitpolygon */ 72);\n\t\n\tvar _splitpolygon2 = _interopRequireDefault(_splitpolygon);\n\t\n\tvar _contains = __webpack_require__(/*! geometry/analysis/contains */ 30);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tvar _polygonwithhole = __webpack_require__(/*! geometry/analysis/polygonwithhole */ 71);\n\t\n\tvar _polygonwithhole2 = _interopRequireDefault(_polygonwithhole);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Created by zypc on 2016/11/28.\n\t */\n\t\n\tvar version = (\"2.3.0\");\n\t\n\texports.default = {\n\t  Config: _config.Config,\n\t  Coordinate: _coordinate.Coordinate,\n\t  Canvas: _canvas.Canvas,\n\t  Event: _event2.default,\n\t  SelectEvent: _selectevent2.default,\n\t  FeatureEvent: _featureevent2.default,\n\t  ModifyEvent: _modifyevent2.default,\n\t  EventManager: _eventmanager2.default,\n\t  Counter: _counter2.default,\n\t  Helpers: _helpers2.default,\n\t  ImageState: _imagestate.ImageState,\n\t  ImageEvent: _imageevent.ImageEvent,\n\t  SingleImage: _singleimage2.default,\n\t  Geometry: _geometry2.default,\n\t  Extent: _extent2.default,\n\t  Point: _point2.default,\n\t  Line: _line2.default,\n\t  Polygon: _polygon2.default,\n\t  MutilPolygon: _mutilpolygon2.default,\n\t  Parallelogram: _parallelogram2.default,\n\t  Style: _style.Style,\n\t  PointStyle: _pointstyle2.default,\n\t  LineStyle: _linestyle2.default,\n\t  FillStyle: _fillstyle2.default,\n\t  TextStyle: _textstyle2.default,\n\t  FeatureLayer: _featurelayer2.default,\n\t  SingleImageLayer: _singleimagelayer2.default,\n\t  Draw: _draw2.default,\n\t  DrawEvent: _drawevent2.default,\n\t  BrowserEvent: _browserevent2.default,\n\t  EventType: _eventtype.EventType,\n\t  Feature: _feature2.default,\n\t  Map: _map2.default,\n\t  View: _view2.default,\n\t  Overlay: _overlay2.default,\n\t  GeometryUtil: _geometryutil2.default,\n\t  ExtentUtil: _extentutil.ExtentUtil,\n\t  Select: _select2.default,\n\t  Modify: _modify2.default,\n\t  DragPan: _dragpan2.default,\n\t  Control: _control2.default,\n\t  Zoom: _zoom2.default,\n\t  Obj: _obj2.default,\n\t  Math: _math.Math,\n\t  MouseWheelZoom: _mousewheelzoom2.default,\n\t  GeoJSON: _geojson2.default,\n\t  version: version,\n\t  intersects: _intersects2.default,\n\t  splitPolygonByPolyline: _splitpolygon2.default,\n\t  contains: _contains2.default,\n\t  polygonWithHole: _polygonwithhole2.default\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/*!**********************************!*\\\n  !*** ./src/geometry/geometry.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\t/**\n\t * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n\t *\n\t * @class Geometry\n\t * @extends BaseObject\n\t * @module geometry\n\t * @constructor\n\t */\n\tvar Geometry = function (_BaseObject) {\n\t  _inherits(Geometry, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   */\n\t  function Geometry() {\n\t    _classCallCheck(this, Geometry);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._extent = null;\n\t\n\t    /**\n\t     * @type {number}\n\t     */\n\t    _this.stride = 2;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取图形的类型\n\t   *\n\t   * @property geometryType\n\t   * @type {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断传入的点坐标是否在图形内\n\t   *\n\t   * @method pointInExtent\n\t   * @param coordinate {Array} 包含x, y的点数组\n\t   * @return {Boolean} ture returned if success, false otherwise.\n\t   */\n\t  Geometry.prototype.pointInExtent = function pointInExtent(coordinate) {\n\t    return _extentutil.ExtentUtil.containsPoint(this.extent, coordinate);\n\t  };\n\t\n\t  /**\n\t   * 判断是否相交\n\t   *\n\t   * intersect\n\t   * @param geomtry {Geometry}\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Geometry.prototype.intersect = function intersect(geomtry) {\n\t    // eslint-disable-line no-unused-vars\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取图形的坐标信息\n\t   * @abstract\n\t   * @method getCoordinates\n\t   * @return {Array} 返回坐标数组\n\t   */\n\t\n\t\n\t  Geometry.prototype.getCoordinates = function getCoordinates() {\n\t    return [];\n\t  };\n\t\n\t  /**\n\t   * 计算表单显示的坐标\n\t   *\n\t   *  @method getFormShowPosition\n\t   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n\t   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n\t   *  @return {Array} 返回点坐标的数组表达方式\n\t   *  @example\n\t   *\n\t   *      var point = geometry.getFormShowPosition(10, 10)\n\t   *      Form.position = point\n\t   */\n\t\n\t\n\t  Geometry.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    return [];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 计算线的平面内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns { Array }\n\t   */\n\t\n\t\n\t  Geometry.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    return [];\n\t  };\n\t\n\t  /**\n\t   * 判断当前图形是否包含一个点\n\t   *\n\t   * @abstract\n\t   * @method containsXY\n\t   * @param x {Number} x 坐标信息\n\t   * @param y {Number} y 坐标信息\n\t   * @return {Boolean} ture returned if contains, false otherwise\n\t   */\n\t\n\t\n\t  Geometry.prototype.containsXY = function containsXY(x, y) {\n\t    return true;\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 移动改图形，移动图形，需要传递x，y的移动量\n\t   *\n\t   * @method move\n\t   * @abstract\n\t   * @param x {Number} x 坐标信息\n\t   * @param y {Number} y 坐标信息\n\t   */\n\t\n\t\n\t  Geometry.prototype.move = function move() {\n\t    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var opts = arguments[2];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 定义对图形本身的缩放方法\n\t   *\n\t   * @method scale\n\t   * @abstract\n\t   * @param scale {Number} 缩放比率\n\t   * @param origin {Array} 缩放参考点\n\t   */\n\t\n\t\n\t  Geometry.prototype.scale = function scale() {\n\t    var _scale = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\t\n\t    var origin = arguments[1];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 定义图形本身的旋转方法\n\t   *\n\t   * @method rotate\n\t   * @abstract\n\t   * @param angle {Number} 旋转的角度\n\t    * @param anchor {Object}\n\t   */\n\t\n\t\n\t  Geometry.prototype.rotate = function rotate(angle, anchor) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 创建一个简化后的图形副本\n\t   *\n\t   * @method simplify\n\t   * @abstract\n\t   * @param tolerance {Number} 阈值\n\t   */\n\t\n\t\n\t  Geometry.prototype.simplify = function simplify() {\n\t    var tolerance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 将图形转换成json格式\n\t   *\n\t   * @method toJSON\n\t   * @abstrct\n\t   */\n\t\n\t\n\t  Geometry.prototype.toJSON = function toJSON() {};\n\t\n\t  /**\n\t   * 克隆一个图形副本\n\t   *\n\t   * @method clone\n\t   * @abstract\n\t   */\n\t\n\t\n\t  Geometry.prototype.clone = function clone() {};\n\t\n\t  _createClass(Geometry, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return Geometry.UNDEFINED;\n\t    }\n\t\n\t    /**\n\t     * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t     * 除去点意外，任何图形都有最小外接矩形\n\t     *\n\t     * @property extent\n\t     * @type {mk.Extent}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取图形是否是逆时针\n\t     *\n\t     * @property anticlockwise\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'anticlockwise',\n\t    get: function get() {\n\t      var geometryType = this.geometryType;\n\t      var coordinates = this.getCoordinates();\n\t\n\t      var fp = void 0,\n\t          sp = void 0,\n\t          f1 = void 0,\n\t          f2 = void 0,\n\t          f3 = void 0;\n\t\n\t      if (geometryType === Geometry.LINE) {\n\t        f1 = [0, 0];\n\t        f2 = coordinates[0];\n\t        f3 = coordinates[1];\n\t      } else if (geometryType === Geometry.POLYGON || geometryType === Geometry.EXTENT) {\n\t        f1 = coordinates[0];\n\t        f2 = coordinates[1];\n\t        f3 = coordinates[2];\n\t      }\n\t\n\t      fp = [f2[0] - f1[0], f2[1] - f1[1]];\n\t      sp = [f3[0] - f2[0], f3[1] - f2[1]];\n\t\n\t      return fp[0] * sp[1] - sp[0] * fp[1] < 0;\n\t    }\n\t  }]);\n\t\n\t  return Geometry;\n\t}(_baseobject2.default);\n\t\n\t/**\n\t * 点类型\n\t *\n\t * @property POINT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = Geometry;\n\tGeometry.POINT = 'point';\n\t\n\t/**\n\t * 多点类型\n\t *\n\t * @property MULTI_POINT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_POINT = 'multi_point';\n\t\n\t/**\n\t * 线类型\n\t *\n\t * @property LINE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.LINE = 'line';\n\t\n\t/**\n\t * 多线类型\n\t *\n\t * @property MULTI_LINE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_LINE = 'multi_line';\n\t\n\t/**\n\t * 多边形类型\n\t *\n\t * @property POLYGON\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.POLYGON = 'polygon';\n\t\n\t/**\n\t * 多个多边形类型\n\t *\n\t * @property MULTI_POLYGON\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_POLYGON = 'multi_polygon';\n\t\n\t/**\n\t * 矩形类型\n\t *\n\t * @property EXTENT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.EXTENT = 'extent';\n\t\n\t/**\n\t * 圆类型\n\t *\n\t * @property CIRCLE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.CIRCLE = 'circle';\n\t\n\t/**\n\t * 定义平行四边形图形\n\t * @type {string}\n\t */\n\tGeometry.PARALLELOGRAM = 'parallelogram';\n\t\n\t/**\n\t * 未定义\n\t *\n\t * @property UNDEFINED\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.UNDEFINED = 'undefined';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/*!********************************************!*\\\n  !*** ./src/geometry/support/extentutil.js ***!\n  \\********************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/5/24.\n\t */\n\t\n\tvar ExtentUtil = exports.ExtentUtil = {};\n\t\n\t/**\n\t * 创建一个空矩形\n\t *\n\t * @method createEmpty\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.createEmpty = function () {\n\t  return [Infinity, Infinity, -Infinity, -Infinity];\n\t};\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param opt_extent\n\t */\n\tExtentUtil.createOrUpdateFromFlatCoordinates = function (flatCoordinates, offset, end, stride, opt_extent) {\n\t  var extent = ExtentUtil.createOrUpdateEmpty(opt_extent);\n\t  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n\t};\n\t\n\tvar extendXY = function extendXY(extent, x, y) {\n\t  extent[0] = Math.min(extent[0], x);\n\t  extent[1] = Math.min(extent[1], y);\n\t  extent[2] = Math.max(extent[2], x);\n\t  extent[3] = Math.max(extent[3], y);\n\t};\n\t\n\tvar extendFlatCoordinates = function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n\t  for (; offset < end; offset += stride) {\n\t    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n\t  }\n\t\n\t  return extent;\n\t};\n\t\n\t/**\n\t *\n\t * @param opt_extent\n\t * @returns {*}\n\t */\n\tExtentUtil.createOrUpdateEmpty = function (opt_extent) {\n\t  return ExtentUtil.createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n\t};\n\t\n\t/**\n\t * 创建或更新矩形\n\t *\n\t * @method createOrUpdate\n\t * @param minX {Number}\n\t * @param minY {Number}\n\t * @param maxX {Number}\n\t * @param maxY {Number}\n\t * @param opt_extent {Array}\n\t * @returns {*}\n\t */\n\tExtentUtil.createOrUpdate = function (minX, minY, maxX, maxY, opt_extent) {\n\t  if (opt_extent) {\n\t    opt_extent[0] = minX;\n\t    opt_extent[1] = minY;\n\t    opt_extent[2] = maxX;\n\t    opt_extent[3] = maxY;\n\t    return opt_extent;\n\t  } else {\n\t    return [minX, minY, maxX, maxY];\n\t  }\n\t};\n\t\n\t/**\n\t * 获取矩形的中心点\n\t *\n\t * @method getCenter\n\t * @param extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getCenter = function (extent) {\n\t  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n\t};\n\t\n\t/**\n\t * Create an empty extent.\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.createScaleExtent = function (center, value) {\n\t  return [center.x - value, center.y - value, center.x + value, center.y + value];\n\t};\n\t\n\t/**\n\t *\n\t * @param point1\n\t * @param point2\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n\t  var xmin = 0,\n\t      ymin = 0,\n\t      xmax = 0,\n\t      ymax = 0;\n\t\n\t  if (point1[0] > point2[0]) {\n\t    xmin = point2[0];\n\t    xmax = point1[0];\n\t  } else {\n\t    xmin = point1[0];\n\t    xmax = point2[0];\n\t  }\n\t\n\t  if (point1[1] > point2[1]) {\n\t    ymin = point2[1];\n\t    ymax = point1[1];\n\t  } else {\n\t    ymin = point1[1];\n\t    ymax = point2[1];\n\t  }\n\t\n\t  return [xmin, ymin, xmax, ymax];\n\t};\n\t\n\t/**\n\t * 通过坐标数据构建矩形\n\t *\n\t * @method boundingExtent\n\t * @param extent\n\t * @param coordinate\n\t */\n\tExtentUtil.boundingExtent = function (coordinates) {\n\t  var extent = ExtentUtil.createEmpty();\n\t\n\t  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n\t    ExtentUtil.extendCoordinate(extent, coordinates[i]);\n\t  }\n\t\n\t  return [ExtentUtil.getBottomLeft(extent), ExtentUtil.getBottomRight(extent), ExtentUtil.getTopRight(extent), ExtentUtil.getTopLeft(extent), ExtentUtil.getBottomLeft(extent)];\n\t};\n\t\n\t/**\n\t * Build an extent that includes all given coordinates.\n\t * @param extent\n\t * @param coordinate\n\t */\n\tExtentUtil.boundingSimpleExtent = function (coordinates) {\n\t  var extent = ExtentUtil.createEmpty();\n\t\n\t  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n\t    ExtentUtil.extendCoordinate(extent, coordinates[i]);\n\t  }\n\t\n\t  return extent;\n\t};\n\t\n\t/**\n\t * 通过坐标更新矩形\n\t *\n\t * @method extendCoordinate\n\t * @param extent {Geometry}\n\t * @param coordinate {Array}\n\t */\n\tExtentUtil.extendCoordinate = function (extent, coordinate) {\n\t  if (coordinate[0] < extent[0]) {\n\t    extent[0] = coordinate[0];\n\t  }\n\t\n\t  if (coordinate[0] > extent[2]) {\n\t    extent[2] = coordinate[0];\n\t  }\n\t\n\t  if (coordinate[1] < extent[1]) {\n\t    extent[1] = coordinate[1];\n\t  }\n\t\n\t  if (coordinate[1] > extent[3]) {\n\t    extent[3] = coordinate[1];\n\t  }\n\t};\n\t\n\t/**\n\t * 获取矩形右侧线段坐标\n\t *\n\t * getBottomRight\n\t * @param extent {Geometry}\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getBottomRight = function (extent) {\n\t  return [extent[2], extent[1]];\n\t};\n\t\n\t/**\n\t * 获取矩形左侧线段坐标\n\t *\n\t * getBottomLef\n\t * @param extent {Geometry}\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getBottomLeft = function (extent) {\n\t  return [extent[0], extent[1]];\n\t};\n\t\n\t/**\n\t * Get the top right coordinate of an extent\n\t * extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getTopRight = function (extent) {\n\t  return [extent[2], extent[3]];\n\t};\n\t\n\t/**\n\t * Get the top left coordinate of an extent\n\t *  extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getTopLeft = function (extent) {\n\t  return [extent[0], extent[3]];\n\t};\n\t\n\t/**\n\t * 判断点是否在矩形上\n\t *\n\t * @method containsPoint\n\t * @param extent {Geometry}\n\t * @param point {Array}\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.containsPoint = function (extent, point) {\n\t  var x = point[0];\n\t  var y = point[1];\n\t\n\t  if (Array.isArray(extent)) {\n\t    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n\t  } else {\n\t    return extent.xmin - 1 <= x && x <= extent.xmax + 1 && extent.ymin - 1 <= y && y <= extent.ymax + 1;\n\t  }\n\t};\n\t\n\t/**\n\t * Return extent increased by the provided value.\n\t * @param extent\n\t * @param value\n\t * @param optExtent\n\t * @returns {*}\n\t */\n\tExtentUtil.buffer = function (extent, value, optExtent) {\n\t  if (optExtent) {\n\t    optExtent[0] = extent[0] - value;\n\t    optExtent[1] = extent[1] - value;\n\t    optExtent[2] = extent[2] + value;\n\t    optExtent[3] = extent[3] + value;\n\t    return optExtent;\n\t  } else {\n\t    return [extent[0] - value, extent[1] - value, extent[2] + value, extent[3] + value];\n\t  }\n\t};\n\t\n\t/**\n\t * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n\t * @param xmin\n\t * @param ymin\n\t * @param xmax\n\t * @param ymax\n\t * @returns {[*,*,*,*,*]}\n\t */\n\tExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n\t  var ring = [[xmin, ymin], [xmax, ymin], [xmax, ymax], [xmin, ymax], [xmin, ymin]];\n\t\n\t  return ring;\n\t};\n\t\n\t/**\n\t * 获取图形的高\n\t *\n\t * @method getHeight\n\t * @param extent {Geometry}\n\t * @returns {Number}\n\t */\n\tExtentUtil.getHeight = function (extent) {\n\t  return extent[3] - extent[1];\n\t};\n\t\n\t/**\n\t * 获取图形的宽\n\t *\n\t * @method getWidth\n\t * @param extent {Geometry}\n\t * @returns {Number}\n\t */\n\tExtentUtil.getWidth = function (extent) {\n\t  return extent[2] - extent[0];\n\t};\n\t\n\t/**\n\t * 矩形坐标点更新\n\t *\n\t * @method updateExtent\n\t * @param geometry {Geometry}\n\t * @param newCoordinates {Array}\n\t * @param dragSegments\n\t * @returns {Array}\n\t */\n\tExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n\t  var dragSegment = dragSegments[0];\n\t  var index = dragSegment.index;\n\t  var extentCoordinates = geometry.getCoordinates();\n\t  var segment1 = extentCoordinates[index];\n\t  var segment2 = extentCoordinates[index + 1];\n\t\n\t  var isVertex = dragSegment.isVertex;\n\t  if (isVertex) {\n\t    if (index === 0 || index === 4) {\n\t      extentCoordinates[0] = newCoordinates;\n\t      extentCoordinates[4] = newCoordinates;\n\t      extentCoordinates[1][1] = newCoordinates[1];\n\t      extentCoordinates[3][0] = newCoordinates[0];\n\t    } else if (index === 1) {\n\t      extentCoordinates[1] = newCoordinates;\n\t\n\t      extentCoordinates[2][0] = newCoordinates[0];\n\t      extentCoordinates[0][1] = newCoordinates[1];\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    } else if (index === 2) {\n\t      extentCoordinates[2] = newCoordinates;\n\t      extentCoordinates[1][0] = newCoordinates[0];\n\t      extentCoordinates[3][1] = newCoordinates[1];\n\t    } else if (index === 3) {\n\t      extentCoordinates[3] = newCoordinates;\n\t      extentCoordinates[2][1] = newCoordinates[1];\n\t      extentCoordinates[0][0] = newCoordinates[0];\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    }\n\t  } else {\n\t    if (segment1[0] === segment2[0]) {\n\t      extentCoordinates[index][0] = newCoordinates[0];\n\t      extentCoordinates[index + 1][0] = newCoordinates[0];\n\t    }\n\t\n\t    if (segment1[1] === segment2[1]) {\n\t      extentCoordinates[index][1] = newCoordinates[1];\n\t      extentCoordinates[index + 1][1] = newCoordinates[1];\n\t    }\n\t\n\t    if (index === 3) {\n\t      extentCoordinates[0] = extentCoordinates[4];\n\t    }\n\t    if (index === 0) {\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    }\n\t  }\n\t\n\t  return extentCoordinates;\n\t};\n\t\n\t/**\n\t *\n\t * @param extent1\n\t * @param extent2\n\t * @param opt_extent\n\t * @returns {(*|*|*|*)[]}\n\t */\n\tExtentUtil.getIntersection = function (extent1, extent2, opt_extent) {\n\t  var intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty();\n\t  if (ExtentUtil.intersects(extent1, extent2)) {\n\t    if (extent1[0] > extent2[0]) {\n\t      intersection[0] = extent1[0];\n\t    } else {\n\t      intersection[0] = extent2[0];\n\t    }\n\t\n\t    if (extent1[1] > extent2[1]) {\n\t      intersection[1] = extent1[1];\n\t    } else {\n\t      intersection[1] = extent2[1];\n\t    }\n\t\n\t    if (extent1[2] < extent2[2]) {\n\t      intersection[2] = extent1[2];\n\t    } else {\n\t      intersection[2] = extent2[2];\n\t    }\n\t\n\t    if (extent1[3] < extent2[3]) {\n\t      intersection[3] = extent1[3];\n\t    } else {\n\t      intersection[3] = extent2[3];\n\t    }\n\t  }\n\t\n\t  return intersection;\n\t};\n\t\n\t/**\n\t * 判断两个矩形是否相交\n\t *\n\t * @method intersects\n\t * @param extent1 {Geometry}\n\t * @param extent2 {Geometry}\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.intersects = function (extent1, extent2) {\n\t  return extent1[0] <= extent2[2] && extent1[2] >= extent2[0] && extent1[1] <= extent2[3] && extent1[3] >= extent2[1];\n\t};\n\t\n\t/**\n\t * 判断矩形是否包含在另一个矩形中\n\t *\n\t * @method containsExtent\n\t * @param extent1\n\t * @param extent2\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.containsExtent = function (extent1, extent2) {\n\t  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] && extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n\t};\n\t\n\t/**\n\t *\n\t * @param extent\n\t * @returns {boolean}\n\t */\n\tExtentUtil.isEmpty = function (extent) {\n\t  return extent[2] < extent[0] || extent[3] < extent[1];\n\t};\n\t\n\t/**\n\t *\n\t * @param center\n\t * @param resolution\n\t * @param rotation\n\t * @param size\n\t * @param opt_extent\n\t * @returns {*}\n\t */\n\tExtentUtil.getForViewAndSize = function (center, resolution, rotation, size, opt_extent) {\n\t  var dx = resolution * size[0] / 2;\n\t  var dy = resolution * size[1] / 2;\n\t  var cosRotation = Math.cos(rotation);\n\t  var sinRotation = Math.sin(rotation);\n\t  var xCos = dx * cosRotation;\n\t  var xSin = dx * sinRotation;\n\t  var yCos = dy * cosRotation;\n\t  var ySin = dy * sinRotation;\n\t  var x = center[0];\n\t  var y = center[1];\n\t  var x0 = x - xCos + ySin;\n\t  var x1 = x - xCos - ySin;\n\t  var x2 = x + xCos - ySin;\n\t  var x3 = x + xCos + ySin;\n\t  var y0 = y - xSin - yCos;\n\t  var y1 = y - xSin + yCos;\n\t  var y2 = y + xSin + yCos;\n\t  var y3 = y + xSin - yCos;\n\t\n\t  return ExtentUtil.createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n\t};\n\t\n\texports.default = {\n\t  ExtentUtil: ExtentUtil\n\t};\n\n/***/ }),\n/* 3 */\n/*!********************************!*\\\n  !*** ./src/core/baseobject.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _event = __webpack_require__(/*! ./event */ 43);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _counter = __webpack_require__(/*! ../utils/counter */ 36);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t// The BaseObject is a base class that only can be inherited, not be instanced.\n\t\n\t\n\t/**\n\t * 对象基类，所有子类原则上要继承该类。\n\t *\n\t * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n\t *\n\t * @class BaseObject\n\t * @extends Event\n\t * @constructor\n\t * @module core\n\t */\n\tvar BaseObject = function (_Event) {\n\t  _inherits(BaseObject, _Event);\n\t\n\t  /**\n\t   * Create a BaseObject\n\t   *\n\t   * 构造函数\n\t   *\n\t   * @consructor\n\t   */\n\t  function BaseObject() {\n\t    _classCallCheck(this, BaseObject);\n\t\n\t    /**\n\t     * ID\n\t     *\n\t     * @property id\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Event.call(this));\n\t\n\t    _this._id = (0, _counter.getUid)();\n\t\n\t    /**\n\t     * 版本号\n\t     *\n\t     * @property revision\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._revision = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 此方法用于派发map渲染事件\n\t   *\n\t   * @example this.changed() | super.changed()\n\t   *\n\t   * @method changed\n\t   */\n\t\n\t\n\t  BaseObject.prototype.changed = function changed() {\n\t    ++this._revision;\n\t    this.dispatchEvent(_eventtype.EventType.CHANGE);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * ID属性，用于获取该对象的ID编号\n\t   *\n\t   * @property id\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  _createClass(BaseObject, [{\n\t    key: 'id',\n\t    get: function get() {\n\t      return this._id;\n\t    }\n\t\n\t    /**\n\t     *\n\t     * 地图渲染的版本号\n\t     *\n\t     * @property revision\n\t     * @type {Number}\n\t     * @returns {Number} the revision id\n\t     */\n\t\n\t  }, {\n\t    key: 'revision',\n\t    get: function get() {\n\t      return this._revision;\n\t    }\n\t  }]);\n\t\n\t  return BaseObject;\n\t}(_event2.default);\n\t\n\texports.default = BaseObject;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 4 */\n/*!**********************************!*\\\n  !*** ./src/core/eventmanager.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getListeners = getListeners;\n\texports.unlistenByKey = unlistenByKey;\n\texports.listen = listen;\n\texports.listenOnce = listenOnce;\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * 根据事件标识和监听对象获取该对象上的事件监听函数列表\r\n\t *\r\n\t * @method getListeners\r\n\t * @param target\r\n\t * @param type\r\n\t * @returns {Undefined}\r\n\t */\n\tfunction getListeners(target, type) {\n\t  var listenerMap = target.ol_lm;\n\t  return listenerMap ? listenerMap[type] : undefined;\n\t}\n\t\n\t/**\r\n\t * 根据事件标示和事件对象，移除全部事件监听\r\n\t *\r\n\t * @param target\r\n\t * @param type\r\n\t */\n\t/**\r\n\t * Created by zypc on 2016/11/17.\r\n\t */\n\t\n\tvar removeListeners = function removeListeners(target, type) {\n\t  var listeners = getListeners(target, type);\n\t  if (listeners) {\n\t    for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t      target.removeEventListener(type, listeners[i].boundListener);\n\t      _obj2.default.clear(listeners[i]);\n\t    }\n\t    listeners.length = 0;\n\t    var listenerMap = target.ol_lm;\n\t    if (listenerMap) {\n\t      Reflect.deleteProperty(listenerMap, type);\n\t      if (Object.keys(listenerMap).length === 0) {\n\t        // Reflect.deleteProperty(target, ol_lm)\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\t/**\r\n\t * 移除该事件标识下全部事件监听\r\n\t *\r\n\t * @method unlistenByKey\r\n\t * @param key {String} 事件标示\r\n\t */\n\tfunction unlistenByKey(key) {\n\t  if (key && key.target) {\n\t    key.target.removeEventListener(key.type, key.boundListener);\n\t    var listeners = getListeners(key.target, key.type);\n\t    if (listeners) {\n\t      var i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n\t      if (i !== -1) {\n\t        listeners.splice(i, 1);\n\t      }\n\t      if (listeners.length === 0) {\n\t        removeListeners(key.target, key.type);\n\t      }\n\t    }\n\t\n\t    _obj2.default.clear(key);\n\t  }\n\t}\n\t\n\t/**\r\n\t * @param listenerObj\r\n\t * @returns {boundListener}\r\n\t */\n\tvar bindListener = function bindListener(listenerObj) {\n\t  var boundListener = function boundListener(evt) {\n\t    var listener = listenerObj.listener;\n\t    var bindTo = listenerObj.bindTo || listenerObj.target;\n\t    if (listenerObj.callOnce) {\n\t      unlistenByKey(listenerObj);\n\t    }\n\t    return listener.call(bindTo, evt);\n\t  };\n\t\n\t  listenerObj.boundListener = boundListener;\n\t  return boundListener;\n\t};\n\t\n\t/**\r\n\t *\r\n\t * @param listeners\r\n\t * @param listener\r\n\t * @param optThis\r\n\t * @param optSetDeleteIndex\r\n\t * @returns {*}\r\n\t */\n\tvar findListener = function findListener(listeners, listener, optThis, optSetDeleteIndex) {\n\t  var listenerObj = void 0;\n\t  for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t    listenerObj = listeners[i];\n\t    if (listenerObj.listener === listener && listenerObj.bindTo === optThis) {\n\t      if (optSetDeleteIndex) {\n\t        listenerObj.deleteIndex = i;\n\t      }\n\t      return listenerObj;\n\t    }\n\t  }\n\t  return undefined;\n\t};\n\t\n\t/**\r\n\t *\r\n\t * @param target\r\n\t * @returns {{}|*}\r\n\t */\n\tvar getListenerMap = function getListenerMap(target) {\n\t  var listenerMap = target.ol_lm;\n\t  if (!listenerMap) {\n\t    listenerMap = target.ol_lm = {};\n\t  }\n\t  return listenerMap;\n\t};\n\t\n\t/**\r\n\t * 监听事件\r\n\t *\r\n\t * @method listen\r\n\t * @param target {Object} 监听对象\r\n\t * @param type {String} 事件标识\r\n\t * @param listener {Array} 事件响应函数列表\r\n\t * @param optThis {This} 可选\r\n\t * @param optOnce\r\n\t * @returns {Array}\r\n\t */\n\tfunction listen(target, type, listener, optThis, optOnce) {\n\t  var listenerMap = getListenerMap(target);\n\t  var listeners = listenerMap[type];\n\t  if (!listeners) {\n\t    listeners = listenerMap[type] = [];\n\t  }\n\t\n\t  var listenerObj = findListener(listeners, listener, optThis, false);\n\t\n\t  if (listenerObj) {\n\t    if (!optOnce) {\n\t      listenerObj.callOnce = false; // Turn one-off listener into a permanent one.\n\t    }\n\t  } else {\n\t    listenerObj = {\n\t      bindTo: optThis,\n\t      callOnce: !!optOnce,\n\t      listener: listener,\n\t      target: target,\n\t      type: type\n\t    };\n\t\n\t    target.addEventListener(type, bindListener(listenerObj));\n\t    listeners.push(listenerObj);\n\t  }\n\t\n\t  return listenerObj;\n\t}\n\t\n\t/**\r\n\t * 对事件只是监听一次\r\n\t *\r\n\t * @method listenOnce\r\n\t * @param target\r\n\t * @param type\r\n\t * @param listener\r\n\t * @param opt_this\r\n\t * @returns {*}\r\n\t */\n\tfunction listenOnce(target, type, listener, opt_this) {\n\t  return listen(target, type, listener, opt_this, true);\n\t}\n\t\n\t/**\r\n\t * 定义关于事件的注册、注销、派发、监听的通用工具模块\r\n\t *\r\n\t * @module core\r\n\t * @class EventManager\r\n\t */\n\texports.default = {\n\t  getListeners: getListeners,\n\t  listen: listen,\n\t  listenOnce: listenOnce,\n\t  unlistenByKey: unlistenByKey\n\t};\n\n/***/ }),\n/* 5 */\n/*!**********************************!*\\\n  !*** ./src/meek/browserevent.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/12/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * BrowserEvent\n\t *\n\t * @class BrowserEvent\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar BrowserEvent = function (_BaseObject) {\n\t  _inherits(BrowserEvent, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param map\n\t   * @param oriEvent\n\t   * @param eventTyle\n\t   */\n\t  function BrowserEvent(map, oriEvent, eventTyle) {\n\t    _classCallCheck(this, BrowserEvent);\n\t\n\t    /**\n\t     * 标示事件类型\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.type = eventTyle;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.map = map;\n\t\n\t    /**\n\t     * 记录事件源对象\n\t     */\n\t    _this.originalEvent = oriEvent;\n\t\n\t    /**\n\t     * 将浏览器坐标转换成canvas屏幕坐标\n\t     * The pixel of the original browser event.\n\t     * @type {ol.Pixel}\n\t     * @api stable\n\t     */\n\t    _this.pixel = map.getEventPixel(oriEvent);\n\t\n\t    /**\n\t     * 将canvas左边转换成地图坐标\n\t     */\n\t    _this.coordinate = map.getCoordinateFromPixel(_this.pixel);\n\t\n\t    /**\n\t     * @type {number}\n\t     */\n\t    _this.pointerId = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 取消事件的默认动作\n\t   *\n\t   * @method preventDefault\n\t   */\n\t\n\t\n\t  BrowserEvent.prototype.preventDefault = function preventDefault() {\n\t    this.originalEvent.preventDefault();\n\t  };\n\t\n\t  /**\n\t   * 阻止当前事件在DOM树上冒泡\n\t   *\n\t   * @method stopPropagation\n\t   */\n\t\n\t\n\t  BrowserEvent.prototype.stopPropagation = function stopPropagation() {\n\t    this.originalEvent.stopPropagation();\n\t  };\n\t\n\t  return BrowserEvent;\n\t}(_baseobject2.default);\n\t// The single click is different form double click,which\n\t// consider as two click heppen during 250ms.\n\t/**\n\t * 鼠标在一段时间内单击标识\n\t *\n\t * @property SINGLE_CLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = BrowserEvent;\n\tBrowserEvent.SINGLE_CLICK = 'singleclick';\n\t\n\t/**\n\t *\n\t * 鼠标单击事件标识\n\t *\n\t * @property CLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.CLICK = 'click';\n\t\n\t/**\n\t *\n\t * 鼠标双击事件标识\n\t *\n\t * @property DBLCLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.DBLCLICK = 'dblclick';\n\t\n\t/**\n\t * 鼠标拖拽事件标识\n\t *\n\t * @property MOUSE_DRAG\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_DRAG = 'mousedrag';\n\t\n\t/**\n\t * 鼠标按下事件标识\n\t *\n\t * @property MOUSE_DOWN\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_DOWN = 'mousedown';\n\t\n\t/**\n\t * 鼠标移动事件标识\n\t *\n\t * @property MOUSE_MOVE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_MOVE = 'mousemove';\n\t\n\t/**\n\t * 鼠标抬起事件标识\n\t *\n\t * @property MOUSE_UP\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_UP = 'mouseup';\n\t\n\t/**\n\t * 鼠标移入事件标识\n\t *\n\t * @property MOUSE_OVER\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_OVER = 'mouseover';\n\t\n\t/**\n\t * 鼠标移开事件标识\n\t *\n\t * @property MOUSE_OUT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_OUT = 'mouseout';\n\t\n\t/**\n\t * 滚轮事件标识\n\t *\n\t * @property WHEEL\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.WHEEL = 'wheel';\n\t\n\t/**\n\t * 鼠标滚轮事件标识\n\t *\n\t * @property MOUSE_WHEEL\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_WHEEL = 'mousewheel';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tBrowserEvent.KEYDOWN = 'keydown';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tBrowserEvent.KEYPRESS = 'keypress';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 6 */\n/*!*******************************!*\\\n  !*** ./src/meek/eventtype.js ***!\n  \\*******************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zypc on 2016/12/6.\n\t */\n\tvar EventType = exports.EventType = {};\n\t\n\t/**\n\t * Triggered when map is needed to render\n\t *\n\t * @property CHANGE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.CHANGE = 'change';\n\t\n\t/**\n\t * Triggered when view has been changed\n\t *\n\t * 当地图视图发生变化时将会派发改事件\n\t *\n\t * @property VIEW_CHANGED\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.VIEW_CHANGED = 'viewchanged';\n\t\n\t/**\n\t * Triggered when a image download error\n\t *\n\t * @property ERROR\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.ERROR = 'error';\n\t\n\t/**\n\t * Triggered when a image finish load\n\t *\n\t * @property LOAD\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.LOAD = 'load';\n\t\n\t/**\n\t * 当浏览器窗口的尺寸发生变化时派发\n\t *\n\t * @property RESIZE\n\t * @static\n\t * @final\n\t * @type {string}\n\t */\n\tEventType.RESIZE = 'resize';\n\t\n\texports.default = {\n\t  EventType: EventType\n\t};\n\n/***/ }),\n/* 7 */\n/*!**************************************!*\\\n  !*** ./src/data/matrix/transform.js ***!\n  \\**************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\t/**\n\t * Collection of affine 2d transformation functions. The functions work on an\n\t * array of 6 elements. The element order is compatible with the [SVGMatrix\n\t * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n\t * a subset (elements a to f) of a 3x3 martrix:\n\t * ```\n\t * [ a c e ]\n\t * [ b d f ]\n\t * [ 0 0 1 ]\n\t * ```\n\t */\n\t\n\tvar Transform = exports.Transform = {\n\t\n\t  /**\n\t   * @private\n\t   * @type {ol.Transform}\n\t   */\n\t  tmp_: new Array(6),\n\t\n\t  /**\n\t   * 恒等矩阵\n\t   *\n\t   * Create an identity（恒等） transform.\n\t   * @return {!Transform} Identity transform.\n\t   */\n\t  create: function create() {\n\t    return [1, 0, 0, 1, 0, 0];\n\t  },\n\t\n\t  /**\n\t   * Resets the given transform to an identity（恒等） transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @return {!Transform} Transform.\n\t   */\n\t  reset: function reset(transform) {\n\t    return transform.set(transform, 1, 0, 0, 1, 0, 0);\n\t  },\n\t\n\t  /**\n\t   *\n\t   * @param flatCoordinates\n\t   * @param offset\n\t   * @param end\n\t   * @param stride\n\t   * @param transform\n\t   * @param opt_dest\n\t   * @returns {Array}\n\t   */\n\t  transform2D: function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n\t    var dest = opt_dest ? opt_dest : [];\n\t    var i = 0;\n\t    var j = void 0;\n\t\n\t    for (j = offset; j < end; j += stride) {\n\t      var x = flatCoordinates[j];\n\t      var y = flatCoordinates[j + 1];\n\t      dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n\t      dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n\t    }\n\t\n\t    if (opt_dest && dest.length != i) {\n\t      dest.length = i;\n\t    }\n\t\n\t    return dest;\n\t  },\n\t\n\t  /**\n\t   * 矩阵相乘\n\t   *\n\t   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n\t   * the first transform.\n\t   *\n\t   * @param {!Transform} transform1 Transform parameters of matrix 1.\n\t   * @param {!Transform} transform2 Transform parameters of matrix 2.\n\t   * @return {!Transform} transform1 multiplied with transform2.\n\t   */\n\t  multiply: function multiply(transform1, transform2) {\n\t    var a1 = transform1[0];\n\t    var b1 = transform1[1];\n\t    var c1 = transform1[2];\n\t    var d1 = transform1[3];\n\t    var e1 = transform1[4];\n\t    var f1 = transform1[5];\n\t    var a2 = transform2[0];\n\t    var b2 = transform2[1];\n\t    var c2 = transform2[2];\n\t    var d2 = transform2[3];\n\t    var e2 = transform2[4];\n\t    var f2 = transform2[5];\n\t\n\t    transform1[0] = a1 * a2 + c1 * b2;\n\t    transform1[1] = b1 * a2 + d1 * b2;\n\t    transform1[2] = a1 * c2 + c1 * d2;\n\t    transform1[3] = b1 * c2 + d1 * d2;\n\t    transform1[4] = a1 * e2 + c1 * f2 + e1;\n\t    transform1[5] = b1 * e2 + d1 * f2 + f1;\n\t\n\t    return transform1;\n\t  },\n\t\n\t  /**\n\t   * Set the transform components a-f on a given transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} a The a component of the transform.\n\t   * @param {number} b The b component of the transform.\n\t   * @param {number} c The c component of the transform.\n\t   * @param {number} d The d component of the transform.\n\t   * @param {number} e The e component of the transform.\n\t   * @param {number} f The f component of the transform.\n\t   * @return {!Transform} Matrix with transform applied.\n\t   */\n\t  set: function set(transform, a, b, c, d, e, f) {\n\t    transform[0] = a;\n\t    transform[1] = b;\n\t    transform[2] = c;\n\t    transform[3] = d;\n\t    transform[4] = e;\n\t    transform[5] = f;\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Set transform on one matrix from another matrix.\n\t   *\n\t   * @param {!Transform} transform1 Matrix to set transform to.\n\t   * @param {!Transform} transform2 Matrix to set transform from.\n\t   * @return {!Transform} transform1 with transform from transform2 applied.\n\t   */\n\t  setFromArray: function setFromArray(transform1, transform2) {\n\t    transform1[0] = transform2[0];\n\t    transform1[1] = transform2[1];\n\t    transform1[2] = transform2[2];\n\t    transform1[3] = transform2[3];\n\t    transform1[4] = transform2[4];\n\t    transform1[5] = transform2[5];\n\t    return transform1;\n\t  },\n\t\n\t  /**\n\t   * 矩阵运算\n\t   * 将坐标值矩阵运算\n\t   *\n\t   * Transforms the given coordinate with the given transform returning the\n\t   * resulting, transformed coordinate. The coordinate will be modified in-place.\n\t   *\n\t   * @param {Transform} transform The transformation.\n\t   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n\t   * @return {Coordinate|Pixel} return coordinate so that operations can be\n\t   *     chained together.\n\t   */\n\t  apply: function apply(transform, coordinate) {\n\t    var x = coordinate[0];\n\t    var y = coordinate[1];\n\t    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n\t    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n\t    return coordinate;\n\t  },\n\t\n\t  /**\n\t   * Applies rotation to the given transform.\n\t   *\n\t   * 矩阵旋转\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} angle Angle in radians.\n\t   * @return {!Transform} The rotated transform.\n\t   */\n\t  rotate: function rotate(transform, angle) {\n\t    var cos = Math.cos(angle);\n\t    var sin = Math.sin(angle);\n\t    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0));\n\t  },\n\t\n\t  /**\n\t   *  Applies scale to a given transform.\n\t   *\n\t   * 矩阵缩放\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} x Scale factor x.\n\t   * @param {number} y Scale factor y.\n\t   * @return {!Transform} The scaled transform.\n\t   */\n\t  scale: function scale(transform, x, y) {\n\t    return transform.multiply(transform, transform.set(transform.tmp_, x, 0, 0, y, 0, 0));\n\t  },\n\t\n\t  /**\n\t   * Applies translation to the given transform.\n\t   *\n\t   * 矩阵转换\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} dx Translation x.\n\t   * @param {number} dy Translation y.\n\t   * @return {!Transform} The translated transform.\n\t   */\n\t  translate: function translate(transform, dx, dy) {\n\t    return transform.multiply(transform, transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy));\n\t  },\n\t\n\t  /**\n\t   * Creates a composite transform given an initial translation, scale, rotation, and\n\t   * final translation (in that order only, not commutative).\n\t   *\n\t   * 复杂矩形运算\n\t   *\n\t   * @param {!Transform} transform The transform (will be modified in place).\n\t   * @param {number} dx1 Initial translation x.\n\t   * @param {number} dy1 Initial translation y.\n\t   * @param {number} sx Scale factor x.\n\t   * @param {number} sy Scale factor y.\n\t   * @param {number} angle Rotation (in counter-clockwise radians).\n\t   * @param {number} dx2 Final translation x.\n\t   * @param {number} dy2 Final translation y.\n\t   * @return {!Transform} The composite transform.\n\t   */\n\t  compose: function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n\t    var sin = Math.sin(angle);\n\t    var cos = Math.cos(angle);\n\t    transform[0] = sx * cos;\n\t    transform[1] = sy * sin;\n\t    transform[2] = -sx * sin;\n\t    transform[3] = sy * cos;\n\t    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n\t    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Invert the given transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @return {!Transform} Inverse of the transform.\n\t   */\n\t  invert: function invert(transform) {\n\t    var det = Transform.determinant(transform);\n\t\n\t    var a = transform[0];\n\t    var b = transform[1];\n\t    var c = transform[2];\n\t    var d = transform[3];\n\t    var e = transform[4];\n\t    var f = transform[5];\n\t\n\t    transform[0] = d / det;\n\t    transform[1] = -b / det;\n\t    transform[2] = -c / det;\n\t    transform[3] = a / det;\n\t    transform[4] = (c * f - d * e) / det;\n\t    transform[5] = -(a * f - b * e) / det;\n\t\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Returns the determinant of the given matrix.\n\t   *\n\t   * 行列式\n\t   *\n\t   * @param {!Transform} mat Matrix.\n\t   * @return {number} Determinant.\n\t   */\n\t  determinant: function determinant(mat) {\n\t    return mat[0] * mat[3] - mat[1] * mat[2];\n\t  }\n\t};\n\t\n\texports.default = {\n\t  Transform: Transform\n\t};\n\n/***/ }),\n/* 8 */\n/*!*************************************!*\\\n  !*** ./src/components/component.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义组件基础类\n\t *\n\t * @class Component\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t */\n\t\n\t// Abstract base class,represent a base componnet whcih should be inhrited\n\tvar Component = function (_BaseObject) {\n\t  _inherits(Component, _BaseObject);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   */\n\t  function Component() {\n\t    _classCallCheck(this, Component);\n\t\n\t    /**\n\t     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n\t     *\n\t     * @property active\n\t     * @type {Boolean}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.active = true;\n\t\n\t    /**\n\t     * @property mapRenderKey\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._mapRenderKey = null;\n\t\n\t    /**\n\t     * @property targetPointers\n\t     * @type {null}\n\t     */\n\t    _this.targetPointers = null;\n\t\n\t    /**\n\t     * @property trackedPointers\n\t     * @type {{}}\n\t     * @private\n\t     */\n\t    _this._trackedPointers = {};\n\t\n\t    /**\n\t     * handlingDownUpSequence\n\t     * @type {boolean}\n\t     */\n\t    _this.handlingDownUpSequence = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * applyHandleEventOption\n\t   * @param options\n\t   */\n\t\n\t\n\t  Component.prototype.applyHandleEventOption = function applyHandleEventOption(options) {\n\t\n\t    /**\n\t     *\n\t     */\n\t    this.handleMouseEvent = options.handleMouseEvent ? options.handleMouseEvent : this.handleMouseEvent;\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    this._handleDownEvent = options.handleDownEvent ? options.handleDownEvent : function () {\n\t      return false;\n\t    };\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    this._handleDragEvent = options.handleDragEvent ? options.handleDragEvent : function () {};\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    this._handleMoveEvent = options.handleMoveEvent ? options.handleMoveEvent : function () {};\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    this._handleUpEvent = options.handleUpEvent ? options.handleUpEvent : function () {\n\t      return false;\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param browserEvent {browserEvent}\n\t   *\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Component.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    var stopEvent = false;\n\t    this._updateTrackedPointers(browserEvent);\n\t\n\t    if (this.handlingDownUpSequence) {\n\t\n\t      if (browserEvent.type === _browserevent2.default.MOUSE_DRAG) {\n\t        this._handleDragEvent(browserEvent);\n\t      } else if (browserEvent.type === _browserevent2.default.MOUSE_UP) {\n\t\n\t        var handledUp = this._handleUpEvent(browserEvent);\n\t        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n\t      }\n\t    } else {\n\t      if (browserEvent.type === _browserevent2.default.MOUSE_DOWN) {\n\t\n\t        var handled = this._handleDownEvent(browserEvent);\n\t        this.handlingDownUpSequence = handled;\n\t        stopEvent = this.shouldStopEvent(handled);\n\t      } else if (browserEvent.type === _browserevent2.default.MOUSE_MOVE) {\n\t        this._handleMoveEvent(browserEvent);\n\t      }\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据浏览器鼠标操作事件的类型返回true或false\n\t   *\n\t   * isPointerDraggingEvent\n\t   * @param browserEvent {browserEvent}\n\t   *\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Component.prototype._isPointerDraggingEvent = function _isPointerDraggingEvent(browserEvent) {\n\t    var type = browserEvent.type;\n\t    return type === _browserevent2.default.MOUSE_DOWN || type === _browserevent2.default.MOUSE_DRAG || type === _browserevent2.default.MOUSE_UP;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 处理浏览器鼠标操作事件\n\t   *\n\t   * updateTrackedPointers\n\t   *\n\t   * @param browserEvent {browserEvent}\n\t   * @private\n\t   */\n\t\n\t\n\t  Component.prototype._updateTrackedPointers = function _updateTrackedPointers(browserEvent) {\n\t    if (this._isPointerDraggingEvent(browserEvent)) {\n\t      var event = browserEvent;\n\t\n\t      if (browserEvent.type == _browserevent2.default.MOUSE_UP) {\n\t        delete this._trackedPointers[event.pointerId];\n\t      } else if (browserEvent.type == _browserevent2.default.MOUSE_DOWN) {\n\t        this._trackedPointers[event.pointerId] = event;\n\t      } else if (event.pointerId in this._trackedPointers) {\n\t        this._trackedPointers[event.pointerId] = event;\n\t      }\n\t      this.targetPointers = _obj2.default.getValues(this._trackedPointers);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param view\n\t   * @param delta\n\t   * @param opt_duration\n\t   */\n\t\n\t\n\t  Component.prototype.pan = function pan(view, delta) {\n\t    var currentCenter = view.center;\n\t    if (currentCenter) {\n\t      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n\t   *\n\t   * @method zoomByDelta\n\t   *\n\t   * @param view {Object}\n\t   * @param delta {Number}\n\t   * @param opt_anchor {Number}\n\t   * @param opt_duration {Number}\n\t   *\n\t   */\n\t\n\t\n\t  Component.prototype.zoomByDelta = function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n\t    var currentResolution = view.resolution;\n\t    var resolution = view.constrainResolution(currentResolution, delta, 0);\n\t\n\t    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n\t      var currentCenter = view.center;\n\t      var center = view.calculateCenterZoom(resolution, opt_anchor);\n\t      center = view.constrainCenter(center);\n\t\n\t      opt_anchor = [(resolution * currentCenter[0] - currentResolution * center[0]) / (resolution - currentResolution), (resolution * currentCenter[1] - currentResolution * center[1]) / (resolution - currentResolution)];\n\t    }\n\t\n\t    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据resolution进行缩放\n\t   *\n\t   * @method zoomWithoutConstraints\n\t   *\n\t   * @param view {Object}\n\t   * @param resolution {Number}\n\t   * @param opt_anchor {Number}\n\t   * @param opt_duration {Number}\n\t   */\n\t\n\t\n\t  Component.prototype.zoomWithoutConstraints = function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n\t    if (resolution) {\n\t      var currentResolution = view.resolution;\n\t      var currentCenter = view.center;\n\t\n\t      if (currentResolution !== undefined && currentCenter && resolution !== currentResolution && opt_duration) {\n\t        view.resolution = resolution;\n\t      } else {\n\t        if (opt_anchor) {\n\t          var center = view.calculateCenterZoom(resolution, opt_anchor);\n\t          view.center = center;\n\t        }\n\t        view.resolution = resolution;\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取当前标注视图的坐标范围(标注的图片的像素)\n\t   *\n\t   * @method getViewDataExtent\n\t   *\n\t   * @returns {*|null}\n\t   */\n\t\n\t\n\t  Component.prototype.getViewDataExtent = function getViewDataExtent() {\n\t    if (!this._dataExtent) {\n\t      this._dataExtent = this.map.view.dataExtent;\n\t    }\n\t\n\t    return this._dataExtent;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n\t   *\n\t   * @method coordinateBeyond\n\t   * @param coordinate {Array} 坐标点{x,y}\n\t   * @returns {Array} new Coordinate\n\t   */\n\t\n\t\n\t  Component.prototype.coordinateBeyond = function coordinateBeyond(coordinate) {\n\t    // 如果允许坐标可超出图片的边界\n\t    if (this.map.allowCoordinatesBeyondImage) {\n\t      return coordinate;\n\t    }\n\t\n\t    if (coordinate === undefined) {\n\t      return coordinate;\n\t    }\n\t\n\t    var newCoordinate = new Array(2);\n\t\n\t    var x = void 0,\n\t        y = void 0;\n\t\n\t    try {\n\t      x = coordinate[0];\n\t      y = coordinate[1];\n\t    } catch (e) {\n\t      // console.log(coordinate)\n\t    }\n\t\n\t    newCoordinate[0] = x;\n\t    newCoordinate[1] = y;\n\t\n\t    if (x <= 0) {\n\t      newCoordinate[0] = 0;\n\t    }\n\t\n\t    if (y <= 0) {\n\t      newCoordinate[1] = 0;\n\t    }\n\t\n\t    var extent = this.getViewDataExtent();\n\t\n\t    if (extent) {\n\t      if (x >= extent[2]) {\n\t        newCoordinate[0] = extent[2];\n\t      }\n\t\n\t      if (y >= extent[3]) {\n\t        newCoordinate[1] = extent[3];\n\t      }\n\t    }\n\t\n\t    return newCoordinate;\n\t  };\n\t\n\t  /**\n\t   * shouldStopEvent\n\t   * @param handled\n\t   * @returns {*}\n\t   *\n\t   */\n\t\n\t\n\t  Component.prototype.shouldStopEvent = function shouldStopEvent(handled) {\n\t    return handled;\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @type {mk.map}\n\t   */\n\t\n\t\n\t  _createClass(Component, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      this._map = value;\n\t    }\n\t\n\t    /**\n\t     * active读写器, 读取设置active\n\t     *\n\t     * @type {Function}\n\t     * @property active\n\t     */\n\t\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(value) {\n\t      this._active = value;\n\t    }\n\t  }]);\n\t\n\t  return Component;\n\t}(_baseobject2.default);\n\t\n\texports.default = Component;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 9 */\n/*!********************************!*\\\n  !*** ./src/geometry/extent.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 矩形类和数据结构\n\t *\n\t * @class Extent\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var rect = new mk.Extent(10, 10, 500, 500)\n\t */\n\tvar Extent = function (_Geometry) {\n\t  _inherits(Extent, _Geometry);\n\t\n\t  /**\n\t   * 构造函数，构建一个extent对象\n\t   *\n\t   * @param xmin {Number}\n\t   * @param ymin {Number}\n\t   * @param xmax {Number}\n\t   * @param ymax {Number}\n\t   *\n\t   */\n\t  function Extent() {\n\t    var xmin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var ymin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var xmax = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\t    var ymax = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\t\n\t    _classCallCheck(this, Extent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._xmin = xmin;\n\t    _this._ymin = ymin;\n\t    _this._xmax = xmax;\n\t    _this._ymax = ymax;\n\t\n\t    _this._rings = [];\n\t\n\t    /**\n\t     * 记录内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取Geometry的类型\n\t   *\n\t   * @property geometryType\n\t   * @returns {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断点是否在矩形内\n\t   *\n\t   * @method containsXY\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   */\n\t  Extent.prototype.containsXY = function containsXY(x, y) {\n\t    return _extentutil.ExtentUtil.containsPoint(this, [x, y]);\n\t  };\n\t\n\t  /**\n\t   * getFlatInteriorPoint\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Extent.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      this._flatInteriorPointRevision = this.revision;\n\t      // this._flatInteriorPoint = [this.centerX, this.centerY]\n\t      this._flatInteriorPoint = [this.xmin, this.ymin];\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 移动矩形通过x，y值\n\t   *\n\t   * @method move\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   */\n\t\n\t\n\t  Extent.prototype.move = function move() {\n\t    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var opts = arguments[2];\n\t\n\t    var beyond = void 0;\n\t    if (opts) {\n\t      if (opts.beyond) {\n\t        beyond = opts.beyond;\n\t      }\n\t    }\n\t\n\t    var minPoint = [this.xmin, this.ymin];\n\t    var width = this.width;\n\t    var height = this.height;\n\t\n\t    var newMinPoint = new Array(2);\n\t\n\t    newMinPoint[0] = minPoint[0] + x;\n\t    newMinPoint[1] = minPoint[1] + y;\n\t\n\t    if (beyond) {\n\t      if (minPoint[0] < beyond.xmin) {\n\t        minPoint[0] = beyond.xmin;\n\t        newMinPoint[0] = minPoint[0];\n\t      }\n\t\n\t      if (minPoint[0] + width + x >= beyond.xmax) {\n\t        newMinPoint[0] = minPoint[0];\n\t      }\n\t\n\t      if (minPoint[1] < beyond.ymin) {\n\t        minPoint[1] = beyond.ymin;\n\t        newMinPoint[1] = minPoint[1];\n\t      }\n\t\n\t      if (minPoint[1] + height + y >= beyond.ymax) {\n\t        newMinPoint[1] = minPoint[1];\n\t      }\n\t    }\n\t\n\t    var newCoordiante = [newMinPoint, [newMinPoint[0] + width, newMinPoint[1]], [newMinPoint[0] + width, newMinPoint[1] + height], [newMinPoint[0], newMinPoint[1] + height], newMinPoint];\n\t\n\t    this.setCoordinates(newCoordiante);\n\t  };\n\t\n\t  /**\n\t   * 设置多边形的边，如果设置了边，则需要重新计算\n\t   * 外接矩形\n\t   *\n\t   * @method rings\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 获取图形的坐标数据\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {[*,*]}\n\t   */\n\t  Extent.prototype.getCoordinates = function getCoordinates() {\n\t    if (this._rings.length === 0) {\n\t      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n\t        this._rings = _extentutil.ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax);\n\t      }\n\t    }\n\t\n\t    return this._rings;\n\t  };\n\t\n\t  /**\n\t   * 根据得到的坐标点，计算出表单显示的位置\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Extent.prototype.getFormShowPosition1 = function getFormShowPosition1() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    return [(this.xmin + this.xmax) / 2 - offsetX, this.ymin - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 根据得到的坐标点，计算出表单显示的位置\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Extent.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    return [this.xmin - offsetX, this.ymin - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置坐标数据\n\t   *\n\t   * @method setCoordinates\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  Extent.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this.rings = coordinates;\n\t\n\t    var extentArr = _extentutil.ExtentUtil.boundingSimpleExtent(coordinates);\n\t    this.xmin = extentArr[0];\n\t    this.ymin = extentArr[1];\n\t    this.xmax = extentArr[2];\n\t    this.ymax = extentArr[3];\n\t\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获取点位于图形坐标点的下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord {Array}\n\t   * @returns {Number}\n\t   */\n\t\n\t\n\t  Extent.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates().findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 克隆矩形框\n\t   *\n\t   * @method clone\n\t   * @returns {Extent}\n\t   */\n\t\n\t\n\t  Extent.prototype.clone = function clone() {\n\t    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax);\n\t  };\n\t\n\t  _createClass(Extent, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.EXTENT;\n\t    }\n\t\n\t    /**\n\t     * 计算x轴的中心坐标\n\t     *\n\t     * @property centerX\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'centerX',\n\t    get: function get() {\n\t      return (this.xmax + this.xmin) / 2;\n\t    }\n\t\n\t    /**\n\t     * 计算Y轴的中心坐标\n\t     *\n\t     * @property centerY\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'centerY',\n\t    get: function get() {\n\t      return (this.ymax + this.ymin) / 2;\n\t    }\n\t\n\t    /**\n\t     * 计算最小外接矩形的宽\n\t     *\n\t     * @property width\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'width',\n\t    get: function get() {\n\t      return Math.abs(this.xmax - this.xmin);\n\t    }\n\t\n\t    /**\n\t     * 计算最小外接矩形的高\n\t     *\n\t     * @property height\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'height',\n\t    get: function get() {\n\t      return Math.abs(this.ymax - this.ymin);\n\t    }\n\t\n\t    /**\n\t     * 获取最小外接矩形本对象\n\t     *\n\t     * @property extent\n\t     * @returns {Object} extent\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * X 轴最小值\n\t     *\n\t     * @property xmin\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xmin',\n\t    get: function get() {\n\t      return this._xmin;\n\t    },\n\t    set: function set(value) {\n\t      this._xmin = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * Y 轴最小值\n\t     *\n\t     * @property ymin\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'ymin',\n\t    get: function get() {\n\t      return this._ymin;\n\t    },\n\t    set: function set(value) {\n\t      this._ymin = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * X 轴最大值\n\t     *\n\t     * @property xmax\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xmax',\n\t    get: function get() {\n\t      return this._xmax;\n\t    },\n\t    set: function set(value) {\n\t      this._xmax = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * X 轴最大值\n\t     *\n\t     * @property ymax\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'ymax',\n\t    get: function get() {\n\t      return this._ymax;\n\t    },\n\t    set: function set(value) {\n\t      this._ymax = value;\n\t      this.changed();\n\t    }\n\t  }, {\n\t    key: 'rings',\n\t    get: function get() {\n\t      if (this._rings.length === 0) {\n\t        if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n\t          this._rings = _extentutil.ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax);\n\t        }\n\t      }\n\t\n\t      return this._rings;\n\t    },\n\t    set: function set(value) {\n\t      this._rings = value;\n\t      var extentArr = _extentutil.ExtentUtil.boundingSimpleExtent(value);\n\t      this.xmin = extentArr[0];\n\t      this.ymin = extentArr[1];\n\t      this.xmax = extentArr[2];\n\t      this.ymax = extentArr[3];\n\t    }\n\t  }]);\n\t\n\t  return Extent;\n\t}(_geometry2.default);\n\t\n\texports.default = Extent;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 10 */\n/*!*********************************!*\\\n  !*** ./src/geometry/polygon.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tvar _orient = __webpack_require__(/*! ./support/orient */ 33);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 面类和数据结构\n\t *\n\t * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n\t *\n\t * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n\t * 的最外层，第二条及其以后表示多边形的内部洞环。\n\t *\n\t * @class Polygon\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var polygon = new mk.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n\t *\n\t */\n\tvar Polygon = function (_Geometry) {\n\t  _inherits(Polygon, _Geometry);\n\t\n\t  /**\n\t   * 创建一个Polygon实例\n\t   * @constructor\n\t   * @param rings\n\t   */\n\t  function Polygon() {\n\t    var rings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\n\t    _classCallCheck(this, Polygon);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._rings = [];\n\t\n\t    /**\n\t     * 记录当前多边形内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前多边形内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    /**\n\t     * 更新多边形的坐标\n\t     */\n\t    _this.setCoordinates(rings);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t   * 可用来对图形进行拖动、旋转、缩放\n\t   *\n\t   * @method extent\n\t   * @abstrct function\n\t   * @returns {Extent}\n\t   */\n\t\n\t\n\t  /**\n\t   * 多边形添加线段\n\t   *\n\t   * @method addRing\n\t   * @param ring {Array}\n\t   *\n\t   */\n\t  Polygon.prototype.addRing = function addRing(ring) {\n\t    this.rings.push(ring);\n\t    this._extent = null;\n\t  };\n\t\n\t  /**\n\t   * 判断点是否在多边形上\n\t   *\n\t   * @method containsXY\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Polygon.prototype.containsXY = function containsXY(x, y) {\n\t    var _this2 = this;\n\t\n\t    var coords = this.getCoordinates();\n\t    var outRing = coords[0];\n\t\n\t    var contains = false;\n\t    if (this._inOneRing(x, y, outRing)) {\n\t      contains = true;\n\t    }\n\t\n\t    if (coords.length > 1 && contains) {\n\t      var coordsTemp = coords.slice(1);\n\t\n\t      var inHole = coordsTemp.some(function (ring) {\n\t        return _this2._inOneRing(x, y, ring);\n\t      });\n\t\n\t      if (inHole) {\n\t        contains = false;\n\t      }\n\t    }\n\t\n\t    return contains;\n\t  };\n\t\n\t  /**\n\t   * 判断 x 和 y 的值是否在环内\n\t   *\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   * @param ring {Array}\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Polygon.prototype._inOneRing = function _inOneRing(x, y, ring) {\n\t    var px = x;\n\t    var py = y;\n\t    var flag = false;\n\t\n\t    for (var i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n\t      var sx = ring[i][0];\n\t      var sy = ring[i][1];\n\t      var tx = ring[j][0];\n\t      var ty = ring[j][1];\n\t\n\t      // 点与多边形顶点重合\n\t      if (sx === px && sy === py || tx === px && ty === py) {\n\t        return true;\n\t      }\n\t\n\t      // 判断线段两端点是否在射线两侧\n\t      if (sy < py && ty >= py || sy >= py && ty < py) {\n\t        // 线段上与射线 Y 坐标相同的点的 X 坐标\n\t        var _x2 = sx + (py - sy) * (tx - sx) / (ty - sy);\n\t\n\t        // 点在多边形的边上\n\t        if (_x2 === px) {\n\t          return true;\n\t        }\n\t\n\t        // 射线穿过多边形的边界\n\t        if (_x2 > px) {\n\t          flag = !flag;\n\t        }\n\t      }\n\t    }\n\t\n\t    // 射线穿过多边形边界的次数为奇数时点在多边形内\n\t    return flag;\n\t  };\n\t\n\t  /**\n\t   * 计算多边形的内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns {Array} 返回内点，格式 [x, y]\n\t   */\n\t\n\t\n\t  Polygon.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    // 缓存限制\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      var flatCenter = [this.extent.centerX, this.extent.centerY];\n\t\n\t      var ends = [this.getCoordinates()[0].length * 2];\n\t      var orientedFlatCoordinates = this.getOrientedFlatCoordinates();\n\t\n\t      this._flatInteriorPoint = (0, _interpolate.linearRings)(orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0);\n\t\n\t      this._flatInteriorPointRevision = this.revision;\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 对多边形的边进行顺序化\n\t   * getOrientedFlatCoordinates\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getOrientedFlatCoordinates = function getOrientedFlatCoordinates() {\n\t    var orientedFlatCoordinates = void 0;\n\t\n\t    var flatCoordinates = [];\n\t    var coordinates = this.getCoordinates()[0];\n\t\n\t    coordinates.forEach(function (point) {\n\t      flatCoordinates.push(point[0], point[1]);\n\t    });\n\t\n\t    var ends = [flatCoordinates.length];\n\t\n\t    if ((0, _orient.linearRingsAreOriented)(flatCoordinates, 0, ends, this.stride)) {\n\t      orientedFlatCoordinates = flatCoordinates;\n\t    } else {\n\t      orientedFlatCoordinates = flatCoordinates.slice();\n\t      orientedFlatCoordinates.length = (0, _orient.orientLinearRings)(orientedFlatCoordinates, 0, ends, this.stride);\n\t    }\n\t\n\t    // this.orientedRevision_ = this.getRevision()\n\t\n\t    return orientedFlatCoordinates;\n\t  };\n\t\n\t  /**\n\t   * 判断当前多边形是否有洞\n\t   *\n\t   * @method hasHoles\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Polygon.prototype.hasHoles = function hasHoles() {\n\t    return this.getCoordinates().length > 1;\n\t  };\n\t\n\t  /**\n\t   * 获取多边形坐标\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getCoordinates = function getCoordinates() {\n\t    return this.rings;\n\t  };\n\t\n\t  /**\n\t   * 得到最后一个点的坐标，显示表单\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    var coordinates = this.getCoordinates()[0];\n\t    if (coordinates.length === 0) {\n\t      return;\n\t    }\n\t\n\t    var lastPoint = coordinates[coordinates.length - 2];\n\t    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置多边形的坐标\n\t   *\n\t   * @method setCoordinates\n\t   * @param coords\n\t   */\n\t\n\t\n\t  Polygon.prototype.setCoordinates = function setCoordinates(coords) {\n\t    this.rings = coords;\n\t    this._extent = null;\n\t    this.stride = 2;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * getCoordinateIndex\n\t   * @param coord\n\t   * @returns {*|number}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    var coords = this.getCoordinates();\n\t    for (var i = 0, len = coords.length; i < len; i++) {\n\t      var rings = coords[i];\n\t      for (var j = 0, jLen = rings.length; j < jLen; j++) {\n\t        var point = rings[j];\n\t        if (point[0] === coord[0] && point[1] === coord[1]) {\n\t          return {\n\t            ringIndex: i,\n\t            index: j\n\t          };\n\t        }\n\t      }\n\t    }\n\t\n\t    return {\n\t      ringIndex: -1,\n\t      index: -1\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 克隆多边形\n\t   *\n\t   * @method clone\n\t   * @returns {Polygon}\n\t   */\n\t\n\t\n\t  Polygon.prototype.clone = function clone() {\n\t    var coords = this.getCoordinates();\n\t\n\t    var newCoordinates = [];\n\t    var outRings = [];\n\t    coords.forEach(function (ring) {\n\t      ring.forEach(function (points) {\n\t        outRings.push([points[0], points[1]]);\n\t      });\n\t\n\t      newCoordinates.push(outRings);\n\t      outRings = [];\n\t    });\n\t\n\t    var newPolygon = new Polygon();\n\t    newPolygon.setCoordinates(newCoordinates);\n\t\n\t    return newPolygon;\n\t  };\n\t\n\t  _createClass(Polygon, [{\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (this._extent === null) {\n\t        var coords = this.getCoordinates();\n\t\n\t        // 计算最小外界矩形，只考虑外围环\n\t        if (coords.length > 0) {\n\t          var rings = coords[0];\n\t\n\t          var xmin = Number.POSITIVE_INFINITY;\n\t          var ymin = Number.POSITIVE_INFINITY;\n\t          var xmax = Number.NEGATIVE_INFINITY;\n\t          var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = rings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              var ring = _step.value;\n\t\n\t              xmin = Math.min(xmin, ring[0]);\n\t              ymin = Math.min(ymin, ring[1]);\n\t              xmax = Math.max(xmax, ring[0]);\n\t              ymax = Math.max(ymax, ring[1]);\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t\n\t          this._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t        }\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取对象的几何类型\n\t     *\n\t     * @method geometryType\n\t     * @abstrct function\n\t     * @returns {String}\n\t     */\n\t\n\t  }, {\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.POLYGON;\n\t    }\n\t\n\t    /**\n\t     * 设置多边形的边，如果设置了边，则需要重新计算\n\t     * 外接矩形\n\t     *\n\t     * @property rings\n\t     */\n\t\n\t  }, {\n\t    key: 'rings',\n\t    get: function get() {\n\t      return this._rings;\n\t    },\n\t    set: function set(value) {\n\t      this._rings = value;\n\t      this._extent = null;\n\t    }\n\t  }]);\n\t\n\t  return Polygon;\n\t}(_geometry2.default);\n\t\n\texports.default = Polygon;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 11 */\n/*!**********************************************!*\\\n  !*** ./src/geometry/support/geometryutil.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pointIntersectPoint = pointIntersectPoint;\n\texports.pointIntersectLine = pointIntersectLine;\n\texports.squaredSegmentDistance = squaredSegmentDistance;\n\texports.squaredDistanceToSegment = squaredDistanceToSegment;\n\texports.equals = equals;\n\texports.squaredDistance = squaredDistance;\n\texports.distance = distance;\n\texports.closestOnSegment = closestOnSegment;\n\texports.linearRingsContainsXY = linearRingsContainsXY;\n\texports.linearRingContainsXY = linearRingContainsXY;\n\texports.getPointInExtendedLineByDistanceFromAB = getPointInExtendedLineByDistanceFromAB;\n\texports.simplify = simplify;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * 判断两个点是否相交\n\t *\n\t * @method pointIntersectPoint\n\t * @param pointA\n\t * @param pointB\n\t * @param tolerance {Number}\n\t * @returns {Boolean}\n\t */\n\tfunction pointIntersectPoint(pointA, pointB, tolerance) {\n\t  var toleranceDistance = tolerance ? tolerance : 2;\n\t\n\t  var distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y);\n\t  if (distance <= toleranceDistance) {\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\t/**\n\t * 判断点是否与线相交\n\t *\n\t * @method pointIntersectLine\n\t * @param pointA\n\t * @param line\n\t * @param tolerance {Number}\n\t * @returns {Boolean}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/5/23.\n\t */\n\t\n\tfunction pointIntersectLine(pointA, line, tolerance) {\n\t  var path = line.path;\n\t  var squaredSegmentDistanceFn = squaredSegmentDistance;\n\t  var x = pointA.x;\n\t  var y = pointA.y;\n\t\n\t  var find = false;\n\t  for (var i = 0, ii = path.length - 1; i < ii; i++) {\n\t    var nowP = path[i];\n\t    var nextP = path[i + 1];\n\t    var _distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y);\n\t    _distance = Math.sqrt(_distance);\n\t    if (_distance <= tolerance) {\n\t      find = true;\n\t      break;\n\t    }\n\t  }\n\t\n\t  return find;\n\t}\n\t\n\t/**\n\t * Return the square of the closest distance between the point\n\t * and the line segment.\n\t * @param x\n\t * @param y\n\t * @param x1\n\t * @param y1\n\t * @param x2\n\t * @param y2\n\t * @returns {number}\n\t */\n\tfunction squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  if (dx !== 0 || dy !== 0) {\n\t    var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n\t    if (t > 1) {\n\t      x1 = x2;\n\t      y1 = y2;\n\t    } else if (t > 0) {\n\t      x1 += dx * t;\n\t      y1 += dy * t;\n\t    }\n\t  }\n\t\n\t  return squaredDistance(x, y, x1, y1);\n\t}\n\t\n\t/**\n\t *\n\t * @param coordinate\n\t * @param segment\n\t * @returns {number}\n\t */\n\tfunction squaredDistanceToSegment(coordinate, segment) {\n\t  var closestCoordinate = closestOnSegment(coordinate, segment);\n\t  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1]);\n\t}\n\t\n\t/**\n\t * 判断两个坐标是否相等\n\t *\n\t * @method equals\n\t * @param coordinate1\n\t * @param coordinate2\n\t * @returns {Boolean}\n\t */\n\tfunction equals(coordinate1, coordinate2) {\n\t  var equals = true;\n\t  for (var i = coordinate1.length - 1; i >= 0; --i) {\n\t    if (coordinate1[i] != coordinate2[i]) {\n\t      equals = false;\n\t      break;\n\t    }\n\t  }\n\t\n\t  return equals;\n\t}\n\t\n\t/**\n\t * 计算两点之间的距离的平方\n\t *\n\t * @method squaredDistance\n\t * @param x1\n\t * @param y1\n\t * @param x2\n\t * @param y2\n\t * @returns {Number} squared distance\n\t */\n\tfunction squaredDistance(x1, y1, x2, y2) {\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  return dx * dx + dy * dy;\n\t}\n\t\n\t/**\n\t * 计算两点之间的距离\n\t *\n\t * @method distance\n\t * @param coord1\n\t * @param coord2\n\t * @returns {Number}\n\t */\n\tfunction distance(coord1, coord2) {\n\t  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]));\n\t}\n\t\n\t/**\n\t *\n\t * @param coordinate {Array}\n\t * @param segment\n\t * @returns {Array}\n\t */\n\tfunction closestOnSegment(coordinate, segment) {\n\t  var x0 = coordinate[0];\n\t  var y0 = coordinate[1];\n\t  var start = segment[0];\n\t  var end = segment[1];\n\t  var x1 = start[0];\n\t  var y1 = start[1];\n\t  var x2 = end[0];\n\t  var y2 = end[1];\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t\n\t  var along = dx === 0 && dy === 0 ? 0 : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n\t\n\t  var x = void 0,\n\t      y = void 0;\n\t  if (along <= 0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return [x, y];\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param x\n\t * @param y\n\t * @returns {oolean}\n\t */\n\tfunction linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n\t  if (ends.length === 0) {\n\t    return false;\n\t  }\n\t\n\t  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n\t    return false;\n\t  }\n\t\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 1, ii = ends.length; i < ii; ++i) {\n\t    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param x\n\t * @param y\n\t * @returns {boolean}\n\t */\n\tfunction linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n\t  // http://geomalgorithms.com/a03-_inclusion.html\n\t  // Copyright 2000 softSurfer, 2012 Dan Sunday\n\t  // This code may be freely used and modified for any purpose\n\t  // providing that this copyright notice is included with it.\n\t  // SoftSurfer makes no warranty for this code, and cannot be held\n\t  // liable for any real or imagined damage resulting from its use.\n\t  // Users of this code must verify correctness for their application.\n\t  var wn = 0;\n\t  var x1 = flatCoordinates[end - stride];\n\t  var y1 = flatCoordinates[end - stride + 1];\n\t  for (; offset < end; offset += stride) {\n\t    var x2 = flatCoordinates[offset];\n\t    var y2 = flatCoordinates[offset + 1];\n\t\n\t    if (y1 <= y) {\n\t      if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n\t        wn++;\n\t      }\n\t    } else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n\t      wn--;\n\t    }\n\t\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  return wn !== 0;\n\t}\n\t\n\t/**\n\t * 计算在 AB 延长线上的距离点 B d 距离的点\n\t * @param xa A 点的 X\n\t * @param ya A 点的 Y\n\t * @param xb B 点的 X\n\t * @param yb B 点的 Y\n\t * @param d 距离 B 点 d 距离\n\t * @returns {Array} 返回延长线上的点\n\t */\n\tfunction getPointInExtendedLineByDistanceFromAB(xa, ya, xb, yb, d) {\n\t  var xab = void 0,\n\t      yab = void 0;\n\t  var xbd = void 0;\n\t  var xd = void 0,\n\t      yd = void 0;\n\t\n\t  xab = xb - xa;\n\t  yab = yb - ya;\n\t\n\t  xbd = Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t\n\t  if (xab > 0) {\n\t    xbd = Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t  } else {\n\t    xbd = -Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t  }\n\t\n\t  xd = xb + xbd;\n\t  yd = yb + yab / xab * xbd;\n\t\n\t  return [xd, yd];\n\t}\n\t\n\tfunction simplify(geometry) {\n\t  if (!geometry) {\n\t    return geometry;\n\t  }\n\t\n\t  var coordinates = void 0;\n\t  var geoType = geometry.geometryType;\n\t  if (geoType === _geometry2.default.POLYGON) {\n\t    coordinates = geometry.getCoordinates()[0];\n\t  } else if (geoType === _geometry2.default.LINE) {\n\t    coordinates = geometry.getCoordinates();\n\t\n\t    var sliceCoords = coordinates.slice(1, coordinates.length - 2);\n\t    var newCoords = [coordinates[0]];\n\t\n\t    for (var i = 0, len = sliceCoords.length; i < len; i += 2) {\n\t      newCoords.push(sliceCoords[i]);\n\t    }\n\t\n\t    newCoords.push(coordinates[coordinates.length - 1]);\n\t    geometry.setCoordinates(newCoords);\n\t  }\n\t}\n\t\n\texports.default = {\n\t  linearRingContainsXY: linearRingContainsXY,\n\t  linearRingsContainsXY: linearRingsContainsXY,\n\t  pointIntersectPoint: pointIntersectPoint,\n\t  squaredDistance: squaredDistance,\n\t  closestOnSegment: closestOnSegment,\n\t  getPointInExtendedLineByDistanceFromAB: getPointInExtendedLineByDistanceFromAB,\n\t  equals: equals,\n\t  simplify: simplify,\n\t  distance: distance\n\t};\n\n/***/ }),\n/* 12 */\n/*!*******************************!*\\\n  !*** ./src/core/baseevent.js ***!\n  \\*******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zhangyong on 2017/5/22.\n\t */\n\t//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n\t//\n\t// The sub event class can define it's own property ,\n\t//\n\t//  which can be passed to other event Listener via event dispatch.\n\t/**\n\t * 定义事件模型基类，自定义事件必须继承该类。\n\t *\n\t * 事件类及其继承者用于事件传递、数据传送和信息通告。\n\t *\n\t * @class BaseEvent\n\t * @constructor\n\t * @module core\n\t *\n\t */\n\tvar BaseEvent =\n\t\n\t/**\n\t * 构造函数\n\t *\n\t * @constructor\n\t * @param type\n\t */\n\tfunction BaseEvent(type) {\n\t  _classCallCheck(this, BaseEvent);\n\t\n\t  /**\n\t   * 是否停止事件的冒泡\n\t   *\n\t   * @type {Boolean}\n\t   * @property propagatinoStopped\n\t   */\n\t  this.propagatinoStopped = false;\n\t\n\t  /**\n\t   * 事件标示\n\t   *\n\t   * @example'mousedown' | 'mousemove' | 'click'\n\t   *\n\t   * @type {String}\n\t   * @property type\n\t   */\n\t  this.type = type;\n\t\n\t  /**\n\t   * 事件源\n\t   *\n\t   * @type {Object}\n\t   * @property target\n\t   */\n\t  this.target = null;\n\t};\n\t\n\t/**\n\t *\n\t * 用于阻止事件的冒泡\n\t *\n\t * @param evt {Object} evt DOM event model\n\t * @static\n\t * @method stopPropagation\n\t */\n\t\n\t\n\texports.default = BaseEvent;\n\tBaseEvent.stopPropagation = function (evt) {\n\t  return evt.stopPropagation();\n\t};\n\t\n\t/**\n\t *\n\t * 用于阻止浏览器的默认行为\n\t *\n\t * @static\n\t * @method preventDefault\n\t * @param evt {Object} evt DOM event model\n\t */\n\tBaseEvent.preventDefault = function (evt) {\n\t  return evt.preventDefault();\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 13 */\n/*!*********************************!*\\\n  !*** ./src/lyr/featurelayer.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baselayer = __webpack_require__(/*! ./baselayer */ 44);\n\t\n\tvar _baselayer2 = _interopRequireDefault(_baselayer);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _featureevent = __webpack_require__(/*! ../meek/featureevent */ 48);\n\t\n\tvar _featureevent2 = _interopRequireDefault(_featureevent);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * FeatureLayer\n\t *\n\t * class FeatureLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar FeatureLayer = function (_BaseLayer) {\n\t  _inherits(FeatureLayer, _BaseLayer);\n\t\n\t  function FeatureLayer() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, FeatureLayer);\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseLayer.call(this, options));\n\t\n\t    _this._features = [];\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._style = null;\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._styleFunction = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Map}\n\t     * @private\n\t     */\n\t    _this._featureChangeKeys = new Map();\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.style = options.style;\n\t\n\t    // add features if passed by options\n\t    if (options.features) {\n\t      _this.addFeatures(options.features);\n\t    }\n\t\n\t    /**\n\t     * zIndex\n\t     *\n\t     * @property zIndex\n\t     * @type {Number}\n\t     */\n\t    _this.zIndex = options.zIndex || 2;\n\t\n\t    /**\n\t     * The rendering buffer will be used for building an extent that\n\t     * limit geometries rendering\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._renderBuffer = options.renderBufferValue !== undefined ? options.renderBufferValue : 100;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 清除所有features\n\t   *\n\t   * @method clear\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.clear = function clear() {\n\t    if (this._features.length !== 0) {\n\t      this._features = [];\n\t\n\t      // remove the event listener from feature\n\t      var unlistenByKeyFn = _eventmanager.unlistenByKey;\n\t\n\t      this._featureChangeKeys.forEach(function (value) {\n\t        unlistenByKeyFn(value);\n\t      });\n\t\n\t      this._featureChangeKeys.clear();\n\t\n\t      this.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.CLEAR));\n\t      this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t      this.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取features\n\t   *\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 通过id查找feature\n\t   *\n\t   * @param id\n\t   * @returns {Boolean}\n\t   */\n\t  FeatureLayer.prototype.findFeature = function findFeature(id) {\n\t    var features = this.features;\n\t    return features.find(function (f) {\n\t      return f.id === id;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 向layer中添加features\n\t   *\n\t   * @method addFeatures\n\t   * @param {Object} features\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.addFeatures = function addFeatures(features) {\n\t    if (!Array.isArray(features)) {\n\t      return false;\n\t    }\n\t\n\t    this._addFeaturesInner(features);\n\t    this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 判断feature是否存在\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.hasFeature = function hasFeature(feature) {\n\t    if (feature === null || feature === undefined) {\n\t      return false;\n\t    }\n\t\n\t    var featureId = feature.id;\n\t    var features = this.features;\n\t    var findIndex = features.findIndex(function (f) {\n\t      return f.id === featureId;\n\t    });\n\t\n\t    return findIndex > -1;\n\t  };\n\t\n\t  /**\n\t   * 添加feature到layer的集合中，并派发feature事件\n\t   *\n\t   * addFeaturesInner\n\t   * @param features\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._addFeaturesInner = function _addFeaturesInner(features) {\n\t    var _this2 = this;\n\t\n\t    features.forEach(function (feature) {\n\t      if (!_this2.hasFeature(feature)) {\n\t        _this2.features.push(feature);\n\t\n\t        _this2._setupChangeEvents(feature.id, feature);\n\t        _this2.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.ADD_FEATURE, feature));\n\t      }\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 添加feature到layer的集合中\n\t   *\n\t   * @method addFeature\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.addFeature = function addFeature(feature) {\n\t    if (!feature) {\n\t      return false;\n\t    }\n\t\n\t    this._addFeaturesInner([feature]);\n\t    this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获取当前鼠标点的所有feature\n\t   *\n\t   * @method forEachFeatureAtPiexl\n\t   * @param frameState\n\t   * @param piexl {Array}\n\t   * @param callback\n\t   * @param tolerance {Number}\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.forEachFeatureAtPiexl = function forEachFeatureAtPiexl(frameState, piexl, callback, tolerance) {\n\t    // frameState 携带 view 信息\n\t\n\t    // 1、计算当前屏幕内的feature\n\t    var features = this._getCurrentExtentFeatures();\n\t\n\t    // calculate features that their extent has intersected with a given point\n\t    var extentFeatures = this._getIntersectedFeatures(piexl, features);\n\t\n\t    var piexlX = piexl[0];\n\t    var piexlY = piexl[1];\n\t    var options = {\n\t      tolerance: tolerance * frameState.viewState.resolution\n\t    };\n\t\n\t    var result = extentFeatures.filter(function (feature) {\n\t      return feature.geometry.containsXY(piexlX, piexlY, options);\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param point\n\t   * @param features\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._getIntersectedFeatures = function _getIntersectedFeatures(point, features) {\n\t    return features.filter(function (feature) {\n\t      return feature.geometry.pointInExtent(point);\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._getCurrentExtentFeatures = function _getCurrentExtentFeatures() {\n\t    return this.features;\n\t  };\n\t\n\t  /**\n\t   * 从集合中移除feature\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.removeFeature = function removeFeature(feature) {\n\t    var features = this.features;\n\t    if (features.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    var featureId = feature.id;\n\t    var index = features.findIndex(function (f) {\n\t      return f.id === featureId;\n\t    });\n\t\n\t    if (index > -1) {\n\t      features.splice(index, 1);\n\t\n\t      this._featureChangeKeys.delete(featureId);\n\t\n\t      this.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.REMOVE_FEATURE, feature));\n\t      this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t      this.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param featureKey\n\t   * @param feature\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._setupChangeEvents = function _setupChangeEvents(featureKey, feature) {\n\t    this._featureChangeKeys.set(featureKey, (0, _eventmanager.listen)(feature, _eventtype.EventType.CHANGE, this._handleFeatureChange, this));\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._handleFeatureChange = function _handleFeatureChange() {\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 样式读写器\n\t   *\n\t   * @property style\n\t   * @param value\n\t   */\n\t\n\t\n\t  /**\n\t   * 加载当前屏幕的 features\n\t   *\n\t   * 默认会把点、线放在队列尾部\n\t   *\n\t   * @method loadFeature\n\t   * @param extent {Geometry}\n\t   * @returns {feature}\n\t   */\n\t  FeatureLayer.prototype.loadFeature = function loadFeature(extent) {\n\t    var features = this.features;\n\t    var intersects = _extentutil.ExtentUtil.intersects;\n\t    var createOrUpdate = _extentutil.ExtentUtil.createOrUpdate;\n\t    var newFeatures = [];\n\t    var pointFeatures = [];\n\t    var lineFeatures = [];\n\t\n\t    features.forEach(function (feature) {\n\t      // 判断图形是否显示\n\t      if (feature.display) {\n\t        var geometry = feature.geometry;\n\t        var geometryExtent = geometry.extent;\n\t        var extentArr = createOrUpdate(geometryExtent.xmin, geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax);\n\t\n\t        if (intersects(extentArr, extent)) {\n\t          var geometryType = geometry.geometryType;\n\t          if (geometryType === _geometry2.default.POINT || geometryType === _geometry2.default.MULTI_POINT) {\n\t            pointFeatures.push(feature);\n\t          } else if (geometryType === _geometry2.default.LINE || geometryType === _geometry2.default.MULTI_LINE) {\n\t            lineFeatures.push(feature);\n\t          } else {\n\t            newFeatures.push(feature);\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return [].concat(newFeatures, lineFeatures, pointFeatures);\n\t  };\n\t\n\t  /**\n\t   * 获取样式\n\t   *\n\t   * @method styleFunction\n\t   * @returns {null|undefined|*}\n\t   */\n\t\n\t\n\t  _createClass(FeatureLayer, [{\n\t    key: 'features',\n\t    get: function get() {\n\t      return this._features;\n\t    }\n\t  }, {\n\t    key: 'style',\n\t    set: function set(value) {\n\t      this._style = value !== undefined ? value : _style.Style.defaultFunction();\n\t      this._styleFunction = value === null ? undefined : _style.Style.createFunction(this._style);\n\t    },\n\t    get: function get() {\n\t      if (this._style === null) {\n\t        this._style = _style.Style.defaultFunction();\n\t      }\n\t\n\t      return this._style;\n\t    }\n\t\n\t    /**\n\t     * renderBuffer读写器\n\t     *\n\t     */\n\t\n\t  }, {\n\t    key: 'renderBuffer',\n\t    get: function get() {\n\t      return this._renderBuffer;\n\t    },\n\t    set: function set(renderBufferValue) {\n\t      if (this._renderBuffer !== renderBufferValue) {\n\t        this._renderBuffer = renderBufferValue;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'styleFunction',\n\t    get: function get() {\n\t      return this._styleFunction;\n\t    }\n\t  }]);\n\t\n\t  return FeatureLayer;\n\t}(_baselayer2.default);\n\t\n\texports.default = FeatureLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 14 */\n/*!*******************************!*\\\n  !*** ./src/utils/mousekey.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.singleClick = singleClick;\n\texports.mouseWheel = mouseWheel;\n\texports.noModifierKeys = noModifierKeys;\n\texports.targetNotEditable = targetNotEditable;\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction singleClick(browserEvent) {\n\t  return browserEvent.type === _browserevent2.default.SINGLE_CLICK;\n\t} /**\n\t   * Created by zhangyong on 2017/5/23.\n\t   */\n\t\n\tfunction mouseWheel(browserEvent) {\n\t  return browserEvent.type === _browserevent2.default.MOUSE_WHEEL || browserEvent.type === _browserevent2.default.WHEEL;\n\t}\n\t\n\tfunction noModifierKeys(browserEvent) {\n\t  var originalEvent = browserEvent.originalEvent;\n\t  return !originalEvent.altKey && !(originalEvent.metaKey || originalEvent.ctrlKey) && !originalEvent.shiftKey;\n\t}\n\t\n\tfunction targetNotEditable(mapBrowserEvent) {\n\t  var target = mapBrowserEvent.originalEvent.target;\n\t  var tagName = target.tagName;\n\t  return tagName !== 'INPUT' && tagName !== 'SELECT' && tagName !== 'TEXTAREA';\n\t}\n\t\n\texports.default = {\n\t  singleClick: singleClick,\n\t  mouseWheel: mouseWheel,\n\t  noModifierKeys: noModifierKeys,\n\t  targetNotEditable: targetNotEditable\n\t};\n\n/***/ }),\n/* 15 */\n/*!**************************!*\\\n  !*** ./src/utils/obj.js ***!\n  \\**************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zhangyong on 2017/6/5.\n\t */\n\t\n\tvar Obj = function () {\n\t  function Obj() {\n\t    _classCallCheck(this, Obj);\n\t  }\n\t\n\t  /**\n\t   * Get a collection from object\n\t   * @param object\n\t   * @returns {Array}\n\t   */\n\t  Obj.getValues = function getValues(object) {\n\t    var values = [];\n\t    for (var property in object) {\n\t      values.push(object[property]);\n\t    }\n\t    return values;\n\t  };\n\t\n\t  /**\n\t   * Clear all properties in object\n\t   * @param object\n\t   */\n\t\n\t\n\t  Obj.clear = function clear(object) {\n\t    for (var property in object) {\n\t      Reflect.deleteProperty(object, property);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Convert an object to a map instance\n\t   * @param obj\n\t   * @returns {Map}\n\t   */\n\t\n\t\n\t  Obj.objectToMap = function objectToMap(obj) {\n\t    var map = new Map();\n\t\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t      for (var _iterator = Object.keys(obj)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t        var ke = _step.value;\n\t\n\t        map.set(ke, obj[ke]);\n\t      }\n\t    } catch (err) {\n\t      _didIteratorError = true;\n\t      _iteratorError = err;\n\t    } finally {\n\t      try {\n\t        if (!_iteratorNormalCompletion && _iterator.return) {\n\t          _iterator.return();\n\t        }\n\t      } finally {\n\t        if (_didIteratorError) {\n\t          throw _iteratorError;\n\t        }\n\t      }\n\t    }\n\t\n\t    return map;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * Convert a map object to object\n\t   *\n\t   * @static\n\t   * @method mapToObject\n\t   * @param map {Map} 传入的 Map 的对象\n\t   * @returns {Object} 装换成后的 Object 的对象\n\t   */\n\t\n\t\n\t  Obj.mapToObject = function mapToObject(map) {\n\t    // 合法性判断\n\t    if (map === undefined || map === null) {\n\t      return {};\n\t    }\n\t\n\t    var object = {};\n\t    map.forEach(function (value, key) {\n\t      object[key] = value;\n\t    });\n\t\n\t    return object;\n\t  };\n\t\n\t  return Obj;\n\t}();\n\t\n\texports.default = Obj;\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 16 */\n/*!********************************!*\\\n  !*** ./src/style/linestyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 27);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义一个线图形的样式\n\t *\n\t * @class LineStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     var lineStye = new mk.LineStyle([0, 0, 255],1,3,\n\t *        mk.LineStyle.LineCap.ROUND,\n\t *        mk.LineStyle.LineJion.ROUND)\n\t */\n\tvar LineStyle = function (_BaseStyle) {\n\t  _inherits(LineStyle, _BaseStyle);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param color\n\t   * @param alpha\n\t   * @param width\n\t   * @param style\n\t   * @param lineCap\n\t   * @param lineJion\n\t   * @param miterLimit\n\t   */\n\t  function LineStyle() {\n\t    var color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [255, 255, 255];\n\t    var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\t    var width = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : LineStyle.SOLID;\n\t    var lineCap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : LineStyle.LineCap.BUTT;\n\t    var lineJion = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : LineStyle.LineJion.MITER;\n\t    var miterLimit = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 10;\n\t\n\t    _classCallCheck(this, LineStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this.width = width;\n\t    _this.lineCap = lineCap;\n\t    _this.lineJion = lineJion;\n\t    _this.miterLimit = miterLimit;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 线宽\n\t   *\n\t   * @property width\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆线样式\n\t   *\n\t   * @method clone\n\t   * @returns {LineStyle}\n\t   */\n\t  LineStyle.prototype.clone = function clone() {\n\t    var newStyle = new LineStyle(this.color, this.alpha, this.width, this.style, this.lineCap, this.lineJion, this.miterLimit);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  _createClass(LineStyle, [{\n\t    key: 'width',\n\t    get: function get() {\n\t      return this._width;\n\t    },\n\t    set: function set(value) {\n\t      this._width = value;\n\t    }\n\t\n\t    /**\n\t     * 线的末端样式\n\t     *\n\t     * @property lineCap\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'lineCap',\n\t    set: function set(value) {\n\t      this._lineCap = value;\n\t    },\n\t    get: function get() {\n\t      return this._lineCap;\n\t    }\n\t\n\t    /**\n\t     * 交叉线时的样式\n\t     *\n\t     * @property lineJion\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'lineJion',\n\t    set: function set(value) {\n\t      this._lineJion = value;\n\t    },\n\t    get: function get() {\n\t      return this._lineJion;\n\t    }\n\t\n\t    /**\n\t     * 斜角缝限制\n\t     *\n\t     * @property miterLimit\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'miterLimit',\n\t    set: function set(value) {\n\t      this._miterLimit = value;\n\t    },\n\t    get: function get() {\n\t      return this._miterLimit;\n\t    }\n\t  }]);\n\t\n\t  return LineStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 定义线的样式\n\t * @type {string}\n\t */\n\t\n\t\n\texports.default = LineStyle;\n\tLineStyle.SOLID = 'solid';\n\t\n\t/**\n\t * TODO 由郭靖来处理，参考 PointStyle\n\t * @type {string}\n\t */\n\tLineStyle.DASH = 'dash';\n\t\n\tLineStyle.DOT = 'dot';\n\t\n\tLineStyle.DASHDOT = 'dashdot';\n\t\n\tLineStyle.DASHDOTDOT = 'dashdotdot';\n\t\n\tLineStyle.NULL = 'none';\n\t\n\tLineStyle.LineCap = {\n\t  BUTT: 'butt',\n\t  ROUND: 'round',\n\t  SQUARE: 'square'\n\t\n\t  // visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\n\t};LineStyle.LineJion = {\n\t  MITER: 'miter', // 默认，创建尖角\n\t  BEVEL: 'bevel',\n\t  ROUND: 'round'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 17 */\n/*!****************************!*\\\n  !*** ./src/style/style.js ***!\n  \\****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Style = undefined;\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _fillstyle = __webpack_require__(/*! ./fillstyle */ 52);\n\t\n\tvar _fillstyle2 = _interopRequireDefault(_fillstyle);\n\t\n\tvar _linestyle = __webpack_require__(/*! ./linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _pointstyle = __webpack_require__(/*! ./pointstyle */ 53);\n\t\n\tvar _pointstyle2 = _interopRequireDefault(_pointstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\tvar Style = exports.Style = {};\n\t\n\t/**\n\t * 设置缺省图形style\n\t *\n\t * Create a defaut style for feature layer\n\t * @returns {null|Array|[*]}\n\t */\n\tStyle.defaultFunction = function () {\n\t  if (!Style._default) {\n\t    var white = [255, 255, 255];\n\t    var blue = [0, 153, 255];\n\t    var width = 1.5;\n\t\n\t    Style._default = {};\n\t\n\t    // 面样式 polygon style\n\t    Style._default[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, new _linestyle2.default(blue, 1, 1.25), 0.2)];\n\t    Style._default[_geometry2.default.MULTI_POLYGON] = Style._default[_geometry2.default.POLYGON];\n\t    Style._default[_geometry2.default.PARALLELOGRAM] = Style._default[_geometry2.default.POLYGON];\n\t\n\t    // same as polygon style\n\t    Style._default[_geometry2.default.EXTENT] = Style._default[_geometry2.default.POLYGON];\n\t\n\t    // 线样式 line style\n\t    Style._default[_geometry2.default.LINE] = [new _linestyle2.default(blue, 1, width) // 内框\n\t    ];\n\t\n\t    // 点样式 point style\n\t    Style._default[_geometry2.default.POINT] = [new _pointstyle2.default(10, white, 1, new _linestyle2.default(blue, 1, width))];\n\t  }\n\t\n\t  return Style._default;\n\t};\n\t\n\t/**\n\t * Create a default style while drawing\n\t * @returns {{}}\n\t */\n\tStyle.createDefaultEditing = function () {\n\t  var styles = {};\n\t  var white = [255, 255, 255];\n\t  var blue = [0, 153, 255];\n\t  var width = 1.5;\n\t\n\t  // 面样式\n\t  styles[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, // 填充\n\t  new _linestyle2.default(blue, 1, 1) // 边框\n\t  , 0.2)];\n\t\n\t  styles[_geometry2.default.MULTI_POLYGON] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.EXTENT] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.PARALLELOGRAM] = styles[_geometry2.default.POLYGON];\n\t\n\t  // 线样式\n\t  styles[_geometry2.default.LINE] = [new _linestyle2.default(white, 1, width + 1, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND), // 外框\n\t  new _linestyle2.default(blue, 1, width, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND) // 内框\n\t  ];\n\t  styles[_geometry2.default.MULTI_LINE] = styles[_geometry2.default.LINE];\n\t\n\t  // 点样式\n\t  styles[_geometry2.default.POINT] = [new _pointstyle2.default(10, white, 0.1, new _linestyle2.default(blue, 1, 2))];\n\t  styles[_geometry2.default.MULTI_POINT] = styles[_geometry2.default.POINT];\n\t\n\t  return styles;\n\t};\n\t\n\t/**\n\t *\n\t * @returns {{}}\n\t */\n\tStyle.createDefaultSelecting = function () {\n\t  var styles = {};\n\t  var white = [255, 255, 255];\n\t  var blue = [0, 153, 255];\n\t  var width = 3;\n\t  var outsideLine = new _linestyle2.default(white, 1, width + 2, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND); // 外框\n\t  var insideLine = new _linestyle2.default(blue, 1, width, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND);\n\t  // 面样式\n\t  styles[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, outsideLine, 0.5), new _fillstyle2.default(white, insideLine, 0)];\n\t  styles[_geometry2.default.MULTI_POLYGON] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.EXTENT] = styles[_geometry2.default.POLYGON];\n\t\n\t  // 线样式\n\t  styles[_geometry2.default.LINE] = [outsideLine, // 外框\n\t  insideLine // 内框\n\t  ];\n\t  styles[_geometry2.default.MULTI_LINE] = styles[_geometry2.default.LINE];\n\t\n\t  // 点样式\n\t  styles[_geometry2.default.POINT] = [new _pointstyle2.default(12, blue, 1, new _linestyle2.default(blue, 1, 1))];\n\t  styles[_geometry2.default.MULTI_POINT] = styles[_geometry2.default.POINT];\n\t\n\t  return styles;\n\t};\n\t\n\t/**\n\t * Convert the passed obj into a style function.\n\t *\n\t * @param obj\n\t * @returns {*}\n\t */\n\tStyle.createFunction = function (obj) {\n\t  var styleFunction = void 0;\n\t\n\t  if (typeof obj === 'function') {\n\t    styleFunction = obj;\n\t  } else {\n\t    var styles = void 0;\n\t\n\t    if (Array.isArray(obj)) {\n\t      styles = obj;\n\t    } else {\n\t      styles = [obj];\n\t    }\n\t\n\t    styleFunction = function styleFunction(feature) {\n\t      return styles[0][feature.geometry.geometryType];\n\t    };\n\t  }\n\t\n\t  return styleFunction;\n\t};\n\t\n\texports.default = {\n\t  Style: Style\n\t};\n\n/***/ }),\n/* 18 */\n/*!******************************!*\\\n  !*** ./src/utils/domutil.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.createCanvasContext2D = createCanvasContext2D;\n\texports.outerWidth = outerWidth;\n\texports.outerHeight = outerHeight;\n\texports.removeNode = removeNode;\n\texports.removeChildren = removeChildren;\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\t/**\n\t *\n\t * @param optWidth\n\t * @param optHeight\n\t * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n\t */\n\tfunction createCanvasContext2D(optWidth, optHeight) {\n\t  var canvas = document.createElement('CANVAS');\n\t  if (optWidth) {\n\t    canvas.width = optWidth;\n\t  }\n\t\n\t  if (optHeight) {\n\t    canvas.height = optHeight;\n\t  }\n\t\n\t  return canvas.getContext('2d');\n\t}\n\t\n\t/**\n\t *\n\t * @param element\n\t * @returns {number}\n\t */\n\tfunction outerWidth(element) {\n\t  var width = element.offsetWidth;\n\t  var style = getComputedStyle(element);\n\t  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\t\n\t  return width;\n\t}\n\t\n\t/**\n\t *\n\t * @param element\n\t * @returns {number}\n\t */\n\tfunction outerHeight(element) {\n\t  var height = element.offsetHeight;\n\t  var style = getComputedStyle(element);\n\t  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\t\n\t  return height;\n\t}\n\t\n\tfunction removeNode(node) {\n\t  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n\t}\n\t\n\t/**\n\t *\n\t * @param node\n\t */\n\tfunction removeChildren(node) {\n\t  while (node.lastChild) {\n\t    node.removeChild(node.lastChild);\n\t  }\n\t}\n\t\n\texports.default = {\n\t  createCanvasContext2D: createCanvasContext2D,\n\t  outerWidth: outerWidth,\n\t  outerHeight: outerHeight,\n\t  removeChildren: removeChildren,\n\t  removeNode: removeNode\n\t};\n\n/***/ }),\n/* 19 */\n/*!******************************!*\\\n  !*** ./src/utils/helpers.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.colorToString = colorToString;\n\t/**\n\t * Created by zypc on 2016/11/13.\n\t */\n\t\n\t/**\n\t * 将rbg数组装换成rgba的字符串格式\n\t * @param color rgb数组\n\t * @param alpha 透明度\n\t * @returns {string} 返回rgba格式字符串\n\t */\n\tfunction colorToString(color) {\n\t  var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\t\n\t  var r = color[0];\n\t  if (r != (r | 0)) {\n\t    r = r + 0.5 | 0;\n\t  }\n\t\n\t  var g = color[1];\n\t  if (g != (g | 0)) {\n\t    g = g + 0.5 | 0;\n\t  }\n\t\n\t  var b = color[2];\n\t  if (b != (b | 0)) {\n\t    b = b + 0.5 | 0;\n\t  }\n\t\n\t  return \"rgba(\" + r + \", \" + g + \" , \" + b + \" , \" + alpha + \" )\";\n\t}\n\t\n\texports.default = {\n\t  colorToString: colorToString\n\t};\n\n/***/ }),\n/* 20 */\n/*!********************************!*\\\n  !*** ./src/control/control.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Control = function (_BaseObject) {\n\t  _inherits(Control, _BaseObject);\n\t\n\t  function Control() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Control);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._element = options.element ? options.element : null;\n\t\n\t    _this._target = null;\n\t\n\t    _this._map = null;\n\t\n\t    _this._listenerKeys = [];\n\t\n\t    if (options.target) {\n\t      _this.target = options.target;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Control, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this.map) {\n\t        (0, _domutil.removeNode)(this._element);\n\t      }\n\t\n\t      this._listenerKeys.forEach(function (listener) {\n\t        return (0, _eventmanager.unlistenByKey)(listener);\n\t      });\n\t\n\t      this._listenerKeys.length = 0;\n\t      this._map = value;\n\t\n\t      if (this._map) {\n\t        var target = this._target ? this._target : value.overlayContainerStopEvent;\n\t        target.appendChild(this._element);\n\t\n\t        value.render();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'target',\n\t    set: function set(value) {\n\t      this._target = typeof value === 'string' ? document.getElementById(value) : value;\n\t    }\n\t  }]);\n\t\n\t  return Control;\n\t}(_baseobject2.default);\n\t\n\texports.default = Control;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 21 */\n/*!**************************************!*\\\n  !*** ./src/geometry/mutilpolygon.js ***!\n  \\**************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ./polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tvar _orient = __webpack_require__(/*! ./support/orient */ 33);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义复合多边形对象和数据结构\n\t *\n\t *\n\t * @class MutilPolygon\n\t * @module geometry\n\t * @constructor\n\t *\n\t */\n\tvar MutilPolygon = function (_Geometry) {\n\t  _inherits(MutilPolygon, _Geometry);\n\t\n\t  function MutilPolygon(coordinates) {\n\t    _classCallCheck(this, MutilPolygon);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._polygons = [];\n\t\n\t    _this.stride = 2;\n\t\n\t    /**\n\t     * 记录当前多边形内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前多边形内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    _this.setCoordinates(coordinates);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @returns {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 获得复合多边形的坐标\n\t   * @returns {Array|*}\n\t   */\n\t  MutilPolygon.prototype.getCoordinates = function getCoordinates() {\n\t    return this._polygons;\n\t  };\n\t\n\t  /**\n\t   * 设置复合多边形的坐标\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this._polygons = coordinates;\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获得一个多边形对象\n\t   * @method getPolygon\n\t   * @param index 多边形的下标\n\t   * @returns {mk.Polygon} 返回一个新的多边形对象\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getPolygon = function getPolygon(index) {\n\t    if (index < 0 && this._polygons.length < index) {\n\t      return null;\n\t    }\n\t\n\t    var coords = this._polygons[index];\n\t    var outRing = [];\n\t    var innerRing = [];\n\t    coords.forEach(function (rings) {\n\t      rings.forEach(function (points) {\n\t        innerRing.push([points[0], points[1]]);\n\t      });\n\t\n\t      outRing.push(innerRing);\n\t      innerRing = [];\n\t    });\n\t\n\t    var polygon = new _polygon2.default(outRing);\n\t    return polygon;\n\t  };\n\t\n\t  MutilPolygon.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    var polygon = this.getPolygon(0);\n\t    var coordinates = polygon.getCoordinates()[0];\n\t    if (coordinates.length === 0) {\n\t      return;\n\t    }\n\t\n\t    var lastPoint = coordinates[coordinates.length - 2];\n\t    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 判断集合多边形是否包括指定 x 和 y\n\t   * @param x\n\t   * @param y\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.containsXY = function containsXY(x, y) {\n\t    var polygons = this._polygons;\n\t    for (var i = 0, len = polygons.length; i < len; i++) {\n\t      var onePolygon = this.getPolygon(i);\n\t      if (onePolygon.containsXY(x, y)) {\n\t        return true;\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取标签显示的内点\n\t   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      this._flatInteriorPointRevision = this.revision;\n\t\n\t      var polygons = this._polygons;\n\t      var flatCoordinates = [];\n\t      var endss = [];\n\t\n\t      var orderArray = [];\n\t\n\t      polygons.forEach(function (polygon) {\n\t        var outRings = polygon[0];\n\t        orderArray.push(outRings);\n\t      });\n\t\n\t      orderArray.sort(function (arr1, arr2) {\n\t        return arr1.length - arr2.length;\n\t      });\n\t\n\t      var lastLen = 0;\n\t      orderArray.forEach(function (arr) {\n\t        var currLen = arr.length * 2 + lastLen;\n\t        endss.push([currLen]);\n\t        lastLen = currLen;\n\t\n\t        arr.forEach(function (points) {\n\t          flatCoordinates.push(points[0], points[1]);\n\t        });\n\t      });\n\t\n\t      var flatCenters = (0, _interpolate.centerLinearRingss)(flatCoordinates, 0, endss, this.stride);\n\t      this._flatInteriorPoint = (0, _interpolate.linearRingss)(this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride, flatCenters);\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 计算复合多边形顺时针坐标\n\t   * @param flatCoordinates\n\t   * @param endss\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getOrientedFlatCoordinates = function getOrientedFlatCoordinates(flatCoordinates, endss) {\n\t    var orientedFlatCoordinates = void 0;\n\t\n\t    if ((0, _orient.linearRingssAreOriented)(flatCoordinates, 0, endss, this.stride)) {\n\t      orientedFlatCoordinates = flatCoordinates;\n\t    } else {\n\t      orientedFlatCoordinates = [].concat(_toConsumableArray(flatCoordinates));\n\t      orientedFlatCoordinates.length = (0, _orient.orientLinearRingss)(orientedFlatCoordinates, 0, endss, this.stride);\n\t    }\n\t\n\t    return orientedFlatCoordinates;\n\t  };\n\t\n\t  /**\n\t   * 根据坐标值计算复合多边形的点下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord 坐标值，[x, y]结构\n\t   * @returns {\n\t   *    {\n\t   *      polygonIndex: number 位于第几个多边形上 ,\n\t   *      ringIndex: number 位于多边形第几个环上,\n\t   *      index: number 位于环上第几个顶点上\n\t   *     }\n\t   *   }\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    var polygonCoods = this.getCoordinates();\n\t\n\t    for (var ii = 0, iiLen = polygonCoods.length; ii < iiLen; ii++) {\n\t      var coords = polygonCoods[ii];\n\t\n\t      for (var i = 0, len = coords.length; i < len; i++) {\n\t        var rings = coords[i];\n\t        for (var j = 0, jLen = rings.length; j < jLen; j++) {\n\t          var point = rings[j];\n\t          if (point[0] === coord[0] && point[1] === coord[1]) {\n\t            return {\n\t              polygonIndex: ii,\n\t              ringIndex: i,\n\t              index: j\n\t            };\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return {\n\t      polygonIndex: -1,\n\t      ringIndex: -1,\n\t      index: -1\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 克隆一个 Mutilpolygon\n\t   * @returns {MutilPolygon}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.clone = function clone() {\n\t    var allCoords = [];\n\t\n\t    this._polygons.forEach(function (coords) {\n\t      var outRing = [];\n\t      var innerRing = [];\n\t      coords.forEach(function (rings) {\n\t        rings.forEach(function (points) {\n\t          innerRing.push([points[0], points[1]]);\n\t        });\n\t\n\t        outRing.push(innerRing);\n\t      });\n\t\n\t      allCoords.push(outRing);\n\t      outRing = [];\n\t    });\n\t\n\t    var newMutilPolygon = new MutilPolygon(allCoords);\n\t    return newMutilPolygon;\n\t  };\n\t\n\t  /**\n\t   * 将一个复合多边形，转换成多边形集合\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.convertToPolygons = function convertToPolygons() {\n\t    var _this2 = this;\n\t\n\t    var polygons = [];\n\t    this._polygons.forEach(function (p, index) {\n\t      polygons.push(_this2.getPolygon(index));\n\t    });\n\t\n\t    return polygons;\n\t  };\n\t\n\t  _createClass(MutilPolygon, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.MULTI_POLYGON;\n\t    }\n\t\n\t    /**\n\t     * 计算复合多边形的最小外界矩形\n\t     * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n\t     * 多边形的矩形\n\t     *\n\t     * @returns {Extent|null}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (this._extent === null) {\n\t        var allPolygonCoords = this.getCoordinates();\n\t\n\t        // 计算最小外界矩形，只考虑外围环\n\t        if (allPolygonCoords.length > 0) {\n\t          var xmin = Number.POSITIVE_INFINITY;\n\t          var ymin = Number.POSITIVE_INFINITY;\n\t          var xmax = Number.NEGATIVE_INFINITY;\n\t          var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t          allPolygonCoords.forEach(function (polyCoods) {\n\t            var rings = polyCoods[0];\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t              for (var _iterator = rings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                var ring = _step.value;\n\t\n\t                xmin = Math.min(xmin, ring[0]);\n\t                ymin = Math.min(ymin, ring[1]);\n\t                xmax = Math.max(xmax, ring[0]);\n\t                ymax = Math.max(ymax, ring[1]);\n\t              }\n\t            } catch (err) {\n\t              _didIteratorError = true;\n\t              _iteratorError = err;\n\t            } finally {\n\t              try {\n\t                if (!_iteratorNormalCompletion && _iterator.return) {\n\t                  _iterator.return();\n\t                }\n\t              } finally {\n\t                if (_didIteratorError) {\n\t                  throw _iteratorError;\n\t                }\n\t              }\n\t            }\n\t          });\n\t\n\t          this._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t        }\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t  }]);\n\t\n\t  return MutilPolygon;\n\t}(_geometry2.default);\n\t\n\texports.default = MutilPolygon;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 22 */\n/*!***************************************!*\\\n  !*** ./src/geometry/parallelogram.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ./polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Parallelogram = function (_Polygon) {\n\t  _inherits(Parallelogram, _Polygon);\n\t\n\t  function Parallelogram(coordinates) {\n\t    _classCallCheck(this, Parallelogram);\n\t\n\t    return _possibleConstructorReturn(this, _Polygon.call(this, coordinates));\n\t  }\n\t\n\t  Parallelogram.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates()[0].findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  Parallelogram.prototype.clone = function clone() {\n\t    return new Parallelogram(this.getCoordinates());\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param coordinates\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Parallelogram.getTheLastPoint = function getTheLastPoint(coordinates) {\n\t    var firstPoint = coordinates[0];\n\t    var secondPoint = coordinates[1];\n\t    var thirdPoint = coordinates[2];\n\t\n\t    var dx = thirdPoint[0] - secondPoint[0];\n\t    var dy = thirdPoint[1] - secondPoint[1];\n\t\n\t    return [firstPoint[0] + dx, firstPoint[1] + dy];\n\t  };\n\t\n\t  /**\n\t   * 用于计算和更新平行四边形的顶点\n\t   *\n\t   * @param p 平行四边形对象\n\t   * @param vertex 新移动的点\n\t   * @param oldVertex 上次移动的点\n\t   * @param dragSegment 数据对象\n\t   * @returns {*} 返回新的点集合（3维数组）\n\t   */\n\t\n\t\n\t  Parallelogram.updateCoordinatesForModification = function updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n\t    var dis = 0;\n\t    if (oldVertex) {\n\t      dis = (0, _geometryutil.distance)(oldVertex, vertex);\n\t    }\n\t\n\t    var oldRingsCoordinates = p.getCoordinates();\n\t    if (dis === 0) {\n\t      return oldRingsCoordinates;\n\t    }\n\t\n\t    var oldCoordinates = oldRingsCoordinates[0];\n\t    var segement = dragSegment[0];\n\t    var edgeIndex = segement.index;\n\t\n\t    var firstCoord = void 0;\n\t    var nowCood = void 0;\n\t    var otherCood = void 0;\n\t\n\t    if (edgeIndex === 0 || edgeIndex === 4) {\n\t      firstCoord = oldCoordinates[3];\n\t      nowCood = oldCoordinates[0];\n\t      otherCood = oldCoordinates[1];\n\t    } else {\n\t      firstCoord = oldCoordinates[edgeIndex - 1];\n\t      nowCood = oldCoordinates[edgeIndex];\n\t      otherCood = oldCoordinates[edgeIndex + 1];\n\t    }\n\t\n\t    // 计算延长线上的一点\n\t    var newCood1 = (0, _geometryutil.getPointInExtendedLineByDistanceFromAB)(firstCoord[0], firstCoord[1], nowCood[0], nowCood[1], dis);\n\t\n\t    // 计算向量\n\t    var tempXX = nowCood[0] - firstCoord[0];\n\t    var tempYY = nowCood[1] - firstCoord[1];\n\t    var tempX2 = vertex[0] - oldVertex[0];\n\t    var tempY2 = vertex[1] - oldVertex[1];\n\t\n\t    // 使用向量的点积，来计算两个向量的方向是否一致\n\t    // 如果 <0 则表示异向\n\t    var direction = tempX2 * tempXX + tempY2 * tempYY;\n\t\n\t    var dx = newCood1[0] - nowCood[0];\n\t    var dy = newCood1[1] - nowCood[1];\n\t    var newCood2 = void 0;\n\t\n\t    // 不同方向\n\t    if (direction < 0) {\n\t      newCood1[0] = nowCood[0] - dx;\n\t      newCood1[1] = nowCood[1] - dy;\n\t\n\t      newCood2 = [otherCood[0] - dx, otherCood[1] - dy];\n\t    } else {\n\t      newCood2 = [otherCood[0] + dx, otherCood[1] + dy];\n\t    }\n\t\n\t    oldCoordinates[edgeIndex] = newCood1;\n\t    oldCoordinates[edgeIndex + 1] = newCood2;\n\t\n\t    if (edgeIndex === 0) {\n\t      oldCoordinates[4] = oldCoordinates[0];\n\t    } else if (edgeIndex === 4 || edgeIndex === 3) {\n\t      oldCoordinates[0] = oldCoordinates[4];\n\t    }\n\t\n\t    return [oldCoordinates];\n\t  };\n\t\n\t  _createClass(Parallelogram, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.PARALLELOGRAM;\n\t    }\n\t  }]);\n\t\n\t  return Parallelogram;\n\t}(_polygon2.default);\n\t\n\texports.default = Parallelogram;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 23 */\n/*!*******************************!*\\\n  !*** ./src/geometry/point.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ./support/geometryutil */ 11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义点类和数据结构\n\t *\n\t * @class Point\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *    var point = new mk.Point(100, 100)\n\t */\n\tvar Point = function (_Geometry) {\n\t  _inherits(Point, _Geometry);\n\t\n\t  /**\n\t   * 根据x和y构建一个点对象\n\t   * @param x 默认值为0\n\t   * @param y 默认值为0\n\t   * @constructor\n\t   */\n\t  function Point(xValue, yValue) {\n\t    _classCallCheck(this, Point);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this.x = xValue;\n\t    _this.y = yValue;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取对象的几何类型\n\t   *\n\t   * @protected\n\t   */\n\t\n\t\n\t  /**\n\t   * 根据x,y的偏移量得到点\n\t   *\n\t   * @method offset\n\t   * @param nx x轴偏移量\n\t   * @param ny y轴偏移量\n\t   * @returns {mk.Point} 返回偏移以后的点对象\n\t   */\n\t  Point.prototype.offset = function offset(nx, ny) {\n\t    return new Point(this.x + nx, this.y + ny);\n\t  };\n\t\n\t  /**\n\t   * containsXY\n\t   * @param x\n\t   * @param y\n\t   * @param opt\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Point.prototype.containsXY = function containsXY(x, y) {\n\t    var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var tolerance = opt.tolerance ? opt.tolerance : 2;\n\t    var pointA = this;\n\t\n\t    var distance = (0, _geometryutil.squaredDistance)(pointA.x, pointA.y, x, y);\n\t    if (Math.sqrt(distance / 2) <= tolerance) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 更新x,y坐标值\n\t   *\n\t   * @method update\n\t   * @param nx x新值\n\t   * @param ny y新值\n\t   */\n\t\n\t\n\t  Point.prototype.update = function update(nx, ny) {\n\t    this.x = nx;\n\t    this.y = ny;\n\t\n\t    this._extent = null;\n\t  };\n\t\n\t  /**\n\t   *\n\t   *\n\t   * getFlatInteriorPoint\n\t   * @returns {[]}\n\t   */\n\t\n\t\n\t  Point.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    return this.getCoordinates();\n\t  };\n\t\n\t  /**\n\t   * 获取点的坐标\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Point.prototype.getCoordinates = function getCoordinates() {\n\t    return [this.x, this.y];\n\t  };\n\t\n\t  /**\n\t   * 点的位置就是坐标点的位置减去偏移量的位置\n\t   *\n\t   * @method getFormShowPosition\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @return {[]}\n\t   */\n\t\n\t\n\t  Point.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\n\t    return [this.x - offsetX, this.y - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置点的坐标\n\t   *\n\t   * @method setCoordinates\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  Point.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this.update(coordinates[0], coordinates[1]);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * getCoordinateIndex\n\t   * @returns {number}\n\t   */\n\t\n\t\n\t  Point.prototype.getCoordinateIndex = function getCoordinateIndex() {\n\t    return 0;\n\t  };\n\t\n\t  /**\n\t   * 判断两个图形对象是否相等\n\t   *\n\t   * 判断标准：该图形的所有顶点值是否一致\n\t   *\n\t   * @method equal\n\t   * @param geometry\n\t   * @return {Boolean}\n\t   */\n\t\n\t\n\t  Point.prototype.equal = function equal(geom) {\n\t    var equals = false;\n\t    if (geom !== null) {\n\t      equals = this.x === geom.x && this.y === geom.x || Number.isNaN(this.x) && Number.isNaN(this.y) && Number.isNaN(geom.x) && Number.isNaN(geom.y);\n\t    }\n\t    return equals;\n\t  };\n\t\n\t  /**\n\t   * 克隆点\n\t   *\n\t   * @method clone\n\t   * @returns {Point}\n\t   */\n\t\n\t\n\t  Point.prototype.clone = function clone() {\n\t    return new Point(this.x, this.y);\n\t  };\n\t\n\t  _createClass(Point, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.POINT;\n\t    }\n\t\n\t    /**\n\t     * 获取点的最小外接矩形\n\t     *\n\t     * @note 点是没有最小外接矩形\n\t     * @returns {null}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (!this._extent) {\n\t        var extentObj = _extentutil.ExtentUtil.createScaleExtent(this, 8);\n\t        this._extent = new _extent2.default(extentObj[0], extentObj[1], extentObj[2], extentObj[3]);\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取 X 坐标值\n\t     *\n\t     * @property x\n\t     * @type x {number}\n\t     */\n\t\n\t  }, {\n\t    key: 'x',\n\t    get: function get() {\n\t      return this._x;\n\t    },\n\t    set: function set(value) {\n\t      this._x = value;\n\t      this._extent = null;\n\t    }\n\t\n\t    /**\n\t     * 获取 Y 坐标值\n\t     *\n\t     * @property y\n\t     * @type {number}\n\t     */\n\t\n\t  }, {\n\t    key: 'y',\n\t    get: function get() {\n\t      return this._y;\n\t    },\n\t    set: function set(value) {\n\t      this._y = value;\n\t      this._extent = null;\n\t    }\n\t  }]);\n\t\n\t  return Point;\n\t}(_geometry2.default);\n\t\n\texports.default = Point;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 24 */\n/*!*************************************!*\\\n  !*** ./src/lyr/image/imagestate.js ***!\n  \\*************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/6/6.\n\t */\n\t\n\tvar ImageState = exports.ImageState = {};\n\t\n\t/**\n\t * On IDLE\n\t * @type {number}\n\t */\n\tImageState.IDLE = 0;\n\t\n\t/**\n\t * On loading\n\t * @type {number}\n\t */\n\tImageState.LOADING = 1;\n\t\n\t/**\n\t * Already loaded\n\t * @type {number}\n\t */\n\tImageState.LOADED = 2;\n\t\n\t/**\n\t * Error occurred\n\t * @type {number}\n\t */\n\tImageState.ERROR = 3;\n\t\n\texports.default = {\n\t  ImageState: ImageState\n\t};\n\n/***/ }),\n/* 25 */\n/*!*****************************!*\\\n  !*** ./src/meek/feature.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The feature class is intent to represent geographic features,with a geometry ,a style and\n\t * other attrubutes properties.\n\t * Feature provides a function named style that can be seted a style you want,\n\t * otherwise will use the style of feature layer.\n\t *\n\t * @class Feature\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Feature = function (_BaseObject) {\n\t  _inherits(Feature, _BaseObject);\n\t\n\t  function Feature(geometry) {\n\t    var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t    var displayText = arguments[2];\n\t    var style = arguments[3];\n\t\n\t    _classCallCheck(this, Feature);\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._styleFunction = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._geometryChangeKey = null;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.geometry = geometry;\n\t\n\t    /**\n\t     * 设置feature属性\n\t     */\n\t    _this.initArribute(attributes);\n\t\n\t    /**\n\t     * 设置feature样式\n\t     *\n\t     */\n\t    _this.style = style;\n\t\n\t    /**\n\t     * 设置feature文本\n\t     *\n\t     */\n\t    _this.displayText = displayText;\n\t\n\t    /**\n\t     * 设置feature是否显示\n\t     *\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.display = true;\n\t\n\t    /**\n\t     * 设置feature的标签是否显示\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.textDisplay = true;\n\t\n\t    /**\n\t     * 设置feature的样式是否高亮\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.styleHighLight = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  Feature.prototype._handleGeometryChanged = function _handleGeometryChanged() {\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 设置feature属性\n\t   *\n\t   * @method initArribute\n\t   * @param attributes\n\t   */\n\t\n\t\n\t  Feature.prototype.initArribute = function initArribute(attributes) {\n\t    if (!(attributes instanceof Object)) {\n\t      attributes = {};\n\t    }\n\t\n\t    this._attributesMap = _obj2.default.objectToMap(attributes);\n\t  };\n\t\n\t  /**\n\t   * 获取feature属性\n\t   *\n\t   * @method get\n\t   * @param property\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  Feature.prototype.get = function get(property) {\n\t    if (this._attributesMap.has(property)) {\n\t      return this._attributesMap.get(property);\n\t    }\n\t\n\t    return undefined;\n\t  };\n\t\n\t  /**\n\t   * 设置属性的值\n\t   *\n\t   * @method set\n\t   * @param property\n\t   * @param value\n\t   * @return {Map.<K, V>}\n\t   */\n\t\n\t\n\t  Feature.prototype.set = function set(property, value) {\n\t    return this._attributesMap.set(property, value);\n\t  };\n\t\n\t  /**\n\t   * 删除属性\n\t   *\n\t   * @method delete\n\t   * @param property\n\t   * @return {boolean}\n\t   */\n\t\n\t\n\t  Feature.prototype.delete = function _delete(property) {\n\t    return this._attributesMap.delete(property);\n\t  };\n\t\n\t  /**\n\t   * 遍历属性\n\t   *\n\t   * @method forEachAttribute\n\t   * @param callback\n\t   */\n\t\n\t\n\t  Feature.prototype.forEachAttribute = function forEachAttribute(callback) {\n\t    this._attributesMap.forEach(callback);\n\t  };\n\t\n\t  /**\n\t   * 判断属性是否存在\n\t   *\n\t   * @method has\n\t   * @param property\n\t   * @return {Boolean}\n\t   */\n\t\n\t\n\t  Feature.prototype.has = function has(property) {\n\t    return this._attributesMap.has(property);\n\t  };\n\t\n\t  /**\n\t   * Geometry 读写器\n\t   *\n\t   * @property geometry\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆map属性\n\t   *\n\t   * @method cloneAttributesMap\n\t   * @returns {Map}\n\t   */\n\t  Feature.prototype.cloneAttributesMap = function cloneAttributesMap() {\n\t    var newMap = new Map();\n\t    if (this._attributesMap.size !== 0) {\n\t      var entries = this._attributesMap.entries();\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = entries[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var _step$value = _slicedToArray(_step.value, 2),\n\t              key = _step$value[0],\n\t              value = _step$value[1];\n\t\n\t          newMap.set(key, value);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return newMap;\n\t  };\n\t\n\t  /**\n\t   * features 克隆方法\n\t   *\n\t   * @method clone\n\t   * @returns {Feature}\n\t   */\n\t\n\t\n\t  Feature.prototype.clone = function clone() {\n\t    var renderStyleArr = void 0;\n\t    if (this.style) {\n\t      var style = void 0;\n\t      if (Array.isArray(this.style)) {\n\t        style = this.style[0].clone();\n\t      } else {\n\t        style = this.style.clone();\n\t      }\n\t\n\t      renderStyleArr = [style];\n\t    }\n\t\n\t    return new Feature(this.geometry.clone(), this.cloneAttributesMap(), this.displayText, renderStyleArr);\n\t  };\n\t\n\t  _createClass(Feature, [{\n\t    key: 'geometry',\n\t    get: function get() {\n\t      return this._geometry;\n\t    },\n\t    set: function set(value) {\n\t      if (value) {\n\t        this._geometry = value;\n\t\n\t        if (this._geometryChangeKey) {\n\t          (0, _eventmanager.unlistenByKey)(this._geometryChangeKey);\n\t        }\n\t\n\t        this._geometryChangeKey = (0, _eventmanager.listen)(value, _eventtype.EventType.CHANGE, this._handleGeometryChanged, this);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 缺省样式读写器\n\t     *\n\t     * @property styleFunction\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'styleFunction',\n\t    get: function get() {\n\t      return this._styleFunction;\n\t    },\n\t    set: function set(value) {\n\t      this._styleFunction = value;\n\t    }\n\t\n\t    /**\n\t     * 样式读写器\n\t     *\n\t     * @property style\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'style',\n\t    get: function get() {\n\t      return this._style;\n\t    },\n\t    set: function set(value) {\n\t      this._style = value;\n\t    }\n\t\n\t    /**\n\t     * feature标题读写器\n\t     *\n\t     * @property text\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'displayText',\n\t    get: function get() {\n\t      return this._displayText;\n\t    },\n\t    set: function set(value) {\n\t      this._displayText = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 样式高亮读写器\n\t     *\n\t     * @property styleHighLight\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'styleHighLight',\n\t    get: function get() {\n\t      return this._styleHighLight;\n\t    },\n\t    set: function set(value) {\n\t      if (this._styleHighLight === value) {\n\t        return;\n\t      }\n\t\n\t      this._styleHighLight = value;\n\t\n\t      if (this.style === undefined) {\n\t        return;\n\t      }\n\t\n\t      var white = [255, 255, 255];\n\t      var newStyles = [];\n\t\n\t      for (var i = 0, len = this.style.length; i < len; i++) {\n\t        var s = this.style[i];\n\t        newStyles.push(s.clone());\n\t      }\n\t\n\t      if (this._styleHighLight) {\n\t        this.set('_originStyle', this.style);\n\t\n\t        var geometryType = this.geometry.geometryType;\n\t\n\t        if (geometryType === _geometry2.default.LINE) {\n\t          var firstStyle = newStyles[0];\n\t          firstStyle.width = firstStyle.width + 1;\n\t\n\t          var cloneStyle = firstStyle.clone();\n\t          cloneStyle.width = cloneStyle.width + 1;\n\t          cloneStyle.color = white;\n\t\n\t          newStyles.unshift(cloneStyle);\n\t        } else if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.MULTI_POLYGON || geometryType === _geometry2.default.PARALLELOGRAM || geometryType === _geometry2.default.EXTENT) {\n\t          var _firstStyle = newStyles[0];\n\t          _firstStyle.borderStyle.width = _firstStyle.borderStyle.width + 1;\n\t\n\t          var _cloneStyle = _firstStyle.clone();\n\t          _cloneStyle.alpha = 0;\n\t          _cloneStyle.borderStyle.width = _firstStyle.borderStyle.width + 1;\n\t          _cloneStyle.borderStyle.color = white;\n\t          _cloneStyle.borderStyle.lineCap = _linestyle2.default.LineCap.ROUND;\n\t          _cloneStyle.borderStyle.lineJion = _linestyle2.default.LineJion.ROUND;\n\t\n\t          newStyles.unshift(_cloneStyle);\n\t        } else if (geometryType === _geometry2.default.POINT) {\n\t          var _firstStyle2 = newStyles[0];\n\t          _firstStyle2.size = _firstStyle2.size + 3;\n\t          _firstStyle2.borderStyle.width = _firstStyle2.borderStyle.width + 1;\n\t        }\n\t\n\t        var textStyle = newStyles[0].textStyle.clone();\n\t        // textStyle.font = 'bold 12px Arial'\n\t        var oriFont = textStyle.font;\n\t        var boldFont = 'bold ' + oriFont.split(' ')[1] + ' Arial';\n\t        textStyle.font = boldFont;\n\t\n\t        newStyles[0].textStyle = textStyle;\n\t\n\t        this.style = newStyles;\n\t      } else {\n\t        if (this.get('_originStyle')) {\n\t          this.style = this.get('_originStyle');\n\t          this.delete('_originStyle');\n\t        }\n\t      }\n\t\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 设置图层的透明度\n\t     *\n\t     * 将会触发map的重绘事件\n\t     *\n\t     * @method display\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'display',\n\t    get: function get() {\n\t      return this._display;\n\t    },\n\t    set: function set(value) {\n\t      if (this._display !== value) {\n\t        this._display = value;\n\t        // 需要触动绘制事件派发\n\t        this.changed();\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置标签是否显示\n\t     *\n\t     * 将会触发map的重绘事件\n\t     *\n\t     * @method textDisplay\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'textDisplay',\n\t    get: function get() {\n\t      return this._textDisplay;\n\t    },\n\t    set: function set(value) {\n\t      if (this._textDisplay !== value) {\n\t        this._textDisplay = value;\n\t        // 需要触动绘制事件派发\n\t        this.changed();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Feature;\n\t}(_baseobject2.default);\n\t\n\texports.default = Feature;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 26 */\n/*!***********************************************!*\\\n  !*** ./src/renderer/render/geomertyrender.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 28);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar GeomertyRender = function (_BaseObject) {\n\t  _inherits(GeomertyRender, _BaseObject);\n\t\n\t  function GeomertyRender(context) {\n\t    _classCallCheck(this, GeomertyRender);\n\t\n\t    /**\n\t     *\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._context = context;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._pixelCoordinates = null;\n\t\n\t    /**\n\t     *\n\t     * @type {*}\n\t     */\n\t    _this.renderedTransform = _transform.Transform.create();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  GeomertyRender.prototype.resetRenderOption = function resetRenderOption() {\n\t    this._pixelCoordinates = null;\n\t    this.renderedTransform = _transform.Transform.create();\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param transform1\n\t   * @param transform2\n\t   */\n\t\n\t\n\t  GeomertyRender.prototype.equalsTransform = function equalsTransform(transform1, transform2) {\n\t    return (0, _array.equals)(transform1, transform2);\n\t  };\n\t\n\t  /**\n\t   * context getter\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  /**\n\t   * abstract function\n\t   * @param feature\n\t   * @param renderStyle\n\t   * @param transform\n\t   */\n\t  GeomertyRender.prototype.render = function render(feature, renderStyle, transform) {}; // eslint-disable-line no-unused-vars\n\t\n\t\n\t  _createClass(GeomertyRender, [{\n\t    key: 'context',\n\t    get: function get() {\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return GeomertyRender;\n\t}(_baseobject2.default);\n\t\n\texports.default = GeomertyRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 27 */\n/*!********************************!*\\\n  !*** ./src/style/textstyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/12.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义文本样式\n\t *\n\t * @class TextStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     new mk.TextStyle({\n\t *       textAlign: 'center',\n\t *       textBaseline: 'middle',\n\t *       font: 'Arial',\n\t *       text: '标注示例',\n\t *       fill: [255, 0, 0],\n\t *       stroke: new mk.LineStyle([255, 255, 255],1,3,\n\t *          mk.LineStyle.LineCap.ROUND,\n\t *          mk.LineStyle.LineJion.ROUND),\n\t *       offsetX: 0,\n\t *       offsetY: 0,\n\t *       rotation: 0\n\t *     });\n\t *\n\t */\n\tvar TextStyle = function (_BaseObject) {\n\t  _inherits(TextStyle, _BaseObject);\n\t\n\t  /**\n\t   *\n\t   * @constructor\n\t   * @param optOptions\n\t   */\n\t  function TextStyle(optOptions) {\n\t    _classCallCheck(this, TextStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var options = optOptions || {};\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.text = options.text || '';\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.font = options.font || TextStyle.DEFAULT_FONT;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|undefined}\n\t     */\n\t    _this.rotation = options.rotation || 0;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean|undefined}\n\t     */\n\t    _this.rotateWithView = options.rotateWithView;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|undefined}\n\t     */\n\t    _this.scale = options.scale || TextStyle.DEFAULT_SCALE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_START;\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.style.Fill}\n\t     */\n\t    _this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.style.Stroke}\n\t     */\n\t    _this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this.offsetX = options.offsetX !== undefined ? options.offsetX : 0;\n\t\n\t    /**\n\t     * @property offsetY\n\t     * @type {number}\n\t     */\n\t    _this.offsetY = options.offsetY !== undefined ? options.offsetY : 0;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 要显示的文本\n\t   *\n\t   * @property text\n\t   * @type {Stirng}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆字体样式\n\t   *\n\t   * @method clone\n\t   * @returns {TextStyle}\n\t   */\n\t  TextStyle.prototype.clone = function clone() {\n\t    return new TextStyle({\n\t      font: this.font,\n\t      rotation: this.rotation,\n\t      rotateWithView: this.rotateWithView,\n\t      scale: this.scale,\n\t      text: this.text,\n\t      textAlign: this.textAlign,\n\t      textBaseline: this.textBaseline,\n\t      fill: this.fill ? this.fill.clone : undefined,\n\t      stroke: this.stroke ? this.stroke.clone : undefined,\n\t      offsetX: this.offsetX,\n\t      offsetY: this.offsetY\n\t    });\n\t  };\n\t\n\t  _createClass(TextStyle, [{\n\t    key: 'text',\n\t    get: function get() {\n\t      return this._text;\n\t    },\n\t    set: function set(value) {\n\t      this._text = value;\n\t    }\n\t\n\t    /**\n\t     * 显示的字体\n\t     *\n\t     * @property font\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'font',\n\t    get: function get() {\n\t      return this._font;\n\t    },\n\t    set: function set(value) {\n\t      this._font = value;\n\t    }\n\t\n\t    /**\n\t     * 旋转的角度\n\t     *\n\t     * @property rotation\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotation',\n\t    get: function get() {\n\t      return this._rotation;\n\t    },\n\t    set: function set(value) {\n\t      this._rotation = value;\n\t    }\n\t\n\t    /**\n\t     * 旋转视图\n\t     *\n\t     * @property rotateWithView\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateWithView',\n\t    get: function get() {\n\t      return this._rotateWithView;\n\t    },\n\t    set: function set(value) {\n\t      this._rotateWithView = value;\n\t    }\n\t\n\t    /**\n\t     * 缩放比例\n\t     *\n\t     * @property scale\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'scale',\n\t    get: function get() {\n\t      return this._scale;\n\t    },\n\t    set: function set(value) {\n\t      this._scale = value;\n\t    }\n\t\n\t    /**\n\t     * 字体\n\t     *\n\t     * @property textAlign\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'textAlign',\n\t    get: function get() {\n\t      return this._textAlign;\n\t    },\n\t    set: function set(value) {\n\t      this._textAlign = value;\n\t    }\n\t\n\t    /**\n\t     * 字体线\n\t     *\n\t     * @property textBaseline\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'textBaseline',\n\t    get: function get() {\n\t      return this._textBaseline;\n\t    },\n\t    set: function set(value) {\n\t      this._textBaseline = value;\n\t    }\n\t\n\t    /**\n\t     * 字体颜色\n\t     *\n\t     * @property fill\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'fill',\n\t    get: function get() {\n\t      return this._fill;\n\t    },\n\t    set: function set(value) {\n\t      this._fill = value;\n\t    }\n\t\n\t    /**\n\t     * 字体线的样式\n\t     *\n\t     * property stroke\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'stroke',\n\t    get: function get() {\n\t      return this._stroke;\n\t    },\n\t    set: function set(value) {\n\t      this._stroke = value;\n\t    }\n\t\n\t    /**\n\t     * 字体x轴偏移\n\t     *\n\t     * @property offsetX\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'offsetX',\n\t    get: function get() {\n\t      return this._offsetX;\n\t    },\n\t    set: function set(value) {\n\t      this._offsetX = value;\n\t    }\n\t\n\t    /**\n\t     * 字体y轴偏移\n\t     *\n\t     * @property offsetY\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'offsetY',\n\t    get: function get() {\n\t      return this._offsetY;\n\t    },\n\t    set: function set(value) {\n\t      this._offsetY = value;\n\t    }\n\t  }]);\n\t\n\t  return TextStyle;\n\t}(_baseobject2.default);\n\t\n\t/**\n\t *\n\t * 默认字体边框样式\n\t * @type {String} DEFAULT_STROKE\n\t * @static\n\t * @final\n\t *\n\t */\n\t\n\t\n\texports.default = TextStyle;\n\tTextStyle.DEFAULT_STROKE = {\n\t  color: [255, 255, 255],\n\t  width: 2,\n\t  lineCap: 'round',\n\t  lineJion: 'round'\n\t\n\t  /**\n\t   *\n\t   * 默认字体颜色\n\t   * @type {String} DEFAULT_FILL_COLOR\n\t   * @static\n\t   * @final\n\t   *\n\t   */\n\t};TextStyle.DEFAULT_FILL_COLOR = [0, 0, 255];\n\t\n\t/**\n\t * 默认字体样式\n\t * @type {String} DEFAULT_FONT\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_FONT = 'normal 12px Arial';\n\t\n\t/**\n\t * 默认字体显示位置\n\t * @type {String} DEFAULT_TEXT_ALIGN\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_TEXT_ALIGN = 'center';\n\t\n\t/**\n\t * 字体显示从左边开始计算\n\t */\n\tTextStyle.DEFAULT_TEXT_START = 'start';\n\t\n\t/**\n\t * 默认字体显示位置\n\t * @type {String} DEFAULT_BASE_LINE\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_BASE_LINE = 'bottom';\n\t\n\t/**\n\t * 默认字体缩放初始值\n\t * @type {String} DEFAULT_BASE_LINE\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_SCALE = 10;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 28 */\n/*!****************************!*\\\n  !*** ./src/utils/array.js ***!\n  \\****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.linearFindNearest = linearFindNearest;\n\texports.stableSort = stableSort;\n\texports.binarySearch = binarySearch;\n\texports.equals = equals;\n\texports.numberSafeCompareFunction = numberSafeCompareFunction;\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\t/**\n\t *\n\t * @param arr\n\t * @param target\n\t * @param direction\n\t * @returns {number}\n\t */\n\tfunction linearFindNearest(arr, target, direction) {\n\t  var n = arr.length;\n\t  if (arr[0] <= target) {\n\t    return 0;\n\t  } else if (target <= arr[n - 1]) {\n\t    return n - 1;\n\t  } else {\n\t    var i = void 0;\n\t    if (direction > 0) {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] < target) {\n\t          return i - 1;\n\t        }\n\t      }\n\t    } else if (direction < 0) {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] <= target) {\n\t          return i;\n\t        }\n\t      }\n\t    } else {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] == target) {\n\t          return i;\n\t        } else if (arr[i] < target) {\n\t          if (arr[i - 1] - target < target - arr[i]) {\n\t            return i - 1;\n\t          } else {\n\t            return i;\n\t          }\n\t        }\n\t      }\n\t    }\n\t    return n - 1;\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param arr\n\t * @param compareFnc\n\t */\n\tfunction stableSort(arr, compareFnc) {\n\t  var length = arr.length;\n\t  var tmp = Array(arr.length);\n\t  var i = void 0;\n\t\n\t  for (i = 0; i < length; i++) {\n\t    tmp[i] = { index: i, value: arr[i] };\n\t  }\n\t\n\t  tmp.sort(function (a, b) {\n\t    return compareFnc(a.value, b.value) || a.index - b.index;\n\t  });\n\t\n\t  for (i = 0; i < arr.length; i++) {\n\t    arr[i] = tmp[i].value;\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param haystack\n\t * @param needle\n\t * @param opt_comparator\n\t * @returns {number}\n\t */\n\tfunction binarySearch(haystack, needle, opt_comparator) {\n\t  var mid = void 0,\n\t      cmp = void 0;\n\t  var comparator = opt_comparator || numberSafeCompareFunction;\n\t  var low = 0;\n\t  var high = haystack.length;\n\t  var found = false;\n\t\n\t  while (low < high) {\n\t    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n\t     * to double (which gives the wrong results). */\n\t    mid = low + (high - low >> 1);\n\t    cmp = +comparator(haystack[mid], needle);\n\t\n\t    if (cmp < 0.0) {\n\t      /* Too low. */\n\t      low = mid + 1;\n\t    } else {\n\t      /* Key found or too high */\n\t      high = mid;\n\t      found = !cmp;\n\t    }\n\t  }\n\t\n\t  /* Key not found. */\n\t  return found ? low : ~low;\n\t}\n\t\n\t/**\n\t * Determine if two arrays get equal to each other\n\t * @param arr1\n\t * @param arr2\n\t * @returns {boolean}\n\t */\n\tfunction equals(arr1, arr2) {\n\t  var len1 = arr1.length;\n\t  if (len1 !== arr2.length) {\n\t    return false;\n\t  }\n\t\n\t  for (var i = 0; i < len1; i++) {\n\t    if (arr1[i] !== arr2[i]) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t *\n\t * @param a\n\t * @param b\n\t * @returns {number}\n\t */\n\tfunction numberSafeCompareFunction(a, b) {\n\t  return a > b ? 1 : a < b ? -1 : 0;\n\t}\n\n/***/ }),\n/* 29 */\n/*!***************************!*\\\n  !*** ./src/utils/math.js ***!\n  \\***************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.clamp = clamp;\n\texports.lerp = lerp;\n\t/**\n\t * Created by zhangyong on 2017/6/5.\n\t */\n\t\n\tfunction clamp(value, min, max) {\n\t  return Math.min(Math.max(value, min), max);\n\t}\n\t\n\tfunction lerp(a, b, x) {\n\t  return a + x * (b - a);\n\t}\n\t\n\texports.default = {\n\t  clamp: clamp,\n\t  lerp: lerp\n\t};\n\n/***/ }),\n/* 30 */\n/*!*******************************************!*\\\n  !*** ./src/geometry/analysis/contains.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = contains;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * 判断多边形是否包含另外一个图形\n\t *\n\t * @method contains\n\t * @param polygon\n\t * @param geometry\n\t * @returns {*}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/8/4.\n\t */\n\t\n\tfunction contains(polygon, geometry) {\n\t  var polyGeometryType = polygon.geometryType;\n\t  var isContained = false;\n\t\n\t  if (polyGeometryType === _geometry2.default.POLYGON || polyGeometryType === _geometry2.default.MULTI_POLYGON || polyGeometryType === _geometry2.default.EXTENT) {\n\t    var targetGeometryType = geometry.geometryType;\n\t\n\t    if (targetGeometryType === _geometry2.default.POINT) {\n\t      return polygon.containsXY(geometry.x, geometry.y);\n\t    } else if (targetGeometryType === _geometry2.default.LINE) {\n\t      return polyContainsLine(polygon, geometry);\n\t    } else if (targetGeometryType === _geometry2.default.POLYGON) {\n\t      return polyContainsPoly(polygon, geometry);\n\t    } else if (targetGeometryType === _geometry2.default.MULTI_POLYGON) {\n\t      return polyContainsMultiPoly(polygon, geometry);\n\t    } else if (targetGeometryType === _geometry2.default.PARALLELOGRAM) {\n\t      return polyContainsPoly(polygon, new _polygon2.default(geometry.getCoordinates()));\n\t    }\n\t  }\n\t\n\t  return isContained;\n\t}\n\t\n\tvar polyContainsLine = function polyContainsLine(poly, line) {\n\t  var lineCoords = line.getCoordinates();\n\t  return polygonContainsLinestring(poly, lineCoords);\n\t};\n\t\n\tvar polyContainsPoly = function polyContainsPoly(poly, poly2) {\n\t  var poly2Type = poly2.geometryType;\n\t  if (poly2Type === _geometry2.default.POLYGON) {\n\t    var outRing = poly2.getCoordinates()[0];\n\t    return polygonContainsLinestring(poly, outRing);\n\t  }\n\t\n\t  return false;\n\t};\n\t\n\tvar polyContainsMultiPoly = function polyContainsMultiPoly(polygon, mutilpolygon) {\n\t  var polys = mutilpolygon.convertToPolygons();\n\t  var contained = polys.find(function (p) {\n\t    return !polyContainsPoly(polygon, p);\n\t  });\n\t\n\t  return contained == undefined ? true : false;\n\t};\n\t\n\tvar polygonContainsLinestring = function polygonContainsLinestring(poly, coords) {\n\t  var hasOne = coords.some(function (coord) {\n\t    return !poly.containsXY(coord[0], coord[1]);\n\t  });\n\t\n\t  return !hasOne;\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 31 */\n/*!******************************!*\\\n  !*** ./src/geometry/line.js ***!\n  \\******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ./support/geometryutil */ 11);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义线类和数据结构\n\t *\n\t * @class Line\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var line = new mk.Line()\n\t *\n\t *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n\t */\n\tvar Line = function (_Geometry) {\n\t  _inherits(Line, _Geometry);\n\t\n\t  /**\n\t   * Create a line geometry\n\t   * @constructor\n\t   * @param path\n\t   */\n\t  function Line(path) {\n\t    _classCallCheck(this, Line);\n\t\n\t    /**\n\t     * 记录内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._path = [];\n\t\n\t    _this.addPath(path);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 添加线段\n\t   *\n\t   * @method addPath\n\t   * @deprecated\n\t   * @param coordinates {Array}\n\t   */\n\t  Line.prototype.addPath = function addPath(coordinates) {\n\t    this.path.push(coordinates);\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 多段线的长度\n\t   *\n\t   * @property length\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 遍历每一条边\n\t   *\n\t   * @method forEachSegment\n\t   * @param callback {callback}\n\t   * @param opt\n\t   */\n\t  Line.prototype.forEachSegment = function forEachSegment(callback, opt) {\n\t    this.path.forEach(callback, opt);\n\t  };\n\t\n\t  /**\n\t   * @param x\n\t   * @param y\n\t   * @param opt\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Line.prototype.containsXY = function containsXY(x, y) {\n\t    var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var tolerance = opt.tolerance ? opt.tolerance : 2;\n\t    var path = this.path;\n\t    var squaredSegmentDistanceFn = _geometryutil.squaredSegmentDistance;\n\t\n\t    var find = false;\n\t    for (var i = 0, ii = path.length - 1; i < ii; i++) {\n\t      var nowP = path[i];\n\t      var nextP = path[i + 1];\n\t      var _distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1]);\n\t      _distance = Math.sqrt(_distance);\n\t      if (_distance <= tolerance) {\n\t        find = true;\n\t        break;\n\t      }\n\t    }\n\t\n\t    return find;\n\t  };\n\t\n\t  /**\n\t   * 计算线的平面内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Line.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      var interiorPoint = null;\n\t      var fraction = 0.5;\n\t      var flatCoordinates = [];\n\t      var coordinates = this.getCoordinates();\n\t\n\t      coordinates.forEach(function (point) {\n\t        flatCoordinates.push(point[0], point[1]);\n\t      });\n\t\n\t      this._flatInteriorPoint = (0, _interpolate.lineString)(flatCoordinates, 0, flatCoordinates.length, this.stride, fraction, interiorPoint);\n\t\n\t      this._flatInteriorPointRevision = this.revision;\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  Line.prototype.getCoordinates = function getCoordinates() {\n\t    return this.path;\n\t  };\n\t\n\t  /**\n\t   * 得到最后一个点的坐标，显示表单\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Line.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    var coordinates = this.getCoordinates();\n\t    if (coordinates.length === 0) {\n\t      return null;\n\t    }\n\t\n\t    var lastPoint = coordinates[coordinates.length - 1];\n\t\n\t    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置坐标数据\n\t   *\n\t   * @method setCoordinates\n\t   * @param coords {Array}\n\t   */\n\t\n\t\n\t  Line.prototype.setCoordinates = function setCoordinates(coords) {\n\t    this.path = coords;\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 根据坐标点，计算改点的下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord\n\t   * @returns {*|number}\n\t   */\n\t\n\t\n\t  Line.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates().findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 克隆线段\n\t   *\n\t   * @method clone\n\t   * @returns {Line} new line\n\t   */\n\t\n\t\n\t  Line.prototype.clone = function clone() {\n\t    var newCoordinates = [];\n\t    this.getCoordinates().forEach(function (coords) {\n\t      newCoordinates.push([coords[0], coords[1]]);\n\t    });\n\t\n\t    var newLine = new Line();\n\t    newLine.setCoordinates(newCoordinates);\n\t\n\t    return newLine;\n\t  };\n\t\n\t  _createClass(Line, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.LINE;\n\t    }\n\t\n\t    /**\n\t     * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t     *\n\t     * @returns {Object} 返回对象的最小外接矩形\n\t     *\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      var me = this;\n\t      if (me._extent === null) {\n\t        var xmin = Number.POSITIVE_INFINITY;\n\t        var ymin = Number.POSITIVE_INFINITY;\n\t        var xmax = Number.NEGATIVE_INFINITY;\n\t        var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t        var coors = me.getCoordinates();\n\t        var _iteratorNormalCompletion = true;\n\t        var _didIteratorError = false;\n\t        var _iteratorError = undefined;\n\t\n\t        try {\n\t          for (var _iterator = coors[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var p = _step.value;\n\t\n\t            xmin = Math.min(xmin, p[0]);\n\t            ymin = Math.min(ymin, p[1]);\n\t            xmax = Math.max(xmax, p[0]);\n\t            ymax = Math.max(ymax, p[1]);\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError = true;\n\t          _iteratorError = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t              _iterator.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError) {\n\t              throw _iteratorError;\n\t            }\n\t          }\n\t        }\n\t\n\t        me._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t      }\n\t\n\t      return me._extent;\n\t    }\n\t\n\t    /**\n\t     * 线段读写器\n\t     *\n\t     * @property path\n\t     * @returns\n\t     */\n\t\n\t  }, {\n\t    key: 'path',\n\t    get: function get() {\n\t      return this._path;\n\t    },\n\t    set: function set(value) {\n\t      this._path = value;\n\t      this._extent = null;\n\t    }\n\t  }, {\n\t    key: 'length',\n\t    get: function get() {\n\t      var coordinates = this.getCoordinates();\n\t      var len = 0;\n\t      for (var i = 0, ii = coordinates.length; i < ii - 1; i++) {\n\t        var fp = coordinates[i];\n\t        var np = coordinates[i + 1];\n\t        len += (0, _geometryutil.distance)(fp, np);\n\t      }\n\t\n\t      return len;\n\t    }\n\t  }]);\n\t\n\t  return Line;\n\t}(_geometry2.default);\n\t\n\texports.default = Line;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 32 */\n/*!*********************************************!*\\\n  !*** ./src/geometry/support/interpolate.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.lineString = lineString;\n\texports.linearRings = linearRings;\n\texports.linearRingss = linearRingss;\n\texports.centerLinearRingss = centerLinearRingss;\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 28);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../support/geometryutil */ 11);\n\t\n\tvar _math = __webpack_require__(/*! ../../utils/math */ 29);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./extentutil */ 2);\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param fraction\n\t * @param opt_dest\n\t * @returns {*}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\tfunction lineString(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n\t  var pointX = NaN;\n\t  var pointY = NaN;\n\t  var n = (end - offset) / stride;\n\t\n\t  if (n === 1) {\n\t    pointX = flatCoordinates[offset];\n\t    pointY = flatCoordinates[offset + 1];\n\t  } else if (n == 2) {\n\t    pointX = (1 - fraction) * flatCoordinates[offset] + fraction * flatCoordinates[offset + stride];\n\t    pointY = (1 - fraction) * flatCoordinates[offset + 1] + fraction * flatCoordinates[offset + stride + 1];\n\t  } else if (n !== 0) {\n\t    var x1 = flatCoordinates[offset];\n\t    var y1 = flatCoordinates[offset + 1];\n\t    var length = 0;\n\t    var cumulativeLengths = [0];\n\t    var i = void 0;\n\t    for (i = offset + stride; i < end; i += stride) {\n\t      var x2 = flatCoordinates[i];\n\t      var y2 = flatCoordinates[i + 1];\n\t      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n\t      cumulativeLengths.push(length);\n\t      x1 = x2;\n\t      y1 = y2;\n\t    }\n\t\n\t    var target = fraction * length;\n\t    var index = (0, _array.binarySearch)(cumulativeLengths, target);\n\t\n\t    if (index < 0) {\n\t      var t = (target - cumulativeLengths[-index - 2]) / (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n\t      var o = offset + (-index - 2) * stride;\n\t      pointX = (0, _math.lerp)(flatCoordinates[o], flatCoordinates[o + stride], t);\n\t      pointY = (0, _math.lerp)(flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n\t    } else {\n\t      pointX = flatCoordinates[offset + index * stride];\n\t      pointY = flatCoordinates[offset + index * stride + 1];\n\t    }\n\t  }\n\t\n\t  if (opt_dest) {\n\t    opt_dest[0] = pointX;\n\t    opt_dest[1] = pointY;\n\t    return opt_dest;\n\t  } else {\n\t    return [pointX, pointY];\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param flatCenters\n\t * @param flatCentersOffset\n\t * @param opt_dest\n\t * @returns {*}\n\t */\n\tfunction linearRings(flatCoordinates, offset, ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n\t  var i = void 0,\n\t      ii = void 0,\n\t      x = void 0,\n\t      x1 = void 0,\n\t      x2 = void 0,\n\t      y1 = void 0,\n\t      y2 = void 0;\n\t  var y = flatCenters[flatCentersOffset + 1];\n\t  var intersections = [];\n\t  // Calculate intersections with the horizontal line\n\t  var end = ends[0];\n\t  x1 = flatCoordinates[end - stride];\n\t  y1 = flatCoordinates[end - stride + 1];\n\t\n\t  for (i = offset; i < end; i += stride) {\n\t    x2 = flatCoordinates[i];\n\t    y2 = flatCoordinates[i + 1];\n\t    if (y <= y1 && y2 <= y || y1 <= y && y <= y2) {\n\t      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n\t      intersections.push(x);\n\t    }\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  // Find the longest segment of the horizontal line that has its center point\n\t  // inside the linear ring.\n\t  var pointX = NaN;\n\t  var maxSegmentLength = -Infinity;\n\t  intersections.sort(_array.numberSafeCompareFunction);\n\t  x1 = intersections[0];\n\t  for (i = 1, ii = intersections.length; i < ii; ++i) {\n\t    x2 = intersections[i];\n\t    var segmentLength = Math.abs(x2 - x1);\n\t    if (segmentLength > maxSegmentLength) {\n\t      x = (x1 + x2) / 2;\n\t      if ((0, _geometryutil.linearRingsContainsXY)(flatCoordinates, offset, ends, stride, x, y)) {\n\t        pointX = x;\n\t        maxSegmentLength = segmentLength;\n\t      }\n\t    }\n\t    x1 = x2;\n\t  }\n\t\n\t  if (isNaN(pointX)) {\n\t    // There is no horizontal line that has its center point inside the linear\n\t    // ring.  Use the center of the the linear ring's extent.\n\t    pointX = flatCenters[flatCentersOffset];\n\t  }\n\t\n\t  if (opt_dest) {\n\t    opt_dest.push(pointX, y);\n\t    return opt_dest;\n\t  } else {\n\t    return [pointX, y];\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param flatCenters\n\t * @returns {Array}\n\t */\n\tfunction linearRingss(flatCoordinates, offset, endss, stride, flatCenters) {\n\t  var interiorPoints = [];\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    var ends = endss[i];\n\t    interiorPoints = linearRings(flatCoordinates, offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n\t    offset = ends[ends.length - 1];\n\t  }\n\t\n\t  return interiorPoints;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @returns {Array}\n\t */\n\tfunction centerLinearRingss(flatCoordinates, offset, endss, stride) {\n\t  var flatCenters = [];\n\t  var i = void 0,\n\t      ii = void 0;\n\t  var extent = _extentutil.ExtentUtil.createEmpty();\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    var ends = endss[i];\n\t    extent = _extentutil.ExtentUtil.createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n\t    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n\t    offset = ends[ends.length - 1];\n\t  }\n\t  return flatCenters;\n\t}\n\n/***/ }),\n/* 33 */\n/*!****************************************!*\\\n  !*** ./src/geometry/support/orient.js ***!\n  \\****************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.orientLinearRingss = orientLinearRingss;\n\texports.orientLinearRings = orientLinearRings;\n\texports.linearRingssAreOriented = linearRingssAreOriented;\n\texports.linearRingsAreOriented = linearRingsAreOriented;\n\texports.linearRingIsClockwise = linearRingIsClockwise;\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param opt_right\n\t * @returns {*}\n\t */\n\tfunction orientLinearRingss(flatCoordinates, offset, endss, stride, opt_right) {\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    offset = orientLinearRings(flatCoordinates, offset, endss[i], stride, opt_right);\n\t  }\n\t\n\t  return offset;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param opt_right\n\t * @returns {*}\n\t */\n\tfunction orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n\t  var right = opt_right !== undefined ? opt_right : false;\n\t  var i = void 0,\n\t      ii = void 0;\n\t\n\t  for (i = 0, ii = ends.length; i < ii; ++i) {\n\t    var end = ends[i];\n\t    var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n\t\n\t    var reverse = i === 0 ? right && isClockwise || !right && !isClockwise : right && !isClockwise || !right && isClockwise;\n\t\n\t    if (reverse) {\n\t      // reverse(flatCoordinates, offset, end, stride)\n\t      // 反转\n\t      flatCoordinates = flatCoordinates.reverse();\n\t    }\n\t    offset = end;\n\t  }\n\t\n\t  return offset;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param opt_right\n\t * @returns {boolean}\n\t */\n\tfunction linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    if (!linearRingsAreOriented(flatCoordinates, offset, endss[i], stride, opt_right)) {\n\t      return false;\n\t    }\n\t  }\n\t  return true;\n\t}\n\t\n\t/**\n\t * 判断线串的方向\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param opt_right\n\t * @returns {boolean}\n\t */\n\tfunction linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n\t  var right = opt_right !== undefined ? opt_right : false;\n\t  var i = void 0,\n\t      ii = void 0;\n\t\n\t  for (i = 0, ii = ends.length; i < ii; ++i) {\n\t    var end = ends[i];\n\t    // 判断坐标串是否是顺时针\n\t    var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n\t\n\t    if (i === 0) {\n\t      if (right && isClockwise || !right && !isClockwise) {\n\t        return false;\n\t      }\n\t    } else {\n\t      if (right && !isClockwise || !right && isClockwise) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    offset = end;\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t * 判断坐标串是否是顺时针方向\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @returns {boolean}\n\t */\n\tfunction linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n\t  // http://tinyurl.com/clockwise-method\n\t  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n\t  var edge = 0;\n\t  var x1 = flatCoordinates[end - stride];\n\t  var y1 = flatCoordinates[end - stride + 1];\n\t\n\t  for (; offset < end; offset += stride) {\n\t    var x2 = flatCoordinates[offset];\n\t    var y2 = flatCoordinates[offset + 1];\n\t    edge += (x2 - x1) * (y2 + y1);\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  return edge > 0;\n\t}\n\n/***/ }),\n/* 34 */\n/*!****************************!*\\\n  !*** ./src/meek/config.js ***!\n  \\****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/3/20.\n\t */\n\t\n\t/**\n\t * Constants defined width the define tag connot be changed in application code,\n\t * but can be set at compile time.\n\t *\n\t * @type {{}}\n\t */\n\tvar Config = exports.Config = {};\n\t\n\t/**\n\t * Enable debug mode ,Default is 'true'\n\t *\n\t * 配置DEBUG\n\t *\n\t * @property DEBUG\n\t * @static\n\t * @type {Boolean}\n\t */\n\tConfig.DEBUG = true;\n\t\n\t/**\n\t * Default max zomm factor\n\t *\n\t * @property DEFAULT_ZOOM_FACTOR\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_ZOOM_FACTOR = 2;\n\t\n\t/**\n\t * Default max zoom level for map view.\n\t * Defaylt is '10'\n\t *\n\t * @property DEFAULT_MAX_ZOOM\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_MAX_ZOOM = 10;\n\t\n\t/**\n\t * Default min zoom level for map view.\n\t * Default is '0'\n\t *\n\t * @property DEFAULT_MIN_ZOOM\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_MIN_ZOOM = 0;\n\t\n\t/**\n\t * Maxinum mouse wheel delta.\n\t *\n\t * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1;\n\t\n\t/**\n\t * Default tile size\n\t *\n\t * @property DEFAULT_TILE_SIZE\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_TILE_SIZE = 256;\n\t\n\texports.default = {\n\t  Config: Config\n\t};\n\n/***/ }),\n/* 35 */\n/*!********************************!*\\\n  !*** ./src/style/basestyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n\t *\n\t * @class BaseStyle\n\t * @extends BaseObject\n\t * @module style\n\t */\n\tvar BaseStyle = function (_BaseObject) {\n\t  _inherits(BaseStyle, _BaseObject);\n\t\n\t  /**\n\t   *\n\t   * @constructor\n\t   * @param color {Array}\n\t   * @param style {Object}\n\t   * @param alpha {Number}\n\t   */\n\t  function BaseStyle(color, style) {\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t\n\t    _classCallCheck(this, BaseStyle);\n\t\n\t    /**\n\t     * The color to fill or stroke geometry\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.color = color;\n\t\n\t    /**\n\t     * Which style to style geometry\n\t     */\n\t    _this.style = style;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.alpha = alpha;\n\t\n\t    /**\n\t     * The text displayed with geometry\n\t     * @type {null}\n\t     */\n\t    _this.textStyle = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 颜色\n\t   *\n\t   * @property color\n\t   * @type {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆一个样式对象\n\t   *\n\t   * @method clone\n\t   * @abstract\n\t   */\n\t  BaseStyle.prototype.clone = function clone() {};\n\t\n\t  _createClass(BaseStyle, [{\n\t    key: 'color',\n\t    get: function get() {\n\t      return this._color;\n\t    },\n\t    set: function set(value) {\n\t      this._color = value;\n\t    }\n\t\n\t    /**\n\t     * 样式对象\n\t     *\n\t     * @property style\n\t     * @type {mk.Style}\n\t     */\n\t\n\t  }, {\n\t    key: 'style',\n\t    get: function get() {\n\t      return this._style;\n\t    },\n\t    set: function set(value) {\n\t      this._style = value;\n\t    }\n\t\n\t    /**\n\t     * 透明度\n\t     *\n\t     * @property alpha\n\t     * @default 1\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'alpha',\n\t    get: function get() {\n\t      return this._alpha;\n\t    },\n\t    set: function set(value) {\n\t      return this._alpha = value;\n\t    }\n\t\n\t    /**\n\t     * 文本样式对象\n\t     *\n\t     * @property textStyle\n\t     */\n\t\n\t  }, {\n\t    key: 'textStyle',\n\t    get: function get() {\n\t      return this._textStyle;\n\t    },\n\t    set: function set(value) {\n\t      this._textStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return BaseStyle;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseStyle;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 36 */\n/*!******************************!*\\\n  !*** ./src/utils/counter.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getUid = getUid;\n\t\n\tvar uid = 0;\n\t\n\tfunction getUid() {\n\t  return uid++;\n\t}\n\t\n\texports.default = {\n\t  getUid: getUid\n\t};\n\n/***/ }),\n/* 37 */\n/*!***********************************!*\\\n  !*** ./src/components/dragpan.js ***!\n  \\***********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _coordinate = __webpack_require__(/*! ../utils/coordinate */ 55);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 拖动事件基础类\n\t *\n\t * @class DragPan\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t */\n\tvar DragPan = function (_Component) {\n\t  _inherits(DragPan, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function DragPan() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, DragPan);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleDragEvent: _this._handleDragEvent\n\t    });\n\t\n\t    /**\n\t     * @property tragetPointers\n\t     * @type {Array}\n\t     */\n\t    _this.targetPointers = [];\n\t\n\t    /**\n\t     * @property lastCentroid\n\t     * @type {null}\n\t     */\n\t    _this.lastCentroid = null;\n\t\n\t    /**\n\t     * kinetic\n\t     * @private\n\t     * @type {ol.Kinetic|undefined}\n\t     */\n\t    _this._kinetic = options.kinetic;\n\t\n\t    /**\n\t     * @property lastCentroid\n\t     * @type {ol.Pixel}\n\t     */\n\t    _this.lastCentroid = null;\n\t\n\t    /**\n\t     * @property lastPointersCount\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._lastPointersCount = null;\n\t\n\t    /**\n\t     * @property conidtion\n\t     * @private\n\t     * @type {ol.EventsConditionType}\n\t     */\n\t    _this._condition = options.condition ? options.condition : _mousekey.noModifierKeys;\n\t\n\t    /**\n\t     * @property noKinetic\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._noKinetic = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 处理browserEvent\n\t   *\n\t   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n\t   * @return {boolean} Start drag sequence?\n\t   * @this {DragPan}\n\t   * @private\n\t   */\n\t\n\t\n\t  DragPan.prototype._handleDownEvent = function _handleDownEvent(browserEvent) {\n\t    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n\t      this.lastCentroid = null;\n\t\n\t      if (this._kinetic) {\n\t        this._kinetic.begin();\n\t      }\n\t\n\t      // No kinetic as soon as more than one pointer on the screen is\n\t      // detected. This is to prevent nasty pans after pinch.\n\t      this._noKinetic = this.targetPointers.length > 1;\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * handleDragEvent\n\t   * @param browserEvent {browserEvent}\n\t   * @private\n\t   */\n\t\n\t\n\t  DragPan.prototype._handleDragEvent = function _handleDragEvent(browserEvent) {\n\t    var targetPointers = this.targetPointers;\n\t    var centroid = this.centroid(targetPointers);\n\t\n\t    if (targetPointers.length === this._lastPointersCount) {\n\t      if (this._kinetic) {\n\t        this._kinetic.update(centroid[0], centroid[1]);\n\t      }\n\t\n\t      if (this.lastCentroid) {\n\t        var deltaX = this.lastCentroid[0] - centroid[0];\n\t        var deltaY = this.lastCentroid[1] - centroid[1];\n\t        var map = browserEvent.map;\n\t        var view = map.view;\n\t        var viewState = view.getViewState();\n\t        var center = [deltaX, deltaY];\n\t        _coordinate.Coordinate.scale(center, viewState.resolution);\n\t        _coordinate.Coordinate.rotate(center, viewState.rotation);\n\t        _coordinate.Coordinate.add(center, viewState.center);\n\t        // center = view.constrainCenter(center)\n\t        view.center = center;\n\t      }\n\t    } else if (this._kinetic) {\n\t      this._kinetic.begin();\n\t    }\n\t\n\t    this.lastCentroid = centroid;\n\t    this._lastPointersCount = targetPointers.length;\n\t  };\n\t\n\t  /**\n\t   * 计算视图的中心点\n\t   *\n\t   * @method centroid\n\t   * @param pointerEvents {pointerEvents}\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  DragPan.prototype.centroid = function centroid(pointerEvents) {\n\t    var length = pointerEvents.length;\n\t    var clientX = 0;\n\t    var clientY = 0;\n\t\n\t    for (var i = 0; i < length; i++) {\n\t      clientX += pointerEvents[i].originalEvent.clientX;\n\t      clientY += pointerEvents[i].originalEvent.clientY;\n\t    }\n\t\n\t    return [clientX / length, clientY / length];\n\t  };\n\t\n\t  return DragPan;\n\t}(_component2.default);\n\t\n\texports.default = DragPan;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 38 */\n/*!*************************************!*\\\n  !*** ./src/components/drawevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/22.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The DrawEvent will emitted while geometrys on drawing end.\n\t *\n\t * 绘制结束时，DrawEvent将会被派发\n\t *\n\t *\n\t * @class drawevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t *\n\t */\n\tvar DrawEvent = function (_BaseEvent) {\n\t  _inherits(DrawEvent, _BaseEvent);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param type\n\t   * @param feature\n\t   */\n\t  function DrawEvent(type, feature) {\n\t    _classCallCheck(this, DrawEvent);\n\t\n\t    /**\n\t     * The feature being drawn\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.feature = feature;\n\t    return _this;\n\t  }\n\t\n\t  return DrawEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * 定义绘制工具的事件类型\n\t *\n\t * @type {{DRAW_START: string, DRAW_END: string}}\n\t */\n\t\n\t\n\texports.default = DrawEvent;\n\tDrawEvent.EventType = {\n\t  /**\n\t   * Triggered upon feature draw start\n\t   */\n\t  DRAW_START: 'drawstart',\n\t\n\t  /**\n\t   * Triggered upon feature on drawing\n\t   * @type {String}\n\t   */\n\t  DRAWING: 'drawing',\n\t\n\t  /**\n\t   * Triggered upon feature draw end\n\t   */\n\t  DRAW_END: 'drawend'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 39 */\n/*!***************************************!*\\\n  !*** ./src/components/modifyevent.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/9.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 修改结束时，ModifyEvent将会被派发\n\t *\n\t * @class modifyevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t */\n\t\n\t\n\tvar ModifyEvent = function (_BaseEvent) {\n\t  _inherits(ModifyEvent, _BaseEvent);\n\t\n\t  function ModifyEvent(type, features, event) {\n\t    _classCallCheck(this, ModifyEvent);\n\t\n\t    /**\n\t     * features being modified.\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.features = features;\n\t\n\t    /**\n\t     * BrowserEvent\n\t     */\n\t    _this.browserEvent = event;\n\t    return _this;\n\t  }\n\t\n\t  return ModifyEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = ModifyEvent;\n\t\n\t\n\tModifyEvent.EventType = {\n\t\n\t  /**\n\t   * Triggered on features modification start.\n\t   */\n\t  MODIFY_START: 'modifystart',\n\t\n\t  /**\n\t   * Triggered on features modification end\n\t   */\n\t  MODIFY_END: 'modifyend'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 40 */\n/*!******************************************!*\\\n  !*** ./src/components/mousewheelzoom.js ***!\n  \\******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _config = __webpack_require__(/*! ../meek/config */ 34);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _math = __webpack_require__(/*! ../utils/math */ 29);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2017/6/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 鼠标滚轮缩放基类\n\t *\n\t *\n\t * @class MouseWheelZoom\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t */\n\tvar MouseWheelZoom = function (_Component) {\n\t  _inherits(MouseWheelZoom, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function MouseWheelZoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, MouseWheelZoom);\n\t\n\t    /**\n\t     * 私有属性Delta，默认为0\n\t     *\n\t     * @property delta\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._delta = 0;\n\t\n\t    /**\n\t     * 私有属性useAnchor\n\t     *\n\t     * @property useAnchor\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._useAnchor = options.useAnchor !== undefined ? options.useAnchor : true;\n\t\n\t    /**\n\t     * 私有属性duration\n\t     *\n\t     * @property duration\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._duration = options.duration !== undefined ? options.duration : 250;\n\t\n\t    /**\n\t     * 私有属性lastAnchor\n\t     *\n\t     * @property lastAnchor\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._lastAnchor = null;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._startTime = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._timeout = options.timeout !== undefined ? options.timeout : 80;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._timeoutId = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._mode = undefined;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  MouseWheelZoom.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var _this2 = this;\n\t\n\t    if (!(0, _mousekey.mouseWheel)(mapBrowserEvent)) {\n\t      return true;\n\t    }\n\t\n\t    mapBrowserEvent.preventDefault();\n\t\n\t    var map = mapBrowserEvent.map;\n\t    var wheelEvent = mapBrowserEvent.originalEvent;\n\t\n\t    if (this._useAnchor) {\n\t      this._lastAnchor = mapBrowserEvent.coordinate;\n\t    }\n\t\n\t    // Delta normalisation inspired by\n\t    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n\t    var delta = void 0;\n\t    if (mapBrowserEvent.type == _browserevent2.default.WHEEL) {\n\t      delta = wheelEvent.deltaY;\n\t    } else if (mapBrowserEvent.type == _browserevent2.default.MOUSE_WHEEL) {\n\t      delta = -wheelEvent.wheelDeltaY;\n\t    }\n\t\n\t    if (delta === 0) {\n\t      return false;\n\t    }\n\t\n\t    var now = Date.now();\n\t\n\t    if (this._startTime === undefined) {\n\t      this._startTime = now;\n\t    }\n\t\n\t    this._delta += delta;\n\t\n\t    var timeLeft = Math.max(this._timeout - (now - this._startTime), 0);\n\t\n\t    clearTimeout(this._timeoutId);\n\t    this._timeoutId = setTimeout(function () {\n\t      return _this2._handleWheelZoom(map);\n\t    }, timeLeft);\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * Zoom to the map\n\t   *\n\t   * handleWheelZoom\n\t   * @param map\n\t   * @private\n\t   */\n\t\n\t\n\t  MouseWheelZoom.prototype._handleWheelZoom = function _handleWheelZoom(map) {\n\t    var view = map.view;\n\t    // if (view.getAnimating()) {\n\t    //   view.cancelAnimations()\n\t    // }\n\t\n\t    var maxDelta = _config.Config.MOUSE_WHEEL_ZOOM_MAXDELTA;\n\t    var delta = (0, _math.clamp)(this._delta, -maxDelta, maxDelta);\n\t\n\t    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration);\n\t\n\t    this._mode = undefined;\n\t    this._delta = 0;\n\t    this._lastAnchor = null;\n\t    this._startTime = undefined;\n\t    this._timeoutId = undefined;\n\t  };\n\t\n\t  return MouseWheelZoom;\n\t}(_component2.default);\n\t\n\texports.default = MouseWheelZoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 41 */\n/*!***************************************!*\\\n  !*** ./src/components/selectevent.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/25.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t/**\n\t * 选择结束时，SelectEvent将会被派发\n\t *\n\t * @class selectevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t *\n\t */\n\t\n\tvar SelectEvent = function (_BaseEvent) {\n\t  _inherits(SelectEvent, _BaseEvent);\n\t\n\t  function SelectEvent(type, features, event) {\n\t    _classCallCheck(this, SelectEvent);\n\t\n\t    /**\n\t     * The feature being selected\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.selectedFeatures = features;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.browserEvent = event;\n\t    return _this;\n\t  }\n\t\n\t  return SelectEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * The select event\n\t * @type {{SELECT: string}}\n\t */\n\t\n\t\n\texports.default = SelectEvent;\n\tSelectEvent.EventType = {\n\t  /**\n\t   * Triggered upon features select\n\t   * @api stable\n\t   */\n\t  SELECT: 'select'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 42 */\n/*!*****************************!*\\\n  !*** ./src/control/zoom.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Zoom = function (_Control) {\n\t  _inherits(Zoom, _Control);\n\t\n\t  function Zoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Zoom);\n\t\n\t    var className = options.className !== undefined ? options.className : 'dt-zoom';\n\t\n\t    var delta = options.delta !== undefined ? options.delta : 1;\n\t\n\t    var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n\t    var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\t\n\t    var zoomInTipLabel = options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : '放大';\n\t\n\t    var zoomOutTipLabel = options.zoomOutTipLabel !== undefined ? options.zoomOutTipLabel : '缩小';\n\t\n\t    var inElement = document.createElement('button');\n\t    inElement.className = className + '-in';\n\t    inElement.setAttribute('type', 'button');\n\t    inElement.title = zoomInTipLabel;\n\t    inElement.appendChild(typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel);\n\t\n\t    var outElement = document.createElement('button');\n\t    outElement.className = className + '-out';\n\t    outElement.setAttribute('type', 'button');\n\t    outElement.title = zoomOutTipLabel;\n\t    outElement.appendChild(typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel);\n\t\n\t    var cssClasses = className + ' dt-unselectable dt-control';\n\t    var element = document.createElement('div');\n\t    element.className = cssClasses;\n\t    element.appendChild(inElement);\n\t    element.appendChild(outElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this, {\n\t      element: element,\n\t      target: options.target\n\t    }));\n\t\n\t    _this._delta = delta;\n\t\n\t    (0, _eventmanager.listen)(inElement, _browserevent2.default.CLICK, _this._handleClick, _this);\n\t    (0, _eventmanager.listen)(outElement, _browserevent2.default.CLICK, _this._handleClickIn, _this);\n\t    return _this;\n\t  }\n\t\n\t  Zoom.prototype._handleClickIn = function _handleClickIn(event) {\n\t    event.preventDefault();\n\t    this._zoomByDelta(-this._delta);\n\t  };\n\t\n\t  /**\n\t   * @param {number} delta Zoom delta.\n\t   * @param {Event} event The event to handle\n\t   * @private\n\t   */\n\t\n\t\n\t  Zoom.prototype._handleClick = function _handleClick(event) {\n\t    event.preventDefault();\n\t    this._zoomByDelta(this._delta);\n\t  };\n\t\n\t  /**\n\t   * @param {number} delta Zoom delta.\n\t   * @private\n\t   */\n\t\n\t\n\t  Zoom.prototype._zoomByDelta = function _zoomByDelta(delta) {\n\t    var map = this.map;\n\t    var view = map.view;\n\t    if (!view) {\n\t      return;\n\t    }\n\t\n\t    var currentResolution = view.resolution;\n\t    if (currentResolution) {\n\t      var newResolution = view.constrainResolution(currentResolution, delta);\n\t      view.resolution = newResolution;\n\t    }\n\t  };\n\t\n\t  return Zoom;\n\t}(_control2.default);\n\t\n\texports.default = Zoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 43 */\n/*!***************************!*\\\n  !*** ./src/core/event.js ***!\n  \\***************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zypc on 2016/11/13.\n\t */\n\t\n\t// The event processor for all subclasss, which can allow subclass\n\t// to handle event dispatching and listening.This is the top level class\n\t/**\n\t * 顶层事件处理器类,让子类具备事件的监听和派发\n\t *\n\t * @class Event\n\t * @module core\n\t * @constructor new Event()\n\t *\n\t */\n\tvar Event = function () {\n\t\n\t  /**\n\t   * Event's constructor\n\t   * @constructor constructor\n\t   */\n\t  function Event() {\n\t    _classCallCheck(this, Event);\n\t\n\t    this._pendingRemovals = {};\n\t\n\t    this._listeners = {};\n\t    this._dispatching = {};\n\t\n\t    this.nullFunction = function () {};\n\t  }\n\t\n\t  /**\n\t   * 根据事件标识获取对应标识的方法列表\n\t   *\n\t   * @method getListeners\n\t   * @param type {String} event type 事件标识\n\t   * @return {Array} 返回对应事件标示的函数数组\n\t   */\n\t\n\t\n\t  Event.prototype.getListeners = function getListeners(type) {\n\t    return this._listeners[type];\n\t  };\n\t\n\t  /**\n\t   * 判断是否含有对应事件标识的监听\n\t   *\n\t   * @method hasListener\n\t   * @param optType {Boolean}\n\t   * @returns {Boolean} ture if exsit ,false otherwise\n\t   */\n\t\n\t\n\t  Event.prototype.hasListener = function hasListener(optType) {\n\t    return optType ? Reflect.has(this._listeners, optType) : Object.keys(this._listeners).length > 0;\n\t  };\n\t\n\t  /**\n\t   * 移除事件监听\n\t   *\n\t   * @method removeEventListener\n\t   * @param type {String} event type\n\t   * @param listener {Array} listeners for event type\n\t   */\n\t\n\t\n\t  Event.prototype.removeEventListener = function removeEventListener(type, listener) {\n\t    var listeners = this._listeners[type];\n\t    if (listeners) {\n\t      var index = listeners.indexOf(listener);\n\t\n\t      if (Reflect.has(this._pendingRemovals, type)) {\n\t        listeners[index] = this.nullFunction;\n\t        ++this._pendingRemovals[type];\n\t      } else {\n\t        listeners.splice(index, 1);\n\t\n\t        if (listeners.length === 0) {\n\t          Reflect.deleteProperty(this._listeners, type);\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 添加事件监听,需要指定事件标示和处理方法\n\t   *\n\t   * @example\n\t   *    map.addEventListener('singleclick', function(event) {})\n\t   *\n\t   * @method addEventListener\n\t   * @param type {String} event type\n\t   * @param listener {Array} listeners for event type\n\t   */\n\t\n\t\n\t  Event.prototype.addEventListener = function addEventListener(type, listener) {\n\t    var listeners = this._listeners[type];\n\t    if (!listeners) {\n\t      listeners = this._listeners[type] = [];\n\t    }\n\t\n\t    if (listeners.indexOf(listener) === -1) {\n\t      listeners.push(listener);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 事件派发\n\t   *\n\t   * @example\n\t   * this.dispatchEvent(EventType.CHANGE)\n\t   *\n\t   * @method dispatchEvent\n\t   * @param event {String} event type string\n\t   * @returns {Boolean} ture if success ,false otherwise.\n\t   */\n\t\n\t\n\t  Event.prototype.dispatchEvent = function dispatchEvent(event) {\n\t    var evt = typeof event === 'string' ? { type: event } : event;\n\t    var type = evt.type;\n\t    evt.target = this;\n\t    var listeners = this._listeners[type];\n\t    var propagate = void 0;\n\t\n\t    if (listeners) {\n\t      if (!Reflect.has(this._dispatching, type)) {\n\t        this._dispatching[type] = 0;\n\t        this._pendingRemovals[type] = 0;\n\t      }\n\t\n\t      ++this._dispatching[type];\n\t\n\t      for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n\t          propagate = false;\n\t          break;\n\t        }\n\t      }\n\t\n\t      --this._dispatching[type];\n\t\n\t      if (this._dispatching[type] === 0) {\n\t        var pendingRemovals = this._pendingRemovals[type];\n\t        Reflect.deleteProperty(this._pendingRemovals, type);\n\t\n\t        while (pendingRemovals--) {\n\t          this.removeEventListener(type, this.nullFunction);\n\t        }\n\t\n\t        Reflect.deleteProperty(this._dispatching, type);\n\t      }\n\t\n\t      return propagate;\n\t    }\n\t  };\n\t\n\t  return Event;\n\t}();\n\t\n\texports.default = Event;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 44 */\n/*!******************************!*\\\n  !*** ./src/lyr/baselayer.js ***!\n  \\******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Layer基础类\n\t *\n\t * @class BaseLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar BaseLayer = function (_BaseObject) {\n\t  _inherits(BaseLayer, _BaseObject);\n\t\n\t  function BaseLayer(options) {\n\t    _classCallCheck(this, BaseLayer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var baseOptions = Object.assign({}, options);\n\t\n\t    _this.name = baseOptions.name || '';\n\t    _this.visible = true;\n\t    _this.datasource = [];\n\t    _this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1;\n\t    _this.dataExtent = null;\n\t    _this.maxResolution = 0;\n\t    _this.minResolution = 0;\n\t    _this.zIndex = baseOptions.zIndex || 0;\n\t\n\t    _this._mapRenderKey = null;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param mapValue {Object} mk.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 加载Feature\n\t   *\n\t   * @method loadFeature\n\t   * @returns {Object} features\n\t   */\n\t  BaseLayer.prototype.loadFeature = function loadFeature() {\n\t    return this.features;\n\t  };\n\t\n\t  _createClass(BaseLayer, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (value) {\n\t        this._map = value;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, value.render, value);\n\t        this.changed();\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置图层是否显示(将会触发的重绘事件)\n\t     *\n\t     * @property visible\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'visible',\n\t    get: function get() {\n\t      return this._visible;\n\t    },\n\t    set: function set(value) {\n\t      if (this._visible !== value) {\n\t        this._visible = value;\n\t        this.changed();\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置图层的透明度(将会触发map的重绘事件)\n\t     *\n\t     * @property opacity\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'opacity',\n\t    get: function get() {\n\t      return this._opacity;\n\t    },\n\t    set: function set(value) {\n\t      this._opacity = value;\n\t    }\n\t\n\t    /**\n\t     * 设置图层的最小分辨率\n\t     *\n\t     * @property minResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'minResolution',\n\t    get: function get() {\n\t      return this._minResolution;\n\t    },\n\t    set: function set(value) {\n\t      this._minResolution = value;\n\t    }\n\t\n\t    /**\n\t     * 设置图层的最大分辨率\n\t     *\n\t     * @property maxResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'maxResolution',\n\t    get: function get() {\n\t      return this._maxResolution;\n\t    },\n\t    set: function set(value) {\n\t      this._maxResolution = value;\n\t    }\n\t\n\t    /**\n\t     * dataExtent读取器\n\t     *\n\t     * @property dataExtent\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'dataExtent',\n\t    get: function get() {},\n\t    set: function set(value) {\n\t      this._dataExtent = value;\n\t    }\n\t\n\t    /**\n\t     * datasouce 读取器\n\t     *\n\t     * @property datasouce\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'datasouce',\n\t    get: function get() {\n\t      return this._datasource;\n\t    }\n\t  }, {\n\t    key: 'datasource',\n\t    set: function set(value) {\n\t      this._datasource = value;\n\t    }\n\t\n\t    /**\n\t     * zIndex读取器\n\t     *\n\t     * @property maxResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'zIndex',\n\t    get: function get() {\n\t      return this._zIndex;\n\t    },\n\t    set: function set(value) {\n\t      if (this._zIndex !== value) {\n\t        this._zIndex = value;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BaseLayer;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 45 */\n/*!*************************************!*\\\n  !*** ./src/lyr/image/imageevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ImageEvent = function (_BaseEvent) {\n\t  _inherits(ImageEvent, _BaseEvent);\n\t\n\t  function ImageEvent(type, image) {\n\t    _classCallCheck(this, ImageEvent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.image = image;\n\t    return _this;\n\t  }\n\t\n\t  return ImageEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = ImageEvent;\n\t\n\t\n\tImageEvent.Type = {\n\t\n\t  /**\n\t   * Triggered when an image starts loading.\n\t   * @api\n\t   */\n\t  IMAGELOADSTART: 'imageloadstart',\n\t\n\t  /**\n\t   * Triggered when an image finishes loading.\n\t   * @api\n\t   */\n\t  IMAGELOADEND: 'imageloadend',\n\t\n\t  /**\n\t   * Triggered if image loading results in an error.\n\t   * @api\n\t   */\n\t  IMAGELOADERROR: 'imageloaderror'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 46 */\n/*!**************************************!*\\\n  !*** ./src/lyr/image/singleimage.js ***!\n  \\**************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseimage = __webpack_require__(/*! ../../core/baseimage */ 68);\n\t\n\tvar _baseimage2 = _interopRequireDefault(_baseimage);\n\t\n\tvar _imagestate = __webpack_require__(/*! ./imagestate */ 24);\n\t\n\tvar _obj = __webpack_require__(/*! ../../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../../meek/eventtype */ 6);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../../core/eventmanager */ 4);\n\t\n\tvar _counter = __webpack_require__(/*! ../../utils/counter */ 36);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar SingleImage = function (_BaseImage) {\n\t  _inherits(SingleImage, _BaseImage);\n\t\n\t  function SingleImage(extent, resolution, pixelRatio, attributions, src, crossOrigin, imageLoadFunction) {\n\t    _classCallCheck(this, SingleImage);\n\t\n\t    /**\n\t     * @private\n\t     * @type {string}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseImage.call(this, extent, resolution, pixelRatio, _imagestate.ImageState.IDLE, attributions));\n\t\n\t    _this._src = src;\n\t\n\t    /**\n\t     * @private\n\t     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n\t     */\n\t    _this.domImage = new Image();\n\t    if (crossOrigin !== null) {\n\t      _this.getDomImage().crossOrigin = crossOrigin;\n\t    }\n\t\n\t    /**\n\t     * @private\n\t     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n\t     */\n\t    _this._imageByContext = {};\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<EventsKey>}\n\t     */\n\t    _this._imageListenerKeys = null;\n\t\n\t    /**\n\t     * @protected\n\t     * @type {ImageState}\n\t     */\n\t    _this.state = _imagestate.ImageState.IDLE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ImageLoadFunctionType}\n\t     */\n\t    _this._imageLoadFunction = imageLoadFunction;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @inheritDoc\n\t   * @api\n\t   */\n\t\n\t\n\t  SingleImage.prototype.getDomImage = function getDomImage(opt_context) {\n\t    if (opt_context !== undefined) {\n\t      var image = void 0;\n\t      var key = (0, _counter.getUid)(opt_context);\n\t\n\t      if (key in this._imageByContext) {\n\t        return this._imageByContext[key];\n\t      } else if (_obj2.default.isEmpty(this._imageByContext)) {\n\t        image = this._domImage;\n\t      } else {\n\t        image = this._domImage.cloneNode(false);\n\t      }\n\t\n\t      this._imageByContext[key] = image;\n\t      return image;\n\t    } else {\n\t      return this._domImage;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Tracks loading or read errors.\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImage.prototype._handleImageError = function _handleImageError() {\n\t    this.state = _imagestate.ImageState.ERROR;\n\t    this._unlistenImage();\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * Tracks successful image load.\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImage.prototype._handleImageLoad = function _handleImageLoad() {\n\t    if (this.resolution === undefined) {\n\t      this.resolution = _extentutil.ExtentUtil.getHeight(this.extent) / this.getDomImage().height;\n\t    }\n\t\n\t    this.state = _imagestate.ImageState.LOADED;\n\t    this._unlistenImage();\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * Load the image or retry if loading previously failed.\n\t   * Loading is taken care of by the tile queue, and calling this method is\n\t   * only needed for preloading or for reloading in case of an error.\n\t   * @override\n\t   * @api\n\t   */\n\t\n\t\n\t  SingleImage.prototype.load = function load() {\n\t    if (this.state === _imagestate.ImageState.IDLE || this.state === _imagestate.ImageState.ERROR) {\n\t      this.state = _imagestate.ImageState.LOADING;\n\t      this.changed();\n\t      this._imageListenerKeys = [(0, _eventmanager.listenOnce)(this.getDomImage(), _eventtype.EventType.ERROR, this._handleImageError, this), (0, _eventmanager.listenOnce)(this.getDomImage(), _eventtype.EventType.LOAD, this._handleImageLoad, this)];\n\t\n\t      this._imageLoadFunction(this, this._src);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n\t   */\n\t\n\t\n\t  /**\n\t   * Discards event handlers which listen for load completion or errors.\n\t   *\n\t   * @private\n\t   */\n\t  SingleImage.prototype._unlistenImage = function _unlistenImage() {\n\t    this._imageListenerKeys.forEach(_eventmanager.unlistenByKey);\n\t    this._imageListenerKeys = null;\n\t  };\n\t\n\t  _createClass(SingleImage, [{\n\t    key: 'domImage',\n\t    set: function set(value) {\n\t      this._domImage = value;\n\t    }\n\t  }]);\n\t\n\t  return SingleImage;\n\t}(_baseimage2.default);\n\t\n\texports.default = SingleImage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 47 */\n/*!*************************************!*\\\n  !*** ./src/lyr/singleimagelayer.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baselayer = __webpack_require__(/*! ./baselayer */ 44);\n\t\n\tvar _baselayer2 = _interopRequireDefault(_baselayer);\n\t\n\tvar _singleimage = __webpack_require__(/*! ../lyr/image/singleimage */ 46);\n\t\n\tvar _singleimage2 = _interopRequireDefault(_singleimage);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _imageevent = __webpack_require__(/*! ../lyr/image/imageevent */ 45);\n\t\n\tvar _imageevent2 = _interopRequireDefault(_imageevent);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _imagestate = __webpack_require__(/*! ../lyr/image/imagestate */ 24);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * SingleImageLayer\n\t *\n\t * @class SingleImageLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar SingleImageLayer = function (_BaseLayer) {\n\t  _inherits(SingleImageLayer, _BaseLayer);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function SingleImageLayer() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, SingleImageLayer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseLayer.call(this, options));\n\t\n\t    var imageExtent = options.imageExtent;\n\t    _this.dataExtent = imageExtent;\n\t\n\t    var crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : null;\n\t\n\t    var imageLoadFunction = options.imageLoadFunction !== undefined ? options.imageLoadFunction : _this.defaultImageLoadFunction;\n\t\n\t    _this.attributions = options.attributions;\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._singleImage = new _singleimage2.default(imageExtent, undefined, 1, _this.attributions, options.url, crossOrigin, imageLoadFunction);\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.Size}\n\t     */\n\t    _this._imageSize = options.imageSize ? options.imageSize : null;\n\t\n\t    /**\n\t     * Listen the change event for SingleImage\n\t     */\n\t    (0, _eventmanager.listen)(_this.singleImage, _eventtype.EventType.CHANGE, _this.handleImageChange, _this);\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     */\n\t    _this.zIndex = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 设置图片链接\n\t   *\n\t   * @method imageSrc\n\t   * @param url {String}\n\t   *\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param image\n\t   * @param src\n\t   */\n\t  SingleImageLayer.prototype.defaultImageLoadFunction = function defaultImageLoadFunction(image, src) {\n\t    image.getDomImage().src = src;\n\t  };\n\t\n\t  /**\n\t   * 获取图片的Dom\n\t   * @inheritDoc\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype.getImageInternal = function getImageInternal(extent) {\n\t    if (_extentutil.ExtentUtil.intersects(extent, this.singleImage.extent)) {\n\t      return this.singleImage;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Handle the image change event\n\t   * @param evt\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype.handleImageChange = function handleImageChange(evt) {\n\t    if (this.singleImage.state === _imagestate.ImageState.LOADED) {\n\t      var imageExtent = this.singleImage.extent;\n\t      var image = this.singleImage.getDomImage();\n\t      var imageWidth = void 0,\n\t          imageHeight = void 0;\n\t      if (this._imageSize) {\n\t        imageWidth = this._imageSize[0];\n\t        imageHeight = this._imageSize[1];\n\t      } else {\n\t        imageWidth = image.width;\n\t        imageHeight = image.height;\n\t      }\n\t\n\t      var resolution = _extentutil.ExtentUtil.getHeight(imageExtent) / imageHeight;\n\t      var targetWidth = Math.ceil(_extentutil.ExtentUtil.getWidth(imageExtent) / resolution);\n\t\n\t      if (targetWidth !== imageWidth) {\n\t        var context = (0, _domutil.createCanvasContext2D)(targetWidth, imageHeight);\n\t        var canvas = context.canvas;\n\t        context.drawImage(image, 0, 0, imageWidth, imageHeight, 0, 0, canvas.width, canvas.height);\n\t        // Pre-load image\n\t        this.singleImage.domImage = canvas;\n\t      }\n\t    }\n\t\n\t    this._dispatchImageEvent(evt);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype._dispatchImageEvent = function _dispatchImageEvent(event) {\n\t    var image = event.target;\n\t    switch (image.state) {\n\t      case _imagestate.ImageState.LOADING:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADSTART, image));\n\t        break;\n\t      case _imagestate.ImageState.LOADED:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADEND, image));\n\t        break;\n\t      case _imagestate.ImageState.ERROR:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADERROR, image));\n\t        break;\n\t      default:\n\t      // pass\n\t    }\n\t  };\n\t\n\t  _createClass(SingleImageLayer, [{\n\t    key: 'imageSrc',\n\t    set: function set(url) {\n\t      this._singleImage._src = url;\n\t      this._singleImage.domImage = new Image();\n\t      this._singleImage.state = _imagestate.ImageState.IDLE;\n\t    }\n\t\n\t    /**\n\t     * 获取singleImage\n\t     *\n\t     * @property singleImage\n\t     * @returns {SingleImage}\n\t     */\n\t\n\t  }, {\n\t    key: 'singleImage',\n\t    get: function get() {\n\t      return this._singleImage;\n\t    }\n\t\n\t    /**\n\t     * 属性读写器\n\t     *\n\t     * @property attributions\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'attributions',\n\t    set: function set(value) {\n\t      this._attributes = value;\n\t    },\n\t    get: function get() {\n\t      return this._attributes || null;\n\t    }\n\t  }]);\n\t\n\t  return SingleImageLayer;\n\t}(_baselayer2.default);\n\t\n\texports.default = SingleImageLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 48 */\n/*!**********************************!*\\\n  !*** ./src/meek/featureevent.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/9.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * FeatureEvent类\n\t *\n\t * @class FeatureEvent\n\t * @extends baseevent\n\t * @module meek\n\t */\n\tvar FeatureEvent = function (_BaseEvent) {\n\t  _inherits(FeatureEvent, _BaseEvent);\n\t\n\t  function FeatureEvent(type, feature) {\n\t    _classCallCheck(this, FeatureEvent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.feature = feature;\n\t    return _this;\n\t  }\n\t\n\t  return FeatureEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * Feature event definition\n\t * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n\t */\n\t\n\t\n\texports.default = FeatureEvent;\n\tFeatureEvent.EventType = {\n\t\n\t  /**\n\t   * Triggered when a feature is added.\n\t   */\n\t  ADD_FEATURE: 'addfeature',\n\t\n\t  /**\n\t   * Triggered when a feature is removed.\n\t   */\n\t  REMOVE_FEATURE: 'removefeature',\n\t\n\t  /**\n\t   * Triggered when all features are removed.\n\t   */\n\t  CLEAR: 'clear',\n\t\n\t  /**\n\t   * Triggered when the feature collection has been changed.\n\t   */\n\t  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 49 */\n/*!**************************!*\\\n  !*** ./src/meek/view.js ***!\n  \\**************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _config = __webpack_require__(/*! ../meek/config */ 34);\n\t\n\tvar _array = __webpack_require__(/*! ../utils/array */ 28);\n\t\n\tvar _math = __webpack_require__(/*! ../utils/math */ 29);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * View 视图类\n\t *\n\t * @class View\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar View = function (_BaseObject) {\n\t  _inherits(View, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function View(options) {\n\t    _classCallCheck(this, View);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var _innerOptions = Object.assign({}, options);\n\t\n\t    _this._applyOptions(_innerOptions);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Parse options and apply to view\n\t   * @param options\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._applyOptions = function _applyOptions(options) {\n\t\n\t    var resolutionConstraint = this._createResolutionConstraint(options);\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._maxResolution = resolutionConstraint.maxResolution;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._minResolution = resolutionConstraint.minResolution;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._zoomFactor = resolutionConstraint.zoomFactor;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<number>|undefined}\n\t     */\n\t    this._resolutions = options.resolutions;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._minZoom = resolutionConstraint.minZoom;\n\t\n\t    var centerConstraint = this._createCenterConstraint(options);\n\t    var constraint = resolutionConstraint.constraint;\n\t    var rotationConstraint = this._createRotationConstraint(options);\n\t\n\t    /**\n\t     * center、resolution、ratation\n\t     * @private\n\t     */\n\t    this._constraints = {\n\t      center: centerConstraint,\n\t      resolution: constraint,\n\t      rotation: rotationConstraint\n\t    };\n\t\n\t    this.center = options.center !== undefined ? options.center : this._calculateCenter();\n\t\n\t    this.resolution = options.resolution !== undefined ? options.resolution : this.constrainResolution(this._maxResolution, options.zoom - this._minZoom);\n\t\n\t    // 记录原始 view 参数\n\t    this._originalCenter = this.center;\n\t    this._originalResolution = this.resolution;\n\t\n\t    this.rotation = 0;\n\t\n\t    this.dataExtent = resolutionConstraint.extent;\n\t\n\t    this._options = options;\n\t  };\n\t\n\t  View.prototype._createRotationConstraint = function _createRotationConstraint() {\n\t    return 0;\n\t  };\n\t\n\t  /**\n\t   * 创建视图中心限制条件\n\t   *\n\t   * @method createCenterConstraint\n\t   * @param options\n\t   * @returns {Function}\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._createCenterConstraint = function _createCenterConstraint() {\n\t    return function (center) {\n\t      return center;\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 创建分辨率限制条件\n\t   *\n\t   * @method createResolutionConstraint\n\t   * @param options\n\t   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._createResolutionConstraint = function _createResolutionConstraint(options) {\n\t    var resolutionConstraint = void 0;\n\t    var maxResolution = void 0;\n\t    var minResolution = void 0;\n\t    var extent = void 0;\n\t\n\t    var defaultMaxZoom = _config.Config.DEFAULT_MAX_ZOOM;\n\t    var defaultZoomFactor = _config.Config.DEFAULT_ZOOM_FACTOR;\n\t    var defaultMinZoom = _config.Config.DEFAULT_MIN_ZOOM;\n\t    var defaultTileSize = _config.Config.DEFAULT_TILE_SIZE;\n\t\n\t    var minZoom = options.minZoom !== undefined ? options.minZoom : defaultMinZoom;\n\t\n\t    var maxZoom = options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n\t\n\t    var zoomFactor = options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n\t\n\t    var projection = options.projection;\n\t    extent = projection.extent;\n\t\n\t    if (options.resolutions !== undefined) {\n\t      var resolutions = options.resolutions;\n\t      maxResolution = resolutions[0];\n\t      minResolution = resolutions[resolutions.length - 1];\n\t      resolutionConstraint = this.createSnapToResolutions(resolutions);\n\t    } else {\n\t      // calculate the default min and max resolution\n\t      var size = Math.max(_extentutil.ExtentUtil.getWidth(extent), _extentutil.ExtentUtil.getHeight(extent));\n\t      var defaultMaxResolution = size / defaultTileSize / Math.pow(defaultZoomFactor, defaultMinZoom);\n\t\n\t      var defaultMinResolution = defaultMaxResolution / Math.pow(defaultZoomFactor, defaultMaxZoom - defaultMinZoom);\n\t\n\t      // user provided maxResolution takes precedence\n\t      maxResolution = options.maxResolution;\n\t      if (maxResolution !== undefined) {\n\t        minZoom = 0;\n\t      } else {\n\t        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n\t      }\n\t\n\t      // user provided minResolution takes precedence\n\t      minResolution = options.minResolution;\n\t      if (minResolution === undefined) {\n\t        if (options.maxZoom !== undefined) {\n\t          if (options.maxResolution !== undefined) {\n\t            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n\t          } else {\n\t            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n\t          }\n\t        } else {\n\t          minResolution = defaultMinResolution;\n\t        }\n\t      }\n\t\n\t      // given discrete zoom levels, minResolution may be different than provided\n\t      maxZoom = minZoom + Math.floor(Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n\t      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\t\n\t      resolutionConstraint = this.createSnapToPower(zoomFactor, maxResolution, maxZoom - minZoom);\n\t    }\n\t\n\t    return {\n\t      constraint: resolutionConstraint,\n\t      maxResolution: maxResolution,\n\t      minResolution: minResolution,\n\t      minZoom: minZoom,\n\t      zoomFactor: zoomFactor,\n\t      extent: extent\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param power\n\t   * @param maxResolution\n\t   * @param opt_maxLevel\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  View.prototype.createSnapToPower = function createSnapToPower(power, maxResolution, opt_maxLevel) {\n\t    return function (resolution, delta, direction) {\n\t      if (resolution !== undefined) {\n\t        var offset = -direction / 2 + 0.5;\n\t        var oldLevel = Math.floor(Math.log(maxResolution / resolution) / Math.log(power) + offset);\n\t        var newLevel = Math.max(oldLevel + delta, 0);\n\t        if (opt_maxLevel !== undefined) {\n\t          newLevel = Math.min(newLevel, opt_maxLevel);\n\t        }\n\t\n\t        var reso = maxResolution / Math.pow(power, newLevel);\n\t        return reso;\n\t      } else {\n\t        return undefined;\n\t      }\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param resolutions\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  View.prototype.createSnapToResolutions = function createSnapToResolutions(resolutions) {\n\t    return function (resolution, delta, direction) {\n\t      if (resolution !== undefined) {\n\t        var z = (0, _array.linearFindNearest)(resolutions, resolution, direction);\n\t        z = (0, _math.clamp)(z + delta, 0, resolutions.length - 1);\n\t        var index = Math.floor(z);\n\t        if (z != index && index < resolutions.length - 1) {\n\t          var power = resolutions[index] / resolutions[index + 1];\n\t          return resolutions[index] / Math.pow(power, z - index);\n\t        } else {\n\t          return resolutions[index];\n\t        }\n\t      } else {\n\t        return undefined;\n\t      }\n\t    };\n\t  };\n\t\n\t  View.prototype._calculateCenter = function _calculateCenter() {\n\t    return [500, 500];\n\t  };\n\t\n\t  /**\n\t   * 获取视图状态\n\t   *\n\t   * @method getViewState\n\t   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n\t   */\n\t\n\t\n\t  View.prototype.getViewState = function getViewState() {\n\t    var center = this.center;\n\t    var resolution = this.resolution;\n\t    var rotation = this.rotation;\n\t\n\t    return {\n\t      center: center.slice(),\n\t      resolution: resolution,\n\t      rotation: rotation\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 分辨率限制\n\t   *\n\t   * @method constrainResolution\n\t   * @param resolution\n\t   * @param opt_delta\n\t   * @param opt_direction\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  View.prototype.constrainResolution = function constrainResolution(resolution, opt_delta, opt_direction) {\n\t    var delta = opt_delta || 0;\n\t    var direction = opt_direction || 0;\n\t    return this._constraints.resolution(resolution, delta, direction);\n\t  };\n\t\n\t  /**\n\t   * 计算缩放中心点\n\t   *\n\t   * @method calculateCenterZoom\n\t   * @param resolution {Number}\n\t   * @param anchor {Number}\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  View.prototype.calculateCenterZoom = function calculateCenterZoom(resolution, anchor) {\n\t    var center = void 0;\n\t    var currentCenter = this.center;\n\t    var currentResolution = this.resolution;\n\t    if (currentCenter !== undefined && currentResolution !== undefined) {\n\t      var x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n\t      var y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n\t      center = [x, y];\n\t    }\n\t\n\t    return center;\n\t  };\n\t\n\t  /**\n\t   * 是否限制视图中心\n\t   *\n\t   * @method constrainCenter\n\t   * @param center\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  View.prototype.constrainCenter = function constrainCenter(center) {\n\t    this._constraints.center = center;\n\t    this._center = center;\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   * 视图中心点读写器\n\t   *\n\t   * @property center\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  _createClass(View, [{\n\t    key: 'center',\n\t    get: function get() {\n\t      return this._center;\n\t    },\n\t    set: function set(value) {\n\t      this.constrainCenter(value);\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 分辨率读写器\n\t     *\n\t     * @property resolution\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'resolution',\n\t    get: function get() {\n\t      return this._resolution;\n\t    },\n\t    set: function set(value) {\n\t      this._resolution = value;\n\t\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 旋转率读写器\n\t     *\n\t     * @property rotation\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotation',\n\t    get: function get() {\n\t      return this._rotation;\n\t    },\n\t    set: function set(value) {\n\t      this._rotation = value;\n\t    }\n\t\n\t    /**\n\t     * dataExtent读写器\n\t     *\n\t     * @property dataExtent\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'dataExtent',\n\t    get: function get() {\n\t      return this._dataExtent;\n\t    },\n\t    set: function set(value) {\n\t      this._dataExtent = value;\n\t    }\n\t\n\t    /**\n\t     * 获取最小分辨率\n\t     *\n\t     * @property minResolution\n\t     * @return {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'minResolution',\n\t    get: function get() {\n\t      return this._minResolution;\n\t    }\n\t\n\t    /**\n\t     * 获取最大分辨率\n\t     *\n\t     * @property maxResolution\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'maxResolution',\n\t    get: function get() {\n\t      return this._maxResolution;\n\t    }\n\t\n\t    /**\n\t     * 获取初始设置的地图中心点\n\t     *\n\t     * @property originalCenter\n\t     * @type {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'originalCenter',\n\t    get: function get() {\n\t      return this._originalCenter;\n\t    }\n\t\n\t    /**\n\t     * 获取初始设置的地图级别\n\t     *\n\t     * @property originalResolution\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'originalResolution',\n\t    get: function get() {\n\t      return this._originalResolution;\n\t    }\n\t  }]);\n\t\n\t  return View;\n\t}(_baseobject2.default);\n\t\n\texports.default = View;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 50 */\n/*!**********************************************!*\\\n  !*** ./src/renderer/canvas/layerrenderer.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _imagestate = __webpack_require__(/*! ../../lyr/image/imagestate */ 24);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../../meek/eventtype */ 6);\n\t\n\tvar _canvas = __webpack_require__(/*! ../../utils/canvas */ 54);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar LayerRenderer = function (_BaseObject) {\n\t  _inherits(LayerRenderer, _BaseObject);\n\t\n\t  function LayerRenderer(layer, context) {\n\t    _classCallCheck(this, LayerRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._context = context;\n\t    _this._layer = layer;\n\t\n\t    _this.renderedResolution = undefined;\n\t\n\t    _this._transform = _extentutil.ExtentUtil.createEmpty();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param offsetX\n\t   * @returns {*|!Transform}\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.getTransform = function getTransform(frameState, offsetX) {\n\t    var viewState = frameState.viewState;\n\t    var pixelRatio = 1;\n\t    var dx1 = pixelRatio * frameState.size[0] / 2;\n\t    var dy1 = pixelRatio * frameState.size[1] / 2;\n\t    var sx = pixelRatio / viewState.resolution;\n\t    var sy = sx;\n\t    var angle = -viewState.rotation;\n\t    var dx2 = -viewState.center[0] + offsetX;\n\t    var dy2 = -viewState.center[1];\n\t    return _transform.Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2);\n\t  };\n\t\n\t  /**\n\t   * Load the image\n\t   * @param image\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.loadImage = function loadImage(image) {\n\t    var imageState = image.state;\n\t    if (imageState !== _imagestate.ImageState.LOADED && imageState !== _imagestate.ImageState.ERROR) {\n\t      (0, _eventmanager.listen)(image, _eventtype.EventType.CHANGE, this._handleImageChange, this);\n\t    }\n\t\n\t    if (imageState === _imagestate.ImageState.IDLE) {\n\t      image.load();\n\t      imageState = image.state;\n\t    }\n\t\n\t    return imageState === _imagestate.ImageState.LOADED;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype._handleImageChange = function _handleImageChange(event) {\n\t    var image = event.target;\n\t    if (image.state === _imagestate.ImageState.LOADED) {\n\t      this.renderIfReadyAndVisible();\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.renderIfReadyAndVisible = function renderIfReadyAndVisible() {\n\t    var layer = this.layer;\n\t    // if (layer.visible && layer.getSourceState() == State.READY) {\n\t    if (layer.visible) {\n\t      layer.changed();\n\t      // this.changed()\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param extent\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.clip = function clip(context, frameState, extent) {\n\t    var pixelRatio = frameState.pixelRatio;\n\t    var width = frameState.size[0] * pixelRatio;\n\t    var height = frameState.size[1] * pixelRatio;\n\t    var rotation = frameState.viewState.rotation;\n\t    var topLeft = _extentutil.ExtentUtil.getTopLeft(extent);\n\t    var topRight = _extentutil.ExtentUtil.getTopRight(extent);\n\t    var bottomRight = _extentutil.ExtentUtil.getBottomRight(extent);\n\t    var bottomLeft = _extentutil.ExtentUtil.getBottomLeft(extent);\n\t\n\t    _transform.Transform.apply(frameState.toPixelTransform, topLeft);\n\t    _transform.Transform.apply(frameState.toPixelTransform, topRight);\n\t    _transform.Transform.apply(frameState.toPixelTransform, bottomRight);\n\t    _transform.Transform.apply(frameState.toPixelTransform, bottomLeft);\n\t\n\t    context.save();\n\t    _canvas.Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2);\n\t    context.beginPath();\n\t    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n\t    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n\t    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n\t    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n\t    context.clip();\n\t    _canvas.Canvas.rotateAtOffset(context, rotation, width / 2, height / 2);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param frameStateOpt\n\t   */\n\t  LayerRenderer.prototype.prepareFrame = function prepareFrame(frameStateOpt) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param frameStateOpt\n\t   * @param context\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.composeFrame = function composeFrame(frameStateOpt, context) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param optTransform\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.postCompose = function postCompose(context, frameState, optTransform) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param optTransform\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.preCompose = function preCompose(context, frameState, optTransform) {}; // eslint-disable-line no-unused-vars\n\t\n\t\n\t  _createClass(LayerRenderer, [{\n\t    key: 'layer',\n\t    get: function get() {\n\t      return this._layer;\n\t    }\n\t  }, {\n\t    key: 'context',\n\t    get: function get() {\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return LayerRenderer;\n\t}(_baseobject2.default);\n\t\n\texports.default = LayerRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 51 */\n/*!*****************************************!*\\\n  !*** ./src/renderer/rendereventtype.js ***!\n  \\*****************************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/5/15.\n\t */\n\t\n\tvar RenderEventType = exports.RenderEventType = {};\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.PRERENDER = 'prerender';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.POSTRENDER = 'postrender';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.RENDER = 'render';\n\n/***/ }),\n/* 52 */\n/*!********************************!*\\\n  !*** ./src/style/fillstyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 27);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n\t * 需要分别设置\n\t *\n\t * @class FillStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     var fillStyle = new mk.FillStyle([255,255,255],\n\t *         new mk.LineStyle([0,0,255],1,1.25),0.5)\n\t *\n\t */\n\tvar FillStyle = function (_BaseStyle) {\n\t  _inherits(FillStyle, _BaseStyle);\n\t\n\t  /**\n\t   * 构建一个面样式\n\t   * 面样式由填充样式和边框样式组成\n\t   *\n\t   * @constructor\n\t   * @param style 备有接口，以后扩充面的填充样式\n\t   * @param color 面的填充颜色\n\t   * @param alpha 免得填充透明度\n\t   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n\t   */\n\t  function FillStyle() {\n\t    var color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [255, 255, 255];\n\t    var borderStyle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : FillStyle.SOLID;\n\t\n\t    _classCallCheck(this, FillStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this._borderStyle = borderStyle;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 边框样式对象\n\t   *\n\t   * @property borderStyle\n\t   * @type {mk.LineStyle}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆面样式\n\t   *\n\t   * @method clone\n\t   * @returns {FillStyle}\n\t   */\n\t  FillStyle.prototype.clone = function clone() {\n\t    var newStyle = new FillStyle(this.color, this.borderStyle.clone(), this.alpha, this.style);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  _createClass(FillStyle, [{\n\t    key: 'borderStyle',\n\t    get: function get() {\n\t      return this._borderStyle;\n\t    },\n\t    set: function set(value) {\n\t      return this._borderStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return FillStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 实体填充\n\t * @static\n\t * @final\n\t * @property SOLID\n\t * @type {string}\n\t */\n\t\n\t\n\texports.default = FillStyle;\n\tFillStyle.SOLID = 'solid';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 53 */\n/*!*********************************!*\\\n  !*** ./src/style/pointstyle.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 27);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义一个点图形的样式\n\t *\n\t * @class PointStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *  // 定义一个点，包括外边框的样式\n\t *\n\t *  var pointStyle = new mk.PointStyle(10,[255, 255, 255],1,new mk.LineStyle([0, 0, 255],1,1))\n\t *\n\t */\n\tvar PointStyle = function (_BaseStyle) {\n\t  _inherits(PointStyle, _BaseStyle);\n\t\n\t  /**\n\t   * 构建一个点样式对象\n\t   *\n\t   * @constructor\n\t   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n\t   * @param size 点的大小，默认15\n\t   * @param color\n\t   * @param alpha\n\t   * @param xoffset\n\t   * @param yoffset\n\t   * @param angle\n\t   */\n\t  function PointStyle() {\n\t    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 15;\n\t    var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [255, 0, 0];\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var borderStyle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\t    var xoffset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\t    var yoffset = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\t    var angle = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n\t    var style = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : PointStyle.CIRCLE;\n\t\n\t    _classCallCheck(this, PointStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this._size = size;\n\t    _this._xoffset = xoffset;\n\t    _this._yoffset = yoffset;\n\t    _this._angle = angle;\n\t    _this._borderStyle = borderStyle;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 克隆点的样式\n\t   *\n\t   * @method clone\n\t   * @returns {PointStyle}\n\t   */\n\t\n\t\n\t  PointStyle.prototype.clone = function clone() {\n\t    var newStyle = new PointStyle(this.size, this.color, this.alpha, this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  /**\n\t   * 大小\n\t   *\n\t   * @property size\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  _createClass(PointStyle, [{\n\t    key: 'size',\n\t    get: function get() {\n\t      return this._size;\n\t    },\n\t    set: function set(value) {\n\t      this._size = value;\n\t    }\n\t\n\t    /**\n\t     * X 轴偏移量\n\t     *\n\t     * @property xoffset\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xoffset',\n\t    get: function get() {\n\t      return this._xoffset;\n\t    },\n\t    set: function set(value) {\n\t      this._xoffset = value;\n\t    }\n\t\n\t    /**\n\t     * Y 轴偏移量\n\t     *\n\t     * @property yoffset\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'yoffset',\n\t    get: function get() {\n\t      return this._yoffset;\n\t    },\n\t    set: function set(value) {\n\t      this._yoffset = value;\n\t    }\n\t\n\t    /**\n\t     * 样式显示的角度\n\t     *\n\t     * @property angle\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'angle',\n\t    get: function get() {\n\t      return this._angle;\n\t    },\n\t    set: function set(value) {\n\t      this._angle = value;\n\t    }\n\t\n\t    /**\n\t     * 边框样式\n\t     *\n\t     * @property borderStyle\n\t     * @type {LineStyle}\n\t     */\n\t\n\t  }, {\n\t    key: 'borderStyle',\n\t    get: function get() {\n\t      return this._borderStyle;\n\t    },\n\t    set: function set(value) {\n\t      this._borderStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return PointStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 圆形样式\n\t *\n\t * @static\n\t * @final\n\t * @property CIRCLE\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = PointStyle;\n\tPointStyle.CIRCLE = 'circle';\n\t\n\t/**\n\t * 方形样式\n\t *\n\t * @static\n\t * @final\n\t * @property SQUARE\n\t * @type {String}\n\t */\n\tPointStyle.SQUARE = 'square';\n\t\n\t/**\n\t * 十字样式\n\t *\n\t * @static\n\t * @final\n\t * @property CROSS\n\t * @type {string}\n\t */\n\tPointStyle.CROSS = 'cross';\n\t\n\t/**\n\t * X样式\n\t *\n\t * @static\n\t * @final\n\t * @property X\n\t * @type {string}\n\t */\n\tPointStyle.X = 'x';\n\t\n\t/**\n\t * 三角形样式\n\t *\n\t * @static\n\t * @final\n\t * @property TRIANGLE\n\t * @type {string}\n\t */\n\tPointStyle.TRIANGLE = 'triangle';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 54 */\n/*!*****************************!*\\\n  !*** ./src/utils/canvas.js ***!\n  \\*****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/6/7.\n\t */\n\t\n\tvar Canvas = exports.Canvas = {};\n\t\n\t/**\n\t *\n\t * @param context\n\t * @param rotation\n\t * @param offsetX\n\t * @param offsetY\n\t */\n\tCanvas.rotateAtOffset = function (context, rotation, offsetX, offsetY) {\n\t  if (rotation !== 0) {\n\t    context.translate(offsetX, offsetY);\n\t    context.rotate(rotation);\n\t    context.translate(-offsetX, -offsetY);\n\t  }\n\t};\n\t\n\texports.default = {\n\t  Canvas: Canvas\n\t};\n\n/***/ }),\n/* 55 */\n/*!*********************************!*\\\n  !*** ./src/utils/coordinate.js ***!\n  \\*********************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zypc on 2017/6/4.\n\t */\n\tvar Coordinate = exports.Coordinate = {};\n\t\n\tCoordinate.add = function (coordinate, delta) {\n\t  coordinate[0] += delta[0];\n\t  coordinate[1] += delta[1];\n\t  return coordinate;\n\t};\n\t\n\tCoordinate.rotate = function (coordinate, angle) {\n\t  var cosAngle = Math.cos(angle);\n\t  var sinAngle = Math.sin(angle);\n\t  var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n\t  var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n\t  coordinate[0] = x;\n\t  coordinate[1] = y;\n\t  return coordinate;\n\t};\n\t\n\tCoordinate.scale = function (coordinate, scale) {\n\t  coordinate[0] *= scale;\n\t  coordinate[1] *= scale;\n\t  return coordinate;\n\t};\n\t\n\texports.default = {\n\t  Coordinate: Coordinate\n\t};\n\n/***/ }),\n/* 56 */\n/*!********************************!*\\\n  !*** ./src/utils/functions.js ***!\n  \\********************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/8/30.\n\t */\n\t\n\tvar functions = exports.functions = {};\n\t\n\t/**\n\t * 默认条件函数执行\n\t * @returns {boolean}\n\t * @constructor\n\t */\n\tfunctions.TURE = function () {\n\t  return true;\n\t};\n\t\n\t/**\n\t * 默认条件函数不执行\n\t * @returns {boolean}\n\t * @constructor\n\t */\n\tfunctions.FALSE = function () {\n\t  return false;\n\t};\n\t\n\texports.default = {\n\t  functions: functions\n\t};\n\n/***/ }),\n/* 57 */\n/*!*********************************************!*\\\n  !*** ./src/components/componentdefaults.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.componentsDefaults = componentsDefaults;\n\t\n\tvar _kinetic = __webpack_require__(/*! ./kinetic */ 62);\n\t\n\tvar _kinetic2 = _interopRequireDefault(_kinetic);\n\t\n\tvar _dragpan = __webpack_require__(/*! ./dragpan */ 37);\n\t\n\tvar _dragpan2 = _interopRequireDefault(_dragpan);\n\t\n\tvar _mousewheelzoom = __webpack_require__(/*! ./mousewheelzoom */ 40);\n\t\n\tvar _mousewheelzoom2 = _interopRequireDefault(_mousewheelzoom);\n\t\n\tvar _keyboardhome = __webpack_require__(/*! ./keyboardhome */ 59);\n\t\n\tvar _keyboardhome2 = _interopRequireDefault(_keyboardhome);\n\t\n\tvar _keyboardzoom = __webpack_require__(/*! ./keyboardzoom */ 61);\n\t\n\tvar _keyboardzoom2 = _interopRequireDefault(_keyboardzoom);\n\t\n\tvar _keyboardpan = __webpack_require__(/*! ./keyboardpan */ 60);\n\t\n\tvar _keyboardpan2 = _interopRequireDefault(_keyboardpan);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * @param options\n\t * @returns {Set}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/6/15.\n\t */\n\t\n\tfunction componentsDefaults() {\n\t  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t  var components = new Set();\n\t\n\t  var kinetic = new _kinetic2.default(-0.005, 0.05, 100);\n\t\n\t  var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n\t  if (dragPan) {\n\t    components.add(new _dragpan2.default({\n\t      kinetic: kinetic\n\t    }));\n\t  }\n\t\n\t  var mouseWheelZoom = options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n\t  if (mouseWheelZoom) {\n\t    components.add(new _mousewheelzoom2.default({\n\t      constrainResolution: options.constrainResolution,\n\t      duration: options.zoomDuration\n\t    }));\n\t  }\n\t\n\t  var keyboard = options.keyboard !== undefined ? options.keyborad : true;\n\t  if (keyboard) {\n\t    components.add(new _keyboardhome2.default(options));\n\t    components.add(new _keyboardpan2.default(options));\n\t    components.add(new _keyboardzoom2.default({\n\t      delta: options.zoomDelta\n\t    }));\n\t  }\n\t\n\t  return components;\n\t}\n\t\n\texports.default = {\n\t  componentsDefaults: componentsDefaults\n\t};\n\n/***/ }),\n/* 58 */\n/*!********************************!*\\\n  !*** ./src/components/draw.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _feature = __webpack_require__(/*! ../meek/feature */ 25);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../geometry/point */ 23);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _line = __webpack_require__(/*! ../geometry/line */ 31);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _polygon = __webpack_require__(/*! ../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! ../geometry/mutilpolygon */ 21);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _extent = __webpack_require__(/*! ../geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _drawevent = __webpack_require__(/*! ./drawevent */ 38);\n\t\n\tvar _drawevent2 = _interopRequireDefault(_drawevent);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../geometry/parallelogram */ 22);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _functions = __webpack_require__(/*! ../utils/functions */ 56);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 图形绘制工具基础类\n\t *\n\t * @class Draw\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化绘图工具\n\t *      var drawTool = new mk.Draw({\n\t *        type: 'point',\n\t *        drawLayer: new mk.FeatureLayer()\n\t *      })\n\t *\n\t */\n\tvar Draw = function (_Component) {\n\t  _inherits(Draw, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t  function Draw() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Draw);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleMouseEvent: _this.handleMouseEvent,\n\t      handleUpEvent: _this._handleUpEvent\n\t    });\n\t\n\t    /**\n\t     * mapRenderKey\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._mapRenderKey = null;\n\t\n\t    /**\n\t     * 绘制作用图层;\n\t     * 需要给绘制工具一个绘制的图层\n\t     *\n\t     * @property drawLayer\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._drawLayer = options.drawLayer ? options.drawLayer : null;\n\t\n\t    /**\n\t     * 鼠标按下时的坐标点\n\t     *\n\t     * @property downPointPx\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._downPointPx = null;\n\t\n\t    /**\n\t     * 图形绘制结束条件\n\t     *\n\t     * @property finishCoordinate\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._finishCoordinate = null;\n\t\n\t    /**\n\t     * 当前的绘图模式(点、线、多边形、矩形)\n\t     *\n\t     * @property drawMode\n\t     * @type {*}\n\t     */\n\t    _this.drawMode = Draw.getDrawMode(options.type);\n\t\n\t    /**\n\t     * 绘制多边形、线段时的临时坐标数据\n\t     *\n\t     * @property sketchCoords\n\t     * @type\n\t     * @private\n\t     */\n\t    _this._sketchCoords = null;\n\t\n\t    /**\n\t     * 绘制多边的临时线段\n\t     *\n\t     * @property sketchLine\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchLine = null;\n\t\n\t    /**\n\t     * 绘制完成时的结束条件\n\t     *\n\t     * @property finishCondition\n\t     * @type {null}\n\t     * @private\n\t     *\n\t     */\n\t    _this._finishCondition = options.finishCondition ? options.finishCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n\t     */\n\t    _this._hasFinishConditionOptions = options.finishCondition ? true : false;\n\t\n\t    /**\n\t     * 撤销条件\n\t     *\n\t     * @property undoCondition\n\t     * @type {Function}\n\t     * @private\n\t     */\n\t    _this._undoCondition = options.undoCondition !== undefined ? options.undoCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n\t     */\n\t    _this._hasUndoConditionOptions = options.undoCondition ? true : false;\n\t\n\t    /**\n\t     * 设置默认回退的顶点数，默认1\n\t     * @TODO 需要完善\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._undoStep = options.freehandUndoStep ? options.freehandUndoStep : 2;\n\t\n\t    // add keyboard events\n\t    if (options.undoCondition || options.finishCondition) {\n\t      (0, _eventmanager.listen)(document, 'keyup', _this._handleKeyboardEvent, _this);\n\t    }\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时显示绘制的图形\n\t     *\n\t     * @property sketchLayer\n\t     * @type {Object} featurelayer\n\t     * @private\n\t     */\n\t    _this._sketchLayer = new _featurelayer2.default({ name: 'sketch layer for draw component' });\n\t\n\t    /**\n\t     * 获取默认绘制渲染样式\n\t     *\n\t     * @property sketchLayer\n\t     * @private\n\t     * @type {Function}\n\t     */\n\t    _this._sketchLayer.style = _this.getDefaultStyleFunction();\n\t\n\t    /**\n\t     * 临时点\n\t     *\n\t     * @property sketchPoint\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchPoint = null;\n\t\n\t    /**\n\t     * 绘制时，是否允许鼠标参考点\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._enableSketchPoint = options.enableSketchPoint ? options.enableSketchPoint : false;\n\t\n\t    /**\n\t     * 临时Feature\n\t     *\n\t     * @property sketchFeature\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchFeature = null;\n\t\n\t    /**\n\t     * 通过geometry的类型去构建一个geometry\n\t     *\n\t     * @property eometryFunction\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    // The function that can build a geometry by the passed geometry type.\n\t    _this._geometryFunction = null;\n\t\n\t    /**\n\t     * 临时的线段坐标数据\n\t     *\n\t     * @property sketchLineCoords\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchLineCoords = null;\n\t\n\t    /**\n\t     * freehand drawing\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._freehand = options.freehand ? options.freehand : false;\n\t\n\t    /**\n\t     * 公差像素距离\n\t     *\n\t     * @property snapTolerance\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._snapTolerance = options.snapTolerance ? options.snapTolerance : 2;\n\t\n\t    /**\n\t     * 绘制线段时的最多点限制，默认没有限制\n\t     *\n\t     * @property maxLinePoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._maxLinePoints = options.maxLinePoints ? options.maxLinePoints : Infinity;\n\t\n\t    /**\n\t     * 绘制多边形时的顶点限制，默认没有限制\n\t     *\n\t     * @property maxPolygonPoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._maxPolygonPoints = options.maxPolygonPoints ? options.maxPolygonPoints : Infinity;\n\t\n\t    /**\n\t     * 绘制线段的最少点为2，多边形为3\n\t     *\n\t     * @property minPoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._minPoints = options.minPoints ? options.minPoints : _this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2;\n\t\n\t    /**\n\t     *\n\t     * @type {condition}\n\t     * @private\n\t     */\n\t    _this._condition = options.condition ? options.condition : _functions.functions.TURE;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._shouldHandle = false;\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._squaredClickTolerance = options.clickUpTolerance ? options.clickUpTolerance * options.clickUpTolerance : 36;\n\t\n\t    return _this;\n\t  }\n\t\n\t  Draw.prototype._finishCheck = function _finishCheck() {\n\t    // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），小于4个不是多边形，return\n\t    if (this.drawMode === Draw.DrawMode.POLYGON) {\n\t      if (this._sketchFeature === null) {\n\t        return false;\n\t      }\n\t\n\t      var pcoordinates = this._sketchFeature.geometry.getCoordinates();\n\t      if (pcoordinates[0].length < 4) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    // 判断线的顶点是否小于2个，小于2个不是线段，return\n\t    if (this.drawMode === Draw.DrawMode.LINE) {\n\t      if (this._sketchFeature === null) {\n\t        return false;\n\t      }\n\t\n\t      var _pcoordinates = this._sketchFeature.geometry.getCoordinates();\n\t      if (_pcoordinates.length <= 2) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   * 处理绘制结束事件\n\t   *\n\t   * handleKeyboardEvent\n\t   * @type {Function}\n\t   * @param event {event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleKeyboardEvent = function _handleKeyboardEvent(event) {\n\t    // If finish drawing\n\t    if (this._hasFinishConditionOptions && this._finishCondition(event)) {\n\t      if (this._finishCheck()) {\n\t        this._finishDrawing();\n\t      }\n\t    }\n\t\n\t    // If undo drawing\n\t    if (this._hasUndoConditionOptions) {\n\t      if (this._undoCondition(event)) {\n\t        this.undoDrawing();\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取图形创建、修改的工厂方法\n\t   *\n\t   * @property geometryFunction\n\t   * @type {Function}\n\t   * @retruns geometryFunction {Function}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断传入的绘制类型是否在绘制列表中\n\t   *\n\t   * @method existInDrawMode\n\t   * @param value {String}\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t  Draw.prototype._existInDrawMode = function _existInDrawMode(value) {\n\t    if (typeof value === 'string' && value.constructor === String) {\n\t      var drawMode = Draw.DrawMode;\n\t      var modeValue = value.toUpperCase();\n\t\n\t      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n\t        return false;\n\t      }\n\t\n\t      for (var val in drawMode) {\n\t        if (modeValue === drawMode[val].toUpperCase()) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 图形生产工厂方法\n\t   *\n\t   * @method geometryFactory\n\t   * @returns {Object} 返回一个geometry对象\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._geometryFactory = function _geometryFactory() {\n\t    var Constructor = void 0;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.POINT) {\n\t      Constructor = _point2.default;\n\t    } else if (mode === Draw.DrawMode.LINE) {\n\t      Constructor = _line2.default;\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      Constructor = _polygon2.default;\n\t    } else if (mode === Draw.DrawMode.EXTENT) {\n\t      Constructor = _extent2.default;\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      Constructor = _parallelogram2.default;\n\t    }\n\t\n\t    return Constructor;\n\t  };\n\t\n\t  /**\n\t   * 设置缺省 geometryfunction\n\t   *\n\t   * @method initGeometryFunction\n\t   * @returns {Function} Geometry\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._initGeometryFunction = function _initGeometryFunction() {\n\t    var _this2 = this;\n\t\n\t    var geometryFunction = function geometryFunction(coordinates, opt_geometry) {\n\t      var mode = _this2.drawMode;\n\t      var geometry = opt_geometry;\n\t\n\t      if (geometry) {\n\t        if (mode === Draw.DrawMode.POLYGON || mode === Draw.DrawMode.PARALLELOGRAM || mode === Draw.DrawMode.LINE) {\n\t          geometry.setCoordinates(coordinates);\n\t        } else if (mode === Draw.DrawMode.EXTENT) {\n\t          geometry.setCoordinates(_extentutil.ExtentUtil.boundingExtent(coordinates));\n\t        }\n\t      } else {\n\t        var Constructor = _this2._geometryFactory();\n\t        geometry = new Constructor(coordinates[0], coordinates[1]);\n\t      }\n\t\n\t      return geometry;\n\t    };\n\t\n\t    return geometryFunction;\n\t  };\n\t\n\t  /**\n\t   * 或者 freehand draw 的执行条件\n\t   *\n\t   * @param event\n\t   * @returns {boolean|*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._freehandEnable = function _freehandEnable() {\n\t    var drawMode = this.drawMode;\n\t    return (drawMode === Draw.DrawMode.POLYGON || drawMode === Draw.DrawMode.LINE) && this._freehand;\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param event {event}\n\t   * @returns {*|Boolean}\n\t   */\n\t\n\t\n\t  Draw.prototype.handleMouseEvent = function handleMouseEvent(event) {\n\t    // 排除右键\n\t    var buttons = event.originalEvent.buttons;\n\t    if (buttons === 2) {\n\t      return false;\n\t    }\n\t\n\t    // 越界限制\n\t    event.coordinate = this.coordinateBeyond(event.coordinate);\n\t\n\t    var freehand = this._freehandEnable();\n\t    // this._freehand = this._freehandEnable()\n\t    // let pass = !this._freehand\n\t    var pass = true;\n\t    var eventType = event.type;\n\t    if (freehand && eventType === _browserevent2.default.MOUSE_DRAG && this._sketchFeature !== null) {\n\t      this._addToDrawing(event);\n\t      // pass = false\n\t    } else if (eventType === _browserevent2.default.MOUSE_MOVE) {\n\t      pass = this._handleMove(event);\n\t    } else if (eventType === _browserevent2.default.DBLCLICK) {\n\t      pass = false;\n\t    }\n\t\n\t    return _Component.prototype.handleMouseEvent.call(this, event) && pass;\n\t  };\n\t\n\t  /**\n\t   * 处理移动事件\n\t   *\n\t   * handleMove\n\t   * @param {BrowserEvent} event A move event.\n\t   * @return {boolean} Pass the event to other compoments.\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleMove = function _handleMove(event) {\n\t    if (this._downPointPx && (!this._freehand && this._shouldHandle || this._freehand && !this._shouldHandle)) {\n\t      var downPx = this._downPointPx;\n\t      var clickPx = event.pixel;\n\t      var dx = downPx[0] - clickPx[0];\n\t      var dy = downPx[1] - clickPx[1];\n\t      var squaredDistance = dx * dx + dy * dy;\n\t      this._shouldHandle = this._freehand ? squaredDistance > this._squaredClickTolerance : squaredDistance <= this._squaredClickTolerance;\n\t    }\n\t\n\t    if (this._finishCoordinate) {\n\t      this._modifyDrawing(event);\n\t      // this._autoPan(event)\n\t    } else {\n\t      this._updateSketchPoint(event);\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   * 鼠标按下时，获取当前坐标点\n\t   *\n\t   * handleDownEvent\n\t   * @param event {BrowserEvent} event A up event.\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleDownEvent = function _handleDownEvent(event) {\n\t    this._shouldHandle = !this._freehand;\n\t\n\t    if (this._freehand) {\n\t      this._downPointPx = event.pixel;\n\t      if (!this._finishCoordinate) {\n\t        this._startDrawing(event);\n\t      }\n\t\n\t      return false;\n\t    } else if (this._condition(event)) {\n\t      this._downPointPx = event.pixel;\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标弹起事件\n\t   *\n\t   * handleUpEvent\n\t   * @param event {BrowserEvent} event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleUpEvent = function _handleUpEvent(event) {\n\t    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n\t      return;\n\t    }\n\t\n\t    var pass = true;\n\t    var mode = this.drawMode;\n\t\n\t    this._handleMove(event);\n\t\n\t    if (this._shouldHandle) {\n\t      if (!this._finishCoordinate) {\n\t        this._startDrawing(event);\n\t\n\t        // 点绘制在up的时候结束\n\t        if (this.drawMode === Draw.DrawMode.POINT) {\n\t          this._finishDrawing();\n\t        }\n\t      } else if (mode === Draw.DrawMode.CIRCLE) {\n\t        //\n\t        //\n\t      } else if (mode === Draw.DrawMode.EXTENT) {\n\t        this._finishDrawing();\n\t      } else if (this._atFinish(event)) {\n\t        if (this._finishCondition(event)) {\n\t          this._finishDrawing();\n\t        }\n\t      } else {\n\t        this._addToDrawing(event);\n\t      }\n\t    } else if (this._freehand && !this._finishCondition) {\n\t      this._finishCoordinate = null;\n\t      this._abortDrawing();\n\t    }\n\t\n\t    return pass;\n\t  };\n\t\n\t  /**\n\t   * 启动绘制，生成feature\n\t   *\n\t   * @method startDrawing\n\t   * @param event {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._startDrawing = function _startDrawing(event) {\n\t    var startPoint = event.coordinate;\n\t    this._finishCoordinate = startPoint;\n\t\n\t    var _drawMode = this.drawMode;\n\t\n\t    // 构造geometry数据\n\t    if (_drawMode === Draw.DrawMode.POINT) {\n\t      this._sketchCoords = startPoint.slice(); // 缓存up的点\n\t    } else if (_drawMode === Draw.DrawMode.POLYGON) {\n\t      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]];\n\t      this._sketchLineCoords = this._sketchCoords[0]; // temp line\n\t    } else if (_drawMode === Draw.DrawMode.PARALLELOGRAM) {\n\t      // 平行四边形\n\t      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]];\n\t      this._sketchLineCoords = this._sketchCoords[0]; // temp line\n\t    } else {\n\t      this._sketchCoords = [startPoint.slice(), startPoint.slice()]; // 缓存up的点，最后一个值，用于move的替换\n\t\n\t      if (_drawMode === Draw.DrawMode.EXTENT) {\n\t        this._sketchLineCoords = this._sketchCoords;\n\t      }\n\t    }\n\t\n\t    if (this._sketchLineCoords) {\n\t      this._sketchLine = new _feature2.default(new _line2.default(this._sketchLineCoords));\n\t    }\n\t\n\t    // Build a geometry uesed sketchCorrdds\n\t    var geometry = this.geometryFunction(this._sketchCoords);\n\t\n\t    this._sketchFeature = new _feature2.default();\n\t    this._sketchFeature.geometry = geometry;\n\t\n\t    // Redraw the sketch features\n\t    this._updateSketchFeatures();\n\t\n\t    // 派发绘制开始事件\n\t    // Trigger the draw-strat event\n\t    this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_START, this._sketchFeature));\n\t  };\n\t\n\t  /**\n\t   * Modify the drawing\n\t   *\n\t   * @param event {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._modifyDrawing = function _modifyDrawing(event) {\n\t    var coordinate = event.coordinate;\n\t    var geometry = this._sketchFeature.geometry;\n\t    var coordinates = null,\n\t        last = null;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.POINT) {\n\t      last = this._sketchCoords;\n\t\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      coordinates = this._sketchCoords[0];\n\t      last = coordinates[coordinates.length - 1];\n\t      if (this._atFinish(event)) {\n\t        coordinate = this._finishCoordinate.slice();\n\t      }\n\t\n\t      // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      coordinates = this._sketchCoords[0];\n\t      last = coordinates[coordinates.length - 1];\n\t\n\t      // 需要清理，第三个点应该为鼠标点\n\t      if (coordinates.length > 3) {\n\t        coordinates = coordinates.slice(0, 2);\n\t        coordinates.push(coordinate);\n\t      } else {\n\t        last[0] = coordinate[0];\n\t        last[1] = coordinate[1];\n\t      }\n\t\n\t      var lastSecondPoint = coordinates[coordinates.length - 2];\n\t\n\t      // 平行四边形，如果有3个点，则直接生成平行四边形\n\t      if (lastSecondPoint[0] !== last[0] && lastSecondPoint[1] !== last[1] && coordinates.length === 3) {\n\t        var lstPoint = _parallelogram2.default.getTheLastPoint(coordinates);\n\t        coordinates.push(lstPoint, coordinates[0]);\n\t        this._sketchCoords = [coordinates];\n\t\n\t        // 辅助效果线\n\t        this._sketchLineCoords = coordinates;\n\t      }\n\t    } else {\n\t      coordinates = this._sketchCoords; // 获取up的点\n\t      last = coordinates[coordinates.length - 1]; // 替换为当前MOve的点，形成一条path\n\t\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    }\n\t\n\t    if (this._freehand) {\n\t      var tempLastRing = this._sketchCoords[0];\n\t      if (tempLastRing.length > 2) {\n\t        var lastPoint = tempLastRing[tempLastRing.length - 1];\n\t        var lastPoint2 = tempLastRing[tempLastRing.length - 2];\n\t\n\t        if (lastPoint[0] === lastPoint2[0] && lastPoint[1] === lastPoint2[1]) {\n\t          tempLastRing.pop();\n\t        }\n\t      }\n\t    }\n\t\n\t    // 给 geometry 赋值\n\t    this.geometryFunction(this._sketchCoords, geometry);\n\t\n\t    // 更新点坐标\n\t    if (this._sketchPoint) {\n\t      var sketchPointGeom = this._sketchPoint.geometry;\n\t      sketchPointGeom.update(coordinate[0], coordinate[1]);\n\t    }\n\t\n\t    var sketchLineGeom = void 0;\n\t    if (mode === Draw.DrawMode.EXTENT) {\n\t      if (!this._sketchLine) {\n\t        this._sketchLine = new _feature2.default(new _line2.default(null));\n\t      }\n\t\n\t      var rings = geometry.getCoordinates();\n\t      sketchLineGeom = this._sketchLine.geometry;\n\t      sketchLineGeom.path = rings;\n\t    } else if (this._sketchLineCoords) {\n\t      sketchLineGeom = this._sketchLine.geometry;\n\t      sketchLineGeom.path = this._sketchLineCoords;\n\t    }\n\t\n\t    this._updateSketchFeatures();\n\t    this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAWING, this._sketchFeature));\n\t  };\n\t\n\t  /**\n\t   * Add a new coordinate to the drawing\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._addToDrawing = function _addToDrawing(event) {\n\t    var coordinate = event.coordinate;\n\t    var geometry = this._sketchFeature.geometry;\n\t    var coordinates = void 0,\n\t        done = void 0;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.LINE) {\n\t      this._finishCoordinate = coordinate.slice();\n\t      coordinates = this._sketchCoords;\n\t\n\t      if (coordinates.length > this._maxLinePoints) {\n\t        if (this._freehand) {\n\t          coordinates.pop();\n\t        } else {\n\t          done = true;\n\t        }\n\t      }\n\t\n\t      if (this._freehand) {\n\t        if (coordinates.length > 1) {\n\t          var lastPoint = coordinates[coordinates.length - 1];\n\t          if (lastPoint[0] === coordinate[0] && lastPoint[1] === coordinate[1]) {\n\t            coordinates.pop();\n\t          }\n\t        }\n\t      }\n\t\n\t      coordinates.push(coordinate.slice());\n\t      this.geometryFunction(coordinates, geometry);\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      coordinates = this._sketchCoords[0];\n\t\n\t      if (coordinates.length > this._maxPolygonPoints) {\n\t        if (this._freehand) {\n\t          coordinates.pop();\n\t        } else {\n\t          done = true;\n\t        }\n\t      }\n\t\n\t      coordinates.push(coordinate.slice());\n\t\n\t      if (done) {\n\t        this._finishCoordinate = coordinates[0];\n\t      }\n\t\n\t      this.geometryFunction(this._sketchCoords, geometry);\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      coordinates = this._sketchCoords[0];\n\t\n\t      // 当前坐标数组添加新点数组\n\t      coordinates.push(coordinate.slice());\n\t      done = coordinates.length > this._maxPolygonPoints;\n\t\n\t      if (done) {\n\t        this._finishCoordinate = coordinates[0];\n\t      }\n\t\n\t      this.geometryFunction(this._sketchCoords, geometry);\n\t    }\n\t\n\t    this._updateSketchFeatures();\n\t\n\t    if (done) {\n\t      this._finishDrawing();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 终止绘制，不会添加临时feature\n\t   *\n\t   * @method abortDrawing\n\t   * @returns {Feature|null|_Feature2.default}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._abortDrawing = function _abortDrawing() {\n\t    this._finishCoordinate = null;\n\t    var sketchFeature = this._sketchFeature;\n\t    if (sketchFeature) {\n\t      this._sketchFeature = null;\n\t      this._sketchPoint = null;\n\t      this._sketchLine = null;\n\t      this._sketchLayer.clear();\n\t    }\n\t\n\t    return sketchFeature;\n\t  };\n\t\n\t  Draw.prototype.finishDrawing = function finishDrawing() {\n\t    if (this._finishCheck()) {\n\t      this._finishDrawing();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 绘制完成，形成正式feature\n\t   *\n\t   * @method finishDrawing\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._finishDrawing = function _finishDrawing() {\n\t    if (this._sketchFeature === null) {\n\t      this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_END));\n\t      return;\n\t    }\n\t\n\t    var sketchFeature = this._abortDrawing(); // 中止绘制，\n\t    var coordinates = this._sketchCoords;\n\t    var geometry = sketchFeature.geometry;\n\t\n\t    var drawMode = this.drawMode;\n\t\n\t    if (drawMode === Draw.DrawMode.LINE) {\n\t      // remove the redundant last point\n\t      coordinates.pop();\n\t      this.geometryFunction(coordinates, geometry);\n\t    } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t      // When we finish drawing a polygon on the last point,\n\t      // the last coordinate is duplicated as for LineString\n\t      // we force the replacement by the first point\n\t      coordinates[0].pop();\n\t      coordinates[0].push(coordinates[0][0]);\n\t      this.geometryFunction(coordinates, geometry);\n\t    }\n\t\n\t    // 处理复合图形\n\t    if (drawMode === _geometry2.default.MULTI_POINT) {\n\t      // sketchFeature.geometry = new MultiPoint([coordinates]))\n\t    } else if (drawMode === _geometry2.default.MULTI_LINE) {\n\t      // sketchFeature.geometry = new MultiLineString([coordinates])\n\t    } else if (drawMode === _geometry2.default.MULTI_POLYGON) {\n\t      sketchFeature.geometry = new _mutilpolygon2.default([coordinates]);\n\t    }\n\t\n\t    if (this._freehand) {\n\t      (0, _geometryutil.simplify)(sketchFeature.geometry);\n\t    }\n\t\n\t    // 最终放到shource中，形成正式feature\n\t    if (this._drawLayer) {\n\t      sketchFeature.style = undefined;\n\t      this._drawLayer.addFeatures([sketchFeature]);\n\t    }\n\t\n\t    // First dispatch event to allow full set up of feature\n\t    this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_END, sketchFeature));\n\t  };\n\t\n\t  /**\n\t   * Determine if an event is within the snapping tolerance of the start coord.\n\t   *\n\t   * @param event\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._atFinish = function _atFinish(event) {\n\t    var at = false;\n\t    if (this._sketchFeature) {\n\t\n\t      if (this._freehand && this._finishCondition) {\n\t        return false;\n\t      }\n\t\n\t      var potentiallyDone = false;\n\t      var potentiallyFinishCoordinates = [this._finishCoordinate];\n\t\n\t      var drawMode = this.drawMode;\n\t      if (drawMode === Draw.DrawMode.LINE) {\n\t        potentiallyDone = this._sketchCoords.length > this._minPoints;\n\t      } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t        potentiallyDone = this._sketchCoords[0].length > this._minPoints;\n\t        potentiallyFinishCoordinates = [this._sketchCoords[0][0], this._sketchCoords[0][this._sketchCoords[0].length - 2]];\n\t      } else if (drawMode === Draw.DrawMode.PARALLELOGRAM) {\n\t        at = this._sketchCoords[0].length === 5 ? true : false;\n\t      }\n\t\n\t      if (potentiallyDone) {\n\t        var map = this.map;\n\t        for (var i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n\t          var finishCoordinate = potentiallyFinishCoordinates[i];\n\t          var finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n\t          var pixel = event.pixel;\n\t          var dx = pixel[0] - finishPixel[0];\n\t          var dy = pixel[1] - finishPixel[1];\n\t          var freehand = this._freehand;\n\t          var snapTolerance = freehand ? 1 : this._snapTolerance;\n\t          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n\t          if (at) {\n\t            this._finishCoordinate = finishCoordinate;\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return at;\n\t  };\n\t\n\t  /**\n\t   * Create or update the sketch point\n\t   *\n\t   * updateSketchPoint\n\t   * @param event {BrowserEvent} event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._updateSketchPoint = function _updateSketchPoint(event) {\n\t    var coordinates = event.coordinate;\n\t\n\t    if (!this._enableSketchPoint) {\n\t      return;\n\t    }\n\t\n\t    if (this._sketchPoint === null) {\n\t      var geom = new _point2.default(coordinates[0], coordinates[1]);\n\t      this._sketchPoint = new _feature2.default(geom);\n\t      this._updateSketchFeatures();\n\t    } else {\n\t      var sketchPointgeom = this._sketchPoint.geometry;\n\t      sketchPointgeom.setCoordinates(coordinates);\n\t    }\n\t  };\n\t\n\t  Draw.prototype._autoPan = function _autoPan(event) {\n\t    var pixel = event.pixel;\n\t    var size = this.map.size;\n\t    var x = pixel[0];\n\t    var y = pixel[1];\n\t\n\t    if (x <= 2 || y <= 2) {\n\t      // console.log('出界')\n\t      return;\n\t    }\n\t\n\t    if (x >= size[0] - 5 || y >= size[1] - 5) {\n\t      // console.log('出界')\n\t      return;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Redraw the sketch featrues.\n\t   * updateSketchFeatures\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._updateSketchFeatures = function _updateSketchFeatures() {\n\t    var features = [];\n\t\n\t    if (this._sketchFeature) {\n\t      features.push(this._sketchFeature);\n\t    }\n\t\n\t    if (this._sketchLine) {\n\t      features.push(this._sketchLine);\n\t    }\n\t\n\t    if (this._sketchPoint) {\n\t      features.push(this._sketchPoint);\n\t    }\n\t\n\t    // 出发map的render\n\t    this._sketchLayer.clear();\n\t    this._sketchLayer.addFeatures(features);\n\t  };\n\t\n\t  /**\n\t   * 执行撤销\n\t   *\n\t   * @method undoDrawing\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype.undoDrawing = function undoDrawing() {\n\t    var drawMode = this.drawMode;\n\t    var undoStep = 1;\n\t    var polygonDeleteStep = 2;\n\t    if (this._freehand) {\n\t      undoStep = this._undoStep;\n\t      polygonDeleteStep = 3;\n\t    }\n\t\n\t    if (drawMode === Draw.DrawMode.LINE) {\n\t      if (this._sketchFeature) {\n\t        var coordinates = this._sketchFeature.geometry.getCoordinates();\n\t        if (coordinates.length + undoStep > 2) {\n\t          coordinates.splice(coordinates.length - 2, undoStep);\n\t          if (coordinates.length === 1) {\n\t            this._abortDrawing();\n\t            this._finishDrawing();\n\t          } else {\n\t            this._sketchFeature.changed();\n\t          }\n\t        } else {\n\t          this._abortDrawing();\n\t          this._finishDrawing();\n\t        }\n\t      }\n\t    } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t      if (this._sketchFeature) {\n\t        var pcoordinates = this._sketchFeature.geometry.getCoordinates()[0];\n\t\n\t        if (pcoordinates.length + undoStep > polygonDeleteStep) {\n\t          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep);\n\t          if (pcoordinates.length === 1) {\n\t            this._abortDrawing();\n\t            this._finishDrawing();\n\t          } else {\n\t            this._sketchFeature.changed();\n\t          }\n\t        } else {\n\t          this._abortDrawing();\n\t          this._finishDrawing();\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param mapValue {Object} mk.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 更新绘制状态\n\t   *\n\t   * @method updateState\n\t   * @private\n\t   */\n\t  Draw.prototype._updateState = function _updateState() {\n\t    var map = this.map;\n\t    var active = this.active;\n\t    if (!map || !active) {\n\t      this._abortDrawing();\n\t    }\n\t\n\t    this._sketchLayer.map = map;\n\t  };\n\t\n\t  /**\n\t   * 获取默认绘制样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  Draw.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var styles = _style.Style.createDefaultEditing();\n\t    return function (feature) {\n\t      return styles[feature.geometry.geometryType];\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Draw.prototype.shouldStopEvent = function shouldStopEvent() {\n\t    if (this._freehand) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取当前的Layer\n\t   *\n\t   * @method drawLayer\n\t   * @return {null}\n\t   */\n\t\n\t\n\t  _createClass(Draw, [{\n\t    key: 'geometryFunction',\n\t    get: function get() {\n\t      if (!this._geometryFunction) {\n\t        this._geometryFunction = this._initGeometryFunction();\n\t      }\n\t\n\t      return this._geometryFunction;\n\t    }\n\t\n\t    /**\n\t     * drawMode读写器，\n\t     * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n\t     *\n\t     * @type {Function}\n\t     * @property drawMode\n\t     * @type {mk.Draw.DrawMode}\n\t     */\n\t\n\t  }, {\n\t    key: 'drawMode',\n\t    get: function get() {\n\t      return this._drawMode;\n\t    },\n\t    set: function set(value) {\n\t      var isIn = this._existInDrawMode(value);\n\t\n\t      this.active = isIn ? true : false;\n\t      this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED;\n\t\n\t      this._sketchLineCoords = null;\n\t      this._abortDrawing();\n\t\n\t      this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2;\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(mapValue) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (mapValue) {\n\t        this._map = mapValue;\n\t        // this._mapRenderKey = listen(this, EventType.CHANGE, mapValue.render, mapValue)\n\t\n\t        mapValue.addLayer(this._sketchLayer);\n\t      }\n\t\n\t      this._updateState();\n\t    }\n\t  }, {\n\t    key: 'drawLayer',\n\t    get: function get() {\n\t      return this._drawLayer;\n\t    }\n\t\n\t    /**\n\t     * 设置当前自由、绘制模式\n\t     * @property freehand\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'freehand',\n\t    get: function get() {\n\t      return this._freehand;\n\t    },\n\t    set: function set(value) {\n\t      this._freehand = value;\n\t    }\n\t\n\t    /**\n\t     * active读写器, 读取设置当前active非自由\n\t     *\n\t     * @type {Function}\n\t     * @property active\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(value) {\n\t      this._active = value;\n\t      if (this._active === false) {\n\t        if (this._sketchLayer) {\n\t          this._sketchLayer.clear();\n\t        }\n\t\n\t        this._sketchPoint = null;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Draw;\n\t}(_component2.default);\n\t\n\t/**\n\t * 获取当前绘制模式的静态方法\n\t *\n\t * @method getDrawMode\n\t * @param type {String}\n\t * @returns {Object}\n\t */\n\t\n\t\n\texports.default = Draw;\n\tDraw.getDrawMode = function (type) {\n\t  var drawMode = Draw.DrawMode.UNDEFINED;\n\t\n\t  switch (type) {\n\t    case _geometry2.default.POINT:\n\t    case _geometry2.default.MULTI_POINT:\n\t      drawMode = Draw.DrawMode.POINT;\n\t      break;\n\t    case _geometry2.default.LINE:\n\t    case _geometry2.default.MULTI_LINE:\n\t      drawMode = Draw.DrawMode.LINE;\n\t      break;\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.MULTI_POLYGON:\n\t      drawMode = Draw.DrawMode.POLYGON;\n\t      break;\n\t    case _geometry2.default.EXTENT:\n\t      drawMode = Draw.DrawMode.EXTENT;\n\t      break;\n\t    case _geometry2.default.PARALLELOGRAM:\n\t      drawMode = Draw.DrawMode.PARALLELOGRAM;\n\t      break;\n\t  }\n\t\n\t  return drawMode;\n\t};\n\t\n\t/**\n\t * Draw mode.  This collapses multi-part geometry types with their single-part\n\t * cousins.\n\t *\n\t * 绘制模式：点、线、面、矩形(circle暂时不支持)\n\t * @enum {string}\n\t */\n\tDraw.DrawMode = {\n\t  POINT: 'Point',\n\t  LINE: 'Line',\n\t  POLYGON: 'Polygon',\n\t  CIRCLE: 'Circle',\n\t  EXTENT: 'Extent',\n\t  PARALLELOGRAM: 'Parallelogram',\n\t  UNDEFINED: 'undefined'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 59 */\n/*!****************************************!*\\\n  !*** ./src/components/keyboardhome.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t */\n\tvar KeyboardHome = function (_Component) {\n\t  _inherits(KeyboardHome, _Component);\n\t\n\t  function KeyboardHome() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardHome);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._defaultCondition = function (mapBrowserEvent) {\n\t      var keyCode = mapBrowserEvent.originalEvent.keyCode;\n\t      return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.targetNotEditable)(mapBrowserEvent) && keyCode === 36;\n\t    };\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.EventsConditionType}\n\t     */\n\t    _this._condition = options.condition ? options.condition : _this._defaultCondition;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   */\n\t\n\t\n\t  KeyboardHome.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (this._condition(mapBrowserEvent)) {\n\t      this._goToHome();\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  /**\n\t   * 将视图还原到最初\n\t   * @private\n\t   */\n\t\n\t\n\t  KeyboardHome.prototype._goToHome = function _goToHome() {\n\t    var view = this.map.view;\n\t    if (view) {\n\t      var orignalCenter = view.originalCenter;\n\t      var originalResolution = view.originalResolution;\n\t\n\t      view.center = orignalCenter;\n\t      view.resolution = originalResolution;\n\t    }\n\t  };\n\t\n\t  return KeyboardHome;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardHome;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 60 */\n/*!***************************************!*\\\n  !*** ./src/components/keyboardpan.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar KeyboardPan = function (_Component) {\n\t  _inherits(KeyboardPan, _Component);\n\t\n\t  function KeyboardPan() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardPan);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._defaultCondition = function (mapBrowserEvent) {\n\t      var keyCode = mapBrowserEvent.originalEvent.keyCode;\n\t      return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.targetNotEditable)(mapBrowserEvent) && (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38);\n\t    };\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._condition = options.condition !== undefined ? options.condition : _this._defaultCondition;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._duration = options.duration !== undefined ? options.duration : 100;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._pixelDelta = options.pixelDelta !== undefined ? options.pixelDelta : 128;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * \n\t   * @param event\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  KeyboardPan.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (mapBrowserEvent.type === _browserevent2.default.KEYDOWN) {\n\t      var keyEvent = mapBrowserEvent.originalEvent;\n\t      var keyCode = keyEvent.keyCode;\n\t      if (this._condition(mapBrowserEvent)) {\n\t        var map = mapBrowserEvent.map;\n\t        var view = map.view;\n\t        var mapUnitsDelta = view.resolution * this._pixelDelta;\n\t        var deltaX = 0,\n\t            deltaY = 0;\n\t\n\t        if (keyCode === 40) {\n\t          deltaY = mapUnitsDelta;\n\t        } else if (keyCode === 37) {\n\t          deltaX = -mapUnitsDelta;\n\t        } else if (keyCode === 39) {\n\t          deltaX = mapUnitsDelta;\n\t        } else {\n\t          deltaY = -mapUnitsDelta;\n\t        }\n\t\n\t        var delta = [deltaX, deltaY];\n\t        _Component.prototype.pan.call(this, view, delta, null);\n\t        mapBrowserEvent.preventDefault();\n\t        stopEvent = true;\n\t      }\n\t    }\n\t    return !stopEvent;\n\t  };\n\t\n\t  return KeyboardPan;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardPan;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 61 */\n/*!****************************************!*\\\n  !*** ./src/components/keyboardzoom.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar KeyboardZoom = function (_Component) {\n\t  _inherits(KeyboardZoom, _Component);\n\t\n\t  function KeyboardZoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardZoom);\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._condition = options.condition ? options.condition : _mousekey.targetNotEditable;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._delta = options.delta ? options.delta : 1;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  KeyboardZoom.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (mapBrowserEvent.type == _browserevent2.default.KEYDOWN || mapBrowserEvent.type == _browserevent2.default.KEYPRESS) {\n\t      var keyEvent = mapBrowserEvent.originalEvent;\n\t      var charCode = keyEvent.charCode;\n\t      if (this._condition(mapBrowserEvent) && (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n\t        var map = mapBrowserEvent.map;\n\t        var delta = charCode == '+'.charCodeAt(0) ? this._delta : -this._delta;\n\t        var view = map.view;\n\t        _Component.prototype.zoomByDelta.call(this, view, delta, undefined, null);\n\t        mapBrowserEvent.preventDefault();\n\t        stopEvent = true;\n\t      }\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  return KeyboardZoom;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardZoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 62 */\n/*!***********************************!*\\\n  !*** ./src/components/kinetic.js ***!\n  \\***********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Kinetic = function (_BaseObject) {\n\t  _inherits(Kinetic, _BaseObject);\n\t\n\t  function Kinetic(decay, minVelocity, delay) {\n\t    _classCallCheck(this, Kinetic);\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._decay = decay;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._minVelocity = minVelocity;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._delay = delay;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<number>}\n\t     */\n\t    _this._points = [];\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._angle = 0;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._initialVelocity = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   */\n\t\n\t\n\t  Kinetic.prototype.begin = function begin() {\n\t    this._points.length = 0;\n\t    this._angle = 0;\n\t    this._initialVelocity = 0;\n\t  };\n\t\n\t  /**\n\t   * @param {number} x X.\n\t   * @param {number} y Y.\n\t   */\n\t\n\t\n\t  Kinetic.prototype.update = function update(x, y) {\n\t    this._points.push(x, y, Date.now());\n\t  };\n\t\n\t  /**\n\t   * @return {boolean} Whether we should do kinetic animation.\n\t   */\n\t\n\t\n\t  Kinetic.prototype.end = function end() {\n\t    if (this._points.length < 6) {\n\t      // at least 2 points are required (i.e. there must be at least 6 elements\n\t      // in the array)\n\t      return false;\n\t    }\n\t    var delay = Date.now() - this._delay;\n\t    var lastIndex = this._points.length - 3;\n\t    if (this._points[lastIndex + 2] < delay) {\n\t      // the last tracked point is too old, which means that the user stopped\n\t      // panning before releasing the map\n\t      return false;\n\t    }\n\t\n\t    // get the first point which still falls into the delay time\n\t    var firstIndex = lastIndex - 3;\n\t    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n\t      firstIndex -= 3;\n\t    }\n\t\n\t    var duration = this._points[lastIndex + 2] - this._points[firstIndex + 2];\n\t    var dx = this._points[lastIndex] - this._points[firstIndex];\n\t    var dy = this._points[lastIndex + 1] - this._points[firstIndex + 1];\n\t    this._angle = Math.atan2(dy, dx);\n\t    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration;\n\t    return this._initialVelocity > this._minVelocity;\n\t  };\n\t\n\t  /**\n\t   * @return {number} Total distance travelled (pixels).\n\t   */\n\t\n\t\n\t  Kinetic.prototype.getDistance = function getDistance() {\n\t    return (this._minVelocity - this._initialVelocity) / this._decay;\n\t  };\n\t\n\t  /**\n\t   * @return {number} Angle of the kinetic panning animation (radians).\n\t   */\n\t\n\t\n\t  Kinetic.prototype.angle = function angle() {\n\t    return this._angle;\n\t  };\n\t\n\t  return Kinetic;\n\t}(_baseobject2.default);\n\t\n\texports.default = Kinetic;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 63 */\n/*!**********************************!*\\\n  !*** ./src/components/modify.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../geometry/point */ 23);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../geometry/parallelogram */ 22);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _modifyevent = __webpack_require__(/*! ./modifyevent */ 39);\n\t\n\tvar _modifyevent2 = _interopRequireDefault(_modifyevent);\n\t\n\tvar _feature = __webpack_require__(/*! ../meek/feature */ 25);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _functions = __webpack_require__(/*! ../utils/functions */ 56);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/25.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 编辑模式，启动后可以编辑图形\n\t *\n\t * @class Modify\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化编辑工具\n\t *      var modifyTool = new mk.Modify({\n\t *        features: selectedFeaturs\n\t *      })\n\t */\n\tvar Modify = function (_Component) {\n\t  _inherits(Modify, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t  function Modify() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Modify);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this, options));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleDragEvent: _this._handleDragEvent,\n\t      handleUpEvent: _this._handleUpEvent\n\t    });\n\t\n\t    /**\n\t     * 可以编辑的feature集合\n\t     *\n\t     * @property features\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._features = [];\n\t\n\t    /**\n\t     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n\t     *\n\t     * @property pixelTolerance\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._pixelTolerance = options.pixelTolerance ? options.pixelTolerance : 10;\n\t\n\t    /**\n\t     * 可以整体移动图形，矩形默认可以整体移动\n\t     *\n\t     * @property movableGeometrys\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._movableGeometrys = options.movableGeometrys ? options.movableGeometrys : ['extent'];\n\t\n\t    /**\n\t     *\n\t     * hasMoveableGeometrys\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._hasMoveableGeometrys = true;\n\t\n\t    var movableGeometrys = _this._movableGeometrys;\n\t    if (movableGeometrys === null || movableGeometrys === undefined) {\n\t      _this._hasMoveableGeometrys = false;\n\t    }\n\t\n\t    if (Array.isArray(movableGeometrys)) {\n\t      if (movableGeometrys.length === 0) {\n\t        _this._hasMoveableGeometrys = false;\n\t      }\n\t    }\n\t\n\t    /**\n\t     *\n\t     * @type {Set}\n\t     * @private\n\t     */\n\t    _this.movableGeometrySet;\n\t\n\t    if (_this._hasMoveableGeometrys) {\n\t      _this.movableGeometrySet = new Set(_this._movableGeometrys);\n\t    }\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._deleteCondition = options.deleteCondition ? options.deleteCondition : _this._defaultDeleteCondition;\n\t\n\t    /**\n\t     * 允许顶点编辑的条件方法，默认可编辑\n\t     * @private\n\t     */\n\t    _this._vertexEditableCondition = options.vertexEditableCondition ? options.vertexEditableCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 允许边编辑的条件方法，默认可编辑\n\t     * @private\n\t     */\n\t    _this._edgeEditableCondition = options.edgeEditableCondition ? options.edgeEditableCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * Determine if should snap to vertexs of gemetry\n\t     *\n\t     * snappedToVertex\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._snappedToVertex = false;\n\t\n\t    /**\n\t     * @snapSegments\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._snapSegments = null;\n\t\n\t    /**\n\t     * @vertexFeature\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._vertexFeature = null;\n\t\n\t    /**\n\t     * The editable features\n\t     *\n\t     * 设置需要编辑图形的集合，\n\t     * 如果图形不允许编辑，请从该集合移除\n\t     *\n\t     * @property features\n\t     * @type {[]}\n\t     */\n\t    _this.features = options.features || [];\n\t\n\t    /**\n\t     *\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._lastPixel = [0, 0];\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时高亮显示编辑的图形\n\t     *\n\t     * @property overLayer\n\t     * @type {FeatureLayer}\n\t     * @private\n\t     */\n\t    _this._overLayer = new _featurelayer2.default({\n\t      style: options.style ? options.style : _this.getDefaultStyleFunction(),\n\t      zIndex: 1000\n\t    });\n\t\n\t    _this.active = true;\n\t\n\t    _this._dragSegments = [];\n\t\n\t    /**\n\t     * 图形是否修改过，默认为false\n\t     *\n\t     * modified\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._modified = false;\n\t\n\t    /**\n\t     * changingFeature\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._changingFeature = true;\n\t\n\t    /**\n\t     * Tracks if the next `singleclick` event should be ignored to prevent\n\t     * accidental deletion right after vertex creation.\n\t     *\n\t     * ignoreNextSingleClick\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._ignoreNextSingleClick = false;\n\t\n\t    /**\n\t     * shouldAddToVertexs\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._shouldAddToVertexs = false;\n\t\n\t    /**\n\t     * insertVertices\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._insertVertices = [];\n\t\n\t    /**\n\t     * Keep the mouse-down point\n\t     *\n\t     * downPoint\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._downPoint = null;\n\t\n\t    /**\n\t     * Keep the current moved geometry\n\t     *\n\t     * currentMovedGeometry\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._currentMovedGeometry = null;\n\t\n\t    /**\n\t     * 记录上一次被编辑的点\n\t     * 一般指的是在边上的捕捉点或者顶点本身\n\t     * 只是用于平行四边形的编辑使用\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._oldEditedVertex = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * feature的读写器，读取设置当前的feature\n\t   *\n\t   * @property features\n\t   * @returns {Object} feature\n\t   */\n\t\n\t\n\t  /**\n\t   * Handle the mouse events emitted from map.\n\t   *\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param browserEvent\n\t   * @returns {boolean}\n\t   */\n\t  Modify.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    if (!(browserEvent instanceof _browserevent2.default)) {\n\t      return true;\n\t    }\n\t\n\t    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate);\n\t\n\t    this.lastPointerEvent_ = browserEvent;\n\t\n\t    var handled = false;\n\t    if (browserEvent.type == _browserevent2.default.MOUSE_MOVE && !this.handlingDownUpSequence) {\n\t      this._handlePointerMove(browserEvent);\n\t    }\n\t\n\t    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n\t      if (browserEvent.type !== _browserevent2.default.SINGLE_CLICK || !this._ignoreNextSingleClick) {\n\t        handled = this.removePoint();\n\t      } else {\n\t        handled = true;\n\t      }\n\t    }\n\t\n\t    if (browserEvent.type == _browserevent2.default.SINGLE_CLICK) {\n\t      this._ignoreNextSingleClick = false;\n\t    }\n\t\n\t    return _Component.prototype.handleMouseEvent.call(this, browserEvent) && !handled;\n\t  };\n\t\n\t  /**\n\t   * Removes the vertex currently being pointed.\n\t   *\n\t   *\n\t   * removePoint\n\t   * @return {boolean} True when a vertex was removed.\n\t   * @api\n\t   */\n\t\n\t\n\t  Modify.prototype.removePoint = function removePoint() {\n\t    if (this._lastPointerEvent && this._lastPointerEvent.type != _browserevent2.default.MOUSE_DRAG) {\n\t      var evt = this.lastPointerEvent_;\n\t      this.willModifyFeatures_(evt);\n\t      this._removeVertex();\n\t\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_END, this.features, evt));\n\t      this._modified = false;\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * compareIndexes\n\t   * @param a\n\t   * @param b\n\t   * @returns {number}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._compareIndexes = function _compareIndexes(a, b) {\n\t    return a.index - b.index;\n\t  };\n\t\n\t  /**\n\t   * willModifyFeatures\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._willModifyFeatures = function _willModifyFeatures(event) {\n\t    if (!this._modified) {\n\t      this._modified = true;\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_START, this.features, event));\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle poiner mouse down event\n\t   *\n\t   * handleDownEvent\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleDownEvent = function _handleDownEvent(evt) {\n\t    var _this2 = this;\n\t\n\t    this._downPoint = evt.coordinate;\n\t    this._dragSegments.length = 0;\n\t    this._modified = false;\n\t    var coordinate = evt.coordinate;\n\t    var vertexFeature = this._vertexFeature;\n\t\n\t    if (vertexFeature) {\n\t      var insertVertices = [this._snapSegments];\n\t      // if (insertVertices.length) {\n\t      //   this._willModifyFeatures(evt)\n\t      // }\n\t\n\t      this._shouldAddToVertexs = true;\n\t      this._insertVertices = insertVertices;\n\t\n\t      return !!this._vertexFeature;\n\t    }\n\t    // Move the selected geometry\n\t    else {\n\t        if (!this._hasMoveableGeometrys) {\n\t          return;\n\t        }\n\t\n\t        var filters = this.features.filter(function (feature) {\n\t          var geometry = feature.geometry;\n\t          return _this2.movableGeometrySet.has(geometry.geometryType) && geometry.containsXY(coordinate[0], coordinate[1]);\n\t        });\n\t\n\t        // We get the first filter geometry to move\n\t        // Otherwise, you should reselect\n\t        if (filters.length > 0) {\n\t          this._currentMovedGeometry = filters[0];\n\t          return true;\n\t        }\n\t\n\t        return false;\n\t      }\n\t  };\n\t\n\t  /**\n\t   * Handle pointer move event\n\t   *\n\t   * 处理点移动事件\n\t   *\n\t   * handlePointerMove\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handlePointerMove = function _handlePointerMove(evt) {\n\t    this._lastPixel = evt.pixel;\n\t    this._handlePointerAtPixel(evt.pixel, evt.map);\n\t  };\n\t\n\t  /**\n\t   * @param pixel {Array}\n\t   * @param map {map}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handlePointerAtPixel = function _handlePointerAtPixel(pixel, map) {\n\t    var _this3 = this;\n\t\n\t    var pixelCoordinate = map.getCoordinateFromPixel(pixel);\n\t\n\t    var sortByDistance = function sortByDistance(s1, s2) {\n\t      var d1 = _this3._pointDistanceToSegment(pixelCoordinate, s1);\n\t      var d2 = _this3._pointDistanceToSegment(pixelCoordinate, s2);\n\t      return d1 - d2;\n\t    };\n\t\n\t    this._snapSegments = null;\n\t\n\t    if (this.features.length === 0) {\n\t      return;\n\t    }\n\t\n\t    // 与当前屏幕内图形做碰撞检测\n\t    var nodes = this._getInExtent(this.features, pixelCoordinate, this._pixelTolerance);\n\t    if (nodes.length > 0) {\n\t      nodes.sort(sortByDistance);\n\t      var node = nodes[0];\n\t      var geometry = node.geometry;\n\t      var geometryType = geometry.geometryType;\n\t      var closestSegment = node.segment;\n\t      var vertex = this._closestOnSegment(pixelCoordinate, node); // 计算鼠标点在线段上的投影点\n\t      var vertexPixel = map.getPixelFromCoordinate(vertex);\n\t\n\t      // 判断当前是否选中了边\n\t      var dist = (0, _geometryutil.distance)(pixel, vertexPixel);\n\t      if (dist <= this._pixelTolerance) {\n\t        /**\n\t         *  已经选中了边\n\t         */\n\t        this._snapSegments = node;\n\t\n\t        var vertexEditable = false;\n\t\n\t        if (geometryType === _geometry2.default.CIRCLE && node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n\t          this._snappedToVertex = true;\n\t        } else {\n\t\n\t          /**\n\t           * 再计算是否选中了线段的两个顶点\n\t           */\n\t\n\t          // 判断是否允许顶点可编辑\n\t          if (this._vertexEditableCondition(node)) {\n\t            var pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n\t            var pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n\t            var squaredDist1 = (0, _geometryutil.squaredDistance)(vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1]);\n\t            var squaredDist2 = (0, _geometryutil.squaredDistance)(vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1]);\n\t            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n\t\n\t            // 判断当前是否选中了顶点\n\t            this._snappedToVertex = dist <= this._pixelTolerance;\n\t            if (this._snappedToVertex) {\n\t              vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n\t\n\t              var coordinateIndex = geometry.getCoordinateIndex(vertex);\n\t              if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.PARALLELOGRAM) {\n\t                this._snapSegments.index = coordinateIndex.index;\n\t                this._snapSegments.ringIndex = coordinateIndex.ringIndex;\n\t              } else if (geometryType === _geometry2.default.MULTI_POLYGON) {\n\t                this._snapSegments.index = coordinateIndex.index;\n\t                this._snapSegments.ringIndex = coordinateIndex.ringIndex;\n\t                this._snapSegments.polygonIndex = coordinateIndex.polygonIndex;\n\t              } else {\n\t                this._snapSegments.index = coordinateIndex;\n\t              }\n\t\n\t              this._snapSegments.isVertex = true;\n\t              vertexEditable = true;\n\t            }\n\t          }\n\t\n\t          if (geometryType === _geometry2.default.PARALLELOGRAM) {\n\t            this._snapSegments.index = node.index;\n\t            this._snapSegments.ringIndex = node.ringIndex;\n\t          }\n\t        }\n\t\n\t        // 边可编辑，或者顶点可编辑\n\t        if (this._edgeEditableCondition(node) || vertexEditable) {\n\t          // draw the snapping point\n\t          this._createOrUpdateVertexFeature(vertex);\n\t        } else {\n\t          this._snapSegments = null;\n\t        }\n\t\n\t        return;\n\t      }\n\t    }\n\t\n\t    if (this._vertexFeature) {\n\t      this._overLayer.removeFeature(this._vertexFeature);\n\t      this._vertexFeature = null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle mouse drag event.\n\t   *\n\t   * handleDragEvent\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleDragEvent = function _handleDragEvent(evt) {\n\t    this._ignoreNextSingleClick = false;\n\t    var vertex = evt.coordinate;\n\t\n\t    if (this._shouldAddToVertexs) {\n\t      var vertexFeature = this._vertexFeature;\n\t      var _vertex = vertexFeature.geometry.getCoordinates();\n\t\n\t      var insertVertices = this._insertVertices;\n\t      for (var j = insertVertices.length - 1; j >= 0; --j) {\n\t        this._insertVertex(insertVertices[j], _vertex);\n\t      }\n\t\n\t      this._shouldAddToVertexs = false;\n\t    }\n\t\n\t    var dragSegments = this._dragSegments;\n\t    var len = dragSegments.length;\n\t\n\t    // move the edge of selected geometry\n\t    if (len !== 0) {\n\t      this._willModifyFeatures(evt);\n\t\n\t      for (var i = 0; i < len; ++i) {\n\t        var dragSegment = dragSegments[i];\n\t        var segmentData = dragSegment[0];\n\t        var depth = segmentData.depth;\n\t        var geometry = segmentData.geometry;\n\t        var coordinates = null;\n\t        var segment = segmentData.segment;\n\t        var index = dragSegment.index;\n\t\n\t        switch (geometry.geometryType) {\n\t          case _geometry2.default.POINT:\n\t            coordinates = vertex;\n\t            segment[0] = segment[1] = vertex;\n\t            break;\n\t          case _geometry2.default.MULTI_POINT:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.index] = vertex;\n\t            segment[0] = segment[1] = vertex;\n\t            break;\n\t          case _geometry2.default.LINE:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.index] = vertex;\n\t            // segment[index] = vertex\n\t            break;\n\t          case _geometry2.default.MULTI_LINE:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[depth[0]][segmentData.index + index] = vertex;\n\t            segment[index] = vertex;\n\t            break;\n\t          case _geometry2.default.POLYGON:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.ringIndex][segmentData.index] = vertex;\n\t            if (segmentData.index === 0) {\n\t              coordinates[segmentData.ringIndex][coordinates[segmentData.ringIndex].length - 1] = vertex;\n\t            }\n\t            break;\n\t          case _geometry2.default.PARALLELOGRAM:\n\t            // 重新计算平行四边的各个顶点\n\t            coordinates = _parallelogram2.default.updateCoordinatesForModification(geometry, vertex, this._oldEditedVertex, dragSegment);\n\t            this._oldEditedVertex = vertex;\n\t            break;\n\t          case _geometry2.default.EXTENT:\n\t            coordinates = _extentutil.ExtentUtil.updateExtent(geometry, vertex, dragSegment);\n\t            break;\n\t          case _geometry2.default.MULTI_POLYGON:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.polygonIndex][segmentData.ringIndex][segmentData.index] = vertex;\n\t            if (segmentData.index === 0) {\n\t              coordinates[segmentData.polygonIndex][segmentData.ringIndex][coordinates[segmentData.polygonIndex][segmentData.ringIndex].length - 1] = vertex;\n\t            }\n\t            break;\n\t          case _geometry2.default.CIRCLE:\n\t            segment[0] = segment[1] = vertex;\n\t            if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n\t              this._changingFeature = true;\n\t              geometry.setCenter(vertex);\n\t              this._changingFeature = false;\n\t            } else {\n\t              // We're dragging the circle's circumference:\n\t              this._changingFeature = true;\n\t              geometry.setRadius((0, _geometryutil.distance)(geometry.getCenter(), vertex));\n\t              this._changingFeature = false;\n\t            }\n\t            break;\n\t          default:\n\t          // pass\n\t        }\n\t\n\t        if (coordinates) {\n\t          this._setGeometryCoordinates(geometry, coordinates);\n\t        }\n\t      }\n\t\n\t      this._createOrUpdateVertexFeature(vertex);\n\t    }\n\t    // move the whole selected geometry\n\t    else if (this._currentMovedGeometry) {\n\t        var downPoint = this._downPoint;\n\t        var dx = vertex[0] - downPoint[0];\n\t        var dy = vertex[1] - downPoint[1];\n\t\n\t        this._currentMovedGeometry.geometry.move(dx, dy, {\n\t          beyond: {\n\t            xmin: 0,\n\t            ymin: 0,\n\t            xmax: this.map.view.dataExtent[2],\n\t            ymax: this.map.view.dataExtent[3]\n\t          }\n\t        });\n\t\n\t        this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_END, this._currentMovedGeometry.clone(), evt));\n\t\n\t        this.changed();\n\t        this._downPoint = vertex;\n\t      }\n\t  };\n\t\n\t  /**\n\t   * handleUpEvent\n\t   * @param evt {Event}\n\t   * @returns {boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleUpEvent = function _handleUpEvent(evt) {\n\t    var modifiedFeature = null;\n\t    if (this._dragSegments.length > 0) {\n\t      modifiedFeature = this._dragSegments[0][0].feature.clone();\n\t    }\n\t\n\t    this._dragSegments.length = 0;\n\t    this._shouldAddToVertexs = false;\n\t    this._insertVertices = [];\n\t\n\t    if (this._vertexFeature) {\n\t      this._overLayer.removeFeature(this._vertexFeature);\n\t      this._vertexFeature = null;\n\t    }\n\t\n\t    this._oldEditedVertex = null;\n\t\n\t    this._downPoint = null;\n\t    this._currentMovedGeometry = null;\n\t\n\t    if (this._modified) {\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_END, modifiedFeature, evt));\n\t      this._modified = false;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * segmentData\n\t   * @param vertex\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._insertVertex = function _insertVertex(segmentData, vertex) {\n\t    var segment = segmentData.segment;\n\t    var feature = segmentData.feature;\n\t    var geometry = segmentData.geometry;\n\t    var depth = segmentData.depth;\n\t    var isVertex = segmentData.isVertex;\n\t    var index = segmentData.index;\n\t    var coordinates = void 0;\n\t\n\t    switch (geometry.geometryType) {\n\t      case _geometry2.default.MULTI_LINE:\n\t        coordinates = geometry.getCoordinates();\n\t        coordinates[depth[0]].splice(index + 1, 0, vertex);\n\t        break;\n\t      case _geometry2.default.POLYGON:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.MULTI_POLYGON:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates[segmentData.polygonIndex][segmentData.ringIndex].splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.LINE:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates.splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.POINT:\n\t        coordinates = geometry.getCoordinates();\n\t        coordinates = vertex;\n\t        break;\n\t      case _geometry2.default.EXTENT:\n\t        coordinates = geometry.getCoordinates();\n\t        break;\n\t      case _geometry2.default.PARALLELOGRAM:\n\t        break;\n\t      default:\n\t        return;\n\t    }\n\t\n\t    this._setGeometryCoordinates(geometry, coordinates);\n\t\n\t    var newSegmentData = {\n\t      segment: [segment[0], vertex],\n\t      feature: feature,\n\t      geometry: geometry,\n\t      depth: depth,\n\t      index: index,\n\t      ringIndex: segmentData.ringIndex,\n\t      polygonIndex: segmentData.polygonIndex,\n\t      isVertex: isVertex\n\t    };\n\t\n\t    this._dragSegments.push([newSegmentData, 1]);\n\t    this._ignoreNextSingleClick = true;\n\t  };\n\t\n\t  /**\n\t   * Calcalute geometrys within the current extent\n\t   * TODO 将来需要优化计算视图范围内的图形\n\t   *\n\t   * getInExtent\n\t   * @param geometry {Array}\n\t   * @param pixelCoordinate {Array}\n\t   * @param tolarance {Number}\n\t   * @returns {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._getInExtent = function _getInExtent(features, pixelCoordinate, tolarance) {\n\t    var result = [];\n\t    var _ExtentUtil = _extentutil.ExtentUtil;\n\t\n\t    // loop the passed features\n\t    features.forEach(function (feature) {\n\t      var geometry = feature.geometry;\n\t\n\t      // build an extent from the passed geometry with tolarance\n\t      var gometryExtent = geometry.extent;\n\t      var bufferExtent = _ExtentUtil.buffer([gometryExtent.xmin, gometryExtent.ymin, gometryExtent.xmax, gometryExtent.ymax], tolarance);\n\t\n\t      // Exclude the moved point\n\t      if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n\t\n\t        // Calculte if the moved point has insected a geometry\n\t        var geometryType = geometry.geometryType;\n\t\n\t        if (geometryType === _geometry2.default.POINT) {\n\t          var points = geometry.getCoordinates();\n\t          var dist = (0, _geometryutil.distance)(points, pixelCoordinate);\n\t          if (dist <= tolarance) {\n\t            result.push({\n\t              feature: feature,\n\t              geometry: geometry,\n\t              segment: [points, points],\n\t              index: 0\n\t            });\n\t          }\n\t        } else if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.PARALLELOGRAM) {\n\t          // @todo 这一块需要重构\n\t          var coords = geometry.getCoordinates();\n\t          coords.forEach(function (coordinates, ringIndex) {\n\t            for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t              var _points = coordinates[j];\n\t              var nextPoints = coordinates[j + 1];\n\t\n\t              var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points, nextPoints);\n\t              var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t              if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t                var segment = [_points, nextPoints];\n\t                result.push({\n\t                  feature: feature,\n\t                  geometry: geometry,\n\t                  segment: segment,\n\t                  index: j,\n\t                  ringIndex: ringIndex\n\t                });\n\t              }\n\t            }\n\t          });\n\t        } else if (geometryType === _geometry2.default.MULTI_POLYGON) {\n\t          var allCoords = geometry.getCoordinates();\n\t          allCoords.forEach(function (coords, polygonIndex) {\n\t            coords.forEach(function (coordinates, ringIndex) {\n\t              for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t                var _points2 = coordinates[j];\n\t                var nextPoints = coordinates[j + 1];\n\t\n\t                var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points2, nextPoints);\n\t                var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t                if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t                  var segment = [_points2, nextPoints];\n\t                  result.push({\n\t                    feature: feature,\n\t                    geometry: geometry,\n\t                    segment: segment,\n\t                    polygonIndex: polygonIndex,\n\t                    index: j,\n\t                    ringIndex: ringIndex\n\t                  });\n\t                }\n\t              }\n\t            });\n\t          });\n\t        } else if (geometryType === _geometry2.default.EXTENT || geometryType === _geometry2.default.LINE) {\n\t          var coordinates = geometry.getCoordinates();\n\t\n\t          for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t            var _points3 = coordinates[j];\n\t            var nextPoints = coordinates[j + 1];\n\t\n\t            var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points3, nextPoints);\n\t            var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t            if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t              var segment = [_points3, nextPoints];\n\t              result.push({\n\t                feature: feature,\n\t                geometry: geometry,\n\t                segment: segment,\n\t                index: j\n\t              });\n\t            }\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   * 设置Ceometry的坐标数据\n\t   *\n\t   * @method setGeometryCoordinates\n\t   * @param geometry {Object}\n\t   * @param coordinates {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._setGeometryCoordinates = function _setGeometryCoordinates(geometry, coordinates) {\n\t    if (coordinates) {\n\t      this._changingFeature = true;\n\t      geometry.setCoordinates(coordinates);\n\t      this._changingFeature = false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * @method pointDistanceToSegment\n\t   *\n\t   * coordinates {Array}\n\t   * @param segmentData\n\t   * @returns {number}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._pointDistanceToSegment = function _pointDistanceToSegment(coordinates, segmentData) {\n\t    var geometry = segmentData.geometry;\n\t\n\t    if (geometry.geometryType === _geometry2.default.CIRCLE) {\n\t      var circleGeometry = geometry;\n\t\n\t      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n\t        var distanceToCenterSquared = (0, _geometryutil.squaredDistance)(circleGeometry.getCenter(), coordinates);\n\t        var distanceToCircumference = Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius();\n\t        return distanceToCircumference * distanceToCircumference;\n\t      }\n\t    }\n\t\n\t    return (0, _geometryutil.squaredDistanceToSegment)(coordinates, segmentData.segment);\n\t  };\n\t\n\t  /**\n\t   * closestOnSegment\n\t   * @param coordinate\n\t   * @param segmentData\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._closestOnSegment = function _closestOnSegment(coordinate, segmentData) {\n\t    return (0, _geometryutil.closestOnSegment)(coordinate, segmentData.segment);\n\t  };\n\t\n\t  /**\n\t   * Create or update the vertex feature while snapping a point\n\t   * on the edge of geometry\n\t   *\n\t   * createOrUpdateVertexFeature\n\t   * @param point {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._createOrUpdateVertexFeature = function _createOrUpdateVertexFeature(point) {\n\t    var vertexFeature = this._vertexFeature;\n\t    if (!vertexFeature) {\n\t      vertexFeature = new _feature2.default(new _point2.default(point[0], point[1]));\n\t      this._vertexFeature = vertexFeature;\n\t      this._overLayer.addFeature(vertexFeature);\n\t    } else {\n\t      var geom = vertexFeature.geometry;\n\t      geom.update(point[0], point[1]);\n\t      this._overLayer.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取默认的图形编辑样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  Modify.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var style = _style.Style.createDefaultEditing();\n\t    return function () {\n\t      return style[_geometry2.default.POINT];\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * mapBrowserEvent\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._defaultDeleteCondition = function _defaultDeleteCondition(mapBrowserEvent) {\n\t    return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.singleClick)(mapBrowserEvent);\n\t  };\n\t\n\t  /**\n\t   * active读写器，读取设置当前的active状态\n\t   *\n\t   * @property active\n\t   * @type {Function}\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  _createClass(Modify, [{\n\t    key: 'features',\n\t    get: function get() {\n\t      return this._features;\n\t    },\n\t    set: function set() {\n\t      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\n\t      this._features = value;\n\t      this._snapSegments = null;\n\t\n\t      if (this._vertexFeature) {\n\t        this._overLayer.removeFeature(this._vertexFeature);\n\t        this._vertexFeature = null;\n\t      }\n\t\n\t      this._hasMoveableGeometrys = value.length === 0 ? false : true;\n\t\n\t      this._dragSegments = [];\n\t      this._snappedToVertex = false;\n\t    }\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(isActive) {\n\t      if (this._vertexFeature && !isActive) {\n\t        this._overLayer.removeFeature(this._vertexFeature);\n\t        this._vertexFeature = null;\n\t      }\n\t\n\t      this._active = isActive;\n\t    }\n\t\n\t    /**\n\t     * map读写器, 读取设置当前map\n\t     *\n\t     * @type {Function}\n\t     * @property map\n\t     * @param map {Object} mk.map\n\t     */\n\t\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(map) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (map) {\n\t        this._map = map;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, map.render, map);\n\t\n\t        map.addLayer(this._overLayer);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Modify;\n\t}(_component2.default);\n\t\n\t/**\n\t *\n\t * @type {number}\n\t */\n\t\n\t\n\texports.default = Modify;\n\tModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1;\n\t\n\t/**\n\t *\n\t * @type {number}\n\t */\n\tModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 64 */\n/*!**********************************!*\\\n  !*** ./src/components/select.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _selectevent = __webpack_require__(/*! ../components/selectevent */ 41);\n\t\n\tvar _selectevent2 = _interopRequireDefault(_selectevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar hasMutilSelectedSymbol = Symbol('hasmutilselected');\n\t\n\t/**\n\t * 图形选择模式\n\t *\n\t * @class Select\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化选择工具\n\t *      selectTool = new mk.Select({\n\t *       selectMode: mk.BrowserEvent.CLICK,\n\t *       selectMultiMode: selectMultiMode\n\t *      });\n\t *\n\t *\n\t */\n\t\n\tvar Select = function (_Component) {\n\t  _inherits(Select, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t\n\t  function Select() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Select);\n\t\n\t    /**\n\t     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n\t     *\n\t     * @property hitTolerance\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._hitTolerance = options.hitTolerance ? options.hitTolerance : 6;\n\t\n\t    /**\n\t     * 选择图层是否配置了样式\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t       */\n\t    _this._hasSelectedStyle = false;\n\t\n\t    /**\n\t     * 多选模式，默认为false\n\t     *\n\t     * @property multiSelectMode\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._multiSelectMode = false;\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时高亮显示选中的图形\n\t     *\n\t     * @property selectLayer\n\t     * @type {FeatureLayer}\n\t     * @private\n\t     */\n\t    _this._selectLayer = new _featurelayer2.default();\n\t\n\t    if (options.style) {\n\t      _this._selectLayer.style = options.style;\n\t      _this._hasSelectedStyle = true;\n\t    } else {\n\t      _this._hasSelectedStyle = false;\n\t    }\n\t    /**\n\t     * 选中图形的feature集合\n\t     *\n\t     * @property selectFeatures\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._selectFeatures = [];\n\t\n\t    /**\n\t     * 选中的模式，默认为单击选中\n\t     *\n\t     * @property selectMode\n\t     * @type {string}\n\t     */\n\t    _this.selectMode = options.selectMode ? options.selectMode : _browserevent2.default.CLICK;\n\t\n\t    _this._selectMultiMode = options.selectMultiMode ? options.selectMultiMode : function () {\n\t      return true;\n\t    };\n\t\n\t    /**\n\t     * listen Ctrl key envet\n\t     */\n\t    if (options.selectMultiMode) {\n\t      (0, _eventmanager.listen)(document, 'keydown', _this._handleCtrlKeyDwon, _this);\n\t    }\n\t    if (options.selectMultiMode) {\n\t      (0, _eventmanager.listen)(document, 'keyup', _this._handleCtrlKeyUp, _this);\n\t    }\n\t\n\t    return _this;\n\t  }\n\t\n\t  Select.prototype._condition = function _condition(event) {\n\t    return this.selectMode === event.type;\n\t  };\n\t\n\t  Select.prototype._keyPress = function _keyPress() {};\n\t\n\t  /**\n\t   * handle Ctrl key down event\n\t   *\n\t   * 处理Ctrt键按下事件\n\t   *\n\t   * handleCtrlKeyDwon\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._handleCtrlKeyDwon = function _handleCtrlKeyDwon(event) {\n\t    if (this._selectMultiMode(event)) {\n\t      this._multiSelectMode = true;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * handle Ctrl key up event\n\t   *\n\t   * 处理Ctrl键弹起事件\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._handleCtrlKeyUp = function _handleCtrlKeyUp(event) {\n\t    // Ctrl button down\n\t    if (this._selectMultiMode(event)) {\n\t      this._multiSelectMode = false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handler mouse event\n\t   *\n\t   * 处理鼠标事件\n\t   * handleMouseEvent\n\t   * @method\n\t   * @param browserEvent {browserEvent}\n\t   */\n\t\n\t\n\t  Select.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    var _this2 = this;\n\t\n\t    if (!this._condition(browserEvent)) {\n\t      return true;\n\t    }\n\t\n\t    var map = browserEvent.map;\n\t    var pixel = browserEvent.pixel;\n\t    var hitTolerance = this._hitTolerance;\n\t\n\t    if (!this._multiSelectMode) {\n\t      this.clear();\n\t    }\n\t\n\t    map.forEachFeatureAtPiexl(pixel, function (features) {\n\t      if (features.length > 0) {\n\t        // 赋值并填充到selectFeatures中\n\t        _this2.selectFeatures = features;\n\t      }\n\t    }, hitTolerance);\n\t\n\t    if (this.selectFeatures.length > 0) {\n\t      this._forEachStyle();\n\t      // this._watchFeatures()\n\t      this._selectLayer.addFeatures(this.selectFeatures);\n\t    }\n\t\n\t    // 派发要素的选择事件\n\t    this.dispatchEvent(new _selectevent2.default(_selectevent2.default.EventType.SELECT, this.selectFeatures, browserEvent));\n\t  };\n\t\n\t  /**\n\t   * 清空选择的集合\n\t   *\n\t   * @method clear\n\t   */\n\t\n\t\n\t  Select.prototype.clear = function clear() {\n\t    this._selectLayer.clear();\n\t\n\t    this.selectFeatures.forEach(function (feature) {\n\t      feature.styleHighLight = false;\n\t      feature.delete(hasMutilSelectedSymbol);\n\t    });\n\t\n\t    this.selectFeatures = [];\n\t  };\n\t\n\t  /**\n\t   * 当前选中feature的集合的读写器\n\t   *\n\t   * @property selectFeatures\n\t   * @type {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断当前选中的集合中是否包含指定的feature\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t  Select.prototype._isInSelectFeatures = function _isInSelectFeatures(feature) {\n\t    var features = this.selectFeatures;\n\t    var result = features.find(function (f) {\n\t      return f.id === feature.id;\n\t    });\n\t\n\t    return result === undefined ? false : true;\n\t  };\n\t\n\t  /**\n\t   * Update the drawing state for aborting drawing if active is false\n\t   *\n\t   * updateState\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._updateState = function _updateState() {\n\t    var map = this.map;\n\t    var active = this.active;\n\t    if (!map || !active) {\n\t      // this._abortDrawing()\n\t    }\n\t\n\t    map.addLayer(this._selectLayer);\n\t  };\n\t\n\t  Select.prototype._watchFeatures = function _watchFeatures() {}\n\t  // const features = this.selectFeatures\n\t\n\t\n\t  /**\n\t   * 高亮显示选中图形\n\t   *\n\t   * @method forEachStyle\n\t   * @private\n\t   */\n\t  ;\n\t\n\t  Select.prototype._forEachStyle = function _forEachStyle() {\n\t    if (this._hasSelectedStyle) {\n\t      return;\n\t    }\n\t\n\t    var features = this.selectFeatures;\n\t    features.forEach(function (feature) {\n\t      if (!feature.get(hasMutilSelectedSymbol)) {\n\t        feature.styleHighLight = true;\n\t        feature.set(hasMutilSelectedSymbol, true);\n\t      }\n\t    });\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param map {Object} mk.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 获取默认编辑样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t  Select.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var styles = _style.Style.createDefaultEditing();\n\t    return function (feature) {\n\t      return styles[feature.geometry.geometryType];\n\t    };\n\t  };\n\t\n\t  _createClass(Select, [{\n\t    key: 'selectFeatures',\n\t    get: function get() {\n\t      return this._selectFeatures;\n\t    },\n\t    set: function set(features) {\n\t      var _this3 = this;\n\t\n\t      if (features.length === 0) {\n\t        this._selectFeatures = [];\n\t      } else {\n\t        features.forEach(function (feature) {\n\t          // 去掉重复的\n\t          if (!_this3._isInSelectFeatures(feature)) {\n\t            _this3._selectFeatures.push(feature);\n\t          }\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(map) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (map) {\n\t        this._map = map;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, map.render, map);\n\t      }\n\t\n\t      this._updateState();\n\t    }\n\t\n\t    /**\n\t     * 选择方式读写器\n\t     *\n\t     * @property selectMode\n\t     * @type {Object} mk.BrowserEvent.CLICK\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'selectMode',\n\t    get: function get() {\n\t      return this._selectMode;\n\t    },\n\t    set: function set(value) {\n\t      if (this._selectMode !== value) {\n\t        this._selectMode = value;\n\t        this.clear();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Select;\n\t}(_component2.default);\n\t\n\texports.default = Select;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 65 */\n/*!****************************************!*\\\n  !*** ./src/control/controldefaults.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.controlDefaults = controlDefaults;\n\t\n\tvar _zoom = __webpack_require__(/*! ./zoom */ 42);\n\t\n\tvar _zoom2 = _interopRequireDefault(_zoom);\n\t\n\tvar _home = __webpack_require__(/*! ./home */ 66);\n\t\n\tvar _home2 = _interopRequireDefault(_home);\n\t\n\tvar _zoompercentage = __webpack_require__(/*! ./zoompercentage */ 67);\n\t\n\tvar _zoompercentage2 = _interopRequireDefault(_zoompercentage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controlDefaults() {\n\t  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t  var controls = [];\n\t\n\t  var zoomControl = options.zoom !== undefined ? options.zoom : true;\n\t  if (zoomControl) {\n\t    controls.push(new _zoom2.default(options.zoomOptions));\n\t  }\n\t\n\t  var homeControl = options.home !== undefined ? options.home : true;\n\t  if (homeControl) {\n\t    controls.push(new _home2.default(options.homeOptions));\n\t  }\n\t\n\t  var zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true;\n\t  if (zoomPercentageControl) {\n\t    controls.push(new _zoompercentage2.default(options.zoomPercentageOptions));\n\t  }\n\t\n\t  return controls;\n\t} /**\n\t   * Created by zhangyong on 2017/8/2.\n\t   */\n\t\n\texports.default = {\n\t  controlDefaults: controlDefaults\n\t};\n\n/***/ }),\n/* 66 */\n/*!*****************************!*\\\n  !*** ./src/control/home.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t */\n\tvar Home = function (_Control) {\n\t  _inherits(Home, _Control);\n\t\n\t  function Home() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Home);\n\t\n\t    var className = options.className ? options.className : 'dt-zoom-extent';\n\t    var homeLabel = options.homeLabel ? options.homeLabel : 'H';\n\t    var homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图';\n\t\n\t    var homeElement = document.createElement('button');\n\t    homeElement.setAttribute('type', 'button');\n\t    homeElement.title = homeLabelTip;\n\t    homeElement.appendChild(typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel);\n\t\n\t    var cssClasses = className + ' dt-unselectable dt-control';\n\t    var element = document.createElement('div');\n\t    element.className = cssClasses;\n\t    element.appendChild(homeElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this, {\n\t      element: element,\n\t      target: options.target\n\t    }));\n\t\n\t    (0, _eventmanager.listen)(homeElement, _browserevent2.default.CLICK, _this._handleClick, _this);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 处理按钮点击事件\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Home.prototype._handleClick = function _handleClick(event) {\n\t    event.preventDefault();\n\t    this._goToHome();\n\t  };\n\t\n\t  /**\n\t   * 将视图还原到最初\n\t   * @private\n\t   */\n\t\n\t\n\t  Home.prototype._goToHome = function _goToHome() {\n\t    var view = this.map.view;\n\t    if (view) {\n\t      var orignalCenter = view.originalCenter;\n\t      var originalResolution = view.originalResolution;\n\t\n\t      view.center = orignalCenter;\n\t      view.resolution = originalResolution;\n\t    }\n\t  };\n\t\n\t  return Home;\n\t}(_control2.default);\n\t\n\texports.default = Home;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 67 */\n/*!***************************************!*\\\n  !*** ./src/control/zoompercentage.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ZoomPercentage = function (_Control) {\n\t  _inherits(ZoomPercentage, _Control);\n\t\n\t  function ZoomPercentage() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, ZoomPercentage);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this));\n\t\n\t    _this._map = undefined;\n\t\n\t    var className = options.className ? options.className : 'dt-scale-line';\n\t\n\t    _this._innerElement = document.createElement('DIV');\n\t    _this._innerElement.className = className + '-inner';\n\t\n\t    _this._element = document.createElement('DIV');\n\t    _this._element.className = className + ' dt-unselectable';\n\t    _this._element.appendChild(_this._innerElement);\n\t    return _this;\n\t  }\n\t\n\t  ZoomPercentage.prototype.render = function render() {\n\t    var view = this.map.view;\n\t    var resolution = (1 / view.resolution).toFixed(2);\n\t    var html = '&#8195;\\u7F29\\u653E\\u6BD4' + resolution * 100 + '% &#8195;';\n\t    this._innerElement.innerHTML = html;\n\t  };\n\t\n\t  _createClass(ZoomPercentage, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this.map) {\n\t        (0, _domutil.removeNode)(this._element);\n\t      }\n\t\n\t      this._listenerKeys.forEach(function (listener) {\n\t        return (0, _eventmanager.unlistenByKey)(listener);\n\t      });\n\t\n\t      this._listenerKeys.length = 0;\n\t      this._map = value;\n\t\n\t      if (this._map) {\n\t        var target = this._target ? this._target : value.overlayContainerStopEvent;\n\t        target.appendChild(this._element);\n\t\n\t        this._listenerKeys.push((0, _eventmanager.listen)(value, _eventtype.EventType.VIEW_CHANGED, this.render, this));\n\t\n\t        this.render();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return ZoomPercentage;\n\t}(_control2.default);\n\t\n\texports.default = ZoomPercentage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 68 */\n/*!*******************************!*\\\n  !*** ./src/core/baseimage.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The base class to represent a generic layer image,it has some basic properties.\n\t * such as extent,resolution,state<br/>\n\t *\n\t * 基础图片图层类，定义了一些用于加载图片的必要信息\n\t *\n\t * @class BaseImage\n\t * @extends BaseObject\n\t * @module core\n\t * @constructor\n\t */\n\tvar BaseImage = function (_BaseObject) {\n\t  _inherits(BaseImage, _BaseObject);\n\t\n\t  /**\n\t   * Create a BaseImage\n\t   * @param extent the extent of layer\n\t   * @param resolution the resolution of layer\n\t   * @param pixelRatio the pixel ratio\n\t   * @param state the image loading status\n\t   * @param attributions\n\t   */\n\t  function BaseImage(extent, resolution, pixelRatio, state, attributions) {\n\t    _classCallCheck(this, BaseImage);\n\t\n\t    /**\n\t     * @type {Object}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._attributions = attributions;\n\t\n\t    /**\n\t     * @type {Object}\n\t     * @private\n\t     */\n\t    _this._extent = extent;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._pixelRatio = pixelRatio;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._resolution = resolution;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._state = state;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * return the attributions of layer <br/>\n\t   * 返回图层的属性\n\t   * @property attributions\n\t   * @type Object\n\t   */\n\t\n\t\n\t  /**\n\t   * return the DOM image<br/>\n\t   * 返回DOM对象\n\t   * @param optContext options\n\t   * @method getDomImage\n\t   * @abstract\n\t   */\n\t  BaseImage.prototype.getDomImage = function getDomImage(optContext) {\n\t    return optContext;\n\t  };\n\t\n\t  /**\n\t   * return the pixel ratio<br/>\n\t   * 返回像素因数\n\t   * @property pixelRatio\n\t   * @type Number\n\t   */\n\t\n\t\n\t  /**\n\t   * Load not yet loaded URI. <br/>\n\t   * 抽象方法，下载图片\n\t   * @abstract\n\t   * @method load\n\t   */\n\t  BaseImage.prototype.load = function load() {};\n\t\n\t  _createClass(BaseImage, [{\n\t    key: 'attributions',\n\t    get: function get() {\n\t      return this._attributions;\n\t    }\n\t\n\t    /**\n\t     * return the extent of layer<br/>\n\t     * 返回图层的视图范围\n\t     * @property extent\n\t     * @type Object\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this._extent;\n\t    }\n\t  }, {\n\t    key: 'pixelRatio',\n\t    get: function get() {\n\t      return this._pixelRatio;\n\t    }\n\t\n\t    /**\n\t     * return the resolution of layer<br/>\n\t     * 返回图层的分辨率\n\t     * @property resolution\n\t     * @type Number\n\t     */\n\t\n\t  }, {\n\t    key: 'resolution',\n\t    get: function get() {\n\t      return this._resolution;\n\t    },\n\t    set: function set(value) {\n\t      if (this._resolution !== value) {\n\t        this._resolution = value;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * return the state of layer loading <br/>\n\t     * 获取图片下载状态\n\t     * @property state\n\t     * @type Number\n\t     */\n\t\n\t  }, {\n\t    key: 'state',\n\t    get: function get() {\n\t      return this._state;\n\t    },\n\t    set: function set(value) {\n\t      if (this.state !== value) {\n\t        this._state = value;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BaseImage;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseImage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 69 */\n/*!**********************************!*\\\n  !*** ./src/data/json/geojson.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../../geometry/point */ 23);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! ../../geometry/mutilpolygon */ 21);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _line = __webpack_require__(/*! ../../geometry/line */ 31);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _extent = __webpack_require__(/*! ../../geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../../geometry/parallelogram */ 22);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _feature = __webpack_require__(/*! ../../meek/feature */ 25);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _obj = __webpack_require__(/*! ../../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n\t                                                                                                                                                           * Created by zhangyong on 2017/7/12.\n\t                                                                                                                                                           */\n\t\n\t/**\n\t *\n\t */\n\tvar GeoJSON = function () {\n\t  function GeoJSON() {\n\t    _classCallCheck(this, GeoJSON);\n\t  }\n\t\n\t  /**\n\t   * 解析 GeoJSON 并返回 Feature 的集合\n\t   *\n\t   * @static\n\t   * @method read\n\t   * @param json geojson格式的数据\n\t   * @returns {Array} 返回 features 的集合\n\t   */\n\t  GeoJSON.read = function read(json) {\n\t    var features = [];\n\t\n\t    if (!json) {\n\t      return;\n\t    }\n\t    var featuresObj = json.features;\n\t    featuresObj.forEach(function (featureObj) {\n\t      if (featureObj.type === 'Feature') {\n\t        if (featureObj.geometry) {\n\t          var _constructor = undefined;\n\t          var geometryObj = featureObj.geometry;\n\t          var geometryType = geometryObj.type;\n\t          if (geometryType === 'Point') {\n\t            _constructor = _point2.default;\n\t          } else if (geometryType === 'LineString') {\n\t            _constructor = _line2.default;\n\t          } else if (geometryType === 'Polygon') {\n\t            _constructor = _polygon2.default;\n\t          } else if (geometryType === 'ExtentPolygon') {\n\t            _constructor = _extent2.default;\n\t          } else if (geometryType === 'MutilPolygon') {\n\t            _constructor = _mutilpolygon2.default;\n\t          } else if (geometryType === 'ParallelogramPolygon') {\n\t            _constructor = _parallelogram2.default;\n\t          }\n\t\n\t          if (_constructor === undefined) {\n\t            throw new Error('包含未定义的 Geometry 类型');\n\t          } else {\n\t            var coordinates = geometryObj.coordinates;\n\t            var geometry = new _constructor();\n\t            geometry.setCoordinates(coordinates);\n\t\n\t            var propertiesObj = void 0;\n\t            if (featureObj.properties) {\n\t              propertiesObj = featureObj.properties;\n\t            }\n\t\n\t            var title = featureObj.title;\n\t            var feature = new _feature2.default(geometry, propertiesObj, title);\n\t            features.push(feature);\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return features;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n\t   *\n\t   * @static\n\t   * @method write\n\t   * @param features Feature 集合\n\t   * @returns {Object} 返回 GeoJSON 格式的数据\n\t   */\n\t\n\t\n\t  GeoJSON.write = function write(features) {\n\t    var featuresArr = [];\n\t\n\t    features.forEach(function (feature) {\n\t      var properties = _obj2.default.mapToObject(feature._attributesMap);\n\t      Reflect.deleteProperty(properties, '_originStyle');\n\t      Reflect.deleteProperty(properties, 'Symbol(hasmutilselected)');\n\t\n\t      featuresArr.push({\n\t        type: 'Feature',\n\t        geometry: {\n\t          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n\t          coordinates: feature.geometry.getCoordinates()\n\t        },\n\t        properties: properties,\n\t        title: feature.displayText\n\t      });\n\t    });\n\t\n\t    return {\n\t      type: 'FeatureCollection',\n\t      features: featuresArr\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 获取Geometry的类型\n\t   *\n\t   * @static\n\t   * @method getGeoJSONGeometryType\n\t   * @param geometry\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  GeoJSON.getGeoJSONGeometryType = function getGeoJSONGeometryType(geometry) {\n\t    var type = geometry.geometryType;\n\t    var jsonType = void 0;\n\t    switch (type) {\n\t      case _geometry2.default.POINT:\n\t        jsonType = 'Point';\n\t        break;\n\t      case _geometry2.default.LINE:\n\t        jsonType = 'LineString';\n\t        break;\n\t      case _geometry2.default.POLYGON:\n\t        jsonType = 'Polygon';\n\t        break;\n\t      case _geometry2.default.MULTI_POLYGON:\n\t        jsonType = 'MutilPolygon';\n\t        break;\n\t      case _geometry2.default.EXTENT:\n\t        jsonType = 'ExtentPolygon';\n\t        break;\n\t      case _geometry2.default.PARALLELOGRAM:\n\t        jsonType = 'ParallelogramPolygon';\n\t    }\n\t\n\t    return jsonType;\n\t  };\n\t\n\t  return GeoJSON;\n\t}();\n\t\n\texports.default = GeoJSON;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 70 */\n/*!*********************************************!*\\\n  !*** ./src/geometry/analysis/intersects.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = intersects;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * 判断任意图形是否相交\n\t * @TODO 算法返回的结果修改为：找到碰撞的图形或部分，而不是返回布尔值，\n\t * 这样可以避免二次寻找\n\t *\n\t * @method intersects\n\t * @param geometry1\n\t * @param geometry2\n\t * @returns {Boolean}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/7/13.\n\t */\n\t\n\tfunction intersects(geometry1, geometry2) {\n\t  if (geometry1 === null || geometry1 === undefined || geometry2 === null || geometry2 === undefined) {\n\t    return false;\n\t  }\n\t\n\t  var extent1 = geometry1.extent;\n\t  var extent2 = geometry2.extent;\n\t  var ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax];\n\t  var ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax];\n\t\n\t  // 如果两个图形的外界矩形不相交，则跳出判断\n\t  if (!_extentutil.ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n\t    return false;\n\t  }\n\t\n\t  var geometryType = geometry1.geometryType;\n\t\n\t  var result = false;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      result = pointIntersectsGeometry(geometry1, geometry2);\n\t      break;\n\t    case _geometry2.default.LINE:\n\t      result = lineIntersectsGeometry(geometry1, geometry2);\n\t      break;\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      if (geometry2.geometryType === _geometry2.default.MULTI_POLYGON) {\n\t        result = mutilPolygonIntersectsGeometry(geometry2, geometry1);\n\t      } else {\n\t        result = polygonIntersectsGeometry(geometry1, geometry2);\n\t      }\n\t      break;\n\t    case _geometry2.default.MULTI_POLYGON:\n\t      result = mutilPolygonIntersectsGeometry(geometry1, geometry2);\n\t      break;\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\t/**\n\t * 点和图形相交判断\n\t * @param point\n\t * @param geometry\n\t * @returns {*}\n\t */\n\tvar pointIntersectsGeometry = function pointIntersectsGeometry(point, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t    case _geometry2.default.LINE:\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.MULTI_POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return geometry.containsXY(point.x, point.y);\n\t  }\n\t\n\t  return false;\n\t};\n\t\n\t/**\n\t * 线和图形相交判断\n\t * @param line\n\t * @param geometry\n\t * @returns {Boolean|boolean|*}\n\t */\n\tvar lineIntersectsGeometry = function lineIntersectsGeometry(line, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      return line.containsXY(geometry.x, geometry.y);\n\t    case _geometry2.default.LINE:\n\t      return lineIntersectsLine(line, geometry);\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return lineIntersectsPolygon(line, geometry);\n\t  }\n\t};\n\t\n\t/**\n\t * 线与线相交判断\n\t * @param line1\n\t * @param line2\n\t */\n\tvar lineIntersectsLine = function lineIntersectsLine(line1, line2) {\n\t  var lineLinearRings1 = line1.getCoordinates();\n\t  var lineLinearRings2 = line2.getCoordinates();\n\t\n\t  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2);\n\t};\n\t\n\t/**\n\t * 多边形和图形相交判断\n\t * @param poly\n\t * @param geometry\n\t * @returns {Boolean|boolean|*}\n\t */\n\tvar polygonIntersectsGeometry = function polygonIntersectsGeometry(poly, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      return poly.containsXY(geometry.x, geometry.y);\n\t    case _geometry2.default.LINE:\n\t      return lineIntersectsPolygon(geometry, poly);\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.MUTIL_POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return polygonIntersectsPolygon(poly, geometry);\n\t  }\n\t};\n\t\n\tvar mutilPolygonIntersectsGeometry = function mutilPolygonIntersectsGeometry(mutilPoly, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      return mutilPoly.containsXY(geometry.x, geometry.y);\n\t    // case Geometry.LINE:\n\t    // return lineIntersectsPolygon(geometry, poly);\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.MULTI_POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return mutilPolygonIntersectsPolygon(mutilPoly, geometry);\n\t  }\n\t};\n\t\n\t/**\n\t * 线和多边形相交判断\n\t * @param line\n\t * @param polygon\n\t */\n\tvar lineIntersectsPolygon = function lineIntersectsPolygon(line, polygon) {\n\t  var lineLinearRings = line.getCoordinates();\n\t  var polygon2LinearRings = polygon.getCoordinates();\n\t\n\t  if (polygon.geometryType === _geometry2.default.POLYGON || polygon.geometry === _geometry2.default.MULTI_POLYGON) {\n\t    polygon2LinearRings = polygon2LinearRings[0]; // 只获得外环\n\t  }\n\t\n\t  var intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings);\n\t\n\t  if (!intersect) {\n\t    // check if this poly contains points of the ring/linestring\n\t    for (var i = 0, len = lineLinearRings.length; i < len; ++i) {\n\t      var point = lineLinearRings[i];\n\t      intersect = polygon.containsXY(point[0], point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\t/**\n\t * 多边形和多边形相交判断\n\t * @param poly\n\t * @param polygon\n\t */\n\tvar polygonIntersectsPolygon = function polygonIntersectsPolygon(poly, polygon) {\n\t  var lineLinearRings = poly.getCoordinates();\n\t  var polygon2LinearRings = polygon.getCoordinates(); // 只获得外环\n\t\n\t  if (poly.geometryType === _geometry2.default.POLYGON) {\n\t    lineLinearRings = lineLinearRings[0];\n\t  }\n\t\n\t  if (polygon.geometryType === _geometry2.default.POLYGON) {\n\t    polygon2LinearRings = polygon2LinearRings[0];\n\t  }\n\t\n\t  var intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings);\n\t\n\t  // 两个多边形要做相互内含关系的判断\n\t\n\t  // 正向检查\n\t  if (!intersect) {\n\t    for (var i = 0, len = lineLinearRings.length; i < len; ++i) {\n\t      var point = lineLinearRings[i];\n\t      intersect = polygon.containsXY(point[0], point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  // 反向检查\n\t  if (!intersect) {\n\t    for (var _i = 0, _len = polygon2LinearRings.length; _i < _len; ++_i) {\n\t      var _point = polygon2LinearRings[_i];\n\t      intersect = poly.containsXY(_point[0], _point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\tvar mutilPolygonIntersectsPolygon = function mutilPolygonIntersectsPolygon(mutilPoly, polygon) {\n\t  var intersectsByLinearRingsFn = intersectsByLinearRings;\n\t  var lineLinearRings = mutilPoly.getCoordinates();\n\t  var polygon2LinearRings = [];\n\t\n\t  var polygonGeometryType = polygon.geometryType;\n\t  if (polygonGeometryType == _geometry2.default.EXTENT) {\n\t    polygon2LinearRings = [polygon.getCoordinates()];\n\t  } else if (polygonGeometryType == _geometry2.default.POLYGON) {\n\t    polygon2LinearRings = [polygon.getCoordinates()[0]]; // 取外环\n\t  } else if (polygonGeometryType == _geometry2.default.MULTI_POLYGON) {\n\t    polygon2LinearRings = polygon.getCoordinates();\n\t  }\n\t\n\t  var result = lineLinearRings.find(function (ring) {\n\t    var oneRingIntersects = polygon2LinearRings.find(function (linarRing) {\n\t      return intersectsByLinearRingsFn(ring[0], linarRing);\n\t    });\n\t\n\t    return oneRingIntersects !== undefined ? true : false;\n\t  });\n\t\n\t  return result !== undefined ? true : false;\n\t};\n\t\n\tvar intersectsByLinearRings = function intersectsByLinearRings(LinearRing1, LinearRings2) {\n\t  var intersect = false;\n\t  var segs1 = getSortedSegments(LinearRing1);\n\t  var segs2 = getSortedSegments(LinearRings2);\n\t\n\t  var seg1 = void 0,\n\t      seg1x1 = void 0,\n\t      seg1x2 = void 0,\n\t      seg1y1 = void 0,\n\t      seg1y2 = void 0,\n\t      seg2 = void 0,\n\t      seg2y1 = void 0,\n\t      seg2y2 = void 0;\n\t\n\t  // sweep right\n\t  for (var i = 0, len = segs1.length; i < len; ++i) {\n\t    seg1 = segs1[i];\n\t    seg1x1 = seg1.x1;\n\t    seg1x2 = seg1.x2;\n\t    seg1y1 = seg1.y1;\n\t    seg1y2 = seg1.y2;\n\t\n\t    for (var j = 0, jlen = segs2.length; j < jlen; ++j) {\n\t      seg2 = segs2[j];\n\t      if (seg2.x1 > seg1x2) {\n\t        // seg1 still left of seg2\n\t        break;\n\t      }\n\t\n\t      if (seg2.x2 < seg1x1) {\n\t        // seg2 still left of seg1\n\t        continue;\n\t      }\n\t\n\t      seg2y1 = seg2.y1;\n\t      seg2y2 = seg2.y2;\n\t      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n\t        // seg2 above seg1\n\t        continue;\n\t      }\n\t\n\t      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n\t        // seg2 below seg1\n\t        continue;\n\t      }\n\t\n\t      if (segmentsIntersect(seg1, seg2)) {\n\t        intersect = true;\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\tvar getSortedSegments = function getSortedSegments(points) {\n\t  var numSeg = points.length - 1;\n\t  var segments = new Array(numSeg),\n\t      point1 = void 0,\n\t      point2 = void 0;\n\t\n\t  for (var i = 0; i < numSeg; ++i) {\n\t    point1 = points[i];\n\t    point2 = points[i + 1];\n\t\n\t    if (point1[0] < point2[0]) {\n\t      segments[i] = {\n\t        x1: point1[0],\n\t        y1: point1[1],\n\t        x2: point2[0],\n\t        y2: point2[1]\n\t      };\n\t    } else {\n\t      segments[i] = {\n\t        x1: point2[0],\n\t        y1: point2[1],\n\t        x2: point1[0],\n\t        y2: point1[1]\n\t      };\n\t    }\n\t  }\n\t\n\t  // more efficient to define this somewhere static\n\t  function byX1(seg1, seg2) {\n\t    return seg1.x1 - seg2.x1;\n\t  }\n\t\n\t  return segments.sort(byX1);\n\t};\n\t\n\tvar segmentsIntersect = function segmentsIntersect(seg1, seg2, options) {\n\t  var point = options && options.point;\n\t  var tolerance = options && options.tolerance;\n\t  var intersection = false;\n\t  var x11_21 = seg1.x1 - seg2.x1;\n\t  var y11_21 = seg1.y1 - seg2.y1;\n\t  var x12_11 = seg1.x2 - seg1.x1;\n\t  var y12_11 = seg1.y2 - seg1.y1;\n\t  var y22_21 = seg2.y2 - seg2.y1;\n\t  var x22_21 = seg2.x2 - seg2.x1;\n\t  var d = y22_21 * x12_11 - x22_21 * y12_11;\n\t  var n1 = x22_21 * y11_21 - y22_21 * x11_21;\n\t  var n2 = x12_11 * y11_21 - y12_11 * x11_21;\n\t\n\t  if (d == 0) {\n\t    // parallel\n\t    if (n1 == 0 && n2 == 0) {\n\t      // coincident\n\t      intersection = true;\n\t    }\n\t  } else {\n\t    var along1 = n1 / d;\n\t    var along2 = n2 / d;\n\t    if (along1 >= 0 && along1 <= 1 && along2 >= 0 && along2 <= 1) {\n\t      // intersect\n\t      if (!point) {\n\t        intersection = true;\n\t      } else {\n\t        // calculate the intersection point\n\t        var x = seg1.x1 + along1 * x12_11;\n\t        var y = seg1.y1 + along1 * y12_11;\n\t        intersection = { 'x': x, 'y': y };\n\t      }\n\t    }\n\t  }\n\t\n\t  if (tolerance) {\n\t    var dist = void 0;\n\t    if (intersection) {\n\t      if (point) {\n\t        var segs = [seg1, seg2];\n\t        var seg = void 0,\n\t            _x = void 0,\n\t            _y = void 0;\n\t        // check segment endpoints for proximity to intersection\n\t        // set intersection to first endpoint within the tolerance\n\t        for (var i = 0; i < 2; ++i) {\n\t          seg = segs[i];\n\t          for (var j = 1; j < 3; ++j) {\n\t            _x = seg['x' + j];\n\t            _y = seg['y' + j];\n\t\n\t            dist = Math.sqrt(Math.pow(_x - intersection.x, 2) + Math.pow(_y - intersection.y, 2));\n\t\n\t            if (dist < tolerance) {\n\t              intersection.x = _x;\n\t              intersection.y = _y;\n\t              break;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    } else {\n\t      // no calculated intersection, but segments could be within\n\t      // the tolerance of one another\n\t      var _segs = [seg1, seg2];\n\t      var source = void 0,\n\t          target = void 0,\n\t          p = void 0,\n\t          result = void 0;\n\t      // check segment endpoints for proximity to intersection\n\t      // set intersection to first endpoint within the tolerance\n\t      for (var _i2 = 0; _i2 < 2; ++_i2) {\n\t        source = _segs[_i2];\n\t        target = _segs[(_i2 + 1) % 2];\n\t        for (var _j = 1; _j < 3; ++_j) {\n\t          p = { x: source['x' + _j], y: source['y' + _j] };\n\t          result = distanceToSegment(p, target);\n\t          if (result.distance < tolerance) {\n\t            if (point) {\n\t              intersection = { 'x': p.x, 'y': p.y };\n\t            } else {\n\t              intersection = true;\n\t            }\n\t\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t  return intersection;\n\t};\n\t\n\tvar distanceToSegment = function distanceToSegment(point, segment) {\n\t  var result = distanceSquaredToSegment(point, segment);\n\t  result.distance = Math.sqrt(result.distance);\n\t  return result;\n\t};\n\t\n\tvar distanceSquaredToSegment = function distanceSquaredToSegment(point, segment) {\n\t  var x0 = point.x;\n\t  var y0 = point.y;\n\t  var x1 = segment.x1;\n\t  var y1 = segment.y1;\n\t  var x2 = segment.x2;\n\t  var y2 = segment.y2;\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  var along = (dx * (x0 - x1) + dy * (y0 - y1)) / (Math.pow(dx, 2) + Math.pow(dy, 2));\n\t  var x = void 0,\n\t      y = void 0;\n\t\n\t  if (along <= 0.0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1.0) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return {\n\t    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n\t    x: x,\n\t    y: y,\n\t    along: along\n\t  };\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 71 */\n/*!**************************************************!*\\\n  !*** ./src/geometry/analysis/polygonwithhole.js ***!\n  \\**************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = polygonWithHoles;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! ../../geometry/mutilpolygon */ 21);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _orient = __webpack_require__(/*! ../support/orient */ 33);\n\t\n\tvar _contains = __webpack_require__(/*! ./contains */ 30);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * @param polygon\n\t * @param holePolygon\n\t * @returns {*}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/8/4.\n\t */\n\t\n\tfunction polygonWithHoles(polygon1, polygon2) {\n\t\n\t  var polygon = polygon1.clone();\n\t  var holePolygon = polygon2.clone();\n\t\n\t  var resultPolygon = polygon;\n\t  var holeCoordinates = holePolygon.getCoordinates();\n\t  var polygonCoordinates = polygon.getCoordinates();\n\t\n\t  var type = polygon.geometryType;\n\t  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n\t  if (type === _geometry2.default.POLYGON) {\n\t    // 必须要被包含在多边形内\n\t    if ((0, _contains2.default)(polygon, holePolygon)) {\n\t      var holeOutRings = holeCoordinates[0];\n\t      var polygonOutRings = polygonCoordinates[0];\n\t\n\t      var tempHoleOutRings = [];\n\t      var tempPolygonOutRings = [];\n\t\n\t      holeOutRings.forEach(function (ring) {\n\t        tempHoleOutRings.push(ring[0], ring[1]);\n\t      });\n\t\n\t      polygonOutRings.forEach(function (ring) {\n\t        tempPolygonOutRings.push(ring[0], ring[1]);\n\t      });\n\t\n\t      var holeOriented = (0, _orient.linearRingIsClockwise)(tempHoleOutRings, 0, tempHoleOutRings.length, 2);\n\t      var polygonOutRingOriented = (0, _orient.linearRingIsClockwise)(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2);\n\t\n\t      // 带洞多边形\n\t      if (polygonCoordinates.length > 1) {\n\t        // 如果有带洞多边形，需要处理的更多\n\t        // 这里只是简单的存储进去\n\t\n\t        // 不同向\n\t        if (holeOriented !== polygonOutRingOriented) {\n\t          polygonCoordinates.push(holeOutRings.slice());\n\t        } else {\n\t          polygonCoordinates.push(holeOutRings.slice().reverse());\n\t        }\n\t      } else {\n\t        // 不同向\n\t        if (holeOriented !== polygonOutRingOriented) {\n\t          polygonCoordinates.push(holeOutRings.slice());\n\t        } else {\n\t          polygonCoordinates.push(holeOutRings.slice().reverse());\n\t        }\n\t      }\n\t    }\n\t  } else if (type === _geometry2.default.MULTI_POLYGON) {\n\t    var polygons = polygon.convertToPolygons();\n\t\n\t    var polygonsWithHole = [];\n\t\n\t    polygons.forEach(function (poly) {\n\t      var polyWithHole = polygonWithHoles(poly, holePolygon);\n\t      polygonsWithHole.push(polyWithHole);\n\t    });\n\t\n\t    var coordinates = [];\n\t    polygonsWithHole.forEach(function (poly) {\n\t      coordinates.push(poly.getCoordinates());\n\t    });\n\t\n\t    var multiPolygon = new _mutilpolygon2.default();\n\t    multiPolygon.setCoordinates(coordinates);\n\t\n\t    resultPolygon = multiPolygon;\n\t  }\n\t\n\t  return resultPolygon;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 72 */\n/*!***********************************************!*\\\n  !*** ./src/geometry/analysis/splitpolygon.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = splitPolygonByPolyline;\n\t\n\tvar _contains = __webpack_require__(/*! ./contains */ 30);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar isDividedPointSymbol = Symbol('isDividedPoint'); /**\n\t                                                      * Created by zhangyong on 2017/7/17.\n\t                                                      */\n\t\n\tvar alreadyUsedSymbol = Symbol('alreadyUsed');\n\tvar dividePointSymbol = Symbol('dividePoint');\n\t\n\t/**\n\t * 使用直线来切割多边形,\n\t * 暂时只支持不带洞的多边形的分割\n\t *\n\t * @method splitPolygonByLine\n\t * @param polygon {Geometry} 被切割多边形\n\t * @param line {Geometry} 切割直线\n\t * @returns {Array}\n\t */\n\tfunction splitPolygonByPolyline(targetPolygon, splitLine) {\n\t\n\t  // 不再原对象上处理\n\t  var polygon = targetPolygon.clone();\n\t  var line = splitLine.clone();\n\t\n\t  var polygonCoordinates = polygon.getCoordinates()[0];\n\t  var lineCoordinates = line.getCoordinates();\n\t\n\t  // 找到直线和面的相交点\n\t  var dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates);\n\t\n\t  // 0交点或者交点为奇数，则认为非法输入\n\t  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n\t    return [];\n\t  }\n\t\n\t  // 参入到原来分割线中\n\t  var afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates);\n\t\n\t  var allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords);\n\t\n\t  // 按照顺序插入分割点到分割多边形顶多序列中\n\t  var vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates);\n\t\n\t  // 重塑多边形\n\t  var results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords);\n\t\n\t  var featureCollection = [];\n\t  results.forEach(function (r) {\n\t    var coords = [];\n\t    r.forEach(function (arrs) {\n\t      coords.push([arrs[0], arrs[1]]);\n\t    });\n\t    var polygon = new _polygon2.default();\n\t    polygon.setCoordinates([coords]);\n\t    featureCollection.push(polygon);\n\t  });\n\t\n\t  // 处理带洞多边形\n\t  handleHolesForPolygon(polygon, featureCollection, line);\n\t\n\t  return featureCollection;\n\t}\n\t\n\tvar renewal = function renewal(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n\t\n\t  var i = 0;\n\t  var len = vertexListAfterDivide.length;\n\t\n\t  var isInArray = function isInArray(point, singlePolygonCoords) {\n\t    return singlePolygonCoords.find(function (item) {\n\t      return item[0] === point[0] && item[1] === point[1];\n\t    });\n\t  };\n\t\n\t  // 找到分割点在同一分割边上的其他点\n\t  var findPartners = function findPartners(point) {\n\t    for (var j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n\t      var parts = allPartsScliedFromLineCoords[j];\n\t      var fp = parts[0];\n\t      var ep = parts[parts.length - 1];\n\t\n\t      // 如果是首点\n\t      if (fp[0] === point[0] && fp[1] === point[1]) {\n\t        return parts;\n\t      }\n\t\n\t      if (ep[0] === point[0] && ep[1] === point[1]) {\n\t        var newParts = [].concat(parts);\n\t        return newParts.reverse();\n\t      }\n\t    }\n\t  };\n\t\n\t  // 寻找点在多边形序列的下一点\n\t  var findNextPoint = function findNextPoint(point) {\n\t    for (var m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n\t      var item = vertexListAfterDivide[m];\n\t      if (item[0] === point[0] && item[1] === point[1]) {\n\t        if (m === vertexListAfterDivide.length - 1) {\n\t          return item;\n\t        } else {\n\t          return vertexListAfterDivide[m + 1];\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  var singlePolygonCoords = [];\n\t  var allPolygonCoords = [];\n\t\n\t  // 递归分割\n\t  var goThrough = function goThrough(ePoint, singlePolygonCoords) {\n\t    if (singlePolygonCoords.length > 1) {\n\t      var firstPoint = singlePolygonCoords[0];\n\t      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n\t        singlePolygonCoords.push(ePoint);\n\t        return true;\n\t      }\n\t    }\n\t\n\t    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n\t    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n\t      var parts = findPartners(ePoint);\n\t      parts.forEach(function (p) {\n\t        singlePolygonCoords.push(p);\n\t      });\n\t\n\t      // 判断此时是否已经完成绘制\n\t      var ffpoint = singlePolygonCoords[0];\n\t      var eepoint = singlePolygonCoords[singlePolygonCoords.length - 1];\n\t      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n\t        return true;\n\t      }\n\t\n\t      var endPoint = parts[parts.length - 1];\n\t      var nextPoint = findNextPoint(endPoint);\n\t      goThrough(nextPoint, singlePolygonCoords);\n\t    } else if (ePoint.length === 2) {\n\t      singlePolygonCoords.push(ePoint);\n\t\n\t      var _nextPoint = findNextPoint(ePoint);\n\t      goThrough(_nextPoint, singlePolygonCoords);\n\t    }\n\t  };\n\t\n\t  // 更新多边形顶点的状态\n\t  var updataStatus = function updataStatus(singlePolygonCoords, vertexListAfterDivide) {\n\t    vertexListAfterDivide.forEach(function (vertex) {\n\t      if (isInArray(vertex, singlePolygonCoords)) {\n\t        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n\t        if (vertex.length === 2) {\n\t          vertex.push(alreadyUsedSymbol);\n\t        }\n\t        // 如果是分割点，则只能使用2次\n\t        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n\t            vertex.push('1');\n\t          }\n\t          //\n\t          else if (vertex.length === 4) {\n\t              if (vertex[3] === '1') {\n\t                vertex[3] = '2';\n\t              }\n\t            }\n\t      }\n\t    });\n\t  };\n\t\n\t  // 检测这两个点是否是切割边\n\t  var isInOneSegment = function isInOneSegment(onePoint, otherPoint) {\n\t    var allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords;\n\t    var findCount = 0;\n\t\n\t    for (var _i = 0, _len = allPartsScliedFromLineCoordsTemp.length; _i < _len; _i++) {\n\t      var group = allPartsScliedFromLineCoordsTemp[_i];\n\t      findCount = 0;\n\t\n\t      for (var j = 0, jjlen = group.length; j < jjlen; j++) {\n\t        var item = group[j];\n\t        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n\t          findCount++;\n\t        }\n\t\n\t        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n\t          findCount++;\n\t        }\n\t\n\t        if (findCount === 2) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = vertexListAfterDivide[i];\n\t    // 如果是普通点\n\t    if (fPoint.length === 2) {\n\t      if (!isInArray(fPoint, singlePolygonCoords)) {\n\t        singlePolygonCoords.push(fPoint);\n\t      }\n\t\n\t      var ePoint = vertexListAfterDivide[i + 1];\n\t      goThrough(ePoint, singlePolygonCoords);\n\t\n\t      updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t      allPolygonCoords.push(singlePolygonCoords);\n\t      singlePolygonCoords = [];\n\t    }\n\t    // 如果是分割点\n\t    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n\t        if (!isInArray(fPoint, singlePolygonCoords)) {\n\t          singlePolygonCoords.push(fPoint);\n\t        }\n\t\n\t        var _ePoint = vertexListAfterDivide[i + 1];\n\t        goThrough(_ePoint, singlePolygonCoords);\n\t\n\t        updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t        allPolygonCoords.push(singlePolygonCoords);\n\t        singlePolygonCoords = [];\n\t      } else if (fPoint.length === 4 && fPoint[3] === '1') {\n\t        var _ePoint2 = vertexListAfterDivide[i + 1];\n\t\n\t        // 分割点，必须是构成同一边，不能是异边\n\t        if (_ePoint2.length >= 3 && _ePoint2[2] === isDividedPointSymbol && isInOneSegment(fPoint, _ePoint2)) {\n\t          _ePoint2 = fPoint;\n\t        }\n\t        // 异边，则重新启动分割流程\n\t        else {\n\t            if (!isInArray(fPoint, singlePolygonCoords)) {\n\t              singlePolygonCoords.push(fPoint);\n\t            }\n\t          }\n\t\n\t        goThrough(_ePoint2, singlePolygonCoords);\n\t        updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t        var fp = singlePolygonCoords[0];\n\t        var tp = singlePolygonCoords[singlePolygonCoords.length - 1];\n\t        if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n\t          singlePolygonCoords.push(fp);\n\t        }\n\t\n\t        allPolygonCoords.push(singlePolygonCoords);\n\t        singlePolygonCoords = [];\n\t      }\n\t  }\n\t\n\t  return allPolygonCoords;\n\t};\n\t\n\tvar sliceDividedPointFromLine = function sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords) {\n\t  var allParts = [];\n\t  var singleParts = [];\n\t  var isDividePointStart = false;\n\t\n\t  for (var i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n\t    var item = afterInsertLineCoords[i];\n\t\n\t    if (isDividePointStart === false && item.length === 3) {\n\t      singleParts.push([item[0], item[1]]);\n\t      isDividePointStart = true;\n\t\n\t      continue;\n\t    }\n\t\n\t    if (isDividePointStart) {\n\t      if (item.length === 2) {\n\t        singleParts.push(item);\n\t\n\t        continue;\n\t      }\n\t    }\n\t\n\t    if (isDividePointStart && item.length === 3) {\n\t      singleParts.push([item[0], item[1]]);\n\t      isDividePointStart = false;\n\t\n\t      allParts.push(singleParts);\n\t      singleParts = [];\n\t    }\n\t  }\n\t\n\t  return allParts;\n\t};\n\t\n\tvar insertDiveidePointsToSplitLineCoords = function insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates) {\n\t\n\t  var getDividePoints = function getDividePoints(fP, eP) {\n\t    return dividedPointList.filter(function (dp) {\n\t      var dfPoint = dp.intersectFrom.fromPoint;\n\t      var dePoint = dp.intersectFrom.endPoint;\n\t\n\t      return dfPoint[0] === fP[0] && dfPoint[1] === fP[1] && dePoint[0] === eP[0] && dePoint[1] === eP[1];\n\t    });\n\t  };\n\t\n\t  var isInArray = function isInArray(point) {\n\t    return afterArr.find(function (item) {\n\t      return item[0] === point[0] && item[1] === point[1];\n\t    });\n\t  };\n\t\n\t  var len = lineCoordinates.length;\n\t  var i = 0;\n\t  var afterArr = [];\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = lineCoordinates[i];\n\t    var ePoint = lineCoordinates[i + 1];\n\t\n\t    if (!isInArray(fPoint)) {\n\t      afterArr.push(fPoint);\n\t    }\n\t\n\t    var dividePoints = getDividePoints(fPoint, ePoint);\n\t    if (dividePoints.length !== 0) {\n\t      // 插入分割点\n\t      if (dividePoints.length === 1) {\n\t        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol]);\n\t      } else {\n\t        (function () {\n\t          // 多个分割点需要排序\n\t\n\t          var firstPointXY = {\n\t            x: fPoint[0],\n\t            y: fPoint[1]\n\t          };\n\t\n\t          dividePoints.sort(function (item1, item2) {\n\t            return distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY);\n\t          });\n\t\n\t          dividePoints.forEach(function (item) {\n\t            afterArr.push([item.point.x, item.point.y, dividePointSymbol]);\n\t          });\n\t        })();\n\t      }\n\t    }\n\t\n\t    if (!isInArray(ePoint)) {\n\t      afterArr.push(ePoint);\n\t    }\n\t  }\n\t\n\t  return afterArr;\n\t};\n\t\n\tvar distance = function distance(p1, p2) {\n\t  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n\t};\n\t\n\tvar insertDividePointsToCoordinates = function insertDividePointsToCoordinates(dividedPointList, polygonCoordinates) {\n\t  var afterInserted = [];\n\t\n\t  var isInDividedPointList = function isInDividedPointList(firstPoint, endPoint) {\n\t    return dividedPointList.filter(function (item) {\n\t      var orialPoint = item.originPoint;\n\t      var ofPoint = orialPoint.fromPoint;\n\t      var oePoint = orialPoint.toPoint;\n\t\n\t      return firstPoint[0] === ofPoint[0] && firstPoint[1] === ofPoint[1] && endPoint[0] === oePoint[0] && endPoint[1] === oePoint[1];\n\t    });\n\t  };\n\t\n\t  var len = polygonCoordinates.length;\n\t  var i = 0;\n\t\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = polygonCoordinates[i];\n\t    var ePoint = polygonCoordinates[i + 1];\n\t\n\t    afterInserted.push(fPoint);\n\t    var itemDividedPoint = isInDividedPointList(fPoint, ePoint);\n\t\n\t    if (itemDividedPoint.length > 0) {\n\t      if (itemDividedPoint.length > 1) {\n\t        (function () {\n\t          var firstPointXY = {\n\t            x: fPoint[0],\n\t            y: fPoint[1]\n\t          };\n\t\n\t          itemDividedPoint.sort(function (item1, item2) {\n\t            return distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY);\n\t          });\n\t        })();\n\t      }\n\t\n\t      itemDividedPoint.forEach(function (item) {\n\t        var point = item.point;\n\t        afterInserted.push([point.x, point.y, isDividedPointSymbol]);\n\t      });\n\t    }\n\t  }\n\t\n\t  afterInserted.push(afterInserted[0]);\n\t  return afterInserted;\n\t};\n\t\n\tvar findOneIntersectionPoints = function findOneIntersectionPoints(polygonCoordinates, lineCoordinates) {\n\t  var _ExtentUtil = _extentutil.ExtentUtil;\n\t  var lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1]);\n\t  var lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4);\n\t\n\t  var seg2 = {\n\t    x1: lineCoordinates[0][0],\n\t    y1: lineCoordinates[0][1],\n\t    x2: lineCoordinates[1][0],\n\t    y2: lineCoordinates[1][1]\n\t  };\n\t\n\t  var ntersectionPoints = [];\n\t\n\t  for (var j = 0, jj = polygonCoordinates.length - 1; j < jj; j++) {\n\t    var points = polygonCoordinates[j];\n\t    var nextPoints = polygonCoordinates[j + 1];\n\t\n\t    var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints);\n\t    // 如果两边的extent相交，则判断他们是否相交\n\t    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n\t\n\t      var seg1 = {\n\t        x1: points[0],\n\t        y1: points[1],\n\t        x2: nextPoints[0],\n\t        y2: nextPoints[1]\n\t      };\n\t\n\t      var intersectPoint = segmentsIntersect(seg1, seg2, { point: true });\n\t      if (intersectPoint instanceof Object) {\n\t        ntersectionPoints.push({\n\t          point: intersectPoint,\n\t          originPoint: {\n\t            fromPoint: points,\n\t            toPoint: nextPoints\n\t          },\n\t          index: j\n\t        });\n\t      }\n\t    }\n\t  }\n\t\n\t  return ntersectionPoints;\n\t};\n\t\n\tvar findIntersectionPoints = function findIntersectionPoints(polygonCoordinates, lineCoordinates) {\n\t  var _findOneIntersectionPoints = findOneIntersectionPoints;\n\t  var ntersectionPoints = [];\n\t\n\t  var _loop = function _loop(i, len) {\n\t    var firstPoint = lineCoordinates[i];\n\t    var endPoint = lineCoordinates[i + 1];\n\t\n\t    var intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint]);\n\t    intersectionPoints.forEach(function (ntp) {\n\t      ntp.intersectIndex = i;\n\t      ntp.intersectFrom = {\n\t        fromPoint: firstPoint,\n\t        endPoint: endPoint\n\t      };\n\t    });\n\t\n\t    ntersectionPoints = ntersectionPoints.concat(intersectionPoints);\n\t  };\n\t\n\t  for (var i = 0, len = lineCoordinates.length - 1; i < len; i++) {\n\t    _loop(i, len);\n\t  }\n\t\n\t  return ntersectionPoints;\n\t};\n\t\n\tvar segmentsIntersect = function segmentsIntersect(seg1, seg2, options) {\n\t  var point = options && options.point;\n\t  var tolerance = options && options.tolerance;\n\t  var intersection = false;\n\t  var x11_21 = seg1.x1 - seg2.x1;\n\t  var y11_21 = seg1.y1 - seg2.y1;\n\t  var x12_11 = seg1.x2 - seg1.x1;\n\t  var y12_11 = seg1.y2 - seg1.y1;\n\t  var y22_21 = seg2.y2 - seg2.y1;\n\t  var x22_21 = seg2.x2 - seg2.x1;\n\t  var d = y22_21 * x12_11 - x22_21 * y12_11;\n\t  var n1 = x22_21 * y11_21 - y22_21 * x11_21;\n\t  var n2 = x12_11 * y11_21 - y12_11 * x11_21;\n\t\n\t  if (d == 0) {\n\t    // parallel\n\t    if (n1 == 0 && n2 == 0) {\n\t      // coincident\n\t      intersection = true;\n\t    }\n\t  } else {\n\t    var along1 = n1 / d;\n\t    var along2 = n2 / d;\n\t    if (along1 >= 0 && along1 <= 1 && along2 >= 0 && along2 <= 1) {\n\t      // intersect\n\t      if (!point) {\n\t        intersection = true;\n\t      } else {\n\t        // calculate the intersection point\n\t        var x = seg1.x1 + along1 * x12_11;\n\t        var y = seg1.y1 + along1 * y12_11;\n\t        intersection = { 'x': x, 'y': y };\n\t      }\n\t    }\n\t  }\n\t\n\t  if (tolerance) {\n\t    var dist = void 0;\n\t    if (intersection) {\n\t      if (point) {\n\t        var segs = [seg1, seg2];\n\t        var seg = void 0,\n\t            _x = void 0,\n\t            _y = void 0;\n\t        // check segment endpoints for proximity to intersection\n\t        // set intersection to first endpoint within the tolerance\n\t        for (var i = 0; i < 2; ++i) {\n\t          seg = segs[i];\n\t          for (var j = 1; j < 3; ++j) {\n\t            _x = seg['x' + j];\n\t            _y = seg['y' + j];\n\t\n\t            dist = Math.sqrt(Math.pow(_x - intersection.x, 2) + Math.pow(_y - intersection.y, 2));\n\t\n\t            if (dist < tolerance) {\n\t              intersection.x = _x;\n\t              intersection.y = _y;\n\t              break;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    } else {\n\t      // no calculated intersection, but segments could be within\n\t      // the tolerance of one another\n\t      var _segs = [seg1, seg2];\n\t      var source = void 0,\n\t          target = void 0,\n\t          p = void 0,\n\t          result = void 0;\n\t      // check segment endpoints for proximity to intersection\n\t      // set intersection to first endpoint within the tolerance\n\t      for (var _i2 = 0; _i2 < 2; ++_i2) {\n\t        source = _segs[_i2];\n\t        target = _segs[(_i2 + 1) % 2];\n\t        for (var _j = 1; _j < 3; ++_j) {\n\t          p = { x: source['x' + _j], y: source['y' + _j] };\n\t          result = distanceToSegment(p, target);\n\t          if (result.distance < tolerance) {\n\t            if (point) {\n\t              intersection = { 'x': p.x, 'y': p.y };\n\t            } else {\n\t              intersection = true;\n\t            }\n\t\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t  return intersection;\n\t};\n\t\n\tvar distanceToSegment = function distanceToSegment(point, segment) {\n\t  var result = distanceSquaredToSegment(point, segment);\n\t  result.distance = Math.sqrt(result.distance);\n\t  return result;\n\t};\n\t\n\tvar distanceSquaredToSegment = function distanceSquaredToSegment(point, segment) {\n\t  var x0 = point.x;\n\t  var y0 = point.y;\n\t  var x1 = segment.x1;\n\t  var y1 = segment.y1;\n\t  var x2 = segment.x2;\n\t  var y2 = segment.y2;\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  var along = (dx * (x0 - x1) + dy * (y0 - y1)) / (Math.pow(dx, 2) + Math.pow(dy, 2));\n\t  var x = void 0,\n\t      y = void 0;\n\t\n\t  if (along <= 0.0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1.0) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return {\n\t    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n\t    x: x, y: y,\n\t    along: along\n\t  };\n\t};\n\t\n\t/**\n\t * 处理带洞多边形\n\t * @param polygon\n\t * @param geometryCollection\n\t * @param splitLine\n\t */\n\tvar handleHolesForPolygon = function handleHolesForPolygon(polygon, geometryCollection, splitLine) {\n\t  if (!polygon.hasHoles()) {\n\t    return;\n\t  }\n\t\n\t  var addHoleToPolygon = function addHoleToPolygon(polyCoods, geometryCollection) {\n\t    var poly = new _polygon2.default([polyCoods]);\n\t    var needPoly = geometryCollection.find(function (polygon) {\n\t      return (0, _contains2.default)(polygon, poly);\n\t    });\n\t\n\t    if (needPoly) {\n\t      needPoly.getCoordinates().push(polyCoods);\n\t    }\n\t  };\n\t\n\t  // 判断洞是否与切割线相交\n\t  var coords = polygon.getCoordinates();\n\t  var lineCoords = splitLine;\n\t\n\t  for (var i = 1, len = coords.length; i < len; i++) {\n\t    var dividedPoints = findIntersectionPoints(coords[i], lineCoords);\n\t\n\t    // 如果分割线和洞不相交，需要判断洞的归属\n\t    if (dividedPoints.length === 0) {\n\t      // console.log('Find one need to appended to collection.')\n\t      addHoleToPolygon(coords[i], geometryCollection);\n\t    }\n\t  }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 73 */\n/*!*****************************************!*\\\n  !*** ./src/meek/browsereventhandler.js ***!\n  \\*****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _browserevent = __webpack_require__(/*! ./browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/21.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BrowserEventHandler = function (_BaseObject) {\n\t  _inherits(BrowserEventHandler, _BaseObject);\n\t\n\t  function BrowserEventHandler(map, element) {\n\t    _classCallCheck(this, BrowserEventHandler);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.map = map;\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    _this._element = element;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._dragging = false;\n\t\n\t    /**\n\t     * The most recent \"down\" type event (or null if none have occurred).\n\t     * @private\n\t     */\n\t    _this._down = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._dragListenerKeys = [];\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._clickTimeoutId = 0;\n\t\n\t    // 事件和对应的处理方法\n\t    // 映射关系\n\t    _this._mapping = {\n\t      'mousedown': _this._mousedown,\n\t      'mousemove': _this._mousemove,\n\t      'mouseup': _this._mouseup,\n\t      'mouseover': _this._mouseover,\n\t      'mouseout': _this._mouseout\n\t    };\n\t\n\t    _this._registerSource();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._registerSource = function _registerSource() {\n\t    var _this2 = this;\n\t\n\t    // console.log('注册鼠标事件')\n\t    var events = this.getEvents();\n\t    events.forEach(function (eventName) {\n\t      return (0, _eventmanager.listen)(_this2._element, eventName, _this2._mapping[eventName], _this2);\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 得到事件\n\t   *\n\t   * @method getEvents\n\t   * @return {Array}\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype.getEvents = function getEvents() {\n\t    return Object.keys(this._mapping);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mousedown = function _mousedown(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_DOWN);\n\t    this.dispatchEvent(event);\n\t\n\t    this._dragging = false;\n\t    this._down = e;\n\t\n\t    if (this._dragListenerKeys.length === 0) {\n\t      var documentDom = document;\n\t\n\t      this._dragListenerKeys.push((0, _eventmanager.listen)(documentDom, _browserevent2.default.MOUSE_MOVE, this._mousemove, this), (0, _eventmanager.listen)(documentDom, _browserevent2.default.MOUSE_UP, this._mouseup, this));\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mousemove = function _mousemove(e) {\n\t\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_MOVE);\n\t\n\t    if (event.coordinate === null) {\n\t      return;\n\t    }\n\t\n\t    this.dispatchEvent(event);\n\t\n\t    if (this._isMoving(e)) {\n\t      this._dragging = true;\n\t\n\t      var newEvent = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_DRAG, this._dragging);\n\t      this.dispatchEvent(newEvent);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseup = function _mouseup(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_UP);\n\t    this.dispatchEvent(event);\n\t\n\t    if (!this._dragging && this._down) {\n\t      this._emulateClick(this._down);\n\t    }\n\t\n\t    this._dragListenerKeys.forEach(_eventmanager.unlistenByKey);\n\t    this._dragListenerKeys.length = 0;\n\t    this._dragging = false;\n\t    this._down = null;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseover = function _mouseover(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_OVER);\n\t    this.dispatchEvent(event);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseout = function _mouseout(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_OUT);\n\t    this.dispatchEvent(event);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._emulateClick = function _emulateClick(event) {\n\t    var newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.CLICK);\n\t    this.dispatchEvent(newEvent);\n\t\n\t    // double click\n\t    if (this._clickTimeoutId !== 0) {\n\t      clearTimeout(this._clickTimeoutId);\n\t      this._clickTimeoutId = 0;\n\t      newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.DBLCLICK);\n\t      this.dispatchEvent(newEvent);\n\t    } else {\n\t      // single click\n\t      this._clickTimeoutId = setTimeout(function () {\n\t        this._clickTimeoutId = 0;\n\t        var newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.SINGLE_CLICK);\n\t        this.dispatchEvent(newEvent);\n\t      }.bind(this), 250);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @return {boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._isMoving = function _isMoving(event) {\n\t    if (this._down === null) {\n\t      return false;\n\t    }\n\t\n\t    return event.clientX !== this._down.clientX || event.clientY !== this._down.clientY;\n\t  };\n\t\n\t  return BrowserEventHandler;\n\t}(_baseobject2.default);\n\t\n\texports.default = BrowserEventHandler;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 74 */\n/*!*************************!*\\\n  !*** ./src/meek/map.js ***!\n  \\*************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _canvasrenderer = __webpack_require__(/*! ../renderer/canvas/canvasrenderer */ 76);\n\t\n\tvar _canvasrenderer2 = _interopRequireDefault(_canvasrenderer);\n\t\n\tvar _browsereventhandler = __webpack_require__(/*! ./browsereventhandler */ 73);\n\t\n\tvar _browsereventhandler2 = _interopRequireDefault(_browsereventhandler);\n\t\n\tvar _browserevent = __webpack_require__(/*! ./browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _view = __webpack_require__(/*! ./view */ 49);\n\t\n\tvar _view2 = _interopRequireDefault(_view);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _transform = __webpack_require__(/*! ../data/matrix/transform */ 7);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _componentdefaults = __webpack_require__(/*! ../components/componentdefaults */ 57);\n\t\n\tvar _controldefaults = __webpack_require__(/*! ../control/controldefaults */ 65);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Map类\n\t *\n\t * @class Map\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Map = function (_BaseObject) {\n\t  _inherits(Map, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   *\n\t   * @param options\n\t   */\n\t  function Map(options) {\n\t    _classCallCheck(this, Map);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._frameState = null;\n\t\n\t    /**\n\t     * 添加到map中的layers集合\n\t     * @private\n\t     */\n\t    _this._layers = [];\n\t\n\t    /**\n\t     * 初始化矩阵转换器\n\t     * @type {*}\n\t     * @private\n\t     */\n\t    _this._toPixelTransform = _transform.Transform.create();\n\t    _this._toCoordinateTransform = _transform.Transform.create();\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    _this._animationDelayKey = undefined;\n\t\n\t    /**\n\t     * The collection of components\n\t     * @private\n\t     */\n\t    _this._components = [];\n\t\n\t    /**\n\t     * The collection of controls\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._controls = [];\n\t\n\t    /**\n\t     * 默认比例\n\t     * @type {Number}\n\t     */\n\t    _this._delta = 1;\n\t\n\t    // Create the viewport for map container\n\t    _this._createViewport();\n\t\n\t    _this._overlayContainer = document.createElement('DIV');\n\t    _this._overlayContainer.className = 'dt-overlaycontainer';\n\t    _this.viewport.appendChild(_this._overlayContainer);\n\t\n\t    _this._overlayContainerStopEvent = document.createElement('DIV');\n\t    _this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent';\n\t\n\t    // prevent event propagation from overlay\n\t    var overlayEvents = [_browserevent2.default.CLICK, _browserevent2.default.DBLCLICK, _browserevent2.default.MOUSE_DOWN, _browserevent2.default.MOUSE_UP, _browserevent2.default.MOUSE_WHEEL, _browserevent2.default.WHEEL];\n\t    overlayEvents.forEach(function (overlayEvent) {\n\t      (0, _eventmanager.listen)(_this._overlayContainerStopEvent, overlayEvent, function (evt) {\n\t        evt.stopPropagation();\n\t      });\n\t    });\n\t\n\t    _this.viewport.appendChild(_this._overlayContainerStopEvent);\n\t\n\t    // Get the options inner\n\t    var optionsInner = Map.parseOptionsInner(options);\n\t\n\t    // 是否允许图片坐标超出图片范围\n\t    _this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false;\n\t\n\t    // Create the renderer\n\t    _this._renderer = new optionsInner.rendererClass(_this.viewport, _this);\n\t\n\t    // Create the browser events handler\n\t    _this._createBrowserEventHandler();\n\t\n\t    _this._animationDelay = function () {\n\t      _this._animationDelayKey = undefined;\n\t      _this._renderFrame(Date.now());\n\t    };\n\t\n\t    // Set up the properties for map\n\t    _this.layers = optionsInner.values['layers'];\n\t    _this.target = optionsInner.values['target'];\n\t    _this.view = optionsInner.values['view'];\n\t\n\t    // add default components to map\n\t    optionsInner.components.forEach(function (component) {\n\t      return _this.addComponents(component);\n\t    });\n\t\n\t    // add default controls to map\n\t    optionsInner.controls.forEach(function (control) {\n\t      return _this.addControl(control);\n\t    });\n\t\n\t    _this._overlayIdIndex = {};\n\t    _this._overlays = optionsInner.overlays;\n\t    _this._overlays.forEach(function (overlay) {\n\t      return _this._addOverlayInternal(overlay);\n\t    });\n\t\n\t    // 监听view视图缩放事件\n\t    (0, _eventmanager.listen)(_this.view, _eventtype.EventType.CHANGE, _this._handleViewChange, _this);\n\t    _this.dispatchEvent(_eventtype.EventType.VIEW_CHANGED);\n\t\n\t    // add mouse wheel events listener\n\t    (0, _eventmanager.listen)(_this.viewport, _browserevent2.default.MOUSE_WHEEL, _this._handleMouseWheelEvent, _this);\n\t    (0, _eventmanager.listen)(_this.viewport, _browserevent2.default.WHEEL, _this._handleMouseWheelEvent, _this);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 设置map的父容器,\n\t   * 所有的图层对象、组件对象的父容器\n\t   *\n\t   * @method createViewport\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._createViewport = function _createViewport() {\n\t    var viewport = document.createElement('DIV');\n\t    viewport.className = 'dt-viewport';\n\t    viewport.style.position = 'relative';\n\t    viewport.style.overflow = 'hidden';\n\t    viewport.style.width = '100%';\n\t    viewport.style.height = '100%';\n\t\n\t    this._viewport = viewport;\n\t  };\n\t\n\t  /**\n\t   * 获取overlay的容器\n\t   *\n\t   * @property overlayContainer\n\t   * @returns {Element|*}\n\t   */\n\t\n\t\n\t  /**\n\t   * 地图渲染器对象;默认渲染方式为canvas方式\n\t   *\n\t   * @method createRenderer\n\t   * @private\n\t   */\n\t  Map.prototype._createRenderer = function _createRenderer() {\n\t    this._renderer = new _canvasrenderer2.default(this.viewport, this);\n\t  };\n\t\n\t  /**\n\t   * 创建浏览器事件的监听器\n\t   *\n\t   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n\t   *\n\t   * @method createBrowserEventHandler\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._createBrowserEventHandler = function _createBrowserEventHandler() {\n\t    this._browserEventHandler = new _browsereventhandler2.default(this, this.viewport);\n\t\n\t    /**\n\t     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n\t     * 并处理浏览器事件\n\t     */\n\t    for (var key in _browserevent2.default) {\n\t      (0, _eventmanager.listen)(this._browserEventHandler, _browserevent2.default[key], this._handleBrowserEvent, this);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle the mouse wheel event\n\t   * @param wheelEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleMouseWheelEvent = function _handleMouseWheelEvent(wheelEvent) {\n\t    var type = wheelEvent.type;\n\t    var browserEvent = new _browserevent2.default(this, wheelEvent, type);\n\t    this._handleBrowserEvent(browserEvent);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param keyboardEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleKeyboardEvent = function _handleKeyboardEvent(keyboardEvent) {\n\t    var type = keyboardEvent.type;\n\t    var browserEvent = new _browserevent2.default(this, keyboardEvent, type);\n\t    this._handleBrowserEvent(browserEvent);\n\t  };\n\t\n\t  /**\n\t   * Handle browser events\n\t   * @param browserEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleBrowserEvent = function _handleBrowserEvent(browserEvent) {\n\t    var cpts = this.components;\n\t    var i = void 0;\n\t\n\t    if (this.dispatchEvent(browserEvent) !== false) {\n\t      for (i = cpts.length - 1; i >= 0; i--) {\n\t        var cpt = cpts[i];\n\t\n\t        if (!cpt.active) {\n\t          continue;\n\t        }\n\t\n\t        var cont = cpt.handleMouseEvent(browserEvent);\n\t\n\t        if (!cont) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 渲染map\n\t   *\n\t   * @method renderFrame\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._renderFrame = function _renderFrame() {\n\t    var size = this.size;\n\t    var view = this.view;\n\t    var frameState = null;\n\t\n\t    var extent = _extentutil.ExtentUtil.createEmpty();\n\t    var viewState = view.getViewState();\n\t    frameState = {\n\t      size: size,\n\t      viewState: viewState,\n\t      pixelRatio: 1,\n\t      extent: extent,\n\t      toPixelTransform: this._toPixelTransform,\n\t      toCoordinateTransform: this._toCoordinateTransform\n\t    };\n\t\n\t    if (frameState) {\n\t      frameState.extent = _extentutil.ExtentUtil.getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, frameState.size, extent);\n\t    }\n\t\n\t    this._frameState = frameState;\n\t    this._renderer.renderFrame(frameState);\n\t  };\n\t\n\t  /**\n\t   * 执行渲染\n\t   *\n\t   * @method render\n\t   */\n\t\n\t\n\t  Map.prototype.render = function render() {\n\t    if (this._animationDelayKey === undefined) {\n\t      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Render map while the view has been changed\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleViewChange = function _handleViewChange() {\n\t    this.render();\n\t    this.dispatchEvent(_eventtype.EventType.VIEW_CHANGED);\n\t  };\n\t\n\t  /**\n\t   * 是否渲染\n\t   *\n\t   * @method isRendered\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Map.prototype.isRendered = function isRendered() {\n\t    return !!this._frameState;\n\t  };\n\t\n\t  /**\n\t   * Size读写器,当前地图的大小\n\t   *\n\t   * @property size\n\t   * @returns {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 用于添加一个Component的方法接口\n\t   *\n\t   * @method addComponents\n\t   * @param cpt {Component} Componnet的一个子类\n\t   */\n\t  Map.prototype.addComponents = function addComponents(cpt) {\n\t    this.components.push(cpt);\n\t    cpt.map = this;\n\t  };\n\t\n\t  /**\n\t   * 添加一个控件到地图中\n\t   * @method addControl\n\t   * @param control\n\t   */\n\t\n\t\n\t  Map.prototype.addControl = function addControl(control) {\n\t    this.controls.push(control);\n\t    control.map = this;\n\t  };\n\t\n\t  /**\n\t   * 添加layer\n\t   *\n\t   * @method addLayer\n\t   * @param layer\n\t   */\n\t\n\t\n\t  Map.prototype.addLayer = function addLayer(layer) {\n\t    this.layers.push(layer);\n\t    layer.map = this;\n\t  };\n\t\n\t  /**\n\t   * 获取当前地图中的矢量图层\n\t   *\n\t   * @method getFeaturesLayer\n\t   * @return {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getFeaturesLayer = function getFeaturesLayer() {\n\t    return this.layers.filter(function (layer) {\n\t      return layer instanceof _featurelayer2.default;\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param overlay\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._addOverlayInternal = function _addOverlayInternal(overlay) {\n\t    var id = overlay.overlayId;\n\t    if (id !== undefined) {\n\t      this._overlayIdIndex[id.toString()] = overlay;\n\t    }\n\t\n\t    overlay.map = this;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * getTargetElement\n\t   * @returns {Object}\n\t   */\n\t\n\t\n\t  Map.prototype.getTargetElement = function getTargetElement() {\n\t    var target = this.target;\n\t    if (target !== undefined) {\n\t      return typeof target === 'string' ? document.getElementById(target) : target;\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 遍历鼠标点位置的所有feature\n\t   *\n\t   * @method forEachFeatureAtPiexl\n\t   * @param piexl {Array}\n\t   * @param callback\n\t   * @param tolerance\n\t   * @returns {eature}\n\t   */\n\t\n\t\n\t  Map.prototype.forEachFeatureAtPiexl = function forEachFeatureAtPiexl(piexl, callback, tolerance) {\n\t    if (!this._frameState) {\n\t      return;\n\t    }\n\t\n\t    var coordinate = this.getCoordinateFromPixel(piexl);\n\t    var hitTolerance = tolerance;\n\t\n\t    var layers = this.getFeaturesLayer();\n\t    var result = null;\n\t    for (var i = 0, ii = layers.length; i < ii; i++) {\n\t      var layer = layers[i];\n\t      if (layer.visible) {\n\t        result = layer.forEachFeatureAtPiexl(this._frameState, coordinate, callback, hitTolerance);\n\t        if (result) {\n\t          return callback(result, layer);\n\t        }\n\t      }\n\t    }\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   * 更新map viewport的大小\n\t   *\n\t   * @method updateSize\n\t   */\n\t\n\t\n\t  Map.prototype.updateSize = function updateSize() {\n\t    var targetElement = this.getTargetElement();\n\t    if (!targetElement) {\n\t      this.size = undefined;\n\t    } else {\n\t      var computedStyle = getComputedStyle(targetElement);\n\t      this.size = [targetElement.offsetWidth - Number.parseFloat(computedStyle['borderLeftWidth']) - Number.parseFloat(computedStyle['paddingLeft']) - Number.parseFloat(computedStyle['paddingRight']) - Number.parseFloat(computedStyle['borderRightWidth']), targetElement.offsetHeight - Number.parseFloat(computedStyle['borderTopWidth']) - Number.parseFloat(computedStyle['paddingTop']) - Number.parseFloat(computedStyle['paddingBottom']) - Number.parseFloat(computedStyle['borderBottomWidth'])];\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取当前视图鼠标的坐标\n\t   *\n\t   * @method getEventPixel\n\t   * @param {Event} event Event.\n\t   * @return {Array}\n\t   * @api stable\n\t   */\n\t\n\t\n\t  Map.prototype.getEventPixel = function getEventPixel(event) {\n\t    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n\t    var viewportPosition = this.viewport.getBoundingClientRect();\n\t    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n\t    var eventPosition = event;\n\t    return [eventPosition.clientX - viewportPosition.left, eventPosition.clientY - viewportPosition.top];\n\t  };\n\t\n\t  /**\n\t   * 把坐标数据转换到标准坐标系中\n\t   *\n\t   * @method getCoordinateFromPixel\n\t   * @param pixelPoint {Array}\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getCoordinateFromPixel = function getCoordinateFromPixel(pixelPoint) {\n\t    // console.log('转换到标准坐标')\n\t    var frameState = this._frameState;\n\t    if (!frameState) {\n\t      return null;\n\t    } else {\n\t      return _transform.Transform.apply(frameState.toCoordinateTransform, pixelPoint.slice());\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n\t   * projection and returns the corresponding pixel.\n\t   *\n\t   * getPixelFromCoordinate\n\t   * @param coordinate\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getPixelFromCoordinate = function getPixelFromCoordinate(coordinate) {\n\t    var frameState = this._frameState;\n\t    if (!frameState) {\n\t      return null;\n\t    } else {\n\t      return _transform.Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2));\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 以地图中心点放大\n\t   * @return {[type]} [description]\n\t   */\n\t\n\t\n\t  Map.prototype.zoomIn = function zoomIn() {\n\t    this._zoomByDelta(this._delta);\n\t  };\n\t\n\t  /**\n\t   * 以地图中心点缩小\n\t   * @return {[type]} [description]\n\t   */\n\t\n\t\n\t  Map.prototype.zoomOut = function zoomOut() {\n\t    this._zoomByDelta(-this._delta);\n\t  };\n\t\n\t  /**\n\t   * @param {number} delta Zoom delta.\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._zoomByDelta = function _zoomByDelta(delta) {\n\t    var view = this.view;\n\t    if (!view) {\n\t      return;\n\t    }\n\t\n\t    var currentResolution = view.resolution;\n\t    if (currentResolution) {\n\t      var newResolution = view.constrainResolution(currentResolution, delta);\n\t      view.resolution = newResolution;\n\t    }\n\t  };\n\t\n\t  Map.prototype.switchToOverview = function switchToOverview() {\n\t    var view = this.view;\n\t    if (view) {\n\t      var orignalCenter = view.originalCenter;\n\t      var originalResolution = view.originalResolution;\n\t\n\t      view.center = orignalCenter;\n\t      view.resolution = originalResolution;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Parse the options passed inner\n\t   * parseOptionsInner\n\t   * @param options\n\t   * @static\n\t   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n\t   */\n\t\n\t\n\t  Map.parseOptionsInner = function parseOptionsInner() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t    var rendererClass = _canvasrenderer2.default;\n\t\n\t    var values = {};\n\t\n\t    values['view'] = options.view !== undefined ? options.view : new _view2.default();\n\t    values['target'] = options.target;\n\t    values['layers'] = options.layers !== undefined ? options.layers : [];\n\t\n\t    var components = void 0;\n\t    if (options.components) {\n\t      components = options.components;\n\t    } else {\n\t      components = (0, _componentdefaults.componentsDefaults)();\n\t    }\n\t\n\t    var controls = void 0;\n\t    if (options.controls) {\n\t      controls = options.controls;\n\t    } else {\n\t      controls = (0, _controldefaults.controlDefaults)();\n\t    }\n\t\n\t    var overlays = void 0;\n\t    if (options.overlays !== undefined) {\n\t      if (Array.isArray(options.overlays)) {\n\t        overlays = [].concat(_toConsumableArray(options.overlays));\n\t      }\n\t    } else {\n\t      overlays = [];\n\t    }\n\t\n\t    return {\n\t      rendererClass: rendererClass,\n\t      components: components,\n\t      controls: controls,\n\t      values: values,\n\t      overlays: overlays\n\t    };\n\t  };\n\t\n\t  _createClass(Map, [{\n\t    key: 'overlayContainer',\n\t    get: function get() {\n\t      return this._overlayContainer;\n\t    }\n\t\n\t    /**\n\t     * 获取overlay容器的结束事件\n\t     *\n\t     * @property overlayContainerStopEvent\n\t     * @returns {Element|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'overlayContainerStopEvent',\n\t    get: function get() {\n\t      return this._overlayContainerStopEvent;\n\t    }\n\t\n\t    /**\n\t     * 获取viewport\n\t     *\n\t     * @property viewport\n\t     * @returns {Element|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'viewport',\n\t    get: function get() {\n\t      return this._viewport;\n\t    }\n\t  }, {\n\t    key: 'size',\n\t    get: function get() {\n\t      return this._size;\n\t    },\n\t    set: function set(value) {\n\t      this._size = value;\n\t    }\n\t\n\t    /**\n\t     * 获取组件\n\t     *\n\t     * @method components\n\t     * @returns {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'components',\n\t    get: function get() {\n\t      return this._components;\n\t    }\n\t\n\t    /**\n\t     * map中控件集合\n\t     * @property controls\n\t     * @type {[]}\n\t     */\n\t\n\t  }, {\n\t    key: 'controls',\n\t    get: function get() {\n\t      return this._controls;\n\t    }\n\t\n\t    /**\n\t     * 当前存储在Map中的图层集合\n\t     *\n\t     * @property layers\n\t     * @type {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'layers',\n\t    get: function get() {\n\t      return this._layers;\n\t    },\n\t    set: function set(value) {\n\t      var _this2 = this;\n\t\n\t      if (Array.isArray(value)) {\n\t        value.forEach(function (layer) {\n\t          _this2.addLayer(layer);\n\t        });\n\t      }\n\t    }\n\t\n\t    /**\n\t     * target 读写器\n\t     *\n\t     * @property target\n\t     * @type\n\t     */\n\t\n\t  }, {\n\t    key: 'target',\n\t    get: function get() {\n\t      return this._target;\n\t    },\n\t    set: function set(value) {\n\t      this._target = value;\n\t      var targetElement = document.getElementById(this._target);\n\t      targetElement.appendChild(this.viewport);\n\t\n\t      // 监听键盘点击和抬起事件\n\t      (0, _eventmanager.listen)(document, _browserevent2.default.KEYDOWN, this._handleKeyboardEvent, this), (0, _eventmanager.listen)(document, _browserevent2.default.KEYPRESS, this._handleKeyboardEvent, this);\n\t\n\t      // 监听浏览器窗口变化，并做自适应\n\t      var handleRize = this.updateSize.bind(this);\n\t      window.addEventListener(_eventtype.EventType.RESIZE, handleRize, false);\n\t\n\t      this.updateSize();\n\t      this.render();\n\t    }\n\t  }]);\n\t\n\t  return Map;\n\t}(_baseobject2.default);\n\t\n\texports.default = Map;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 75 */\n/*!*****************************!*\\\n  !*** ./src/meek/overlay.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _rendereventtype = __webpack_require__(/*! ../renderer/rendereventtype */ 51);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/26.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Overlay类提供一个可以漂浮在map上的容器，\n\t * 凡是需要有和地图交互的表单，必须使用该容器承载\n\t *\n\t * @class Overlay\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Overlay = function (_BaseObject) {\n\t  _inherits(Overlay, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function Overlay() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Overlay);\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._element = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._map = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._offset = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._position = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._positioning = undefined;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|string|undefined}\n\t     */\n\t    _this._overlay = options.id;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._insertFirst = options.insertFirst !== undefined ? options.insertFirst : true;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Element}\n\t     */\n\t    _this._element = document.createElement('DIV');\n\t    _this._element.className = 'dt-overlay-container dt-selectable';\n\t    _this._element.style.position = 'absolute';\n\t\n\t    /**\n\t     * @protected\n\t     * @type {boolean}\n\t     */\n\t    _this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._autoPanAnimation = options.autoPanAnimation || {};\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._autoPanMargin = options.autoPanMargin !== undefined ? options.autoPanMargin : 20;\n\t\n\t    /**\n\t     * @private\n\t     * @type {{bottom_: string,\n\t    *         left_: string,\n\t    *         right_: string,\n\t    *         top_: string,\n\t    *         visible: boolean}}\n\t     */\n\t    _this._rendered = {\n\t      _bottom: '',\n\t      _left: '',\n\t      _right: '',\n\t      _top: '',\n\t      _visible: true\n\t\n\t      /**\n\t       * @private\n\t       * @type {EventsKey}\n\t       */\n\t    };_this._mapPostrenderListenerKey = null;\n\t\n\t    if (options.element !== undefined) {\n\t      _this.popupEelement = options.element;\n\t    }\n\t\n\t    _this.offset = options.offset !== undefined ? options.offset : [0, 0];\n\t\n\t    _this.positioning = options.positioning !== undefined ? options.positioning : OverlayPositioning.TOP_LEFT;\n\t\n\t    if (options.position !== undefined) {\n\t      _this.position = options.position;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 执行渲染\n\t   *\n\t   * @method render\n\t   */\n\t\n\t\n\t  Overlay.prototype.render = function render() {\n\t    this.updatePixelPosition();\n\t  };\n\t\n\t  /**\n\t   * 更新鼠标点的位置信息\n\t   *\n\t   * @method updatePixelPosition\n\t   */\n\t\n\t\n\t  Overlay.prototype.updatePixelPosition = function updatePixelPosition() {\n\t    var map = this.map;\n\t    if (map) {\n\t      var position = this.position;\n\t      if (!map || !map.isRendered() || !position) {\n\t        this.setVisible(false);\n\t        return;\n\t      }\n\t\n\t      var pixel = map.getPixelFromCoordinate(position);\n\t      var mapSize = map.size;\n\t      this.updateRenderedPosition(pixel, mapSize);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 更新渲染视图位置\n\t   *\n\t   * @param pixel {Array}\n\t   * @param mapSize {Number}\n\t   */\n\t\n\t\n\t  Overlay.prototype.updateRenderedPosition = function updateRenderedPosition(pixel, mapSize) {\n\t    var style = this._element.style;\n\t    var offset = this.offset;\n\t    var positioning = this.positioning;\n\t\n\t    this.setVisible(true);\n\t\n\t    var offsetX = offset[0];\n\t    var offsetY = offset[1];\n\t    if (positioning == OverlayPositioning.BOTTOM_RIGHT || positioning == OverlayPositioning.CENTER_RIGHT || positioning == OverlayPositioning.TOP_RIGHT) {\n\t      if (this._rendered.left_ !== '') {\n\t        this._rendered.left_ = style.left = '';\n\t      }\n\t\n\t      var right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n\t      if (this._rendered.right_ != right) {\n\t        this._rendered.right_ = style.right = right;\n\t      }\n\t    } else {\n\t      if (this._rendered.right_ !== '') {\n\t        this._rendered.right_ = style.right = '';\n\t      }\n\t\n\t      if (positioning == OverlayPositioning.BOTTOM_CENTER || positioning == OverlayPositioning.CENTER_CENTER || positioning == OverlayPositioning.TOP_CENTER) {\n\t        offsetX -= this._element.offsetWidth / 2;\n\t      }\n\t\n\t      var left = Math.round(pixel[0] + offsetX) + 'px';\n\t      if (this._rendered.left_ != left) {\n\t        this._rendered.left_ = style.left = left;\n\t      }\n\t    }\n\t    if (positioning == OverlayPositioning.BOTTOM_LEFT || positioning == OverlayPositioning.BOTTOM_CENTER || positioning == OverlayPositioning.BOTTOM_RIGHT) {\n\t      if (this._rendered.top_ !== '') {\n\t        this._rendered.top_ = style.top = '';\n\t      }\n\t\n\t      var bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n\t      if (this._rendered.bottom_ != bottom) {\n\t        this._rendered.bottom_ = style.bottom = bottom;\n\t      }\n\t    } else {\n\t      if (this._rendered.bottom_ !== '') {\n\t        this._rendered.bottom_ = style.bottom = '';\n\t      }\n\t\n\t      if (positioning == OverlayPositioning.CENTER_LEFT || positioning == OverlayPositioning.CENTER_CENTER || positioning == OverlayPositioning.CENTER_RIGHT) {\n\t        offsetY -= this._element.offsetHeight / 2;\n\t      }\n\t\n\t      var top = Math.round(pixel[1] + offsetY) + 'px';\n\t      if (this._rendered.top_ != top) {\n\t        this._rendered.top_ = style.top = top;\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 设置浮云框是否可见\n\t   *\n\t   * @method setVisible\n\t   * @param visible\n\t   */\n\t\n\t\n\t  Overlay.prototype.setVisible = function setVisible(visible) {\n\t    if (this._rendered.visible !== visible) {\n\t      this._element.style.display = visible ? '' : 'none';\n\t      this._rendered.visible = visible;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 表单自动适应视图范围\n\t   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n\t   * 可视范围内\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  Overlay.prototype._panIntoView = function _panIntoView() {\n\t    var map = this.map;\n\t\n\t    if (!map || !map.getTargetElement()) {\n\t      return;\n\t    }\n\t\n\t    var mapRect = this._getRect(map.getTargetElement(), map.size);\n\t    var element = this.popupEelement;\n\t\n\t    if (element.clientHeight === 0 && element.clientWidth === 0) {\n\t      return;\n\t    }\n\t    var overlayRect = this._getRect(element, [(0, _domutil.outerWidth)(element), (0, _domutil.outerHeight)(element)]);\n\t\n\t    var margin = this._autoPanMargin;\n\t    if (!_extentutil.ExtentUtil.containsExtent(mapRect, overlayRect)) {\n\t      // the overlay is not completely inside the viewport, so pan the map\n\t      var offsetLeft = overlayRect[0] - mapRect[0];\n\t      var offsetRight = mapRect[2] - overlayRect[2];\n\t      var offsetTop = overlayRect[1] - mapRect[1];\n\t      var offsetBottom = mapRect[3] - overlayRect[3];\n\t\n\t      var delta = [0, 0];\n\t      if (offsetLeft < 0) {\n\t        // move map to the left\n\t        delta[0] = offsetLeft - margin;\n\t      } else if (offsetRight < 0) {\n\t        // move map to the right\n\t        delta[0] = Math.abs(offsetRight) + margin;\n\t      }\n\t\n\t      if (offsetTop < 0) {\n\t        // move map up\n\t        delta[1] = offsetTop - margin;\n\t      } else if (offsetBottom < 0) {\n\t        // move map down\n\t        delta[1] = Math.abs(offsetBottom) + margin;\n\t      }\n\t\n\t      if (delta[0] !== 0 || delta[1] !== 0) {\n\t        var center = map.view.center;\n\t        var centerPx = map.getPixelFromCoordinate(center);\n\t        var newCenterPx = [centerPx[0] + delta[0], centerPx[1] + delta[1]];\n\t\n\t        map.view.center = map.getCoordinateFromPixel(newCenterPx);\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param element\n\t   * @param size\n\t   * @return {*[]}\n\t   * @private\n\t   */\n\t\n\t\n\t  Overlay.prototype._getRect = function _getRect(element, size) {\n\t    var box = element.getBoundingClientRect();\n\t    var offsetX = box.left + window.pageXOffset;\n\t    var offsetY = box.top + window.pageYOffset;\n\t    return [offsetX, offsetY, offsetX + size[0], offsetY + size[1]];\n\t  };\n\t\n\t  /**\n\t   * 获取当前浮云框对象的 ID\n\t   *\n\t   * @property overlayId\n\t   * @type {number|string|undefined}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t  Overlay.prototype._setElement = function _setElement() {\n\t    (0, _domutil.removeChildren)(this._element);\n\t    var pelement = this.popupEelement;\n\t    if (pelement) {\n\t      this._element.appendChild(pelement);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @property map\n\t   * @type {mk.map}\n\t   */\n\t\n\t\n\t  _createClass(Overlay, [{\n\t    key: 'overlayId',\n\t    get: function get() {\n\t      return this._overlayId;\n\t    }\n\t\n\t    /**\n\t     * 获取表单元素\n\t     *\n\t     * @property popupEelement\n\t     * @type {DOM}\n\t     */\n\t\n\t  }, {\n\t    key: 'popupEelement',\n\t    get: function get() {\n\t      return this._popupEelement;\n\t    },\n\t    set: function set(value) {\n\t      this._popupEelement = value;\n\t\n\t      this._setElement();\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      this._map = value;\n\t      if (this._map) {\n\t        var map = this._map;\n\t        this._mapPostrenderListenerKey = (0, _eventmanager.listen)(map, _rendereventtype.RenderEventType.POSTRENDER, this.render, this);\n\t        this.updatePixelPosition();\n\t        var container = this._stopEvent ? map.overlayContainerStopEvent : map.overlayContainer;\n\t        if (this._insertFirst) {\n\t          container.insertBefore(this._element, container.childNodes[0] || null);\n\t        } else {\n\t          container.appendChild(this._element);\n\t        }\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 偏移量读写器\n\t     *\n\t     * @property offset\n\t     * @return {*|undefined}\n\t     */\n\t\n\t  }, {\n\t    key: 'offset',\n\t    get: function get() {\n\t      return this._offset;\n\t    },\n\t    set: function set(value) {\n\t      this._offset = value;\n\t      this.updatePixelPosition();\n\t    }\n\t\n\t    /**\n\t     * 鼠标点位置读写器\n\t     *\n\t     * @property position\n\t     * @return {undefined|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'position',\n\t    get: function get() {\n\t      return this._position;\n\t    },\n\t    set: function set(value) {\n\t      this._position = value;\n\t\n\t      this.updatePixelPosition();\n\t\n\t      if (this._position && this.autoPan) {\n\t        this._panIntoView();\n\t      }\n\t    }\n\t\n\t    /**\n\t     *\n\t     *\n\t     * positioning\n\t     * @return {undefined|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'positioning',\n\t    get: function get() {\n\t      return this._positioning;\n\t    },\n\t    set: function set(value) {\n\t      this._positioning = value;\n\t      this.updatePixelPosition();\n\t    }\n\t  }]);\n\t\n\t  return Overlay;\n\t}(_baseobject2.default);\n\t\n\texports.default = Overlay;\n\t\n\t\n\tvar OverlayPositioning = {\n\t  BOTTOM_LEFT: 'bottom-left',\n\t  BOTTOM_CENTER: 'bottom-center',\n\t  BOTTOM_RIGHT: 'bottom-right',\n\t  CENTER_LEFT: 'center-left',\n\t  CENTER_CENTER: 'center-center',\n\t  CENTER_RIGHT: 'center-right',\n\t  TOP_LEFT: 'top-left',\n\t  TOP_CENTER: 'top-center',\n\t  TOP_RIGHT: 'top-right'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 76 */\n/*!***********************************************!*\\\n  !*** ./src/renderer/canvas/canvasrenderer.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _singleimagelayer = __webpack_require__(/*! ../../lyr/singleimagelayer */ 47);\n\t\n\tvar _singleimagelayer2 = _interopRequireDefault(_singleimagelayer);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _renderer = __webpack_require__(/*! ../renderer */ 83);\n\t\n\tvar _renderer2 = _interopRequireDefault(_renderer);\n\t\n\tvar _featurelayerrenderer = __webpack_require__(/*! ../canvas/featurelayerrenderer */ 77);\n\t\n\tvar _featurelayerrenderer2 = _interopRequireDefault(_featurelayerrenderer);\n\t\n\tvar _imagelayerrenderer = __webpack_require__(/*! ../canvas/imagelayerrenderer */ 78);\n\t\n\tvar _imagelayerrenderer2 = _interopRequireDefault(_imagelayerrenderer);\n\t\n\tvar _domutil = __webpack_require__(/*! ../../utils/domutil */ 18);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _rendereventtype = __webpack_require__(/*! ../rendereventtype */ 51);\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 28);\n\t\n\tvar _renderevent = __webpack_require__(/*! ../renderevent */ 84);\n\t\n\tvar _renderevent2 = _interopRequireDefault(_renderevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * 图形渲染调度器\n\t *\n\t */\n\tvar CanvasRenderer = function (_Renderer) {\n\t  _inherits(CanvasRenderer, _Renderer);\n\t\n\t  function CanvasRenderer(container, map) {\n\t    _classCallCheck(this, CanvasRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Renderer.call(this, container, map));\n\t\n\t    _this._context = null;\n\t    _this._canvas = null;\n\t\n\t    _this._rendererVisible = true;\n\t    _this._layerRenderers = [];\n\t    _this._transform = _transform.Transform.create();\n\t\n\t    _this._addToContainer(container);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Add the canvas dom to the container\n\t   * @param container\n\t   * @private\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype._addToContainer = function _addToContainer(container) {\n\t    /**\n\t     * 创建CANVAS元素，并将其添加到container中\n\t     * 该canvas层作为图形绘制层\n\t     */\n\t    var _context = this.context;\n\t    this._canvas = _context.canvas;\n\t    this._canvas.style.width = '100%';\n\t    this._canvas.style.height = '100%';\n\t    this._canvas.className = 'dt-unselectable';\n\t    container.insertBefore(this._canvas, container.childNodes[0] || null);\n\t  };\n\t\n\t  /**\n\t   * Render frame\n\t   * @param frameState\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.renderFrame = function renderFrame(frameState) {\n\t    var _this2 = this;\n\t\n\t    if (this.map === null) {\n\t      return;\n\t    }\n\t\n\t    if (!frameState) {\n\t      if (this._rendererVisible) {\n\t        this._canvas.style.display = 'none';\n\t        this._rendererVisible = false;\n\t\n\t        return;\n\t      }\n\t    }\n\t\n\t    var context = this.context;\n\t\n\t    var canvasWidth = frameState.size[0];\n\t    var canvasHeight = frameState.size[1];\n\t\n\t    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n\t      this._canvas.width = canvasWidth;\n\t      this._canvas.height = canvasHeight;\n\t    } else {\n\t      // context.clearRect(0,0,canvasWidth,canvasHeight)\n\t\n\t      this._canvas.width = canvasWidth;\n\t      this._canvas.height = canvasHeight;\n\t    }\n\t\n\t    // context.translate(0.5, 0.5)\n\t\n\t    var layers = this.map.layers;\n\t\n\t    // layers rendered in order\n\t    (0, _array.stableSort)(layers, this.sortByZIndex);\n\t\n\t    // 更新转化运算矩阵\n\t    this.updateTransform(frameState);\n\t\n\t    this._dispatchComposeEvent(_rendereventtype.RenderEventType.PRERENDER, frameState);\n\t\n\t    layers.forEach(function (layer) {\n\t      if (layer.visible) {\n\t        var layerRender = _this2.getLayerRenderer(layer);\n\t\n\t        if (layerRender.prepareFrame(frameState)) {\n\t          layerRender.composeFrame(frameState, context);\n\t        }\n\t      }\n\t    });\n\t\n\t    this._dispatchComposeEvent(_rendereventtype.RenderEventType.POSTRENDER, frameState);\n\t  };\n\t\n\t  /**\n\t   * Get the layer renderer by the params layer object\n\t   * @param layer\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.getLayerRenderer = function getLayerRenderer(layer) {\n\t    var layerKey = layer.id.toString();\n\t    // 应用层缓存\n\t    if (layerKey in this._layerRenderers) {\n\t      return this._layerRenderers[layerKey];\n\t    } else {\n\t      var layerRenderer = this.createLayerRenderer(layer);\n\t      this._layerRenderers[layerKey] = layerRenderer;\n\t      return layerRenderer;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Create the layer renderer\n\t   * @param layer\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.createLayerRenderer = function createLayerRenderer(layer) {\n\t    if (layer instanceof _singleimagelayer2.default) {\n\t      return new _imagelayerrenderer2.default(layer, this.context);\n\t    } else if (layer instanceof _featurelayer2.default) {\n\t      return new _featurelayerrenderer2.default(layer, this.context, this.map);\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Update the transform\n\t   * @param frameState\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.updateTransform = function updateTransform(frameState) {\n\t    var viewState = frameState.viewState;\n\t    var coordinateToPixelTransform = frameState.toPixelTransform;\n\t    var pixelToCoordinateTransform = frameState.toCoordinateTransform;\n\t    var size = frameState.size;\n\t    var resolution = viewState.resolution;\n\t    var center = viewState.center;\n\t    var rotation = viewState.rotation;\n\t\n\t    _transform.Transform.compose(coordinateToPixelTransform, size[0] / 2, size[1] / 2, 1 / resolution, 1 / resolution, -rotation, -center[0], -center[1]);\n\t\n\t    _transform.Transform.invert(_transform.Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param state1\n\t   * @param state2\n\t   * @returns {number}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.sortByZIndex = function sortByZIndex(state1, state2) {\n\t    return state1.zIndex - state2.zIndex;\n\t  };\n\t\n\t  /**\n\t   * \n\t   * @private\n\t   */\n\t  CanvasRenderer.prototype._dispatchComposeEvent = function _dispatchComposeEvent(type, frameState) {\n\t    var map = this.map;\n\t    var context = this.context;\n\t    if (map.hasListener(type)) {\n\t\n\t      // const transform = this.getTransform(frameState)\n\t\n\t      var composeEvent = new _renderevent2.default(type, frameState, context, null);\n\t\n\t      map.dispatchEvent(composeEvent);\n\t    }\n\t  };\n\t\n\t  _createClass(CanvasRenderer, [{\n\t    key: 'canvas',\n\t    get: function get() {\n\t      return this._canvas;\n\t    }\n\t  }, {\n\t    key: 'context',\n\t    get: function get() {\n\t      if (!this._context) {\n\t        this._context = (0, _domutil.createCanvasContext2D)();\n\t      }\n\t\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return CanvasRenderer;\n\t}(_renderer2.default);\n\t\n\texports.default = CanvasRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 77 */\n/*!*****************************************************!*\\\n  !*** ./src/renderer/canvas/featurelayerrenderer.js ***!\n  \\*****************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _layerrenderer = __webpack_require__(/*! ../../renderer/canvas/layerrenderer */ 50);\n\t\n\tvar _layerrenderer2 = _interopRequireDefault(_layerrenderer);\n\t\n\tvar _pointrender = __webpack_require__(/*! ../render/pointrender */ 80);\n\t\n\tvar _pointrender2 = _interopRequireDefault(_pointrender);\n\t\n\tvar _linerender = __webpack_require__(/*! ../render/linerender */ 79);\n\t\n\tvar _linerender2 = _interopRequireDefault(_linerender);\n\t\n\tvar _polygonrender = __webpack_require__(/*! ../render/polygonrender */ 81);\n\t\n\tvar _polygonrender2 = _interopRequireDefault(_polygonrender);\n\t\n\tvar _textrender = __webpack_require__(/*! ../render/textrender */ 82);\n\t\n\tvar _textrender2 = _interopRequireDefault(_textrender);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar FeatureLayerRenderer = function (_LayerRenderer) {\n\t  _inherits(FeatureLayerRenderer, _LayerRenderer);\n\t\n\t  function FeatureLayerRenderer(layer, context, map) {\n\t    _classCallCheck(this, FeatureLayerRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _LayerRenderer.call(this, layer, context));\n\t\n\t    _this._map = map;\n\t\n\t    /**\n\t     *\n\t     * @type {Map}\n\t     * @private\n\t     */\n\t    _this._geometryRenderGroup = new Map();\n\t\n\t    /**\n\t     *\n\t     * @type {TextRender}\n\t     * @private\n\t     */\n\t    _this._textRender = new _textrender2.default(_this.context);\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._maxExtent = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._renderFeatures = [];\n\t\n\t    /**\n\t     *\n\t     * @type {NaN}\n\t     * @private\n\t     */\n\t    _this._renderResolution = Number.NaN;\n\t\n\t    /**\n\t     *\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity];\n\t\n\t    /**\n\t     *\n\t     * @type {NaN}\n\t     * @private\n\t     */\n\t    _this._renderRevision = NaN;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._cacheableThisTime = true;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *  Get a renderer by geometry type\n\t   * @param geometry\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._getGeometryRender = function _getGeometryRender(geometry) {\n\t    var type = geometry.geometryType;\n\t\n\t    if (!this._geometryRenderGroup.has(type)) {\n\t      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context));\n\t    }\n\t\n\t    return this._geometryRenderGroup.get(type);\n\t  };\n\t\n\t  FeatureLayerRenderer.prototype._renderFeaturesInOrder = function _renderFeaturesInOrder(features) {\n\t    if (features === null || features === undefined) {\n\t      return features;\n\t    }\n\t\n\t    if (features.length === 0) {\n\t      return features;\n\t    }\n\t  };\n\t\n\t  FeatureLayerRenderer.prototype._calculaterFeaturesFontSize = function _calculaterFeaturesFontSize(features) {\n\t    var view = this._map.view;\n\t    var originResolution = view._originalResolution;\n\t    var resolutions = view._resolutions;\n\t    var resolution = view._resolution;\n\t\n\t    if (!resolutions) {\n\t      return;\n\t    }\n\t\n\t    var oriIndex = resolutions.findIndex(function (r) {\n\t      return r == originResolution;\n\t    });\n\t    var curIndex = resolutions.findIndex(function (r) {\n\t      return r == resolution;\n\t    });\n\t\n\t    var deep = curIndex - oriIndex;\n\t    if (deep <= 0) {\n\t      deep = 0;\n\t    }\n\t\n\t    var font = 12 + deep * 2;\n\t    if (font >= 24) {\n\t      font = 24;\n\t    }\n\t\n\t    // const fontStr = `normal ${font}px Arial`\n\t\n\t    features.forEach(function (feature) {\n\t      var style = feature.style[0];\n\t      var fontStr = style.textStyle.font;\n\t\n\t      var boldFont = fontStr.split(' ')[0] + ' ' + font + 'px Arial';\n\t\n\t      style.textStyle.font = boldFont;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 1、对渲染对象需要做切割 （当前范围内）\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.prepareFrame = function prepareFrame(frameState) {\n\t    var layer = this.layer;\n\t    var frameExtent = frameState.extent;\n\t    var viewState = frameState.viewState;\n\t    var resolution = viewState.resolution;\n\t    var layerRevision = layer.revision;\n\t    var featureLayerRenderBuffer = layer.renderBuffer;\n\t\n\t    var renderExtent = _extentutil.ExtentUtil.buffer(frameExtent, featureLayerRenderBuffer * resolution);\n\t\n\t    if (this._renderResolution === resolution && this._renderRevision === layerRevision && _extentutil.ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n\t      this._cacheableThisTime = true;\n\t\n\t      // return true\n\t    }\n\t\n\t    // 加载当前屏的图形\n\t    var features = this.layer.loadFeature(renderExtent);\n\t\n\t    this._cacheableThisTime = false;\n\t    this._renderFeatures = features;\n\t    this._maxExtent = renderExtent;\n\t    this._renderResolution = resolution;\n\t    this._renderExtent = renderExtent;\n\t    this._renderRevision = layerRevision;\n\t\n\t    if (features.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.composeFrame = function composeFrame(frameStateOpt, context) {\n\t    var _this2 = this;\n\t\n\t    var frameState = frameStateOpt;\n\t    var viewState = frameState.viewState;\n\t    var layer = this.layer;\n\t    var features = this._renderFeatures;\n\t    var resolution = viewState.resolution;\n\t\n\t    var transform = this.getTransform(frameState, 0);\n\t\n\t    this.preCompose(context, frameState, transform);\n\t\n\t    // Clip the current extent so that the parts of geometries\n\t    // will not be rendered\n\t    this._clipExtent(transform, context);\n\t\n\t    features.forEach(function (feature) {\n\t      var renderStyle = void 0;\n\t\n\t      if (feature.style) {\n\t        renderStyle = feature.style;\n\t      } else {\n\t        var styleFunction = layer.styleFunction;\n\t        if (styleFunction) {\n\t          renderStyle = styleFunction(feature, resolution);\n\t\n\t          // 应用图层样式\n\t          feature.style = _this2._cloneRenderStyle(renderStyle);\n\t        }\n\t      }\n\t\n\t      var geomertyRender = _this2._getGeometryRender(feature.geometry);\n\t      _this2._resetRender(geomertyRender);\n\t      geomertyRender.render(feature, renderStyle, transform);\n\t\n\t      /**\n\t       * Render text\n\t       */\n\t      if (feature.textDisplay) {\n\t        _this2._calculaterFeaturesFontSize([feature]);\n\t        _this2._textRender.render(feature, feature.style, transform);\n\t      }\n\t    });\n\t\n\t    context.restore();\n\t\n\t    this.postCompose(context, frameState, transform);\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param renderStyle\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._cloneRenderStyle = function _cloneRenderStyle(renderStyle) {\n\t    if (renderStyle) {\n\t      var newStyle = [];\n\t      renderStyle.forEach(function (rs) {\n\t        newStyle.push(rs.clone());\n\t      });\n\t\n\t      return newStyle;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Clip the context\n\t   * @param transform\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._clipExtent = function _clipExtent(transform, context) {\n\t    var flatClipCoords = this.getClipCoords(transform);\n\t\n\t    context.save();\n\t    context.beginPath();\n\t    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n\t    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n\t    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n\t    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n\t    context.clip();\n\t  };\n\t\n\t  /**\n\t   * Get clip coordinates\n\t   * @param transform\n\t   * @returns {[*,*,*,*,*,*,*,*]}\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.getClipCoords = function getClipCoords(transform) {\n\t    var maxExtent = this._maxExtent;\n\t    var minX = maxExtent[0];\n\t    var minY = maxExtent[1];\n\t    var maxX = maxExtent[2];\n\t    var maxY = maxExtent[3];\n\t    var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n\t    _transform.Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n\t    return flatClipCoords;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param geomertyRender\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._resetRender = function _resetRender(geomertyRender) {\n\t    if (!this._cacheableThisTime) {\n\t      geomertyRender.resetRenderOption();\n\t    }\n\t  };\n\t\n\t  FeatureLayerRenderer.prototype.preCompose = function preCompose() {};\n\t\n\t  FeatureLayerRenderer.prototype.postCompose = function postCompose() {};\n\t\n\t  return FeatureLayerRenderer;\n\t}(_layerrenderer2.default);\n\t\n\texports.default = FeatureLayerRenderer;\n\t\n\t\n\tFeatureLayerRenderer.GeometryRender = {};\n\t\n\tFeatureLayerRenderer.GeometryRender['point'] = _pointrender2.default;\n\tFeatureLayerRenderer.GeometryRender['line'] = _linerender2.default;\n\tFeatureLayerRenderer.GeometryRender['polygon'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['multi_polygon'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['extent'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['parallelogram'] = _polygonrender2.default;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 78 */\n/*!***************************************************!*\\\n  !*** ./src/renderer/canvas/imagelayerrenderer.js ***!\n  \\***************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _layerrenderer = __webpack_require__(/*! ../../renderer/canvas/layerrenderer */ 50);\n\t\n\tvar _layerrenderer2 = _interopRequireDefault(_layerrenderer);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ImageLayerRenderer = function (_LayerRenderer) {\n\t  _inherits(ImageLayerRenderer, _LayerRenderer);\n\t\n\t  function ImageLayerRenderer(layer) {\n\t    _classCallCheck(this, ImageLayerRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _LayerRenderer.call(this, layer));\n\t\n\t    _this._image = null;\n\t\n\t    _this._imageTransform = _transform.Transform.create();\n\t\n\t    _this.coordinateToCanvasPixelTransform = _transform.Transform.create();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @inheritDoc\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param layerState\n\t   * @returns {boolean}\n\t   */\n\t  ImageLayerRenderer.prototype.prepareFrame = function prepareFrame(frameState) {\n\t    var pixelRatio = frameState.pixelRatio;\n\t    var size = frameState.size;\n\t    var viewState = frameState.viewState;\n\t    var viewCenter = viewState.center;\n\t    var viewResolution = viewState.resolution;\n\t\n\t    var image = void 0;\n\t    var imageLayer = this.layer;\n\t    var renderedExtent = frameState.extent;\n\t\n\t    if (!_extentutil.ExtentUtil.isEmpty(renderedExtent)) {\n\t      var projection = viewState.projection;\n\t\n\t      image = imageLayer.getImageInternal(renderedExtent, viewResolution, pixelRatio, projection);\n\t\n\t      // Load the image\n\t      if (image) {\n\t        var loaded = this.loadImage(image);\n\t        if (loaded) {\n\t          this._image = image;\n\t        }\n\t      }\n\t    }\n\t\n\t    if (this._image) {\n\t      image = this._image;\n\t      var imageExtent = image.extent;\n\t      var imageResolution = image.resolution;\n\t      var imagePixelRatio = image.pixelRatio;\n\t      var scale = pixelRatio * imageResolution / (viewResolution * imagePixelRatio);\n\t\n\t      var transform = _transform.Transform.compose(this.imageTransform, pixelRatio * size[0] / 2, pixelRatio * size[1] / 2, scale, -scale, 0, imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution, imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n\t\n\t      _transform.Transform.compose(this.coordinateToCanvasPixelTransform, pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5], pixelRatio / viewResolution, -pixelRatio / viewResolution, 0, -viewCenter[0], -viewCenter[1]);\n\t    }\n\t\n\t    return !!this.image;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param layerState\n\t   * @param context\n\t   */\n\t\n\t\n\t  ImageLayerRenderer.prototype.composeFrame = function composeFrame(frameState, context) {\n\t    this.preCompose(context, frameState);\n\t    var image = this.image;\n\t    if (image) {\n\t      // clipped rendering if layer extent is set\n\t      var extent = undefined;\n\t      var clipped = extent !== undefined && !_extentutil.ExtentUtil.containsExtent(extent, frameState.extent) && _extentutil.ExtentUtil.intersects(extent, frameState.extent);\n\t\n\t      if (clipped) {\n\t        this.clip(context, frameState, extent);\n\t      }\n\t\n\t      var imageLayer = this.layer;\n\t      var imageTransform = this.imageTransform;\n\t      var alpha = context.globalAlpha;\n\t      context.globalAlpha = imageLayer.opacity;\n\t\n\t      var dx = imageTransform[4];\n\t      var dy = imageTransform[5];\n\t      var dw = image.width * imageTransform[0];\n\t      var dh = image.height * imageTransform[3];\n\t      context.imageSmoothingEnabled = false;\n\t      context.drawImage(image, 0, 0, +image.width, +image.height, Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n\t\n\t      context.globalAlpha = alpha;\n\t\n\t      if (clipped) {\n\t        context.restore();\n\t      }\n\t    }\n\t\n\t    this.postCompose(context, frameState);\n\t  };\n\t\n\t  _createClass(ImageLayerRenderer, [{\n\t    key: 'image',\n\t    get: function get() {\n\t      return !this._image ? null : this._image.getDomImage();\n\t    }\n\t\n\t    /**\n\t     * @inheritDoc\n\t     */\n\t\n\t  }, {\n\t    key: 'imageTransform',\n\t    get: function get() {\n\t      return this._imageTransform;\n\t    }\n\t  }]);\n\t\n\t  return ImageLayerRenderer;\n\t}(_layerrenderer2.default);\n\t\n\texports.default = ImageLayerRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 79 */\n/*!*******************************************!*\\\n  !*** ./src/renderer/render/linerender.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 26);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar LineRender = function (_GeometryRender) {\n\t  _inherits(LineRender, _GeometryRender);\n\t\n\t  function LineRender(context) {\n\t    _classCallCheck(this, LineRender);\n\t\n\t    return _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param feature\n\t   * @param renderStyle\n\t   * @param transform\n\t   */\n\t\n\t\n\t  LineRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geometry = feature.geometry;\n\t\n\t    var transform2D = _transform.Transform.transform2D;\n\t    var coordinates = [];\n\t    // TODO find a way to cache the rendered data\n\t    if (this._pixelCoordinates && this.equalsTransform(transform, this.renderedTransform)) {\n\t      coordinates = this._pixelCoordinates;\n\t      // console.log('get the rendered data from chche for line')\n\t    } else {\n\t      var geometryCoordinates = geometry.getCoordinates();\n\t\n\t      geometryCoordinates.forEach(function (points) {\n\t        var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t        coordinate[0] = coordinate[0] + 0.5 | 0;\n\t        coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t        coordinates.push(coordinate);\n\t      });\n\t\n\t      this._pixelCoordinates = coordinates;\n\t      _transform.Transform.setFromArray(this.renderedTransform, transform);\n\t      // console.log('caclulate the rendered data for line')\n\t    }\n\t\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        coordinates: coordinates,\n\t        width: styleObj.width,\n\t        strokeStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        lineCap: styleObj.lineCap,\n\t        lineJion: styleObj.lineJion,\n\t        miterLimit: styleObj.miterLimit,\n\t        hasDash: styleObj.style === _linestyle2.default.DASH ? true : false\n\t      };\n\t\n\t      this.drawLine(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  LineRender.prototype.drawLine = function drawLine(ctx, renderOpt) {\n\t    ctx.save();\n\t    ctx.strokeStyle = renderOpt.strokeStyle;\n\t    ctx.lineWidth = renderOpt.width;\n\t\n\t    ctx.lineCap = renderOpt.lineCap;\n\t    ctx.lineJoin = renderOpt.lineJion;\n\t    ctx.miterLimit = renderOpt.miterLimit;\n\t\n\t    ctx.beginPath();\n\t    var coordinates = renderOpt.coordinates;\n\t    ctx.moveTo(coordinates[0][0], coordinates[0][1]);\n\t    for (var i = 0, ii = coordinates.length; i < ii - 1; i++) {\n\t      ctx.lineTo(coordinates[i + 1][0], coordinates[i + 1][1]);\n\t    }\n\t\n\t    if (renderOpt.hasDash) {\n\t      ctx.setLineDash([5, 5]);\n\t    }\n\t\n\t    ctx.stroke();\n\t\n\t    ctx.closePath();\n\t    ctx.restore();\n\t  };\n\t\n\t  return LineRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = LineRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 80 */\n/*!********************************************!*\\\n  !*** ./src/renderer/render/pointrender.js ***!\n  \\********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 26);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar PointRender = function (_GeometryRender) {\n\t  _inherits(PointRender, _GeometryRender);\n\t\n\t  function PointRender(context) {\n\t    _classCallCheck(this, PointRender);\n\t\n\t    var _this = _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t\n\t    _this._pixelCoordinates = [];\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Render a point\n\t   * @param feature\n\t   * @param transform\n\t   */\n\t\n\t\n\t  PointRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geomerty = feature.geometry;\n\t\n\t    var coordinates = [geomerty.x, geomerty.y];\n\t\n\t    // TODO  Should be cached\n\t    var pixelCoordinates = _transform.Transform.transform2D(coordinates, 0, coordinates.length, 2, transform, this._pixelCoordinates);\n\t\n\t    var x = pixelCoordinates[0];\n\t    var y = pixelCoordinates[1];\n\t\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        centerX: x + 0.5 | 0,\n\t        centerY: y + 0.5 | 0,\n\t        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n\t        fillStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        borderStyle: styleObj.borderStyle\n\t      };\n\t\n\t      this.drawCircle(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  PointRender.prototype.drawCircle = function drawCircle(ctx, renderOptions) {\n\t    // console.log('类型为圆，开始绘制圆')\n\t    ctx.save();\n\t    ctx.beginPath();\n\t    ctx.arc(renderOptions.centerX, renderOptions.centerY, renderOptions.radius, 0, 2 * Math.PI, true);\n\t\n\t    if (renderOptions.fillStyle) {\n\t      ctx.fillStyle = renderOptions.fillStyle;\n\t      ctx.fill();\n\t    }\n\t\n\t    var borderStyle = renderOptions.borderStyle;\n\t    if (borderStyle) {\n\t      ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, borderStyle.alpha);\n\t      ctx.lineWidth = borderStyle.width;\n\t\n\t      if (borderStyle.lineDash) {\n\t        ctx.setLineDash(borderStyle.lineDash);\n\t      }\n\t\n\t      ctx.stroke();\n\t    }\n\t\n\t    ctx.closePath();\n\t    ctx.restore();\n\t  };\n\t\n\t  return PointRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = PointRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 81 */\n/*!**********************************************!*\\\n  !*** ./src/renderer/render/polygonrender.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 26);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar PolygonRender = function (_GeometryRender) {\n\t  _inherits(PolygonRender, _GeometryRender);\n\t\n\t  function PolygonRender(context) {\n\t    _classCallCheck(this, PolygonRender);\n\t\n\t    return _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t  }\n\t\n\t  /**\n\t   * Render a polygon\n\t   * @param feature\n\t   * @param transform\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geometry = feature.geometry;\n\t\n\t    var transform2D = _transform.Transform.transform2D;\n\t    var geometryCoordinages = geometry.getCoordinates();\n\t    if (geometry.geometryType === _geometry2.default.EXTENT) {\n\t      geometryCoordinages = [geometryCoordinages];\n\t    }\n\t\n\t    if (!geometryCoordinages) {\n\t      return false;\n\t    }\n\t\n\t    if (geometryCoordinages.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    // TODO find a way to cache the rendered data\n\t    var coordinates = [];\n\t    var renderCoords = [];\n\t\n\t    if (this._pixelCoordinates && this.equalsTransform(transform, this.renderedTransform)) {\n\t      renderCoords = this._pixelCoordinates;\n\t    } else {\n\t      if (geometry.geometryType === _geometry2.default.MULTI_POLYGON) {\n\t        var polygonCoords = [];\n\t        // 遍历各个多边形\n\t        geometryCoordinages.forEach(function (polygon) {\n\t          polygon.forEach(function (rings) {\n\t            rings.forEach(function (points) {\n\t              var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t              coordinate[0] = coordinate[0] + 0.5 | 0;\n\t              coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t              coordinates.push(coordinate);\n\t            });\n\t\n\t            polygonCoords.push(coordinates);\n\t            coordinates = [];\n\t          });\n\t\n\t          renderCoords.push(polygonCoords);\n\t          polygonCoords = [];\n\t        });\n\t\n\t        this.renderMutilPolygon(ctx, styleArray, renderCoords);\n\t      } else {\n\t        // 遍历多边形各个环\n\t        geometryCoordinages.forEach(function (rings) {\n\t          rings.forEach(function (points) {\n\t            var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t            coordinate[0] = coordinate[0] + 0.5 | 0;\n\t            coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t            coordinates.push(coordinate);\n\t          });\n\t\n\t          renderCoords.push(coordinates);\n\t          coordinates = [];\n\t        });\n\t      }\n\t\n\t      this.renderPolygon(ctx, styleArray, renderCoords);\n\t    }\n\t\n\t    this._pixelCoordinates = renderCoords;\n\t    _transform.Transform.setFromArray(this.renderedTransform, transform);\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param styleArray\n\t   * @param renderCoords\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.renderMutilPolygon = function renderMutilPolygon(ctx, styleArray, renderCoords) {\n\t    var _this2 = this;\n\t\n\t    renderCoords.forEach(function (polygon) {\n\t      _this2.renderPolygon(ctx, styleArray, polygon);\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param styleArray\n\t   * @param renderCoords\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.renderPolygon = function renderPolygon(ctx, styleArray, renderCoords) {\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        coordinates: renderCoords,\n\t        fillStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        borderStyle: styleObj.borderStyle\n\t      };\n\t\n\t      this.drawStylePolygon(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 绘制多边形，需要注意多边形各个环的绘制\n\t   * @param ctx\n\t   * @param renderOpt\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.drawStylePolygon = function drawStylePolygon(ctx, renderOpt) {\n\t    ctx.save();\n\t\n\t    if (renderOpt.fillStyle) {\n\t      ctx.fillStyle = renderOpt.fillStyle;\n\t    }\n\t\n\t    var borderStyle = renderOpt.borderStyle;\n\t    if (borderStyle) {\n\t      ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, borderStyle.alpha);\n\t      ctx.lineWidth = borderStyle.width;\n\t\n\t      if (borderStyle.style === _linestyle2.default.DASH) {\n\t        ctx.setLineDash([5, 5]);\n\t      }\n\t    }\n\t\n\t    var coords = renderOpt.coordinates;\n\t    coords.forEach(function (coordinates, index) {\n\t      if (index === 0) {\n\t        ctx.beginPath();\n\t      }\n\t\n\t      ctx.moveTo(coordinates[0][0], coordinates[0][1]);\n\t      for (var k = 1, kk = coordinates.length; k < kk; k++) {\n\t        var cd = coordinates[k];\n\t        ctx.lineTo(cd[0], cd[1]);\n\t      }\n\t\n\t      ctx.closePath();\n\t    });\n\t\n\t    ctx.fill();\n\t    ctx.stroke();\n\t    ctx.restore();\n\t  };\n\t\n\t  return PolygonRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = PolygonRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 82 */\n/*!*******************************************!*\\\n  !*** ./src/renderer/render/textrender.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ./geomertyrender */ 26);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/24.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t// import TextStyle from '../../style/textstyle'\n\t// import LineStyle from '../../style/linestyle'\n\t\n\tvar TextRender = function (_GeometryRender) {\n\t  _inherits(TextRender, _GeometryRender);\n\t\n\t  function TextRender(context) {\n\t    _classCallCheck(this, TextRender);\n\t\n\t    var _this = _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t\n\t    _this._pixelCoordinates = [];\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param feature\n\t   * @param transform\n\t   */\n\t\n\t\n\t  TextRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    var textStyle = renderStyle[0].textStyle;\n\t    if (!feature.displayText || !textStyle) {\n\t      return;\n\t    }\n\t\n\t    var displayText = String(feature.displayText);\n\t    textStyle.text = displayText;\n\t\n\t    var ctx = this.context;\n\t    ctx.save();\n\t\n\t    var geometry = feature.geometry;\n\t    var coordinates = geometry.getFlatInteriorPoint();\n\t\n\t    this._pixelCoordinates = [];\n\t    var pixelCoordinates = _transform.Transform.transform2D(coordinates, 0, coordinates.length, 2, transform, this._pixelCoordinates);\n\t\n\t    for (var i = 0, len = pixelCoordinates.length; i < len; i += 2) {\n\t      var xValue = pixelCoordinates[i];\n\t      var yValue = pixelCoordinates[i + 1];\n\t\n\t      // set the context text style\n\t      this._setTextStyle(ctx, textStyle);\n\t\n\t      // const offsetX = textStyle.offsetX + 10\n\t      var offsetX = textStyle.offsetX;\n\t      // const offsetY = textStyle.offsetY + 10\n\t      var offsetY = textStyle.offsetY - 3;\n\t\n\t      var stroke = textStyle.stroke ? true : false;\n\t      var fill = textStyle.fill ? true : false;\n\t      var text = textStyle.text;\n\t\n\t      var x = xValue + offsetX;\n\t      var y = yValue + offsetY;\n\t\n\t      var lines = text.split('\\n');\n\t      var numLines = lines.length;\n\t      var fontSize = void 0,\n\t          lineY = void 0;\n\t      if (numLines > 1) {\n\t        fontSize = Math.round(ctx.measureText('M').width * 1.5);\n\t        lineY = y - (numLines - 1) / 2 * fontSize;\n\t      } else {\n\t        fontSize = 0;\n\t        lineY = y;\n\t      }\n\t\n\t      for (var lineIndex = 0; lineIndex < numLines; lineIndex++) {\n\t        var lineText = lines[lineIndex];\n\t        if (stroke) {\n\t          ctx.strokeText(lineText, x, lineY);\n\t        }\n\t\n\t        if (fill) {\n\t          ctx.fillText(lineText, x, lineY);\n\t        }\n\t\n\t        lineY = lineY + fontSize;\n\t      }\n\t    }\n\t\n\t    ctx.restore();\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param textStyle\n\t   * @private\n\t   */\n\t\n\t\n\t  TextRender.prototype._setTextStyle = function _setTextStyle(ctx, textStyle) {\n\t    var borderStyle = textStyle.stroke;\n\t\n\t    ctx.font = textStyle.font;\n\t    ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, 1);\n\t    ctx.fillStyle = (0, _helpers.colorToString)(textStyle.fill, 1);\n\t    ctx.textBaseline = textStyle.textBaseline;\n\t    ctx.textAlign = textStyle.textAlign;\n\t    ctx.lineWidth = borderStyle.width;\n\t    ctx.lineCap = borderStyle.lineCap;\n\t    ctx.lineJoin = borderStyle.lineJion;\n\t  };\n\t\n\t  return TextRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = TextRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 83 */\n/*!**********************************!*\\\n  !*** ./src/renderer/renderer.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 地图渲染器基类，\n\t * @class Renderer\n\t * @extends BaseObject\n\t * @module renderer\n\t */\n\tvar Renderer = function (_BaseObject) {\n\t  _inherits(Renderer, _BaseObject);\n\t\n\t  function Renderer(contianer, map) {\n\t    _classCallCheck(this, Renderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._map = map;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @property map\n\t   * @type {mk.Map}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @method renderFrame\n\t   * @abstract\n\t   * @param frameState {Object}\n\t   */\n\t  Renderer.prototype.renderFrame = function renderFrame(frameState) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * @method clear\n\t   * @abstract\n\t   */\n\t\n\t\n\t  Renderer.prototype.clear = function clear() {};\n\t\n\t  _createClass(Renderer, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    }\n\t  }]);\n\t\n\t  return Renderer;\n\t}(_baseobject2.default);\n\t\n\texports.default = Renderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 84 */\n/*!*************************************!*\\\n  !*** ./src/renderer/renderevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/27.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * @class RenderEvent\n\t * @extends BaseEvent\n\t * @module renderer\n\t * @constructor\n\t */\n\tvar RenderEvent = function (_BaseEvent) {\n\t  _inherits(RenderEvent, _BaseEvent);\n\t\n\t  function RenderEvent(type, frameState, context, trasform) {\n\t    _classCallCheck(this, RenderEvent);\n\t\n\t    /**\n\t     * @property frameState\n\t     * @type {Object}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.frameState = frameState;\n\t\n\t    /**\n\t     * @property trasform\n\t     * @type {Object}\n\t     */\n\t    _this.trasform = trasform;\n\t\n\t    /**\n\t     *@property context\n\t     *@type {HTML5.}\n\t     */\n\t    _this.context = context;\n\t    return _this;\n\t  }\n\t\n\t  return RenderEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = RenderEvent;\n\tmodule.exports = exports['default'];\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// mk.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"<%=baseUrl%>/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9eabc2638e23621fdd98","/**\n * Created by zypc on 2016/11/28.\n */\n\nimport {Config} from 'meek/config'\nimport Counter from 'utils/counter'\nimport Helpers from 'utils/helpers'\nimport Obj from 'utils/obj'\nimport {Math} from 'utils/math'\nimport {Coordinate} from 'utils/coordinate'\nimport {Canvas} from 'utils/canvas'\n\nimport GeometryUtil from 'geometry/support/geometryutil'\nimport {ExtentUtil} from 'geometry/support/extentutil'\nimport {EventType} from 'meek/eventtype'\nimport {Style} from 'style/style'\n\nimport Event from 'core/event'\nimport EventManager from 'core/eventmanager'\n\nimport Geometry from 'geometry/geometry'\nimport Extent from 'geometry/extent'\nimport Point from 'geometry/point'\nimport Line from 'geometry/line'\nimport Polygon from 'geometry/polygon'\nimport MutilPolygon from 'geometry/mutilpolygon'\nimport Parallelogram from 'geometry/parallelogram'\n\nimport {ImageState} from 'lyr/image/imagestate'\nimport {ImageEvent} from 'lyr/image/imageevent'\nimport SingleImage from 'lyr/image/singleimage'\n\nimport PointStyle from 'style/pointstyle'\nimport LineStyle from 'style/linestyle'\nimport FillStyle from 'style/fillstyle'\nimport TextStyle from 'style/textstyle'\n\nimport FeatureLayer from 'lyr/featurelayer'\nimport SingleImageLayer from 'lyr/singleimagelayer'\nimport Draw from 'components/draw'\nimport DrawEvent from 'components/drawevent'\nimport Select from 'components/select'\nimport Modify from 'components/modify'\nimport DragPan from 'components/dragpan'\nimport MouseWheelZoom from 'components/mousewheelzoom'\n\nimport BrowserEvent from 'meek/browserevent'\nimport SelectEvent from 'components/selectevent'\nimport FeatureEvent from 'meek/featureevent'\nimport ModifyEvent from 'components/modifyevent'\n\nimport Control from 'control/control'\nimport Zoom from 'control/zoom'\n\nimport Feature from 'meek/feature'\nimport Map from 'meek/map'\nimport View from 'meek/view'\nimport Overlay from 'meek/overlay'\n\nimport GeoJSON from 'data/json/geojson'\n\nimport intersects from 'geometry/analysis/intersects'\nimport splitPolygonByPolyline from 'geometry/analysis/splitpolygon'\nimport contains from 'geometry/analysis/contains'\nimport polygonWithHole from 'geometry/analysis/polygonwithhole'\n\nconst version = VERSION\n\nexport default {\n  Config,\n  Coordinate,\n  Canvas,\n  Event,\n  SelectEvent,\n  FeatureEvent,\n  ModifyEvent,\n  EventManager,\n  Counter,\n  Helpers,\n  ImageState,\n  ImageEvent,\n  SingleImage,\n  Geometry,\n  Extent,\n  Point,\n  Line,\n  Polygon,\n  MutilPolygon,\n  Parallelogram,\n  Style,\n  PointStyle,\n  LineStyle,\n  FillStyle,\n  TextStyle,\n  FeatureLayer,\n  SingleImageLayer,\n  Draw,\n  DrawEvent,\n  BrowserEvent,\n  EventType,\n  Feature,\n  Map,\n  View,\n  Overlay,\n  GeometryUtil,\n  ExtentUtil,\n  Select,\n  Modify,\n  DragPan,\n  Control,\n  Zoom,\n  Obj,\n  Math,\n  MouseWheelZoom,\n  GeoJSON,\n  version,\n  intersects,\n  splitPolygonByPolyline,\n  contains,\n  polygonWithHole\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Created by zypc on 2016/11/13.\n */\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n *\n * @class Geometry\n * @extends BaseObject\n * @module geometry\n * @constructor\n */\nexport default class Geometry extends BaseObject {\n\n  /**\n   * @constructor\n   */\n  constructor () {\n    super()\n    \n    this._extent = null\n  \n    /**\n     * @type {number}\n     */\n    this.stride = 2\n  }\n\n  /**\n   * 获取图形的类型\n   *\n   * @property geometryType\n   * @type {String}\n   */\n  get geometryType () {return Geometry.UNDEFINED}\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 除去点意外，任何图形都有最小外接矩形\n   *\n   * @property extent\n   * @type {mk.Extent}\n   */\n  get extent () { return this._extent }\n  \n  /**\n   * 获取图形是否是逆时针\n   *\n   * @property anticlockwise\n   * @type {Boolean}\n   */\n  get anticlockwise () {\n    const geometryType = this.geometryType\n    const coordinates = this.getCoordinates()\n  \n    let fp, sp, f1, f2, f3\n    \n    if (geometryType === Geometry.LINE ) {\n      f1 = [0, 0]\n      f2 = coordinates[0]\n      f3 = coordinates[1]\n    } else if ( geometryType === Geometry.POLYGON ||\n                geometryType === Geometry.EXTENT ) {\n      f1 = coordinates[0]\n      f2 = coordinates[1]\n      f3 = coordinates[2]\n    }\n  \n    fp = [f2[0] - f1[0], f2[1] - f1[1]]\n    sp = [f3[0] - f2[0], f3[1] - f2[1]]\n    \n    return fp[0] * sp[1] - sp[0] * fp[1] < 0\n  }\n  \n  /**\n   * 判断传入的点坐标是否在图形内\n   *\n   * @method pointInExtent\n   * @param coordinate {Array} 包含x, y的点数组\n   * @return {Boolean} ture returned if success, false otherwise.\n   */\n  pointInExtent (coordinate) {\n    return ExtentUtil.containsPoint(this.extent, coordinate)\n  }\n  \n  /**\n   * 判断是否相交\n   *\n   * intersect\n   * @param geomtry {Geometry}\n   * @returns {Boolean}\n   */\n  intersect (geomtry) { // eslint-disable-line no-unused-vars\n    return false\n  }\n  \n  /**\n   * 获取图形的坐标信息\n   * @abstract\n   * @method getCoordinates\n   * @return {Array} 返回坐标数组\n   */\n  getCoordinates () { return [] }\n\n  /**\n   * 计算表单显示的坐标\n   *\n   *  @method getFormShowPosition\n   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n   *  @return {Array} 返回点坐标的数组表达方式\n   *  @example\n   *\n   *      var point = geometry.getFormShowPosition(10, 10)\n   *      Form.position = point\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) { return [] } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns { Array }\n   */\n  getFlatInteriorPoint () { return [] }\n  \n  /**\n   * 判断当前图形是否包含一个点\n   *\n   * @abstract\n   * @method containsXY\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   * @return {Boolean} ture returned if contains, false otherwise\n   */\n  containsXY (x, y) { return true } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 移动改图形，移动图形，需要传递x，y的移动量\n   *\n   * @method move\n   * @abstract\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   */\n  move (x = 0,y = 0, opts) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义对图形本身的缩放方法\n   *\n   * @method scale\n   * @abstract\n   * @param scale {Number} 缩放比率\n   * @param origin {Array} 缩放参考点\n   */\n  scale(scale = 1,origin) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义图形本身的旋转方法\n   *\n   * @method rotate\n   * @abstract\n   * @param angle {Number} 旋转的角度\n    * @param anchor {Object}\n   */\n  rotate(angle,anchor) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 创建一个简化后的图形副本\n   *\n   * @method simplify\n   * @abstract\n   * @param tolerance {Number} 阈值\n   */\n  simplify(tolerance = 1) {} // eslint-disable-line no-unused-vars\n \n  /**\n   * 将图形转换成json格式\n   *\n   * @method toJSON\n   * @abstrct\n   */\n  toJSON () {}\n  \n  /**\n   * 克隆一个图形副本\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n}\n\n/**\n * 点类型\n *\n * @property POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.POINT = 'point'\n\n/**\n * 多点类型\n *\n * @property MULTI_POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POINT = 'multi_point'\n\n/**\n * 线类型\n *\n * @property LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.LINE = 'line'\n\n/**\n * 多线类型\n *\n * @property MULTI_LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_LINE = 'multi_line'\n\n/**\n * 多边形类型\n *\n * @property POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.POLYGON = 'polygon'\n\n/**\n * 多个多边形类型\n *\n * @property MULTI_POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POLYGON = 'multi_polygon'\n\n/**\n * 矩形类型\n *\n * @property EXTENT\n * @static\n * @final\n * @type {String}\n */\nGeometry.EXTENT = 'extent'\n\n/**\n * 圆类型\n *\n * @property CIRCLE\n * @static\n * @final\n * @type {String}\n */\nGeometry.CIRCLE = 'circle'\n\n/**\n * 定义平行四边形图形\n * @type {string}\n */\nGeometry.PARALLELOGRAM = 'parallelogram'\n\n/**\n * 未定义\n *\n * @property UNDEFINED\n * @static\n * @final\n * @type {String}\n */\nGeometry.UNDEFINED = 'undefined'\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/geometry.js","/**\n * Created by zhangyong on 2017/5/24.\n */\n\nexport const ExtentUtil = {}\n\n/**\n * 创建一个空矩形\n *\n * @method createEmpty\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createEmpty = function () {\n  return [Infinity, Infinity, -Infinity, -Infinity]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param opt_extent\n */\nExtentUtil.createOrUpdateFromFlatCoordinates = function(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = ExtentUtil.createOrUpdateEmpty(opt_extent)\n  return extendFlatCoordinates(\n    extent, flatCoordinates, offset, end, stride)\n}\n\nconst extendXY = function(extent, x, y) {\n  extent[0] = Math.min(extent[0], x)\n  extent[1] = Math.min(extent[1], y)\n  extent[2] = Math.max(extent[2], x)\n  extent[3] = Math.max(extent[3], y)\n}\n\n\nconst extendFlatCoordinates = function(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(\n      extent, flatCoordinates[offset], flatCoordinates[offset + 1])\n  }\n  \n  return extent\n}\n\n/**\n *\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.createOrUpdateEmpty = function(opt_extent) {\n  return ExtentUtil.createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent)\n}\n\n/**\n * 创建或更新矩形\n *\n * @method createOrUpdate\n * @param minX {Number}\n * @param minY {Number}\n * @param maxX {Number}\n * @param maxY {Number}\n * @param opt_extent {Array}\n * @returns {*}\n */\nExtentUtil.createOrUpdate = function(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX\n    opt_extent[1] = minY\n    opt_extent[2] = maxX\n    opt_extent[3] = maxY\n    return opt_extent\n  } else {\n    return [minX, minY, maxX, maxY]\n  }\n}\n\n/**\n * 获取矩形的中心点\n *\n * @method getCenter\n * @param extent\n * @returns {[*,*]}\n */\nExtentUtil.getCenter = function(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\n}\n\n/**\n * Create an empty extent.\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createScaleExtent = function (center,value) {\n  return [center.x  - value, center.y  - value, center.x  + value, center.y + value]\n}\n\n/**\n *\n * @param point1\n * @param point2\n * @returns {[*,*,*,*]}\n */\nExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n  let xmin = 0, ymin = 0, xmax = 0, ymax = 0\n  \n  if (point1[0] > point2[0]) {\n    xmin = point2[0]\n    xmax = point1[0]\n  } else {\n    xmin = point1[0]\n    xmax = point2[0]\n  }\n  \n  if (point1[1] > point2[1]) {\n    ymin = point2[1]\n    ymax = point1[1]\n  } else {\n    ymin = point1[1]\n    ymax = point2[1]\n  }\n  \n  return [xmin, ymin, xmax, ymax]\n}\n\n/**\n * 通过坐标数据构建矩形\n *\n * @method boundingExtent\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return [\n    ExtentUtil.getBottomLeft(extent),\n    ExtentUtil.getBottomRight(extent),\n    ExtentUtil.getTopRight(extent),\n    ExtentUtil.getTopLeft(extent),\n    ExtentUtil.getBottomLeft(extent)\n  ]\n}\n\n/**\n * Build an extent that includes all given coordinates.\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingSimpleExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return extent\n}\n\n/**\n * 通过坐标更新矩形\n *\n * @method extendCoordinate\n * @param extent {Geometry}\n * @param coordinate {Array}\n */\nExtentUtil.extendCoordinate = function(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0]\n  }\n  \n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0]\n  }\n  \n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1]\n  }\n  \n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1]\n  }\n}\n\n\n/**\n * 获取矩形右侧线段坐标\n *\n * getBottomRight\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomRight = function (extent) {\n  return [extent[2], extent[1]]\n}\n\n\n/**\n * 获取矩形左侧线段坐标\n *\n * getBottomLef\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomLeft = function (extent) {\n  return [extent[0], extent[1]]\n}\n\n\n/**\n * Get the top right coordinate of an extent\n * extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopRight = function (extent) {\n  return [extent[2], extent[3]]\n}\n\n\n/**\n * Get the top left coordinate of an extent\n *  extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopLeft = function (extent) {\n  return [extent[0], extent[3]]\n}\n\n/**\n * 判断点是否在矩形上\n *\n * @method containsPoint\n * @param extent {Geometry}\n * @param point {Array}\n * @returns {Boolean}\n */\nExtentUtil.containsPoint = function(extent, point){\n  const x = point[0]\n  const y = point[1]\n  \n  if (Array.isArray(extent)) {\n    return extent[0] <= x && x <= extent[2] &&\n           extent[1] <= y && y <= extent[3]\n  } else {\n    return (extent.xmin - 1) <= x && x <= (extent.xmax + 1) &&\n      (extent.ymin - 1)<= y && y <= (extent.ymax + 1)\n  }\n}\n\n/**\n * Return extent increased by the provided value.\n * @param extent\n * @param value\n * @param optExtent\n * @returns {*}\n */\nExtentUtil.buffer = function(extent, value, optExtent) {\n  if (optExtent) {\n    optExtent[0] = extent[0] - value\n    optExtent[1] = extent[1] - value\n    optExtent[2] = extent[2] + value\n    optExtent[3] = extent[3] + value\n    return optExtent\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ]\n  }\n}\n\n/**\n * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n * @param xmin\n * @param ymin\n * @param xmax\n * @param ymax\n * @returns {[*,*,*,*,*]}\n */\nExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n  const ring = [\n    [xmin, ymin],\n    [xmax, ymin],\n    [xmax, ymax],\n    [xmin, ymax],\n    [xmin, ymin]\n  ]\n  \n  return ring\n}\n\n/**\n * 获取图形的高\n *\n * @method getHeight\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getHeight = function(extent) {\n  return extent[3] - extent[1]\n}\n\n/**\n * 获取图形的宽\n *\n * @method getWidth\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getWidth = function(extent) {\n  return extent[2] - extent[0]\n}\n\n/**\n * 矩形坐标点更新\n *\n * @method updateExtent\n * @param geometry {Geometry}\n * @param newCoordinates {Array}\n * @param dragSegments\n * @returns {Array}\n */\nExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n  const dragSegment = dragSegments[0]\n  const index = dragSegment.index\n  const extentCoordinates = geometry.getCoordinates()\n  const segment1 = extentCoordinates[index]\n  const segment2 = extentCoordinates[index + 1]\n  \n  const isVertex = dragSegment.isVertex\n  if (isVertex) {\n    if (index === 0 || index === 4) {\n      extentCoordinates[0] = newCoordinates\n      extentCoordinates[4] = newCoordinates\n      extentCoordinates[1][1] = newCoordinates[1]\n      extentCoordinates[3][0] = newCoordinates[0]\n    } else if (index === 1) {\n      extentCoordinates[1] = newCoordinates\n      \n      extentCoordinates[2][0] = newCoordinates[0]\n      extentCoordinates[0][1] = newCoordinates[1]\n      extentCoordinates[4] = extentCoordinates[0]\n    } else if (index === 2) {\n      extentCoordinates[2] = newCoordinates\n      extentCoordinates[1][0] = newCoordinates[0]\n      extentCoordinates[3][1] = newCoordinates[1]\n    } else if (index === 3) {\n      extentCoordinates[3] = newCoordinates\n      extentCoordinates[2][1] = newCoordinates[1]\n      extentCoordinates[0][0] = newCoordinates[0]\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  } else {\n    if (segment1[0] === segment2[0]) {\n      extentCoordinates[index][0] = newCoordinates[0]\n      extentCoordinates[index + 1][0] = newCoordinates[0]\n    }\n  \n    if (segment1[1] === segment2[1]) {\n      extentCoordinates[index][1] = newCoordinates[1]\n      extentCoordinates[index + 1][1] = newCoordinates[1]\n    }\n  \n    if (index === 3 ) {\n      extentCoordinates[0] = extentCoordinates[4]\n    }\n    if (index === 0 ) {\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  }\n  \n  \n  return extentCoordinates\n}\n\n/**\n *\n * @param extent1\n * @param extent2\n * @param opt_extent\n * @returns {(*|*|*|*)[]}\n */\nExtentUtil.getIntersection = function(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty()\n  if (ExtentUtil.intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0]\n    } else {\n      intersection[0] = extent2[0]\n    }\n    \n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1]\n    } else {\n      intersection[1] = extent2[1]\n    }\n    \n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2]\n    } else {\n      intersection[2] = extent2[2]\n    }\n    \n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3]\n    } else {\n      intersection[3] = extent2[3]\n    }\n  }\n  \n  return intersection\n}\n\n/**\n * 判断两个矩形是否相交\n *\n * @method intersects\n * @param extent1 {Geometry}\n * @param extent2 {Geometry}\n * @returns {Boolean}\n */\nExtentUtil.intersects = function(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n}\n\n/**\n * 判断矩形是否包含在另一个矩形中\n *\n * @method containsExtent\n * @param extent1\n * @param extent2\n * @returns {Boolean}\n */\nExtentUtil.containsExtent = function(extent1, extent2) {\n  return extent1[0] <= extent2[0] &&\n         extent2[2] <= extent1[2] &&\n         extent1[1] <= extent2[1] &&\n         extent2[3] <= extent1[3]\n}\n\n/**\n *\n * @param extent\n * @returns {boolean}\n */\nExtentUtil.isEmpty = function(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1]\n}\n\n/**\n *\n * @param center\n * @param resolution\n * @param rotation\n * @param size\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.getForViewAndSize = function(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2\n  const dy = resolution * size[1] / 2\n  const cosRotation = Math.cos(rotation)\n  const sinRotation = Math.sin(rotation)\n  const xCos = dx * cosRotation\n  const xSin = dx * sinRotation\n  const yCos = dy * cosRotation\n  const ySin = dy * sinRotation\n  const x = center[0]\n  const y = center[1]\n  const x0 = x - xCos + ySin\n  const x1 = x - xCos - ySin\n  const x2 = x + xCos - ySin\n  const x3 = x + xCos + ySin\n  const y0 = y - xSin - yCos\n  const y1 = y - xSin + yCos\n  const y2 = y + xSin + yCos\n  const y3 = y + xSin - yCos\n  \n  return ExtentUtil.createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent)\n}\n\nexport default {\n  ExtentUtil\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/extentutil.js","/**\n * Created by zypc on 2016/11/13.\n */\n// The BaseObject is a base class that only can be inherited, not be instanced.\nimport Event from './event'\nimport {getUid} from '../utils/counter'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * 对象基类，所有子类原则上要继承该类。\n *\n * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n *\n * @class BaseObject\n * @extends Event\n * @constructor\n * @module core\n */\nexport default class BaseObject extends Event {\n\n  /**\n   * Create a BaseObject\n   *\n   * 构造函数\n   *\n   * @consructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * ID\n     *\n     * @property id\n     * @type {Number}\n     * @private\n     */\n    this._id = getUid()\n  \n    /**\n     * 版本号\n     *\n     * @property revision\n     * @type {Number}\n     * @private\n     */\n    this._revision = 0\n  }\n  \n  /**\n   * 此方法用于派发map渲染事件\n   *\n   * @example this.changed() | super.changed()\n   *\n   * @method changed\n   */\n  changed () {\n    ++this._revision\n    this.dispatchEvent(EventType.CHANGE)\n  }\n\n  /**\n   *\n   * ID属性，用于获取该对象的ID编号\n   *\n   * @property id\n   * @type {Number}\n   */\n  get id () {\n    return this._id\n  }\n  \n  /**\n   *\n   * 地图渲染的版本号\n   *\n   * @property revision\n   * @type {Number}\n   * @returns {Number} the revision id\n   */\n  get revision () { return this._revision }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseobject.js","/**\r\n * Created by zypc on 2016/11/17.\r\n */\r\n\r\n\r\nimport Obj from '../utils/obj'\r\n\r\n/**\r\n * 根据事件标识和监听对象获取该对象上的事件监听函数列表\r\n *\r\n * @method getListeners\r\n * @param target\r\n * @param type\r\n * @returns {Undefined}\r\n */\r\nexport function getListeners (target, type) {\r\n  const listenerMap = target.ol_lm\r\n  return listenerMap ? listenerMap[type] : undefined\r\n}\r\n\r\n/**\r\n * 根据事件标示和事件对象，移除全部事件监听\r\n *\r\n * @param target\r\n * @param type\r\n */\r\nconst removeListeners = function (target, type) {\r\n  const listeners = getListeners(target, type)\r\n  if (listeners) {\r\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\r\n      target.removeEventListener(type, listeners[i].boundListener)\r\n      Obj.clear(listeners[i])\r\n    }\r\n    listeners.length = 0\r\n    let listenerMap = target.ol_lm\r\n    if (listenerMap) {\r\n      Reflect.deleteProperty(listenerMap, type)\r\n      if (Object.keys(listenerMap).length === 0) {\r\n        // Reflect.deleteProperty(target, ol_lm)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 移除该事件标识下全部事件监听\r\n *\r\n * @method unlistenByKey\r\n * @param key {String} 事件标示\r\n */\r\nexport function unlistenByKey (key) {\r\n  if (key && key.target) {\r\n    key.target.removeEventListener(key.type, key.boundListener)\r\n    const listeners = getListeners(key.target, key.type)\r\n    if (listeners) {\r\n      let i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key)\r\n      if (i !== -1) {\r\n        listeners.splice(i, 1)\r\n      }\r\n      if (listeners.length === 0) {\r\n        removeListeners(key.target, key.type)\r\n      }\r\n    }\r\n    \r\n    Obj.clear(key)\r\n  }\r\n}\r\n\r\n/**\r\n * @param listenerObj\r\n * @returns {boundListener}\r\n */\r\nconst bindListener = function (listenerObj) {\r\n  let boundListener = function (evt) {\r\n    const listener = listenerObj.listener\r\n    const bindTo = listenerObj.bindTo || listenerObj.target\r\n    if (listenerObj.callOnce) {\r\n      unlistenByKey(listenerObj)\r\n    }\r\n    return listener.call(bindTo, evt)\r\n  }\r\n\r\n  listenerObj.boundListener = boundListener\r\n  return boundListener\r\n}\r\n\r\n/**\r\n *\r\n * @param listeners\r\n * @param listener\r\n * @param optThis\r\n * @param optSetDeleteIndex\r\n * @returns {*}\r\n */\r\nconst findListener = function (listeners, listener, optThis, optSetDeleteIndex) {\r\n  let listenerObj\r\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\r\n    listenerObj = listeners[i]\r\n    if (listenerObj.listener === listener &&\r\n      listenerObj.bindTo === optThis) {\r\n      if (optSetDeleteIndex) {\r\n        listenerObj.deleteIndex = i\r\n      }\r\n      return listenerObj\r\n    }\r\n  }\r\n  return undefined\r\n}\r\n\r\n/**\r\n *\r\n * @param target\r\n * @returns {{}|*}\r\n */\r\nconst getListenerMap = function (target) {\r\n  let listenerMap = target.ol_lm\r\n  if (!listenerMap) {\r\n    listenerMap = target.ol_lm = {}\r\n  }\r\n  return listenerMap\r\n}\r\n\r\n/**\r\n * 监听事件\r\n *\r\n * @method listen\r\n * @param target {Object} 监听对象\r\n * @param type {String} 事件标识\r\n * @param listener {Array} 事件响应函数列表\r\n * @param optThis {This} 可选\r\n * @param optOnce\r\n * @returns {Array}\r\n */\r\nexport function listen (target, type, listener, optThis, optOnce) {\r\n  const listenerMap = getListenerMap(target)\r\n  let listeners = listenerMap[type]\r\n  if (!listeners) {\r\n    listeners = listenerMap[type] = []\r\n  }\r\n  \r\n  let listenerObj = findListener(listeners, listener, optThis, false)\r\n\r\n  if (listenerObj) {\r\n    if (!optOnce) {\r\n      listenerObj.callOnce = false // Turn one-off listener into a permanent one.\r\n    }\r\n  } else {\r\n    listenerObj = {\r\n      bindTo: optThis,\r\n      callOnce: !!optOnce,\r\n      listener,\r\n      target,\r\n      type\r\n    }\r\n    \r\n    target.addEventListener(type, bindListener(listenerObj))\r\n    listeners.push(listenerObj)\r\n  }\r\n\r\n  return listenerObj\r\n}\r\n\r\n/**\r\n * 对事件只是监听一次\r\n *\r\n * @method listenOnce\r\n * @param target\r\n * @param type\r\n * @param listener\r\n * @param opt_this\r\n * @returns {*}\r\n */\r\nexport function listenOnce (target, type, listener, opt_this) {\r\n  return listen(target, type, listener, opt_this, true)\r\n}\r\n\r\n\r\n/**\r\n * 定义关于事件的注册、注销、派发、监听的通用工具模块\r\n *\r\n * @module core\r\n * @class EventManager\r\n */\r\nexport default {\r\n  getListeners,\r\n  listen,\r\n  listenOnce,\r\n  unlistenByKey,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/eventmanager.js","/**\n * Created by zypc on 2016/12/4.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * BrowserEvent\n *\n * @class BrowserEvent\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class BrowserEvent extends BaseObject {\n\n  /**\n   * @constructor\n   * @param map\n   * @param oriEvent\n   * @param eventTyle\n   */\n  constructor (map, oriEvent, eventTyle) {\n    super()\n\n    /**\n     * 标示事件类型\n     */\n    this.type = eventTyle\n\n    /**\n     *\n     */\n    this.map = map\n\n    /**\n     * 记录事件源对象\n     */\n    this.originalEvent = oriEvent\n\n    /**\n     * 将浏览器坐标转换成canvas屏幕坐标\n     * The pixel of the original browser event.\n     * @type {ol.Pixel}\n     * @api stable\n     */\n    this.pixel = map.getEventPixel(oriEvent)\n  \n  \n    /**\n     * 将canvas左边转换成地图坐标\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel)\n\n    /**\n     * @type {number}\n     */\n    this.pointerId = 0\n  }\n\n  /**\n   * 取消事件的默认动作\n   *\n   * @method preventDefault\n   */\n  preventDefault () {\n    this.originalEvent.preventDefault()\n  }\n  \n  /**\n   * 阻止当前事件在DOM树上冒泡\n   *\n   * @method stopPropagation\n   */\n  stopPropagation () {\n    this.originalEvent.stopPropagation()\n  }\n  \n}\n// The single click is different form double click,which\n// consider as two click heppen during 250ms.\n/**\n * 鼠标在一段时间内单击标识\n *\n * @property SINGLE_CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.SINGLE_CLICK = 'singleclick'\n\n/**\n *\n * 鼠标单击事件标识\n *\n * @property CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.CLICK = 'click'\n\n/**\n *\n * 鼠标双击事件标识\n *\n * @property DBLCLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.DBLCLICK = 'dblclick'\n\n/**\n * 鼠标拖拽事件标识\n *\n * @property MOUSE_DRAG\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DRAG = 'mousedrag'\n\n/**\n * 鼠标按下事件标识\n *\n * @property MOUSE_DOWN\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DOWN = 'mousedown'\n\n/**\n * 鼠标移动事件标识\n *\n * @property MOUSE_MOVE\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_MOVE = 'mousemove'\n\n/**\n * 鼠标抬起事件标识\n *\n * @property MOUSE_UP\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_UP = 'mouseup'\n\n/**\n * 鼠标移入事件标识\n *\n * @property MOUSE_OVER\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OVER = 'mouseover'\n\n/**\n * 鼠标移开事件标识\n *\n * @property MOUSE_OUT\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OUT = 'mouseout'\n\n/**\n * 滚轮事件标识\n *\n * @property WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.WHEEL = 'wheel'\n\n/**\n * 鼠标滚轮事件标识\n *\n * @property MOUSE_WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_WHEEL = 'mousewheel'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYDOWN = 'keydown'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYPRESS = 'keypress'\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browserevent.js","/**\n * Created by zypc on 2016/12/6.\n */\nexport const EventType = {}\n\n/**\n * Triggered when map is needed to render\n *\n * @property CHANGE\n * @static\n * @final\n * @type {String}\n */\nEventType.CHANGE = 'change'\n\n\n/**\n * Triggered when view has been changed\n *\n * 当地图视图发生变化时将会派发改事件\n *\n * @property VIEW_CHANGED\n * @static\n * @final\n * @type {String}\n */\nEventType.VIEW_CHANGED = 'viewchanged'\n\n/**\n * Triggered when a image download error\n *\n * @property ERROR\n * @static\n * @final\n * @type {String}\n */\nEventType.ERROR = 'error'\n\n/**\n * Triggered when a image finish load\n *\n * @property LOAD\n * @static\n * @final\n * @type {String}\n */\nEventType.LOAD = 'load'\n\n/**\n * 当浏览器窗口的尺寸发生变化时派发\n *\n * @property RESIZE\n * @static\n * @final\n * @type {string}\n */\nEventType.RESIZE = 'resize'\n\n\nexport default {\n  EventType\n}\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/eventtype.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3x3 martrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\nexport const Transform = {\n  \n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  tmp_: new Array(6),\n  \n  /**\n   * 恒等矩阵\n   *\n   * Create an identity（恒等） transform.\n   * @return {!Transform} Identity transform.\n   */\n  create: function () {\n    return [1, 0, 0, 1, 0, 0]\n  },\n  \n  /**\n   * Resets the given transform to an identity（恒等） transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Transform.\n   */\n  reset: function (transform) {\n    return transform.set(transform, 1, 0, 0, 1, 0, 0)\n  },\n  \n  /**\n   *\n   * @param flatCoordinates\n   * @param offset\n   * @param end\n   * @param stride\n   * @param transform\n   * @param opt_dest\n   * @returns {Array}\n   */\n  transform2D: function (flatCoordinates, offset, end, stride, transform, opt_dest) {\n    const dest = opt_dest ? opt_dest : []\n    let i = 0\n    let j\n    \n    for (j = offset; j < end; j += stride) {\n      const x = flatCoordinates[j]\n      const y = flatCoordinates[j + 1]\n      dest[i++] = transform[0] * x + transform[2] * y + transform[4]\n      dest[i++] = transform[1] * x + transform[3] * y + transform[5]\n    }\n    \n    if (opt_dest && dest.length != i) {\n      dest.length = i\n    }\n    \n    return dest\n  },\n  \n  /**\n   * 矩阵相乘\n   *\n   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n   * the first transform.\n   *\n   * @param {!Transform} transform1 Transform parameters of matrix 1.\n   * @param {!Transform} transform2 Transform parameters of matrix 2.\n   * @return {!Transform} transform1 multiplied with transform2.\n   */\n  multiply: function (transform1, transform2) {\n    const a1 = transform1[0]\n    const b1 = transform1[1]\n    const c1 = transform1[2]\n    const d1 = transform1[3]\n    const e1 = transform1[4]\n    const f1 = transform1[5]\n    const a2 = transform2[0]\n    const b2 = transform2[1]\n    const c2 = transform2[2]\n    const d2 = transform2[3]\n    const e2 = transform2[4]\n    const f2 = transform2[5]\n    \n    transform1[0] = a1 * a2 + c1 * b2\n    transform1[1] = b1 * a2 + d1 * b2\n    transform1[2] = a1 * c2 + c1 * d2\n    transform1[3] = b1 * c2 + d1 * d2\n    transform1[4] = a1 * e2 + c1 * f2 + e1\n    transform1[5] = b1 * e2 + d1 * f2 + f1\n    \n    return transform1\n  },\n  \n  /**\n   * Set the transform components a-f on a given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} a The a component of the transform.\n   * @param {number} b The b component of the transform.\n   * @param {number} c The c component of the transform.\n   * @param {number} d The d component of the transform.\n   * @param {number} e The e component of the transform.\n   * @param {number} f The f component of the transform.\n   * @return {!Transform} Matrix with transform applied.\n   */\n  set: function (transform, a, b, c, d, e, f) {\n    transform[0] = a\n    transform[1] = b\n    transform[2] = c\n    transform[3] = d\n    transform[4] = e\n    transform[5] = f\n    return transform\n  },\n  \n  /**\n   * Set transform on one matrix from another matrix.\n   *\n   * @param {!Transform} transform1 Matrix to set transform to.\n   * @param {!Transform} transform2 Matrix to set transform from.\n   * @return {!Transform} transform1 with transform from transform2 applied.\n   */\n  setFromArray: function (transform1, transform2) {\n    transform1[0] = transform2[0]\n    transform1[1] = transform2[1]\n    transform1[2] = transform2[2]\n    transform1[3] = transform2[3]\n    transform1[4] = transform2[4]\n    transform1[5] = transform2[5]\n    return transform1\n  },\n  \n  /**\n   * 矩阵运算\n   * 将坐标值矩阵运算\n   *\n   * Transforms the given coordinate with the given transform returning the\n   * resulting, transformed coordinate. The coordinate will be modified in-place.\n   *\n   * @param {Transform} transform The transformation.\n   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n   * @return {Coordinate|Pixel} return coordinate so that operations can be\n   *     chained together.\n   */\n  apply: function (transform, coordinate) {\n    const x = coordinate[0]\n    const y = coordinate[1]\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4]\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5]\n    return coordinate\n  },\n  \n  /**\n   * Applies rotation to the given transform.\n   *\n   * 矩阵旋转\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} angle Angle in radians.\n   * @return {!Transform} The rotated transform.\n   */\n  rotate: function (transform, angle) {\n    const cos = Math.cos(angle)\n    const sin = Math.sin(angle)\n    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0))\n  },\n  \n  /**\n   *  Applies scale to a given transform.\n   *\n   * 矩阵缩放\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} x Scale factor x.\n   * @param {number} y Scale factor y.\n   * @return {!Transform} The scaled transform.\n   */\n  scale: function (transform, x, y) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, x, 0, 0, y, 0, 0))\n  },\n  \n  /**\n   * Applies translation to the given transform.\n   *\n   * 矩阵转换\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} dx Translation x.\n   * @param {number} dy Translation y.\n   * @return {!Transform} The translated transform.\n   */\n  translate: function (transform, dx, dy) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy))\n  },\n  \n  /**\n   * Creates a composite transform given an initial translation, scale, rotation, and\n   * final translation (in that order only, not commutative).\n   *\n   * 复杂矩形运算\n   *\n   * @param {!Transform} transform The transform (will be modified in place).\n   * @param {number} dx1 Initial translation x.\n   * @param {number} dy1 Initial translation y.\n   * @param {number} sx Scale factor x.\n   * @param {number} sy Scale factor y.\n   * @param {number} angle Rotation (in counter-clockwise radians).\n   * @param {number} dx2 Final translation x.\n   * @param {number} dy2 Final translation y.\n   * @return {!Transform} The composite transform.\n   */\n  compose: function (transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    const sin = Math.sin(angle)\n    const cos = Math.cos(angle)\n    transform[0] = sx * cos\n    transform[1] = sy * sin\n    transform[2] = -sx * sin\n    transform[3] = sy * cos\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1\n    return transform\n  },\n  \n  /**\n   * Invert the given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Inverse of the transform.\n   */\n  invert: function (transform) {\n    const det = Transform.determinant(transform)\n    \n    const a = transform[0]\n    const b = transform[1]\n    const c = transform[2]\n    const d = transform[3]\n    const e = transform[4]\n    const f = transform[5]\n    \n    transform[0] = d / det\n    transform[1] = -b / det\n    transform[2] = -c / det\n    transform[3] = a / det\n    transform[4] = (c * f - d * e) / det\n    transform[5] = -(a * f - b * e) / det\n    \n    return transform\n  },\n  \n  /**\n   * Returns the determinant of the given matrix.\n   *\n   * 行列式\n   *\n   * @param {!Transform} mat Matrix.\n   * @return {number} Determinant.\n   */\n  determinant: function (mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2]\n  }\n}\n\nexport default {\n  Transform\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/matrix/transform.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport BrowserEvent from '../meek/browserevent'\nimport Obj from '../utils/obj'\n\n/**\n *\n * 定义组件基础类\n *\n * @class Component\n * @extends BaseObject\n * @module component\n *\n */\n\n// Abstract base class,represent a base componnet whcih should be inhrited\nexport default class Component extends BaseObject {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n     *\n     * @property active\n     * @type {Boolean}\n     */\n    this.active = true\n  \n    /**\n     * @property mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n  \n    /**\n     * @property targetPointers\n     * @type {null}\n     */\n    this.targetPointers = null\n  \n    /**\n     * @property trackedPointers\n     * @type {{}}\n     * @private\n     */\n    this._trackedPointers = {}\n  \n    /**\n     * handlingDownUpSequence\n     * @type {boolean}\n     */\n    this.handlingDownUpSequence = false\n\n  }\n  \n  /**\n   * applyHandleEventOption\n   * @param options\n   */\n  applyHandleEventOption (options) {\n\n    /**\n     *\n     */\n    this.handleMouseEvent = options.handleMouseEvent ?\n      options.handleMouseEvent : this.handleMouseEvent\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDownEvent = options.handleDownEvent ?\n      options.handleDownEvent : function () { return false }\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDragEvent = options.handleDragEvent ?\n      options.handleDragEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleMoveEvent = options.handleMoveEvent ?\n      options.handleMoveEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleUpEvent = options.handleUpEvent ?\n      options.handleUpEvent : function () { return false }\n    \n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    let stopEvent = false\n    this._updateTrackedPointers(browserEvent)\n\n    if (this.handlingDownUpSequence) {\n\n      if (browserEvent.type === BrowserEvent.MOUSE_DRAG) {\n        this._handleDragEvent(browserEvent)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_UP) {\n\n        const handledUp = this._handleUpEvent(browserEvent)\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0\n      }\n    } else {\n      if (browserEvent.type === BrowserEvent.MOUSE_DOWN) {\n\n        const handled = this._handleDownEvent(browserEvent)\n        this.handlingDownUpSequence = handled\n        stopEvent = this.shouldStopEvent(handled)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_MOVE) {\n        this._handleMoveEvent(browserEvent)\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n  /**\n   *\n   * 根据浏览器鼠标操作事件的类型返回true或false\n   *\n   * isPointerDraggingEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   * @private\n   */\n  _isPointerDraggingEvent (browserEvent) {\n    const type = browserEvent.type\n    return (\n      type === BrowserEvent.MOUSE_DOWN ||\n      type === BrowserEvent.MOUSE_DRAG ||\n      type === BrowserEvent.MOUSE_UP)\n  }\n  \n  /**\n   *\n   * 处理浏览器鼠标操作事件\n   *\n   * updateTrackedPointers\n   *\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _updateTrackedPointers (browserEvent) {\n    if (this._isPointerDraggingEvent(browserEvent)) {\n      const event = browserEvent\n\n      if (browserEvent.type == BrowserEvent.MOUSE_UP) {\n        delete this._trackedPointers[event.pointerId]\n      } else if (browserEvent.type == BrowserEvent.MOUSE_DOWN) {\n        this._trackedPointers[event.pointerId] = event\n      } else if (event.pointerId in this._trackedPointers) {\n        this._trackedPointers[event.pointerId] = event\n      }\n      this.targetPointers = Obj.getValues(this._trackedPointers)\n    }\n  }\n  \n  /**\n   *\n   * @param view\n   * @param delta\n   * @param opt_duration\n   */\n  pan (view, delta) {\n    const currentCenter = view.center\n    if (currentCenter) {\n      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]\n    }\n  }\n  \n  /**\n   *\n   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n   *\n   * @method zoomByDelta\n   *\n   * @param view {Object}\n   * @param delta {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   *\n   */\n  zoomByDelta (view, delta, opt_anchor, opt_duration) {\n    const currentResolution = view.resolution\n    const resolution = view.constrainResolution(currentResolution, delta, 0)\n    \n    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n      const currentCenter = view.center\n      let center = view.calculateCenterZoom(resolution, opt_anchor)\n      center = view.constrainCenter(center)\n      \n      opt_anchor = [\n        (resolution * currentCenter[0] - currentResolution * center[0]) /\n        (resolution - currentResolution),\n        (resolution * currentCenter[1] - currentResolution * center[1]) /\n        (resolution - currentResolution)\n      ]\n    }\n    \n    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration)\n  }\n  \n  /**\n   *\n   * 根据resolution进行缩放\n   *\n   * @method zoomWithoutConstraints\n   *\n   * @param view {Object}\n   * @param resolution {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   */\n  zoomWithoutConstraints (view, resolution, opt_anchor, opt_duration) {\n    if (resolution) {\n      const currentResolution = view.resolution\n      const currentCenter = view.center\n      \n      if (currentResolution !== undefined && currentCenter &&\n          resolution !== currentResolution && opt_duration) {\n        view.resolution = resolution\n\n      } else {\n        if (opt_anchor) {\n          const center = view.calculateCenterZoom(resolution, opt_anchor)\n          view.center = center\n        }\n        view.resolution = resolution\n      }\n    }\n  }\n  \n  /**\n   * 获取当前标注视图的坐标范围(标注的图片的像素)\n   *\n   * @method getViewDataExtent\n   *\n   * @returns {*|null}\n   */\n  getViewDataExtent () {\n    if (!this._dataExtent) {\n      this._dataExtent = this.map.view.dataExtent\n    }\n    \n    return this._dataExtent\n  }\n  \n  /**\n   *\n   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n   *\n   * @method coordinateBeyond\n   * @param coordinate {Array} 坐标点{x,y}\n   * @returns {Array} new Coordinate\n   */\n  coordinateBeyond (coordinate) {\n    // 如果允许坐标可超出图片的边界\n    if (this.map.allowCoordinatesBeyondImage) {\n      return coordinate\n    }\n    \n    if (coordinate === undefined) {\n      return coordinate\n    }\n    \n    let newCoordinate = new Array(2)\n    \n    let x,y\n    \n    try{\n      x = coordinate[0]\n      y = coordinate[1]\n    } catch (e) {\n      // console.log(coordinate)\n    }\n  \n    newCoordinate[0] = x\n    newCoordinate[1] = y\n  \n    if (x <= 0) {\n      newCoordinate[0] = 0\n    }\n    \n    if (y <= 0) {\n      newCoordinate[1] = 0\n    }\n    \n    const extent = this.getViewDataExtent()\n    \n    if (extent) {\n      if (x >= extent[2]) {\n        newCoordinate[0] = extent[2]\n      }\n      \n      if (y >= extent[3]) {\n        newCoordinate[1] = extent[3]\n      }\n    }\n    \n    return newCoordinate\n  }\n  \n  /**\n   * shouldStopEvent\n   * @param handled\n   * @returns {*}\n   *\n   */\n  shouldStopEvent (handled) {\n    return handled\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @type {mk.map}\n   */\n  get map () { return this._map }\n  set map (value) { this._map = value }\n\n  /**\n   * active读写器, 读取设置active\n   *\n   * @type {Function}\n   * @property active\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/component.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 矩形类和数据结构\n *\n * @class Extent\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var rect = new mk.Extent(10, 10, 500, 500)\n */\nexport default class Extent extends Geometry {\n\n  /**\n   * 构造函数，构建一个extent对象\n   *\n   * @param xmin {Number}\n   * @param ymin {Number}\n   * @param xmax {Number}\n   * @param ymax {Number}\n   *\n   */\n  constructor (xmin = 0, ymin = 0, xmax = 0, ymax = 0) {\n    super()\n\n    this._xmin = xmin\n    this._ymin = ymin\n    this._xmax = xmax\n    this._ymax = ymax\n  \n    this._rings = []\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  }\n\n  /**\n   * 获取Geometry的类型\n   *\n   * @property geometryType\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.EXTENT }\n\n  /**\n   * 计算x轴的中心坐标\n   *\n   * @property centerX\n   * @type {Number}\n   */\n  get centerX () { return (this.xmax + this.xmin) / 2 }\n\n  /**\n   * 计算Y轴的中心坐标\n   *\n   * @property centerY\n   * @type {Number}\n   */\n  get centerY () { return (this.ymax + this.ymin) / 2 }\n\n  /**\n   * 计算最小外接矩形的宽\n   *\n   * @property width\n   * @returns {Number}\n   */\n  get width () { return Math.abs(this.xmax - this.xmin) }\n\n  /**\n   * 计算最小外接矩形的高\n   *\n   * @property height\n   * @returns {Number}\n   */\n  get height () { return Math.abs(this.ymax - this.ymin) }\n\n  /**\n   * 获取最小外接矩形本对象\n   *\n   * @property extent\n   * @returns {Object} extent\n   */\n  get extent () { return this }\n  \n  /**\n   * X 轴最小值\n   *\n   * @property xmin\n   * @type {Number}\n   */\n  get xmin () { return this._xmin }\n  set xmin (value) {\n    this._xmin = value\n    this.changed()\n  }\n  \n  /**\n   * Y 轴最小值\n   *\n   * @property ymin\n   * @type {Number}\n   */\n  get ymin () { return this._ymin }\n  set ymin (value) {\n    this._ymin = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property xmax\n   * @type {Number}\n   */\n  get xmax () { return this._xmax }\n  set xmax (value) {\n    this._xmax = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property ymax\n   * @type {Number}\n   */\n  get ymax () { return this._ymax }\n  set ymax (value) {\n    this._ymax = value\n    this.changed()\n  }\n  \n  \n  /**\n   * 判断点是否在矩形内\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   */\n  containsXY (x, y) {\n    return ExtentUtil.containsPoint(this, [x, y])\n  }\n  \n  /**\n   * getFlatInteriorPoint\n   * @returns {[*,*]}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n      // this._flatInteriorPoint = [this.centerX, this.centerY]\n      this._flatInteriorPoint = [this.xmin, this.ymin]\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 移动矩形通过x，y值\n   *\n   * @method move\n   * @param x {Number}\n   * @param y {Number}\n   */\n  move (x = 0, y = 0, opts) {\n    let beyond\n    if (opts) {\n      if (opts.beyond) {\n        beyond = opts.beyond\n      }\n    }\n    \n    let minPoint = [this.xmin,this.ymin]\n    const width = this.width\n    const height = this.height\n\n    const newMinPoint = new Array(2)\n    \n    newMinPoint[0] = minPoint[0] + x\n    newMinPoint[1] = minPoint[1] + y\n    \n    if (beyond) {\n      if (minPoint[0] < beyond.xmin) {\n        minPoint[0] = beyond.xmin\n        newMinPoint[0] = minPoint[0]\n      }\n      \n      if (minPoint[0] + width + x >= beyond.xmax) {\n        newMinPoint[0] = minPoint[0]\n      }\n  \n      if (minPoint[1] < beyond.ymin) {\n        minPoint[1] = beyond.ymin\n        newMinPoint[1] = minPoint[1]\n      }\n  \n      if (minPoint[1] + height + y >= beyond.ymax) {\n        newMinPoint[1] = minPoint[1]\n      }\n    }\n  \n    const newCoordiante = [\n      newMinPoint,\n      [newMinPoint[0] + width, newMinPoint[1]],\n      [newMinPoint[0] + width, newMinPoint[1] + height],\n      [newMinPoint[0], newMinPoint[1] + height],\n      newMinPoint]\n    \n    this.setCoordinates(newCoordiante)\n  }\n  \n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @method rings\n   * @returns {Array}\n   */\n  get rings () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n    \n    return this._rings\n  }\n\n  set rings (value) {\n    this._rings = value\n    let extentArr = ExtentUtil.boundingSimpleExtent(value)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  }\n  \n  /**\n   * 获取图形的坐标数据\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n  \n    return this._rings\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition1 (offsetX = 0, offsetY = 0) {\n    return [( this.xmin + this.xmax ) / 2 - offsetX, this.ymin - offsetY]\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition(offsetX = 0, offsetY = 0) {\n    return [this.xmin - offsetX, this.ymin - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.rings = coordinates\n  \n    let extentArr = ExtentUtil.boundingSimpleExtent(coordinates)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  \n    this.changed()\n  }\n  \n  /**\n   * 获取点位于图形坐标点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord {Array}\n   * @returns {Number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆矩形框\n   *\n   * @method clone\n   * @returns {Extent}\n   */\n  clone () {\n    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax)\n  }\n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/extent.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {linearRings} from './support/interpolate'\nimport {linearRingsAreOriented,orientLinearRings} from './support/orient'\n\n/**\n * 面类和数据结构\n *\n * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n *\n * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n * 的最外层，第二条及其以后表示多边形的内部洞环。\n *\n * @class Polygon\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var polygon = new mk.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n *\n */\nexport default class Polygon extends Geometry {\n  \n  /**\n   * 创建一个Polygon实例\n   * @constructor\n   * @param rings\n   */\n  constructor (rings = []) {\n    super()\n\n    this._rings = []\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     * 更新多边形的坐标\n     */\n    this.setCoordinates(rings)\n  }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 可用来对图形进行拖动、旋转、缩放\n   *\n   * @method extent\n   * @abstrct function\n   * @returns {Extent}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const coords = this.getCoordinates()\n      \n      // 计算最小外界矩形，只考虑外围环\n      if (coords.length > 0) {\n        let rings = coords[0]\n  \n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n  \n        for (let ring of rings) {\n          xmin = Math.min(xmin, ring[0])\n          ymin = Math.min(ymin, ring[1])\n          xmax = Math.max(xmax, ring[0])\n          ymax = Math.max(ymax, ring[1])\n        }\n  \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n\n    return this._extent\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @method geometryType\n   * @abstrct function\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.POLYGON }\n\n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @property rings\n   */\n  get rings () { return this._rings }\n  set rings (value) {\n    this._rings = value\n    this._extent = null\n  }\n  \n  /**\n   * 多边形添加线段\n   *\n   * @method addRing\n   * @param ring {Array}\n   *\n   */\n  addRing (ring) {\n    this.rings.push(ring)\n    this._extent = null\n  }\n  \n  /**\n   * 判断点是否在多边形上\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   * @returns {Boolean}\n   */\n  containsXY (x, y) {\n    const coords = this.getCoordinates()\n    const outRing = coords[0]\n    \n    let contains = false\n    if (this._inOneRing(x, y, outRing)) {\n      contains = true\n    }\n    \n    if (coords.length > 1 && contains) {\n      const coordsTemp = coords.slice(1)\n      \n      const inHole = coordsTemp.some( ring =>\n        this._inOneRing(x, y, ring)\n      )\n      \n      if (inHole) {\n        contains = false\n      }\n    }\n    \n    return contains\n  }\n  \n  /**\n   * 判断 x 和 y 的值是否在环内\n   *\n   * @param x {Number}\n   * @param y {Number}\n   * @param ring {Array}\n   * @returns {Boolean}\n   * @private\n   */\n  _inOneRing (x, y, ring) {\n    const px = x\n    const py = y\n    let flag = false\n  \n    for (let i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n      const sx = ring[i][0]\n      const sy = ring[i][1]\n      const tx = ring[j][0]\n      const ty = ring[j][1]\n    \n      // 点与多边形顶点重合\n      if ((sx === px && sy === py) || (tx === px && ty === py)) {\n        return true\n      }\n    \n      // 判断线段两端点是否在射线两侧\n      if ((sy < py && ty >= py) || (sy >= py && ty < py)) {\n        // 线段上与射线 Y 坐标相同的点的 X 坐标\n        let x = sx + (py - sy) * (tx - sx) / (ty - sy)\n      \n        // 点在多边形的边上\n        if (x === px) {\n          return true\n        }\n      \n        // 射线穿过多边形的边界\n        if (x > px) {\n          flag = !flag\n        }\n      }\n    }\n  \n    // 射线穿过多边形边界的次数为奇数时点在多边形内\n    return flag\n  }\n  \n  /**\n   * 计算多边形的内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array} 返回内点，格式 [x, y]\n   */\n  getFlatInteriorPoint () {\n    // 缓存限制\n    if (this._flatInteriorPointRevision !== this.revision ) {\n      const flatCenter = [this.extent.centerX, this.extent.centerY]\n  \n      const ends = [this.getCoordinates()[0].length * 2]\n      const orientedFlatCoordinates = this.getOrientedFlatCoordinates()\n  \n      this._flatInteriorPoint = linearRings(\n        orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return  this._flatInteriorPoint\n  }\n  \n  /**\n   * 对多边形的边进行顺序化\n   * getOrientedFlatCoordinates\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates () {\n    let orientedFlatCoordinates\n    \n    const flatCoordinates = []\n    const coordinates = this.getCoordinates()[0]\n  \n    coordinates.forEach( point => {\n      flatCoordinates.push(point[0], point[1])\n    })\n  \n    const ends = [flatCoordinates.length]\n    \n    if (linearRingsAreOriented(flatCoordinates, 0, ends, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = flatCoordinates.slice()\n      orientedFlatCoordinates.length = orientLinearRings(orientedFlatCoordinates,\n        0, ends, this.stride)\n    }\n    \n    // this.orientedRevision_ = this.getRevision()\n      \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 判断当前多边形是否有洞\n   *\n   * @method hasHoles\n   * @returns {boolean}\n   */\n  hasHoles () {\n    return this.getCoordinates().length > 1\n  }\n  \n  /**\n   * 获取多边形坐标\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    return this.rings\n  }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置多边形的坐标\n   *\n   * @method setCoordinates\n   * @param coords\n   */\n  setCoordinates (coords) {\n    this.rings = coords\n    this._extent = null\n    this.stride = 2\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    const coords = this.getCoordinates()\n    for (let i = 0, len = coords.length; i < len; i++) {\n      const rings = coords[i]\n      for (let j = 0,jLen = rings.length; j < jLen; j++) {\n        const point = rings[j]\n        if (point[0] === coord[0] && point[1] === coord[1]) {\n          return {\n            ringIndex: i,\n            index: j\n          }\n        }\n      }\n    }\n    \n    return {\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆多边形\n   *\n   * @method clone\n   * @returns {Polygon}\n   */\n  clone () {\n    const coords = this.getCoordinates()\n    \n    const newCoordinates = []\n    let outRings = []\n    coords.forEach( ring => {\n      ring.forEach(points => {\n        outRings.push([points[0], points[1]])\n      })\n  \n      newCoordinates.push(outRings)\n      outRings = []\n    })\n    \n    const newPolygon = new Polygon()\n    newPolygon.setCoordinates(newCoordinates)\n    \n    return newPolygon\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/polygon.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Geometry from '../../geometry/geometry'\n\n/**\n * 判断两个点是否相交\n *\n * @method pointIntersectPoint\n * @param pointA\n * @param pointB\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectPoint (pointA, pointB, tolerance) {\n  const toleranceDistance = tolerance ? tolerance : 2\n  \n  const distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y)\n  if (distance <= toleranceDistance) {\n    return true\n  }\n  \n  return false\n}\n\n/**\n * 判断点是否与线相交\n *\n * @method pointIntersectLine\n * @param pointA\n * @param line\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectLine (pointA, line, tolerance) {\n  const path = line.path\n  const squaredSegmentDistanceFn = squaredSegmentDistance\n  const x = pointA.x\n  const y = pointA.y\n  \n  let find = false\n  for (let i = 0, ii = path.length - 1; i < ii; i++) {\n    let nowP = path[i]\n    let nextP = path[i + 1]\n    let distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y)\n    distance = Math.sqrt(distance)\n    if (distance <= tolerance) {\n      find = true\n      break\n    }\n  }\n  \n  return find\n}\n\n/**\n * Return the square of the closest distance between the point\n * and the line segment.\n * @param x\n * @param y\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {number}\n */\nexport function squaredSegmentDistance (x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  if (dx !== 0 || dy !== 0) {\n    let t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy)\n    if (t > 1) {\n      x1 = x2\n      y1 = y2\n    } else if (t > 0) {\n      x1 += dx * t\n      y1 += dy * t\n    }\n  }\n  \n  return squaredDistance(x, y, x1, y1)\n}\n\n/**\n *\n * @param coordinate\n * @param segment\n * @returns {number}\n */\nexport function squaredDistanceToSegment (coordinate, segment) {\n  const closestCoordinate = closestOnSegment(coordinate, segment)\n  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1])\n}\n\n/**\n * 判断两个坐标是否相等\n *\n * @method equals\n * @param coordinate1\n * @param coordinate2\n * @returns {Boolean}\n */\nexport function equals (coordinate1, coordinate2) {\n  let equals = true\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false\n      break\n    }\n  }\n  \n  return equals\n}\n\n/**\n * 计算两点之间的距离的平方\n *\n * @method squaredDistance\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {Number} squared distance\n */\nexport function squaredDistance (x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  return dx * dx + dy * dy\n}\n\n/**\n * 计算两点之间的距离\n *\n * @method distance\n * @param coord1\n * @param coord2\n * @returns {Number}\n */\nexport function distance (coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]))\n}\n\n/**\n *\n * @param coordinate {Array}\n * @param segment\n * @returns {Array}\n */\nexport function closestOnSegment (coordinate, segment) {\n  const x0 = coordinate[0]\n  const y0 = coordinate[1]\n  const start = segment[0]\n  const end = segment[1]\n  const x1 = start[0]\n  const y1 = start[1]\n  const x2 = end[0]\n  const y2 = end[1]\n  const dx = x2 - x1\n  const dy = y2 - y1\n  \n  const along = (dx === 0 && dy === 0) ? 0 :\n  ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0)\n  \n  let x, y\n  if (along <= 0) {\n    x = x1\n    y = y1\n  } else if (along >= 1) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return [x, y]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param x\n * @param y\n * @returns {oolean}\n */\nexport function linearRingsContainsXY (flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false\n  }\n  \n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false\n  }\n  \n  let i, ii\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param x\n * @param y\n * @returns {boolean}\n */\nexport function linearRingContainsXY (flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    \n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--\n    }\n    \n    x1 = x2\n    y1 = y2\n  }\n  \n  return wn !== 0\n}\n\n/**\n * 计算在 AB 延长线上的距离点 B d 距离的点\n * @param xa A 点的 X\n * @param ya A 点的 Y\n * @param xb B 点的 X\n * @param yb B 点的 Y\n * @param d 距离 B 点 d 距离\n * @returns {Array} 返回延长线上的点\n */\nexport function getPointInExtendedLineByDistanceFromAB (xa, ya, xb, yb, d) {\n  let xab, yab\n  let xbd\n  let xd, yd\n  \n  xab = xb - xa\n  yab = yb - ya\n  \n  xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  \n  if (xab > 0) {\n    xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  } else {\n    xbd = -Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  }\n  \n  xd = xb + xbd\n  yd = yb + yab / xab * xbd\n  \n  return [xd, yd]\n}\n\nexport function simplify(geometry) {\n  if (!geometry) {\n    return geometry\n  }\n  \n  let coordinates\n  const geoType = geometry.geometryType\n  if (geoType === Geometry.POLYGON) {\n    coordinates = geometry.getCoordinates()[0]\n  } else if (geoType === Geometry.LINE) {\n    coordinates = geometry.getCoordinates()\n    \n    const sliceCoords = coordinates.slice(1, coordinates.length - 2)\n    const newCoords = [coordinates[0]]\n    \n    for (let i = 0, len = sliceCoords.length ;i < len; i += 2) {\n      newCoords.push(sliceCoords[i])\n    }\n  \n    newCoords.push(coordinates[coordinates.length - 1])\n    geometry.setCoordinates(newCoords)\n  }\n}\n\nexport default {\n  linearRingContainsXY,\n  linearRingsContainsXY,\n  pointIntersectPoint,\n  squaredDistance,\n  closestOnSegment,\n  getPointInExtendedLineByDistanceFromAB,\n  equals,\n  simplify,\n  distance\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/geometryutil.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n//\n// The sub event class can define it's own property ,\n//\n//  which can be passed to other event Listener via event dispatch.\n/**\n * 定义事件模型基类，自定义事件必须继承该类。\n *\n * 事件类及其继承者用于事件传递、数据传送和信息通告。\n *\n * @class BaseEvent\n * @constructor\n * @module core\n *\n */\nexport default class BaseEvent {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param type\n   */\n  constructor (type) {\n  \n    /**\n     * 是否停止事件的冒泡\n     *\n     * @type {Boolean}\n     * @property propagatinoStopped\n     */\n    this.propagatinoStopped = false\n  \n    /**\n     * 事件标示\n     *\n     * @example'mousedown' | 'mousemove' | 'click'\n     *\n     * @type {String}\n     * @property type\n     */\n    this.type = type\n  \n    /**\n     * 事件源\n     *\n     * @type {Object}\n     * @property target\n     */\n    this.target = null\n  }\n  \n}\n\n/**\n *\n * 用于阻止事件的冒泡\n *\n * @param evt {Object} evt DOM event model\n * @static\n * @method stopPropagation\n */\nBaseEvent.stopPropagation = evt => evt.stopPropagation()\n\n/**\n *\n * 用于阻止浏览器的默认行为\n *\n * @static\n * @method preventDefault\n * @param evt {Object} evt DOM event model\n */\nBaseEvent.preventDefault = evt => evt.preventDefault()\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseevent.js","\nimport BaseLayer from './baselayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport FeatureEvent from '../meek/featureevent'\nimport {EventType} from '../meek/eventtype'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport Geometry from '../geometry/geometry'\n\n/**\n * FeatureLayer\n *\n * class FeatureLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class FeatureLayer extends BaseLayer {\n\n  constructor (options = {}) {\n    super(options)\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._style = null\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._styleFunction = null\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._featureChangeKeys = new Map()\n  \n    /**\n     *\n     */\n    this.style = options.style\n    \n    // add features if passed by options\n    if (options.features) {\n      this.addFeatures(options.features)\n    }\n  \n    /**\n     * zIndex\n     *\n     * @property zIndex\n     * @type {Number}\n     */\n    this.zIndex = options.zIndex || 2\n  \n    /**\n     * The rendering buffer will be used for building an extent that\n     * limit geometries rendering\n     * @type {number}\n     * @private\n     */\n    this._renderBuffer = options.renderBufferValue !== undefined ?\n      options.renderBufferValue : 100\n  \n  }\n  \n  /**\n   * 清除所有features\n   *\n   * @method clear\n   */\n  clear () {\n    if (this._features.length !== 0) {\n      this._features = []\n      \n      // remove the event listener from feature\n      const unlistenByKeyFn = unlistenByKey\n      \n      this._featureChangeKeys.forEach((value) => {\n        unlistenByKeyFn(value)\n      })\n      \n      this._featureChangeKeys.clear()\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.CLEAR))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n\n  /**\n   * 获取features\n   *\n   * @returns {Array}\n   */\n  get features () { return this._features }\n  \n  /**\n   * 通过id查找feature\n   *\n   * @param id\n   * @returns {Boolean}\n   */\n  findFeature (id) {\n    const features = this.features\n    return features.find( f => f.id === id )\n  }\n  \n  /**\n   * 向layer中添加features\n   *\n   * @method addFeatures\n   * @param {Object} features\n   * @returns {Boolean}\n   */\n  addFeatures (features) {\n    if (!Array.isArray(features)) {\n      return false\n    }\n    \n    this._addFeaturesInner(features)\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 判断feature是否存在\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  hasFeature (feature) {\n    if (feature === null || feature === undefined) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const features = this.features\n    const findIndex = features.findIndex(f => f.id === featureId )\n    \n    return findIndex > -1\n  }\n  \n  /**\n   * 添加feature到layer的集合中，并派发feature事件\n   *\n   * addFeaturesInner\n   * @param features\n   * @private\n   */\n  _addFeaturesInner (features) {\n    features.forEach(feature => {\n      if (!this.hasFeature(feature)) {\n        this.features.push(feature)\n        \n        this._setupChangeEvents(feature.id, feature)\n        this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.ADD_FEATURE, feature))\n      }\n    })\n  }\n  \n  /**\n   * 添加feature到layer的集合中\n   *\n   * @method addFeature\n   * @param feature\n   * @returns {Boolean}\n   */\n  addFeature (feature) {\n    if (!feature) {\n      return false\n    }\n    \n    this._addFeaturesInner([feature])\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 获取当前鼠标点的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param frameState\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance {Number}\n   * @returns {*}\n   */\n  forEachFeatureAtPiexl (frameState,piexl,callback,tolerance) {\n    // frameState 携带 view 信息\n  \n    // 1、计算当前屏幕内的feature\n    const features = this._getCurrentExtentFeatures()\n    \n    // calculate features that their extent has intersected with a given point\n    const extentFeatures = this._getIntersectedFeatures(piexl,features)\n  \n    const piexlX = piexl[0]\n    const piexlY = piexl[1]\n    const options = {\n      tolerance: tolerance * frameState.viewState.resolution\n    }\n    \n    const result = extentFeatures.filter( (feature) =>\n      feature.geometry.containsXY(piexlX, piexlY, options)\n    )\n    \n    return result\n  }\n  \n  /**\n   *\n   * @param point\n   * @param features\n   * @private\n   */\n  _getIntersectedFeatures (point, features) {\n    return features.filter( (feature) =>\n      feature.geometry.pointInExtent(point)\n    )\n  }\n  \n  /**\n   *\n   * @returns {*}\n   * @private\n   */\n  _getCurrentExtentFeatures () {\n    return this.features\n  }\n  \n  /**\n   * 从集合中移除feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  removeFeature (feature) {\n    const features = this.features\n    if (features.length === 0) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const index = features.findIndex( f =>\n      f.id === featureId\n    )\n    \n    \n    if (index > -1) {\n      features.splice(index, 1)\n      \n      this._featureChangeKeys.delete(featureId)\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.REMOVE_FEATURE, feature))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param featureKey\n   * @param feature\n   * @private\n   */\n  _setupChangeEvents (featureKey, feature) {\n    this._featureChangeKeys.set(featureKey, listen(feature,\n      EventType.CHANGE, this._handleFeatureChange, this))\n  }\n  \n  /**\n   *\n   * @private\n   */\n  _handleFeatureChange () {\n    this.changed()\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @param value\n   */\n  set style (value) {\n    this._style = value !== undefined ? value : Style.defaultFunction()\n    this._styleFunction = value === null ? undefined :Style.createFunction(this._style)\n  }\n  \n  get style () {\n    if(this._style === null){\n      this._style = Style.defaultFunction()\n    }\n    \n    return this._style\n  }\n  \n  /**\n   * renderBuffer读写器\n   *\n   */\n  get renderBuffer() { return this._renderBuffer }\n  set renderBuffer (renderBufferValue) {\n    if (this._renderBuffer !== renderBufferValue) {\n      this._renderBuffer = renderBufferValue\n    }\n  }\n  \n  /**\n   * 加载当前屏幕的 features\n   *\n   * 默认会把点、线放在队列尾部\n   *\n   * @method loadFeature\n   * @param extent {Geometry}\n   * @returns {feature}\n   */\n  loadFeature (extent) {\n    const features = this.features\n    const intersects = ExtentUtil.intersects\n    const createOrUpdate = ExtentUtil.createOrUpdate\n    const newFeatures = []\n    const pointFeatures = []\n    const lineFeatures = []\n    \n    features.forEach(feature => {\n      // 判断图形是否显示\n      if (feature.display) {\n        const geometry = feature.geometry\n        const geometryExtent = geometry.extent\n        const extentArr = createOrUpdate(geometryExtent.xmin,\n          geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax)\n\n        if (intersects(extentArr, extent)) {\n          const geometryType = geometry.geometryType\n          if (geometryType === Geometry.POINT ||\n              geometryType === Geometry.MULTI_POINT ) {\n            pointFeatures.push(feature)\n          } else if (geometryType === Geometry.LINE ||\n            geometryType === Geometry.MULTI_LINE) {\n            lineFeatures.push(feature)\n          } else {\n            newFeatures.push(feature)\n          }\n        }\n      }\n    })\n\n    return [].concat(newFeatures, lineFeatures, pointFeatures)\n  }\n\n  /**\n   * 获取样式\n   *\n   * @method styleFunction\n   * @returns {null|undefined|*}\n   */\n  get styleFunction () { return this._styleFunction }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/featurelayer.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport BrowserEvent from '../meek/browserevent'\n\n\nexport function singleClick (browserEvent) {\n  return browserEvent.type === BrowserEvent.SINGLE_CLICK\n}\n\nexport function mouseWheel (browserEvent) {\n  return browserEvent.type === BrowserEvent.MOUSE_WHEEL ||\n         browserEvent.type === BrowserEvent.WHEEL\n}\n\nexport function noModifierKeys (browserEvent) {\n  const originalEvent = browserEvent.originalEvent\n  return ( !originalEvent.altKey &&\n  !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n  !originalEvent.shiftKey)\n}\n\n\nexport function targetNotEditable (mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target\n  const tagName = target.tagName\n  return (\n  tagName !== 'INPUT' &&\n  tagName !== 'SELECT' &&\n  tagName !== 'TEXTAREA')\n}\n\nexport default {\n  singleClick,\n  mouseWheel,\n  noModifierKeys,\n  targetNotEditable\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/mousekey.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\nexport default class Obj {\n  \n  /**\n   * Get a collection from object\n   * @param object\n   * @returns {Array}\n   */\n  static getValues (object) {\n    const values = []\n    for (let property in object) {\n      values.push(object[property])\n    }\n    return values\n  }\n  \n  /**\n   * Clear all properties in object\n   * @param object\n   */\n  static clear (object) {\n    for (let property in object) {\n      Reflect.deleteProperty(object, property)\n    }\n  }\n  \n  /**\n   * Convert an object to a map instance\n   * @param obj\n   * @returns {Map}\n   */\n  static objectToMap (obj) {\n    let map = new Map()\n    \n    for (let ke of Object.keys(obj)) {\n      map.set(ke, obj[ke])\n    }\n    \n    return map\n  }\n  \n  /**\n   *\n   * Convert a map object to object\n   *\n   * @static\n   * @method mapToObject\n   * @param map {Map} 传入的 Map 的对象\n   * @returns {Object} 装换成后的 Object 的对象\n   */\n  static mapToObject (map) {\n    // 合法性判断\n    if (map === undefined || map === null) {\n      return {}\n    }\n    \n    let object = {}\n    map.forEach( (value, key) => {\n      object[key] = value\n    })\n    \n    return object\n  }\n  \n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/obj.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个线图形的样式\n *\n * @class LineStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var lineStye = new mk.LineStyle([0, 0, 255],1,3,\n *        mk.LineStyle.LineCap.ROUND,\n *        mk.LineStyle.LineJion.ROUND)\n */\nexport default class LineStyle extends BaseStyle {\n  \n  /**\n   * @constructor\n   * @param color\n   * @param alpha\n   * @param width\n   * @param style\n   * @param lineCap\n   * @param lineJion\n   * @param miterLimit\n   */\n  constructor (color = [255,255,255], alpha = 1, width = 1,\n        style = LineStyle.SOLID,lineCap = LineStyle.LineCap.BUTT,\n        lineJion = LineStyle.LineJion.MITER,miterLimit = 10) {\n    super(color, style, alpha)\n\n    this.width = width\n    this.lineCap = lineCap\n    this.lineJion = lineJion\n    this.miterLimit = miterLimit\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 线宽\n   *\n   * @property width\n   * @type {Number}\n   */\n  get width () { return this._width }\n  set width (value) { this._width = value }\n  \n  /**\n   * 线的末端样式\n   *\n   * @property lineCap\n   * @type {Number}\n   */\n  set lineCap (value) { this._lineCap = value }\n  get lineCap () { return this._lineCap }\n  \n  /**\n   * 交叉线时的样式\n   *\n   * @property lineJion\n   * @type {Number}\n   */\n  set lineJion (value) { this._lineJion = value }\n  get lineJion () { return this._lineJion }\n  \n  /**\n   * 斜角缝限制\n   *\n   * @property miterLimit\n   * @type {Number}\n   */\n  set miterLimit (value) { this._miterLimit = value }\n  get miterLimit () { return this._miterLimit }\n\n  /**\n   * 克隆线样式\n   *\n   * @method clone\n   * @returns {LineStyle}\n   */\n  clone () {\n    const newStyle = new LineStyle(this.color, this.alpha, this.width,\n      this.style, this.lineCap, this.lineJion, this.miterLimit)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n\n}\n\n/**\n * 定义线的样式\n * @type {string}\n */\nLineStyle.SOLID = 'solid'\n\n/**\n * TODO 由郭靖来处理，参考 PointStyle\n * @type {string}\n */\nLineStyle.DASH = 'dash'\n\nLineStyle.DOT = 'dot'\n\nLineStyle.DASHDOT = 'dashdot'\n\nLineStyle.DASHDOTDOT = 'dashdotdot'\n\nLineStyle.NULL = 'none'\n\nLineStyle.LineCap = {\n  BUTT: 'butt',\n  ROUND: 'round',\n  SQUARE: 'square'\n}\n\n// visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\nLineStyle.LineJion = {\n  MITER: 'miter',// 默认，创建尖角\n  BEVEL: 'bevel',\n  ROUND: 'round'\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/linestyle.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\nimport Geometry from '../geometry/geometry'\nimport FillStyle from './fillstyle'\nimport LineStyle from './linestyle'\nimport PointStyle from './pointstyle'\n\nexport const Style = {}\n\n/**\n * 设置缺省图形style\n *\n * Create a defaut style for feature layer\n * @returns {null|Array|[*]}\n */\nStyle.defaultFunction = function () {\n  if (!Style._default) {\n    const white = [255, 255, 255]\n    const blue = [0, 153, 255]\n    const width = 1.5\n  \n    Style._default = {}\n    \n    // 面样式 polygon style\n    Style._default[Geometry.POLYGON] = [\n      new FillStyle(white, new LineStyle(blue, 1, 1.25), 0.2)\n    ]\n    Style._default[Geometry.MULTI_POLYGON] = Style._default[Geometry.POLYGON]\n    Style._default[Geometry.PARALLELOGRAM] = Style._default[Geometry.POLYGON]\n    \n    // same as polygon style\n    Style._default[Geometry.EXTENT] = Style._default[Geometry.POLYGON]\n  \n    // 线样式 line style\n    Style._default[Geometry.LINE] = [\n      new LineStyle(blue, 1, width)// 内框\n    ]\n  \n    // 点样式 point style\n    Style._default[Geometry.POINT] = [new PointStyle(10,white,1,new LineStyle(blue,1,width))]\n    \n  }\n  \n  return Style._default\n}\n\n/**\n * Create a default style while drawing\n * @returns {{}}\n */\nStyle.createDefaultEditing = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 1.5\n  \n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white,// 填充\n    new LineStyle(blue,1,1)// 边框\n    ,0.2)\n  ]\n  \n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  styles[Geometry.PARALLELOGRAM] = styles[Geometry.POLYGON]\n    \n  // 线样式\n  styles[Geometry.LINE] = [\n    new LineStyle(white,1,width + 1,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND),// 外框\n    new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(10, white, 0.1, new LineStyle(blue, 1, 2))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n *\n * @returns {{}}\n */\nStyle.createDefaultSelecting = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 3\n  const outsideLine = new LineStyle(white,1,width + 2,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 外框\n  const insideLine = new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)\n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white, outsideLine,0.5),\n\n    new FillStyle(white, insideLine,0)\n  ]\n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  \n  // 线样式\n  styles[Geometry.LINE] = [\n    outsideLine,// 外框\n    insideLine// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(12,blue,1,new LineStyle(blue,1,1))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n * Convert the passed obj into a style function.\n *\n * @param obj\n * @returns {*}\n */\nStyle.createFunction = function(obj) {\n  let styleFunction\n  \n  if (typeof obj === 'function') {\n    styleFunction = obj\n  } else {\n    let styles\n    \n    if (Array.isArray(obj)) {\n      styles = obj\n    } else {\n      styles = [obj]\n    }\n    \n    styleFunction = function(feature) {\n      return styles[0][feature.geometry.geometryType]\n    }\n  }\n  \n  return styleFunction\n}\n\n\nexport default {\n  Style\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/style.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n *\n * @param optWidth\n * @param optHeight\n * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n */\nexport function createCanvasContext2D (optWidth, optHeight) {\n  let canvas = document.createElement('CANVAS')\n  if (optWidth) {\n    canvas.width = optWidth\n  }\n  \n  if (optHeight) {\n    canvas.height = optHeight\n  }\n  \n  return canvas.getContext('2d')\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerWidth (element) {\n  let width = element.offsetWidth\n  const style = getComputedStyle(element)\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10)\n  \n  return width\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerHeight (element) {\n  let height = element.offsetHeight\n  const style = getComputedStyle(element)\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10)\n  \n  return height\n}\n\n\nexport function removeNode (node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null\n}\n\n/**\n *\n * @param node\n */\nexport function removeChildren (node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild)\n  }\n}\n\nexport default {\n  createCanvasContext2D,\n  outerWidth,\n  outerHeight,\n  removeChildren,\n  removeNode\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/domutil.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n\n/**\n * 将rbg数组装换成rgba的字符串格式\n * @param color rgb数组\n * @param alpha 透明度\n * @returns {string} 返回rgba格式字符串\n */\nexport function colorToString(color,alpha = 1){\n  let r = color[0]\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0\n  }\n  \n  let g = color[1]\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0\n  }\n  \n  let b = color[2]\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0\n  }\n  \n  return `rgba(${r}, ${g} , ${b} , ${alpha} )`\n}\n\nexport default {\n  colorToString\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport BaseObject from '../core/baseobject'\n\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey} from '../core/eventmanager'\n\nexport default class Control extends BaseObject {\n  constructor (options = {}) {\n    super()\n    \n    this._element = options.element ? options.element : null\n    \n    this._target = null\n    \n    this._map = null\n    \n    this._listenerKeys = []\n    \n    \n    if (options.target) {\n      this.target = options.target\n    }\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      value.render()\n    }\n  }\n  \n  set target(value) {\n    this._target = typeof value === 'string' ?\n      document.getElementById(value) :\n      value\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/control.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport Extent from './extent'\n\nimport {centerLinearRingss, linearRingss} from './support/interpolate'\nimport {linearRingssAreOriented,orientLinearRingss} from './support/orient'\n\n\n/**\n * 定义复合多边形对象和数据结构\n *\n *\n * @class MutilPolygon\n * @module geometry\n * @constructor\n *\n */\nexport default class MutilPolygon extends Geometry {\n  \n  constructor (coordinates) {\n    super()\n    \n    this._polygons = []\n  \n    this.stride = 2\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    this.setCoordinates(coordinates)\n  }\n  \n  /**\n   *\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.MULTI_POLYGON }\n  \n  /**\n   * 计算复合多边形的最小外界矩形\n   * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n   * 多边形的矩形\n   *\n   * @returns {Extent|null}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const allPolygonCoords = this.getCoordinates()\n    \n      // 计算最小外界矩形，只考虑外围环\n      if (allPolygonCoords.length > 0) {\n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n        \n        allPolygonCoords.forEach( polyCoods => {\n          let rings = polyCoods[0]\n          for (let ring of rings) {\n            xmin = Math.min(xmin, ring[0])\n            ymin = Math.min(ymin, ring[1])\n            xmax = Math.max(xmax, ring[0])\n            ymax = Math.max(ymax, ring[1])\n          }\n        })\n      \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n  \n    return this._extent\n  }\n  \n  /**\n   * 获得复合多边形的坐标\n   * @returns {Array|*}\n   */\n  getCoordinates () {\n    return this._polygons\n  }\n  \n  /**\n   * 设置复合多边形的坐标\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this._polygons = coordinates\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 获得一个多边形对象\n   * @method getPolygon\n   * @param index 多边形的下标\n   * @returns {mk.Polygon} 返回一个新的多边形对象\n   */\n  getPolygon (index) {\n    if (index < 0 && this._polygons.length < index ) {\n      return null\n    }\n    \n    const coords = this._polygons[index]\n    let outRing = []\n    let innerRing = []\n    coords.forEach( rings => {\n      rings.forEach( points => {\n        innerRing.push([points[0], points[1]])\n      })\n      \n      outRing.push(innerRing)\n      innerRing = []\n    })\n    \n    const polygon = new Polygon(outRing)\n    return polygon\n  }\n\n  getFormShowPosition(offsetX = 0, offsetY = 0) {\n    const polygon = this.getPolygon(0)\n    const coordinates = polygon.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n\n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 判断集合多边形是否包括指定 x 和 y\n   * @param x\n   * @param y\n   * @returns {boolean}\n   */\n  containsXY (x, y) {\n    const polygons = this._polygons\n    for (let i = 0, len = polygons.length; i < len; i ++ ) {\n      const onePolygon = this.getPolygon(i)\n      if (onePolygon.containsXY(x, y)) {\n        return true\n      }\n    }\n    \n    return false\n  }\n  \n  /**\n   * 获取标签显示的内点\n   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n   * @returns {*}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n  \n      const polygons = this._polygons\n      let flatCoordinates = []\n      let endss = []\n  \n      const orderArray = []\n  \n      polygons.forEach( polygon => {\n        const outRings = polygon[0]\n        orderArray.push(outRings)\n      })\n  \n      orderArray.sort( (arr1, arr2) => arr1.length - arr2.length )\n  \n      let lastLen = 0\n      orderArray.forEach( arr => {\n        const currLen = arr.length * 2 + lastLen\n        endss.push([currLen])\n        lastLen = currLen\n    \n        arr.forEach( points => {\n          flatCoordinates.push(points[0], points[1])\n        })\n      })\n  \n      const flatCenters = centerLinearRingss(flatCoordinates, 0, endss, this.stride)\n      this._flatInteriorPoint = linearRingss(\n        this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride,\n        flatCenters)\n    }\n    \n  \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 计算复合多边形顺时针坐标\n   * @param flatCoordinates\n   * @param endss\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates (flatCoordinates, endss) {\n    let orientedFlatCoordinates\n    \n    if (linearRingssAreOriented(flatCoordinates, 0, endss, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = [...flatCoordinates]\n      orientedFlatCoordinates.length = orientLinearRingss(orientedFlatCoordinates,\n        0, endss, this.stride)\n    }\n    \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 根据坐标值计算复合多边形的点下标\n   *\n   * @method getCoordinateIndex\n   * @param coord 坐标值，[x, y]结构\n   * @returns {\n   *    {\n   *      polygonIndex: number 位于第几个多边形上 ,\n   *      ringIndex: number 位于多边形第几个环上,\n   *      index: number 位于环上第几个顶点上\n   *     }\n   *   }\n   */\n  getCoordinateIndex (coord) {\n    const polygonCoods = this.getCoordinates()\n    \n    for ( let ii = 0, iiLen = polygonCoods.length ; ii < iiLen; ii ++) {\n      const coords = polygonCoods[ii]\n  \n      for (let i = 0, len = coords.length; i < len; i++) {\n        const rings = coords[i]\n        for (let j = 0,jLen = rings.length; j < jLen; j++) {\n          const point = rings[j]\n          if (point[0] === coord[0] && point[1] === coord[1]) {\n            return {\n              polygonIndex : ii,\n              ringIndex: i,\n              index: j\n            }\n          }\n        }\n      }\n    }\n  \n    return {\n      polygonIndex : -1,\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆一个 Mutilpolygon\n   * @returns {MutilPolygon}\n   */\n  clone () {\n    const allCoords = []\n    \n    this._polygons.forEach( coords => {\n      let outRing = []\n      let innerRing = []\n      coords.forEach( rings => {\n        rings.forEach( points => {\n          innerRing.push([points[0], points[1]])\n        })\n    \n        outRing.push(innerRing)\n      })\n  \n      allCoords.push(outRing)\n      outRing = []\n    })\n    \n    const newMutilPolygon = new MutilPolygon(allCoords)\n    return newMutilPolygon\n  }\n\n  /**\n   * 将一个复合多边形，转换成多边形集合\n   */\n  convertToPolygons() {\n    const polygons = []\n    this._polygons.forEach((p, index) => {\n      polygons.push(this.getPolygon(index))\n    })\n\n    return polygons\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/mutilpolygon.js","/**\n * Created by zhangyong on 2017/8/23.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport {distance} from '../geometry/support/geometryutil'\n\nimport {getPointInExtendedLineByDistanceFromAB} from '../geometry/support/geometryutil'\n\nexport default class Parallelogram extends Polygon {\n  \n  constructor (coordinates) {\n    super(coordinates)\n  }\n  \n  get geometryType () {\n    return Geometry.PARALLELOGRAM\n  }\n  \n  getCoordinateIndex (coord) {\n    return this.getCoordinates()[0].findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  clone () {\n    return new Parallelogram(this.getCoordinates())\n  }\n  \n  /**\n   *\n   * @param coordinates\n   * @returns {Array}\n   */\n  static getTheLastPoint (coordinates) {\n    const firstPoint = coordinates[0]\n    const secondPoint = coordinates[1]\n    const thirdPoint = coordinates[2]\n    \n    const dx = thirdPoint[0] - secondPoint[0]\n    const dy = thirdPoint[1] - secondPoint[1]\n    \n    return [firstPoint[0] + dx, firstPoint[1] + dy]\n  }\n  \n  \n  /**\n   * 用于计算和更新平行四边形的顶点\n   *\n   * @param p 平行四边形对象\n   * @param vertex 新移动的点\n   * @param oldVertex 上次移动的点\n   * @param dragSegment 数据对象\n   * @returns {*} 返回新的点集合（3维数组）\n   */\n  static updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n    let dis = 0\n    if (oldVertex) {\n      dis = distance (oldVertex, vertex)\n    }\n    \n    const oldRingsCoordinates = p.getCoordinates()\n    if (dis === 0) {\n      return oldRingsCoordinates\n    }\n    \n    const oldCoordinates = oldRingsCoordinates[0]\n    const segement = dragSegment[0]\n    const edgeIndex = segement.index\n  \n    let firstCoord\n    let nowCood\n    let otherCood\n    \n    if (edgeIndex === 0 || edgeIndex === 4) {\n      firstCoord = oldCoordinates[3]\n      nowCood = oldCoordinates[0]\n      otherCood = oldCoordinates[1]\n    } else {\n      firstCoord = oldCoordinates[edgeIndex - 1]\n      nowCood = oldCoordinates[edgeIndex]\n      otherCood = oldCoordinates[edgeIndex + 1]\n    }\n    \n    // 计算延长线上的一点\n    const newCood1 = getPointInExtendedLineByDistanceFromAB(firstCoord[0],\n      firstCoord[1], nowCood[0], nowCood[1], dis)\n    \n    // 计算向量\n    const tempXX = nowCood[0] - firstCoord[0]\n    const tempYY = nowCood[1] - firstCoord[1]\n    const tempX2 = vertex[0] - oldVertex[0]\n    const tempY2 = vertex[1] - oldVertex[1]\n    \n    // 使用向量的点积，来计算两个向量的方向是否一致\n    // 如果 <0 则表示异向\n    const direction = ( tempX2 * tempXX ) + (tempY2 * tempYY)\n    \n    const dx = newCood1[0] - nowCood[0]\n    const dy = newCood1[1] - nowCood[1]\n    let newCood2\n    \n    // 不同方向\n    if (direction < 0) {\n      newCood1[0] = nowCood[0] - dx\n      newCood1[1] = nowCood[1] - dy\n  \n      newCood2 = [otherCood[0] - dx, otherCood[1] - dy]\n    } else {\n      newCood2 = [otherCood[0] + dx, otherCood[1] + dy]\n    }\n    \n    \n    oldCoordinates[edgeIndex] = newCood1\n    oldCoordinates[edgeIndex + 1] = newCood2\n    \n    if (edgeIndex === 0) {\n      oldCoordinates[4] = oldCoordinates[0]\n    } else if (edgeIndex === 4 || edgeIndex === 3) {\n      oldCoordinates[0] = oldCoordinates[4]\n    }\n    \n    return [oldCoordinates]\n  }\n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/parallelogram.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\nimport {ExtentUtil} from './support/extentutil'\nimport {squaredDistance} from './support/geometryutil'\n\n\n/**\n * 定义点类和数据结构\n *\n * @class Point\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *    var point = new mk.Point(100, 100)\n */\nexport default class Point extends Geometry {\n\n  /**\n   * 根据x和y构建一个点对象\n   * @param x 默认值为0\n   * @param y 默认值为0\n   * @constructor\n   */\n  constructor (xValue, yValue) {\n    super()\n\n    this.x = xValue\n    this.y = yValue\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @protected\n   */\n  get geometryType () { return Geometry.POINT }\n\n  /**\n   * 获取点的最小外接矩形\n   *\n   * @note 点是没有最小外接矩形\n   * @returns {null}\n   */\n  get extent () {\n    if (!this._extent) {\n      const extentObj = ExtentUtil.createScaleExtent(this, 8)\n      this._extent = new Extent(extentObj[0], extentObj[1], extentObj[2], extentObj[3])\n    }\n    \n    return this._extent\n  }\n\n  /**\n   * 获取 X 坐标值\n   *\n   * @property x\n   * @type x {number}\n   */\n  get x () { return this._x }\n  set x (value) { \n    this._x = value\n    this._extent = null\n  }\n  \n  /**\n   * 获取 Y 坐标值\n   *\n   * @property y\n   * @type {number}\n   */\n  get y () { return this._y }\n  set y (value) { \n    this._y = value\n    this._extent = null\n  }\n\n  /**\n   * 根据x,y的偏移量得到点\n   *\n   * @method offset\n   * @param nx x轴偏移量\n   * @param ny y轴偏移量\n   * @returns {mk.Point} 返回偏移以后的点对象\n   */\n  offset (nx, ny) {\n    return new Point(this.x + nx, this.y + ny)\n  }\n  \n  /**\n   * containsXY\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const pointA = this\n\n    const distance = squaredDistance(pointA.x, pointA.y, x, y)\n    if (Math.sqrt(distance/2) <= tolerance) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * 更新x,y坐标值\n   *\n   * @method update\n   * @param nx x新值\n   * @param ny y新值\n   */\n  update (nx, ny) {\n    this.x = nx\n    this.y = ny\n    \n    this._extent = null\n  }\n  \n  /**\n   *\n   *\n   * getFlatInteriorPoint\n   * @returns {[]}\n   */\n  getFlatInteriorPoint () {\n    return this.getCoordinates()\n  }\n  \n  /**\n   * 获取点的坐标\n   *\n   * @method getCoordinates\n   * @returns {Array}\n   */\n  getCoordinates () {\n    return [this.x, this.y]\n  }\n\n  /**\n   * 点的位置就是坐标点的位置减去偏移量的位置\n   *\n   * @method getFormShowPosition\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @return {[]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 10) {\n    return [this.x - offsetX, this.y - offsetY]\n  }\n\n  /**\n   * 设置点的坐标\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.update(coordinates[0], coordinates[1])\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @returns {number}\n   */\n  getCoordinateIndex () {\n    return 0\n  }\n  \n  /**\n   * 判断两个图形对象是否相等\n   *\n   * 判断标准：该图形的所有顶点值是否一致\n   *\n   * @method equal\n   * @param geometry\n   * @return {Boolean}\n   */\n  equal (geom) {\n    let equals = false\n    if (geom !== null) {\n      equals = ((this.x === geom.x && this.y === geom.x) ||\n      (Number.isNaN(this.x) && Number.isNaN(this.y) && Number.isNaN(geom.x) && Number.isNaN(geom.y)))\n    }\n    return equals\n  }\n  \n  /**\n   * 克隆点\n   *\n   * @method clone\n   * @returns {Point}\n   */\n  clone () {\n    return new Point(this.x, this.y)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/point.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\n\nexport const ImageState = {}\n\n/**\n * On IDLE\n * @type {number}\n */\nImageState.IDLE = 0\n\n/**\n * On loading\n * @type {number}\n */\nImageState.LOADING = 1\n\n/**\n * Already loaded\n * @type {number}\n */\nImageState.LOADED = 2\n\n/**\n * Error occurred\n * @type {number}\n */\nImageState.ERROR = 3\n\nexport default {\n  ImageState\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imagestate.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport Obj from '../utils/obj'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport Geometry from '../geometry/geometry'\nimport LineStyle from '../style/linestyle'\n\n/**\n * The feature class is intent to represent geographic features,with a geometry ,a style and\n * other attrubutes properties.\n * Feature provides a function named style that can be seted a style you want,\n * otherwise will use the style of feature layer.\n *\n * @class Feature\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Feature extends BaseObject {\n\n  constructor(geometry, attributes = {}, displayText, style) {\n    super()\n\n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._styleFunction = undefined\n\n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._geometryChangeKey = null\n\n\n    /**\n     *\n     */\n    this.geometry = geometry\n\n    /**\n     * 设置feature属性\n     */\n    this.initArribute(attributes)\n\n\n    /**\n     * 设置feature样式\n     *\n     */\n    this.style = style\n\n    /**\n     * 设置feature文本\n     *\n     */\n    this.displayText = displayText\n\n    /**\n     * 设置feature是否显示\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.display = true\n\n    /**\n     * 设置feature的标签是否显示\n     * @type {Boolean}\n     * @private\n     */\n    this.textDisplay = true\n\n    /**\n     * 设置feature的样式是否高亮\n     * @type {Boolean}\n     * @private\n     */\n    this.styleHighLight = false\n\n  }\n\n  /**\n   *\n   * @private\n   */\n  _handleGeometryChanged() {\n    this.changed()\n  }\n\n  /**\n   * 设置feature属性\n   *\n   * @method initArribute\n   * @param attributes\n   */\n  initArribute(attributes) {\n    if (!(attributes instanceof Object)) {\n      attributes = {}\n    }\n    \n    this._attributesMap = Obj.objectToMap(attributes)\n  }\n\n  /**\n   * 获取feature属性\n   *\n   * @method get\n   * @param property\n   * @return {*}\n   */\n  get(property) {\n    if (this._attributesMap.has(property)) {\n      return this._attributesMap.get(property)\n    }\n\n    return undefined\n  }\n\n  /**\n   * 设置属性的值\n   *\n   * @method set\n   * @param property\n   * @param value\n   * @return {Map.<K, V>}\n   */\n  set(property, value) {\n    return this._attributesMap.set(property, value)\n  }\n\n  /**\n   * 删除属性\n   *\n   * @method delete\n   * @param property\n   * @return {boolean}\n   */\n  delete(property) {\n    return this._attributesMap.delete(property)\n  }\n\n  /**\n   * 遍历属性\n   *\n   * @method forEachAttribute\n   * @param callback\n   */\n  forEachAttribute(callback) {\n    this._attributesMap.forEach(callback)\n  }\n\n  /**\n   * 判断属性是否存在\n   *\n   * @method has\n   * @param property\n   * @return {Boolean}\n   */\n  has(property) {\n    return this._attributesMap.has(property)\n  }\n\n  /**\n   * Geometry 读写器\n   *\n   * @property geometry\n   * @return {*}\n   */\n  get geometry() {\n    return this._geometry\n  }\n\n  set geometry(value) {\n    if (value) {\n      this._geometry = value\n\n      if (this._geometryChangeKey) {\n        unlistenByKey(this._geometryChangeKey)\n      }\n\n      this._geometryChangeKey = listen(value,\n        EventType.CHANGE, this._handleGeometryChanged, this)\n    }\n  }\n\n  /**\n   * 缺省样式读写器\n   *\n   * @property styleFunction\n   * @return {*}\n   */\n  get styleFunction() {\n    return this._styleFunction\n  }\n\n  set styleFunction(value) {\n    this._styleFunction = value\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @return {*}\n   */\n  get style() {\n    return this._style\n  }\n\n  set style(value) {\n    this._style = value\n  }\n\n  /**\n   * feature标题读写器\n   *\n   * @property text\n   * @return {*}\n   */\n  get displayText() {\n    return this._displayText\n  }\n\n  set displayText(value) {\n    this._displayText = value\n    this.changed()\n  }\n\n  /**\n   * 样式高亮读写器\n   *\n   * @property styleHighLight\n   * @returns {*}\n   */\n  get styleHighLight() {\n    return this._styleHighLight\n  }\n\n  set styleHighLight(value) {\n    if (this._styleHighLight === value) {\n      return\n    }\n    \n    this._styleHighLight = value\n  \n    if (this.style === undefined) {\n      return\n    }\n    \n    const white = [255, 255, 255]\n    const newStyles = []\n    \n    for (let i = 0,len = this.style.length; i < len; i++) {\n      const s = this.style[i]\n      newStyles.push(s.clone())\n    }\n\n    if (this._styleHighLight) {\n      this.set('_originStyle', this.style)\n      \n      const geometryType = this.geometry.geometryType\n\n      if (geometryType === Geometry.LINE) {\n        const firstStyle = newStyles[0]\n        firstStyle.width = firstStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.width = cloneStyle.width + 1\n        cloneStyle.color = white\n  \n        newStyles.unshift(cloneStyle)\n      } else if (geometryType === Geometry.POLYGON ||\n          geometryType === Geometry.MULTI_POLYGON ||\n          geometryType === Geometry.PARALLELOGRAM ||\n          geometryType === Geometry.EXTENT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.alpha = 0\n        cloneStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n        cloneStyle.borderStyle.color = white\n        cloneStyle.borderStyle.lineCap = LineStyle.LineCap.ROUND\n        cloneStyle.borderStyle.lineJion = LineStyle.LineJion.ROUND\n  \n        newStyles.unshift(cloneStyle)\n\n      } else if (geometryType === Geometry.POINT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.size = firstStyle.size + 3\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n      }\n\n      const textStyle = newStyles[0].textStyle.clone()\n      // textStyle.font = 'bold 12px Arial'\n      const oriFont = textStyle.font\n      const boldFont = `bold ${oriFont.split(' ')[1]} Arial`\n      textStyle.font = boldFont\n      \n      newStyles[0].textStyle = textStyle\n\n      this.style = newStyles\n    } else {\n      if (this.get('_originStyle')) {\n        this.style = this.get('_originStyle')\n        this.delete('_originStyle')\n      }\n    }\n    \n    this.changed()\n  }\n\n\n  /**\n   * 设置图层的透明度\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method display\n   * @param value\n   */\n  get display() {\n    return this._display\n  }\n\n  set display(value) {\n    if (this._display !== value) {\n      this._display = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置标签是否显示\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method textDisplay\n   * @param value\n   */\n  get textDisplay () { return this._textDisplay }\n  set textDisplay (value) {\n    if (this._textDisplay !== value) {\n      this._textDisplay = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 克隆map属性\n   *\n   * @method cloneAttributesMap\n   * @returns {Map}\n   */\n  cloneAttributesMap () {\n    const newMap = new Map()\n    if (this._attributesMap.size !== 0) {\n      const entries = this._attributesMap.entries()\n      for (let [key, value] of entries) {\n        newMap.set(key, value)\n      }\n    }\n\n    return newMap\n  }\n\n  /**\n   * features 克隆方法\n   *\n   * @method clone\n   * @returns {Feature}\n   */\n  clone () {\n    let renderStyleArr\n    if (this.style) {\n      let style\n      if (Array.isArray(this.style)) {\n        style = this.style[0].clone()\n      } else {\n        style = this.style.clone()\n      }\n\n      renderStyleArr = [style]\n    }\n\n    return new Feature(this.geometry.clone(),\n      this.cloneAttributesMap(), this.displayText ,renderStyleArr )\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/feature.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {equals} from '../../utils/array'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class GeomertyRender extends BaseObject {\n  constructor (context) {\n    super()\n  \n    /**\n     *\n     */\n    this._context = context\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._pixelCoordinates = null\n  \n    /**\n     *\n     * @type {*}\n     */\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   */\n  resetRenderOption () {\n    this._pixelCoordinates = null\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   * @param transform1\n   * @param transform2\n   */\n  equalsTransform (transform1, transform2) {\n    return equals(transform1, transform2)\n  }\n  \n  /**\n   * context getter\n   * @returns {*}\n   */\n  get context () { return this._context }\n  \n  /**\n   * abstract function\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {} // eslint-disable-line no-unused-vars\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/geomertyrender.js","/**\n * Created by zhangyong on 2017/6/12.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n *\n * 定义文本样式\n *\n * @class TextStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     new mk.TextStyle({\n *       textAlign: 'center',\n *       textBaseline: 'middle',\n *       font: 'Arial',\n *       text: '标注示例',\n *       fill: [255, 0, 0],\n *       stroke: new mk.LineStyle([255, 255, 255],1,3,\n *          mk.LineStyle.LineCap.ROUND,\n *          mk.LineStyle.LineJion.ROUND),\n *       offsetX: 0,\n *       offsetY: 0,\n *       rotation: 0\n *     });\n *\n */\nexport default class TextStyle extends BaseObject {\n  \n  /**\n   *\n   * @constructor\n   * @param optOptions\n   */\n  constructor (optOptions) {\n    super()\n  \n    const options = optOptions || {}\n  \n    /**\n     *\n     */\n    this.text = options.text || ''\n    \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font = options.font || TextStyle.DEFAULT_FONT\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation = options.rotation || 0\n  \n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView = options.rotateWithView\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale = options.scale || TextStyle.DEFAULT_SCALE\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_START\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE\n  \n    /**\n     * @private\n     * @type {ol.style.Fill}\n     */\n    this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR\n  \n    /**\n     * @private\n     * @type {ol.style.Stroke}\n     */\n    this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX = options.offsetX !== undefined ? options.offsetX : 0\n  \n    /**\n     * @property offsetY\n     * @type {number}\n     */\n    this.offsetY = options.offsetY !== undefined ? options.offsetY : 0\n    \n  }\n  \n  /**\n   * 要显示的文本\n   *\n   * @property text\n   * @type {Stirng}\n   */\n  get text () { return this._text }\n  set text (value) { this._text = value }\n  \n  /**\n   * 显示的字体\n   *\n   * @property font\n   * @type {Stirng}\n   */\n  get font () { return this._font }\n  set font (value) { this._font = value }\n  \n  /**\n   * 旋转的角度\n   *\n   * @property rotation\n   * @type {Stirng}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value) { this._rotation = value }\n  \n  /**\n   * 旋转视图\n   *\n   * @property rotateWithView\n   * @type {Stirng}\n   */\n  get rotateWithView () { return this._rotateWithView }\n  set rotateWithView (value) { this._rotateWithView = value }\n  \n  /**\n   * 缩放比例\n   *\n   * @property scale\n   * @type {Stirng}\n   */\n  get scale () { return this._scale }\n  set scale (value) { this._scale = value }\n  \n  /**\n   * 字体\n   *\n   * @property textAlign\n   * @type {Stirng}\n   */\n  get textAlign () { return this._textAlign }\n  set textAlign (value) { this._textAlign = value }\n  \n  /**\n   * 字体线\n   *\n   * @property textBaseline\n   * @type {Stirng}\n   */\n  get textBaseline () { return this._textBaseline }\n  set textBaseline (value) { this._textBaseline = value }\n  \n  /**\n   * 字体颜色\n   *\n   * @property fill\n   * @type {Stirng}\n   */\n  get fill () { return this._fill }\n  set fill (value) { this._fill = value }\n  \n  /**\n   * 字体线的样式\n   *\n   * property stroke\n   * @type {Stirng}\n   */\n  get stroke () { return this._stroke }\n  set stroke (value) { this._stroke = value }\n  \n  /**\n   * 字体x轴偏移\n   *\n   * @property offsetX\n   * @type {Stirng}\n   */\n  get offsetX () { return this._offsetX }\n  set offsetX (value) { this._offsetX = value }\n  \n  /**\n   * 字体y轴偏移\n   *\n   * @property offsetY\n   * @type {Stirng}\n   */\n  get offsetY () { return this._offsetY }\n  set offsetY (value) { this._offsetY = value }\n  \n  /**\n   * 克隆字体样式\n   *\n   * @method clone\n   * @returns {TextStyle}\n   */\n  clone () {\n    return new TextStyle({\n      font: this.font,\n      rotation: this.rotation,\n      rotateWithView: this.rotateWithView,\n      scale: this.scale,\n      text: this.text,\n      textAlign: this.textAlign,\n      textBaseline: this.textBaseline,\n      fill: this.fill ? this.fill.clone : undefined,\n      stroke: this.stroke ? this.stroke.clone : undefined,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY\n    })\n  }\n}\n\n/**\n *\n * 默认字体边框样式\n * @type {String} DEFAULT_STROKE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_STROKE = {\n  color: [255, 255, 255],\n  width: 2,\n  lineCap: 'round',\n  lineJion: 'round'\n}\n\n/**\n *\n * 默认字体颜色\n * @type {String} DEFAULT_FILL_COLOR\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FILL_COLOR = [0, 0, 255]\n\n/**\n * 默认字体样式\n * @type {String} DEFAULT_FONT\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FONT = 'normal 12px Arial'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_TEXT_ALIGN\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_TEXT_ALIGN = 'center'\n\n/**\n * 字体显示从左边开始计算\n */\nTextStyle.DEFAULT_TEXT_START = 'start'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_BASE_LINE = 'bottom'\n\n/**\n * 默认字体缩放初始值\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_SCALE = 10\n\n\n// WEBPACK FOOTER //\n// ./src/style/textstyle.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param arr\n * @param target\n * @param direction\n * @returns {number}\n */\nexport function linearFindNearest (arr, target, direction) {\n  const n = arr.length\n  if (arr[0] <= target) {\n    return 0\n  } else if (target <= arr[n - 1]) {\n    return n - 1\n  } else {\n    let i\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1\n          } else {\n            return i\n          }\n        }\n      }\n    }\n    return n - 1\n  }\n}\n\n/**\n *\n * @param arr\n * @param compareFnc\n */\nexport function stableSort (arr, compareFnc) {\n  const length = arr.length\n  let tmp = Array(arr.length)\n  let i\n  \n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]}\n  }\n  \n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index\n  })\n  \n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value\n  }\n}\n\n/**\n *\n * @param haystack\n * @param needle\n * @param opt_comparator\n * @returns {number}\n */\nexport function binarySearch (haystack, needle, opt_comparator) {\n  let mid, cmp\n  const comparator = opt_comparator || numberSafeCompareFunction\n  let low = 0\n  let high = haystack.length\n  let found = false\n  \n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1)\n    cmp = +comparator(haystack[mid], needle)\n    \n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1\n      \n    } else { /* Key found or too high */\n      high = mid\n      found = !cmp\n    }\n  }\n  \n  /* Key not found. */\n  return found ? low : ~low\n}\n\n/**\n * Determine if two arrays get equal to each other\n * @param arr1\n * @param arr2\n * @returns {boolean}\n */\nexport function equals (arr1, arr2) {\n  const len1 = arr1.length\n  if (len1 !== arr2.length) {\n    return false\n  }\n  \n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param a\n * @param b\n * @returns {number}\n */\nexport function numberSafeCompareFunction (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\n\n\nexport function clamp (value, min, max) {\n  return Math.min(Math.max(value, min), max)\n}\n\n\nexport function lerp (a, b, x) {\n  return a + x * (b - a)\n}\n\nexport default {\n  clamp,\n  lerp\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/math.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Polygon from '../../geometry/polygon'\n\n/**\n *\n * 判断多边形是否包含另外一个图形\n *\n * @method contains\n * @param polygon\n * @param geometry\n * @returns {*}\n */\nexport default function contains (polygon, geometry) {\n  const polyGeometryType = polygon.geometryType\n  let isContained = false\n  \n  if (polyGeometryType === Geometry.POLYGON ||\n      polyGeometryType === Geometry.MULTI_POLYGON ||\n      polyGeometryType === Geometry.EXTENT ) {\n    const targetGeometryType = geometry.geometryType\n    \n    if (targetGeometryType === Geometry.POINT ) {\n      return polygon.containsXY(geometry.x, geometry.y)\n    } else if (targetGeometryType === Geometry.LINE ) {\n      return polyContainsLine(polygon, geometry)\n    } else if (targetGeometryType === Geometry.POLYGON ) {\n      return polyContainsPoly(polygon, geometry)\n    } else if (targetGeometryType === Geometry.MULTI_POLYGON) {\n      return polyContainsMultiPoly(polygon, geometry)\n    }else if (targetGeometryType === Geometry.PARALLELOGRAM) {\n      return polyContainsPoly(polygon, new Polygon(geometry.getCoordinates()))\n    }\n  }\n  \n  return isContained\n}\n\n\nconst polyContainsLine = function (poly, line) {\n  const lineCoords = line.getCoordinates()\n  return polygonContainsLinestring(poly, lineCoords)\n}\n\n\nconst polyContainsPoly = function (poly, poly2) {\n  const poly2Type = poly2.geometryType\n  if (poly2Type === Geometry.POLYGON ) {\n    const outRing = poly2.getCoordinates()[0]\n    return polygonContainsLinestring(poly, outRing)\n  }\n\n  return false\n}\n\nconst polyContainsMultiPoly = function (polygon, mutilpolygon) {\n  const polys = mutilpolygon.convertToPolygons()\n  const contained = polys.find( p => !polyContainsPoly(polygon, p))\n\n  return contained == undefined ? true: false\n}\n\n\nconst polygonContainsLinestring = function (poly, coords) {\n  const hasOne = coords.some( coord =>\n    !poly.containsXY(coord[0], coord[1])\n  )\n  \n  return !hasOne\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/contains.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {squaredSegmentDistance, distance} from './support/geometryutil'\nimport {lineString} from './support/interpolate'\n\n/**\n * 定义线类和数据结构\n *\n * @class Line\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var line = new mk.Line()\n *\n *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n */\nexport default class Line extends Geometry {\n  \n  /**\n   * Create a line geometry\n   * @constructor\n   * @param path\n   */\n  constructor (path) {\n    super()\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._path = []\n    \n    this.addPath(path)\n  }\n\n  get geometryType () { return Geometry.LINE }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   *\n   * @returns {Object} 返回对象的最小外接矩形\n   *\n   */\n  get extent () {\n    const me = this\n    if (me._extent === null) {\n      let xmin = Number.POSITIVE_INFINITY\n      let ymin = Number.POSITIVE_INFINITY\n      let xmax = Number.NEGATIVE_INFINITY\n      let ymax = Number.NEGATIVE_INFINITY\n\n      const coors = me.getCoordinates()\n      for (let p of coors) {\n        xmin = Math.min(xmin, p[0])\n        ymin = Math.min(ymin, p[1])\n        xmax = Math.max(xmax, p[0])\n        ymax = Math.max(ymax, p[1])\n      }\n\n      me._extent = new Extent(xmin, ymin, xmax, ymax)\n    }\n\n    return me._extent\n  }\n  \n  /**\n   * 线段读写器\n   *\n   * @property path\n   * @returns\n   */\n  get path () { return this._path }\n  set path (value) {\n    this._path = value\n    this._extent = null\n  }\n  \n  /**\n   * 添加线段\n   *\n   * @method addPath\n   * @deprecated\n   * @param coordinates {Array}\n   */\n  addPath (coordinates) {\n    this.path.push(coordinates)\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 多段线的长度\n   *\n   * @property length\n   * @type {Number}\n   */\n  get length () {\n    const coordinates = this.getCoordinates()\n    let len = 0\n    for (let i = 0, ii = coordinates.length; i < ii - 1 ; i++) {\n      const fp = coordinates[i]\n      const np = coordinates[i + 1]\n      len += distance(fp, np)\n    }\n    \n    return len\n  }\n  \n  /**\n   * 遍历每一条边\n   *\n   * @method forEachSegment\n   * @param callback {callback}\n   * @param opt\n   */\n  forEachSegment (callback, opt) {\n    this.path.forEach(callback, opt)\n  }\n  \n  /**\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const path = this.path\n    const squaredSegmentDistanceFn = squaredSegmentDistance\n  \n    let find = false\n    for (let i = 0, ii = path.length - 1; i < ii; i++) {\n      let nowP = path[i]\n      let nextP = path[i + 1]\n      let distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1])\n      distance = Math.sqrt(distance)\n      if (distance <= tolerance) {\n        find = true\n        break\n      }\n    }\n  \n    return find\n  }\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      const interiorPoint = null\n      const fraction = 0.5\n      const flatCoordinates = []\n      const coordinates = this.getCoordinates()\n  \n      coordinates.forEach( point => {\n        flatCoordinates.push(point[0], point[1])\n      })\n  \n      this._flatInteriorPoint = lineString( flatCoordinates, 0, flatCoordinates.length, this.stride,\n        fraction, interiorPoint)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  getCoordinates () { return this.path }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()\n    if (coordinates.length === 0) {\n      return null\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 1]\n    \n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coords {Array}\n   */\n  setCoordinates (coords) {\n    this.path = coords\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 根据坐标点，计算改点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆线段\n   *\n   * @method clone\n   * @returns {Line} new line\n   */\n  clone () {\n    const newCoordinates = []\n    this.getCoordinates().forEach( coords => {\n      newCoordinates.push([coords[0], coords[1]])\n    })\n  \n    const newLine = new Line()\n    newLine.setCoordinates(newCoordinates)\n    \n    return newLine\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/line.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n\nimport {binarySearch, numberSafeCompareFunction} from '../../utils/array'\nimport {linearRingsContainsXY} from '../support/geometryutil'\nimport {lerp} from '../../utils/math'\nimport {ExtentUtil} from './extentutil'\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param fraction\n * @param opt_dest\n * @returns {*}\n */\nexport function lineString (flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN\n  let pointY = NaN\n  const n = (end - offset) / stride\n  \n  if (n === 1) {\n    pointX = flatCoordinates[offset]\n    pointY = flatCoordinates[offset + 1]\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n      fraction * flatCoordinates[offset + stride]\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n      fraction * flatCoordinates[offset + stride + 1]\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset]\n    let y1 = flatCoordinates[offset + 1]\n    let length = 0\n    const cumulativeLengths = [0]\n    let i\n    for (i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i]\n      const y2 = flatCoordinates[i + 1]\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n      cumulativeLengths.push(length)\n      x1 = x2\n      y1 = y2\n    }\n    \n    const target = fraction * length\n    const index = binarySearch(cumulativeLengths, target)\n    \n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n        (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2])\n      const o = offset + (-index - 2) * stride\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t)\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t)\n    } else {\n      pointX = flatCoordinates[offset + index * stride]\n      pointY = flatCoordinates[offset + index * stride + 1]\n    }\n  }\n  \n  if (opt_dest) {\n    opt_dest[0] = pointX\n    opt_dest[1] = pointY\n    return opt_dest\n  } else {\n    return [pointX, pointY]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param flatCenters\n * @param flatCentersOffset\n * @param opt_dest\n * @returns {*}\n */\nexport function linearRings(flatCoordinates, offset,\n       ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2\n  const y = flatCenters[flatCentersOffset + 1]\n  const intersections = []\n  // Calculate intersections with the horizontal line\n  const end = ends[0]\n  x1 = flatCoordinates[end - stride]\n  y1 = flatCoordinates[end - stride + 1]\n  \n  for (i = offset; i < end; i += stride) {\n    x2 = flatCoordinates[i]\n    y2 = flatCoordinates[i + 1]\n    if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1\n      intersections.push(x)\n    }\n    x1 = x2\n    y1 = y2\n  }\n  \n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN\n  let maxSegmentLength = -Infinity\n  intersections.sort(numberSafeCompareFunction)\n  x1 = intersections[0]\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i]\n    const segmentLength = Math.abs(x2 - x1)\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2\n      if (linearRingsContainsXY(\n          flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x\n        maxSegmentLength = segmentLength\n      }\n    }\n    x1 = x2\n  }\n  \n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset]\n  }\n  \n  if (opt_dest) {\n    opt_dest.push(pointX, y)\n    return opt_dest\n  } else {\n    return [pointX, y]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param flatCenters\n * @returns {Array}\n */\nexport function linearRingss (flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = []\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    interiorPoints = linearRings(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints)\n    offset = ends[ends.length - 1]\n  }\n  \n  return interiorPoints\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @returns {Array}\n */\nexport function centerLinearRingss (flatCoordinates, offset, endss, stride) {\n  const flatCenters = []\n  let i, ii\n  let extent = ExtentUtil.createEmpty()\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    extent = ExtentUtil.createOrUpdateFromFlatCoordinates(\n      flatCoordinates, offset, ends[0], stride)\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2)\n    offset = ends[ends.length - 1]\n  }\n  return flatCenters\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/interpolate.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRingss (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right)\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRings (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i]\n    const isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    const reverse = i === 0 ?\n    (right && isClockwise) || (!right && !isClockwise) :\n    (right && !isClockwise) || (!right && isClockwise)\n    \n    if (reverse) {\n      // reverse(flatCoordinates, offset, end, stride)\n      // 反转\n      flatCoordinates = flatCoordinates.reverse()\n    }\n    offset = end\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingssAreOriented (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingsAreOriented(\n        flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * 判断线串的方向\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingsAreOriented (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    let end = ends[i]\n    // 判断坐标串是否是顺时针\n    let isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false\n      }\n    }\n    \n    offset = end\n  }\n  \n  return true\n}\n\n/**\n * 判断坐标串是否是顺时针方向\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @returns {boolean}\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  \n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    edge += (x2 - x1) * (y2 + y1)\n    x1 = x2\n    y1 = y2\n  }\n  \n  return edge > 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/orient.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\n\n/**\n * Constants defined width the define tag connot be changed in application code,\n * but can be set at compile time.\n *\n * @type {{}}\n */\nexport const Config = {}\n\n/**\n * Enable debug mode ,Default is 'true'\n *\n * 配置DEBUG\n *\n * @property DEBUG\n * @static\n * @type {Boolean}\n */\nConfig.DEBUG = true\n\n/**\n * Default max zomm factor\n *\n * @property DEFAULT_ZOOM_FACTOR\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_ZOOM_FACTOR = 2\n\n/**\n * Default max zoom level for map view.\n * Defaylt is '10'\n *\n * @property DEFAULT_MAX_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MAX_ZOOM = 10\n\n/**\n * Default min zoom level for map view.\n * Default is '0'\n *\n * @property DEFAULT_MIN_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MIN_ZOOM = 0\n\n/**\n * Maxinum mouse wheel delta.\n *\n * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n * @static\n * @type {Number}\n */\nConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1\n\n/**\n * Default tile size\n *\n * @property DEFAULT_TILE_SIZE\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_TILE_SIZE = 256\n\n\nexport default{\n  Config\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/config.js","/**\n * Created by zhangyong on 2017/6/13.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n *\n * @class BaseStyle\n * @extends BaseObject\n * @module style\n */\nexport default class BaseStyle extends BaseObject {\n\n  /**\n   *\n   * @constructor\n   * @param color {Array}\n   * @param style {Object}\n   * @param alpha {Number}\n   */\n  constructor (color, style, alpha = 1) {\n    \n    super()\n    \n    /**\n     * The color to fill or stroke geometry\n     */\n    this.color = color\n    \n    /**\n     * Which style to style geometry\n     */\n    this.style = style\n    \n    /**\n     *\n     */\n    this.alpha = alpha\n    \n    /**\n     * The text displayed with geometry\n     * @type {null}\n     */\n    this.textStyle = null\n  }\n  \n  /**\n   * 颜色\n   *\n   * @property color\n   * @type {Array}\n   */\n  get color () { return this._color }\n  set color (value) { this._color = value }\n  \n  /**\n   * 样式对象\n   *\n   * @property style\n   * @type {mk.Style}\n   */\n  get style () { return this._style }\n  set style (value) { this._style = value }\n  \n  /**\n   * 透明度\n   *\n   * @property alpha\n   * @default 1\n   * @type {Number}\n   */\n  get alpha () { return this._alpha}\n  set alpha (value) { return this._alpha = value }\n  \n  /**\n   * 文本样式对象\n   *\n   * @property textStyle\n   */\n  get textStyle () { return this._textStyle }\n  set textStyle (value) { this._textStyle = value }\n  \n  /**\n   * 克隆一个样式对象\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n  \n}\n  \n\n\n// WEBPACK FOOTER //\n// ./src/style/basestyle.js","\nlet uid = 0\n\nexport function getUid () {\n  return uid++\n}\n\nexport default {\n  getUid\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/counter.js","/**\n * Created by zhangyong on 2017/6/2.\n */\n\nimport Component from './component'\nimport {noModifierKeys} from '../utils/mousekey'\nimport {Coordinate} from '../utils/coordinate'\n\n/**\n * 拖动事件基础类\n *\n * @class DragPan\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class DragPan extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n\n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent\n    })\n    \n    /**\n     * @property tragetPointers\n     * @type {Array}\n     */\n    this.targetPointers = []\n  \n    /**\n     * @property lastCentroid\n     * @type {null}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * kinetic\n     * @private\n     * @type {ol.Kinetic|undefined}\n     */\n    this._kinetic = options.kinetic\n  \n    /**\n     * @property lastCentroid\n     * @type {ol.Pixel}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * @property lastPointersCount\n     * @private\n     * @type {number}\n     */\n    this._lastPointersCount = null\n  \n    /**\n     * @property conidtion\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ?\n      options.condition : noModifierKeys\n  \n    /**\n     * @property noKinetic\n     * @private\n     * @type {boolean}\n     */\n    this._noKinetic = false\n\n  }\n  \n  /**\n   * 处理browserEvent\n   *\n   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n   * @return {boolean} Start drag sequence?\n   * @this {DragPan}\n   * @private\n   */\n  _handleDownEvent (browserEvent) {\n    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n      this.lastCentroid = null\n      \n      if (this._kinetic) {\n        this._kinetic.begin()\n      }\n      \n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this._noKinetic = this.targetPointers.length > 1\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * handleDragEvent\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _handleDragEvent (browserEvent) {\n    const targetPointers = this.targetPointers\n    const centroid = this.centroid(targetPointers)\n\n    if (targetPointers.length === this._lastPointersCount) {\n      if (this._kinetic) {\n        this._kinetic.update(centroid[0], centroid[1])\n      }\n      \n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0]\n        const deltaY = this.lastCentroid[1] - centroid[1]\n        const map = browserEvent.map\n        const view = map.view\n        const viewState = view.getViewState()\n        const center = [deltaX, deltaY]\n        Coordinate.scale(center, viewState.resolution)\n        Coordinate.rotate(center, viewState.rotation)\n        Coordinate.add(center, viewState.center)\n        // center = view.constrainCenter(center)\n        view.center = center\n      }\n    } else if (this._kinetic) {\n      this._kinetic.begin()\n    }\n\n    this.lastCentroid = centroid\n    this._lastPointersCount = targetPointers.length\n  }\n  \n  /**\n   * 计算视图的中心点\n   *\n   * @method centroid\n   * @param pointerEvents {pointerEvents}\n   * @returns {[*,*]}\n   */\n  centroid (pointerEvents) {\n    const length = pointerEvents.length\n    let clientX = 0\n    let clientY = 0\n    \n    for (let i = 0; i < length; i++) {\n      clientX += pointerEvents[i].originalEvent.clientX\n      clientY += pointerEvents[i].originalEvent.clientY\n    }\n    \n    return [clientX / length, clientY / length]\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/dragpan.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * The DrawEvent will emitted while geometrys on drawing end.\n *\n * 绘制结束时，DrawEvent将会被派发\n *\n *\n * @class drawevent\n * @extends BaseObject\n * @module component\n *\n *\n */\nexport default class DrawEvent extends BaseEvent {\n  \n  /**\n   * @constructor\n   * @param type\n   * @param feature\n   */\n  constructor (type, feature) {\n  \n    super(type)\n  \n    /**\n     * The feature being drawn\n     */\n    this.feature = feature\n  }\n  \n}\n\n/**\n * 定义绘制工具的事件类型\n *\n * @type {{DRAW_START: string, DRAW_END: string}}\n */\nDrawEvent.EventType = {\n  /**\n   * Triggered upon feature draw start\n   */\n  DRAW_START: 'drawstart',\n\n  /**\n   * Triggered upon feature on drawing\n   * @type {String}\n   */\n  DRAWING: 'drawing',\n  \n  /**\n   * Triggered upon feature draw end\n   */\n  DRAW_END: 'drawend'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawevent.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\n/**\n * 修改结束时，ModifyEvent将会被派发\n *\n * @class modifyevent\n * @extends BaseObject\n * @module component\n *\n */\nimport BaseEvent from '../core/baseevent'\n\nexport default class ModifyEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    super(type)\n  \n    /**\n     * features being modified.\n     */\n    this.features = features\n  \n    /**\n     * BrowserEvent\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n\nModifyEvent.EventType = {\n  \n  /**\n   * Triggered on features modification start.\n   */\n  MODIFY_START: 'modifystart',\n  \n  /**\n   * Triggered on features modification end\n   */\n  MODIFY_END: 'modifyend'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/modifyevent.js","/**\n * Created by zypc on 2017/6/4.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\n\nimport {Config} from '../meek/config'\n\nimport {mouseWheel} from '../utils/mousekey'\nimport {clamp} from '../utils/math'\n\n/**\n * 鼠标滚轮缩放基类\n *\n *\n * @class MouseWheelZoom\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class MouseWheelZoom extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}){\n    \n    super()\n  \n    /**\n     * 私有属性Delta，默认为0\n     *\n     * @property delta\n     * @type {Number}\n     * @private\n     */\n    this._delta = 0\n  \n    /**\n     * 私有属性useAnchor\n     *\n     * @property useAnchor\n     * @type {Boolean}\n     * @private\n     */\n    this._useAnchor = options.useAnchor !== undefined ?\n      options.useAnchor : true\n  \n    /**\n     * 私有属性duration\n     *\n     * @property duration\n     * @type {Boolean}\n     * @private\n     */\n    this._duration = options.duration !== undefined ?\n      options.duration : 250\n  \n    /**\n     * 私有属性lastAnchor\n     *\n     * @property lastAnchor\n     * @type {null}\n     * @private\n     */\n    this._lastAnchor = null\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._startTime = undefined\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._timeout = options.timeout !== undefined ? options.timeout : 80\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._timeoutId = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._mode = undefined\n  }\n  \n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent){\n    if (!mouseWheel(mapBrowserEvent)) {\n      return true\n    }\n  \n    mapBrowserEvent.preventDefault()\n  \n    const map = mapBrowserEvent.map\n    const wheelEvent = mapBrowserEvent.originalEvent\n  \n    if (this._useAnchor) {\n      this._lastAnchor = mapBrowserEvent.coordinate\n    }\n  \n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta\n    if (mapBrowserEvent.type == BrowserEvent.WHEEL) {\n      delta = wheelEvent.deltaY\n    } else if (mapBrowserEvent.type == BrowserEvent.MOUSE_WHEEL) {\n      delta = -wheelEvent.wheelDeltaY\n    }\n  \n    if (delta === 0) {\n      return false\n    }\n  \n    const now = Date.now()\n  \n    if (this._startTime === undefined) {\n      this._startTime = now\n    }\n  \n    this._delta += delta\n  \n    const timeLeft = Math.max(this._timeout - (now - this._startTime), 0)\n  \n    clearTimeout(this._timeoutId)\n    this._timeoutId = setTimeout(() => this._handleWheelZoom(map), timeLeft)\n  \n    return false\n  }\n  \n  /**\n   * Zoom to the map\n   *\n   * handleWheelZoom\n   * @param map\n   * @private\n   */\n  _handleWheelZoom (map) {\n    const view = map.view\n    // if (view.getAnimating()) {\n    //   view.cancelAnimations()\n    // }\n    \n    const maxDelta = Config.MOUSE_WHEEL_ZOOM_MAXDELTA\n    const delta = clamp(this._delta, -maxDelta, maxDelta)\n    \n    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration)\n    \n    this._mode = undefined\n    this._delta = 0\n    this._lastAnchor = null\n    this._startTime = undefined\n    this._timeoutId = undefined\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/mousewheelzoom.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n/**\n * 选择结束时，SelectEvent将会被派发\n *\n * @class selectevent\n * @extends BaseObject\n * @module component\n *\n *\n */\n\nimport BaseEvent from '../core/baseevent'\n\nexport default class SelectEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    \n    super(type)\n    \n    /**\n     * The feature being selected\n     */\n    this.selectedFeatures = features\n  \n    /**\n     *\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n/**\n * The select event\n * @type {{SELECT: string}}\n */\nSelectEvent.EventType = {\n  /**\n   * Triggered upon features select\n   * @api stable\n   */\n  SELECT: 'select',\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/selectevent.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\nexport default class Zoom extends Control {\n  \n  constructor (options = {}) {\n  \n    const className = options.className !== undefined ? options.className : 'dt-zoom'\n  \n    const delta = options.delta !== undefined ? options.delta : 1\n  \n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+'\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212'\n  \n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : '放大'\n    \n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : '缩小'\n  \n    const inElement = document.createElement('button')\n    inElement.className = `${className}-in`\n    inElement.setAttribute('type', 'button')\n    inElement.title = zoomInTipLabel\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    )\n  \n    const outElement = document.createElement('button')\n    outElement.className = `${className}-out`\n    outElement.setAttribute('type', 'button')\n    outElement.title = zoomOutTipLabel\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(inElement)\n    element.appendChild(outElement)\n  \n    super({\n      element: element,\n      target: options.target\n    })\n  \n    this._delta = delta\n    \n    listen(inElement, BrowserEvent.CLICK, this._handleClick, this)\n    listen(outElement, BrowserEvent.CLICK, this._handleClickIn, this)\n  }\n  \n  _handleClickIn (event) {\n    event.preventDefault()\n    this._zoomByDelta(-this._delta)\n  }\n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @param {Event} event The event to handle\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._zoomByDelta(this._delta)\n  }\n  \n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const map = this.map\n    const view = map.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n  \n} \n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoom.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n // The event processor for all subclasss, which can allow subclass\n // to handle event dispatching and listening.This is the top level class\n/**\n * 顶层事件处理器类,让子类具备事件的监听和派发\n *\n * @class Event\n * @module core\n * @constructor new Event()\n *\n */\nexport default class Event {\n  \n  /**\n   * Event's constructor\n   * @constructor constructor\n   */\n  constructor () {\n    this._pendingRemovals = {}\n\n    this._listeners = {}\n    this._dispatching = {}\n\n    this.nullFunction = function () {}\n  }\n  \n  /**\n   * 根据事件标识获取对应标识的方法列表\n   *\n   * @method getListeners\n   * @param type {String} event type 事件标识\n   * @return {Array} 返回对应事件标示的函数数组\n   */\n  getListeners (type) {\n    return this._listeners[type]\n  }\n  \n  /**\n   * 判断是否含有对应事件标识的监听\n   *\n   * @method hasListener\n   * @param optType {Boolean}\n   * @returns {Boolean} ture if exsit ,false otherwise\n   */\n  hasListener (optType) {\n    return optType ?\n      Reflect.has(this._listeners, optType) :\n      Object.keys(this._listeners).length > 0\n  }\n\n  /**\n   * 移除事件监听\n   *\n   * @method removeEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  removeEventListener (type, listener) {\n    const listeners = this._listeners[type]\n    if (listeners) {\n      let index = listeners.indexOf(listener)\n\n      if (Reflect.has(this._pendingRemovals, type)) {\n        listeners[index] = this.nullFunction\n        ++this._pendingRemovals[type]\n      } else {\n        listeners.splice(index, 1)\n\n        if (listeners.length === 0) {\n          Reflect.deleteProperty(this._listeners, type)\n        }\n      }\n    }\n  }\n  \n  /**\n   * 添加事件监听,需要指定事件标示和处理方法\n   *\n   * @example\n   *    map.addEventListener('singleclick', function(event) {})\n   *\n   * @method addEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  addEventListener (type, listener) {\n    let listeners = this._listeners[type]\n    if (!listeners) {\n      listeners = this._listeners[type] = []\n    }\n\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener)\n    }\n  }\n  \n  /**\n   * 事件派发\n   *\n   * @example\n   * this.dispatchEvent(EventType.CHANGE)\n   *\n   * @method dispatchEvent\n   * @param event {String} event type string\n   * @returns {Boolean} ture if success ,false otherwise.\n   */\n  dispatchEvent (event) {\n    const evt = typeof event === 'string' ? {type: event} : event\n    const type = evt.type\n    evt.target = this\n    const listeners = this._listeners[type]\n    let propagate\n\n    if (listeners) {\n      if(!Reflect.has(this._dispatching, type)) {\n        this._dispatching[type] = 0\n        this._pendingRemovals[type] = 0\n      }\n\n      ++this._dispatching[type]\n\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false\n          break\n        }\n      }\n\n      --this._dispatching[type]\n\n      if (this._dispatching[type] === 0) {\n        let pendingRemovals = this._pendingRemovals[type]\n        Reflect.deleteProperty(this._pendingRemovals, type)\n\n        while (pendingRemovals--) {\n          this.removeEventListener(type, this.nullFunction)\n        }\n\n        Reflect.deleteProperty(this._dispatching, type)\n      }\n\n      return propagate\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * Layer基础类\n *\n * @class BaseLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class BaseLayer extends BaseObject {\n\n  constructor (options) {\n    super()\n\n    const baseOptions = Object.assign({},options)\n    \n    this.name = baseOptions.name || ''\n    this.visible = true\n    this.datasource = []\n    this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1\n    this.dataExtent = null\n    this.maxResolution = 0\n    this.minResolution = 0\n    this.zIndex = baseOptions.zIndex || 0\n\n    this._mapRenderKey = null\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} mk.map\n   */\n  get map () { return this._map }\n  set map (value) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (value) {\n      this._map = value\n      this._mapRenderKey = listen(this, EventType.CHANGE, value.render, value)\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层是否显示(将会触发的重绘事件)\n   *\n   * @property visible\n   * @param value\n   */\n  get visible () { return this._visible }\n  set visible (value) {\n    if (this._visible !== value) {\n      this._visible = value\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层的透明度(将会触发map的重绘事件)\n   *\n   * @property opacity\n   * @param value\n   */\n  get opacity () { return this._opacity }\n  set opacity (value) { this._opacity = value }\n\n  /**\n   * 设置图层的最小分辨率\n   *\n   * @property minResolution\n   * @returns {*}\n   */\n  get minResolution () { return this._minResolution }\n  set minResolution (value) { this._minResolution = value }\n\n  /**\n   * 设置图层的最大分辨率\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get maxResolution () { return this._maxResolution }\n  set maxResolution (value) { this._maxResolution = value }\n\n  /**\n   * dataExtent读取器\n   *\n   * @property dataExtent\n   * @returns {*}\n   */\n  get dataExtent () {}\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * datasouce 读取器\n   *\n   * @property datasouce\n   * @returns {*}\n   */\n  get datasouce () { return this._datasource }\n  set datasource (value) {\n    this._datasource = value\n  }\n\n  /**\n   * zIndex读取器\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get zIndex () { return this._zIndex }\n  set zIndex (value) {\n    if (this._zIndex !== value) {\n      this._zIndex = value\n    }\n  }\n\n  /**\n   * 加载Feature\n   *\n   * @method loadFeature\n   * @returns {Object} features\n   */\n  loadFeature () {\n    return this.features\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/baselayer.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseEvent from '../../core/baseevent'\n\nexport default class ImageEvent extends BaseEvent {\n  constructor (type, image) {\n    super(type)\n    \n    this.image = image\n  }\n  \n}\n\n\nImageEvent.Type = {\n  \n  /**\n   * Triggered when an image starts loading.\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n  \n  /**\n   * Triggered when an image finishes loading.\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n  \n  /**\n   * Triggered if image loading results in an error.\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imageevent.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseImage from '../../core/baseimage'\nimport {ImageState} from './imagestate'\nimport Obj from '../../utils/obj'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {EventType} from '../../meek/eventtype'\n\nimport {listenOnce, unlistenByKey} from '../../core/eventmanager'\nimport {getUid} from '../../utils/counter'\n\nexport default class SingleImage extends BaseImage {\n  \n  constructor (extent, resolution, pixelRatio, attributions, src,\n               crossOrigin, imageLoadFunction) {\n    \n    super(extent, resolution, pixelRatio, ImageState.IDLE,\n      attributions)\n  \n    /**\n     * @private\n     * @type {string}\n     */\n    this._src = src\n  \n    /**\n     * @private\n     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n     */\n    this.domImage = new Image()\n    if (crossOrigin !== null) {\n      this.getDomImage().crossOrigin = crossOrigin\n    }\n  \n    /**\n     * @private\n     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n     */\n    this._imageByContext = {}\n  \n    /**\n     * @private\n     * @type {Array.<EventsKey>}\n     */\n    this._imageListenerKeys = null\n  \n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE\n  \n    /**\n     * @private\n     * @type {ImageLoadFunctionType}\n     */\n    this._imageLoadFunction = imageLoadFunction\n  }\n  \n  /**\n   * @inheritDoc\n   * @api\n   */\n  getDomImage (opt_context) {\n    if (opt_context !== undefined) {\n      let image\n      let key = getUid(opt_context)\n      \n      if (key in this._imageByContext) {\n        return this._imageByContext[key]\n      } else if (Obj.isEmpty(this._imageByContext)) {\n        image = this._domImage\n      } else {\n        image = this._domImage.cloneNode(false)\n      }\n      \n      this._imageByContext[key] = image\n      return image\n    } else {\n      return this._domImage\n    }\n  }\n  \n  \n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  _handleImageError () {\n    this.state = ImageState.ERROR\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  _handleImageLoad () {\n    if (this.resolution === undefined) {\n      this.resolution = ExtentUtil.getHeight(this.extent) / this.getDomImage().height\n    }\n    \n    this.state = ImageState.LOADED\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load () {\n    if (this.state === ImageState.IDLE || this.state === ImageState.ERROR) {\n      this.state = ImageState.LOADING\n      this.changed()\n      this._imageListenerKeys = [\n        listenOnce(this.getDomImage(), EventType.ERROR,\n          this._handleImageError, this),\n        listenOnce(this.getDomImage(), EventType.LOAD,\n          this._handleImageLoad, this)\n      ]\n      \n      this._imageLoadFunction(this, this._src)\n    }\n  }\n  \n  \n  /**\n   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n   */\n  set domImage (value) {\n    this._domImage = value\n  }\n  \n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  _unlistenImage () {\n    this._imageListenerKeys.forEach(unlistenByKey)\n    this._imageListenerKeys = null\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/singleimage.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseLayer from './baselayer'\nimport SingleImage from '../lyr/image/singleimage'\n\nimport {listen} from '../core/eventmanager'\nimport {createCanvasContext2D} from '../utils/domutil'\nimport ImageEvent from '../lyr/image/imageevent'\n\nimport {EventType} from '../meek/eventtype'\nimport {ImageState} from '../lyr/image/imagestate'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\n/**\n * SingleImageLayer\n *\n * @class SingleImageLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class SingleImageLayer extends BaseLayer {\n  \n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super(options)\n  \n    const imageExtent = options.imageExtent\n    this.dataExtent = imageExtent\n  \n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null\n  \n    const imageLoadFunction =\n      options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : this.defaultImageLoadFunction\n    \n    this.attributions = options.attributions\n  \n    /**\n     * @private\n     */\n    this._singleImage = new SingleImage(imageExtent, undefined, 1, this.attributions,\n      options.url, crossOrigin, imageLoadFunction)\n    \n    /**\n     * @private\n     * @type {ol.Size}\n     */\n    this._imageSize = options.imageSize ? options.imageSize : null\n  \n    /**\n     * Listen the change event for SingleImage\n     */\n    listen(this.singleImage, EventType.CHANGE, this.handleImageChange, this)\n  \n    /**\n     *\n     * @type {number}\n     */\n    this.zIndex = 0\n  }\n  \n  /**\n   * 设置图片链接\n   *\n   * @method imageSrc\n   * @param url {String}\n   *\n   */\n  set imageSrc (url) {\n    this._singleImage._src = url\n    this._singleImage.domImage = new Image()\n    this._singleImage.state = ImageState.IDLE\n  }\n\n  /**\n   * 获取singleImage\n   *\n   * @property singleImage\n   * @returns {SingleImage}\n   */\n  get singleImage () { return this._singleImage }\n\n  /**\n   * 属性读写器\n   *\n   * @property attributions\n   * @param value\n   */\n  set attributions(value){\n    this._attributes = value\n  }\n  \n  get attributions(){\n    return this._attributes || null\n  }\n  \n  /**\n   *\n   * @param image\n   * @param src\n   */\n  defaultImageLoadFunction (image, src) {\n    image.getDomImage().src = src\n  }\n  \n  /**\n   * 获取图片的Dom\n   * @inheritDoc\n   */\n  getImageInternal (extent) {\n    if (ExtentUtil.intersects(extent, this.singleImage.extent)) {\n      return this.singleImage\n    }\n    \n    return null\n  }\n  \n  /**\n   * Handle the image change event\n   * @param evt\n   */\n  handleImageChange (evt) {\n    if (this.singleImage.state === ImageState.LOADED) {\n      const imageExtent = this.singleImage.extent\n      const image = this.singleImage.getDomImage()\n      let imageWidth, imageHeight\n      if (this._imageSize) {\n        imageWidth = this._imageSize[0]\n        imageHeight = this._imageSize[1]\n      } else {\n        imageWidth = image.width\n        imageHeight = image.height\n      }\n      \n      const resolution = ExtentUtil.getHeight(imageExtent) / imageHeight\n      const targetWidth = Math.ceil(ExtentUtil.getWidth(imageExtent) / resolution)\n      \n      if (targetWidth !== imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight)\n        const canvas = context.canvas\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height)\n        // Pre-load image\n        this.singleImage.domImage = canvas\n      }\n    }\n  \n    this._dispatchImageEvent(evt)\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _dispatchImageEvent (event) {\n    const image = event.target\n    switch (image.state) {\n    case ImageState.LOADING:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADSTART,\n          image))\n      break\n    case ImageState.LOADED:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADEND,\n          image))\n      break\n    case ImageState.ERROR:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADERROR,\n          image))\n      break\n    default:\n      // pass\n    }\n  }\n  \n  \n  \n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/singleimagelayer.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * FeatureEvent类\n *\n * @class FeatureEvent\n * @extends baseevent\n * @module meek\n */\nexport default class FeatureEvent extends BaseEvent {\n  \n  constructor (type, feature) {\n    super(type)\n    \n    this.feature = feature\n  }\n  \n}\n\n\n/**\n * Feature event definition\n * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n */\nFeatureEvent.EventType = {\n  \n  /**\n   * Triggered when a feature is added.\n   */\n  ADD_FEATURE: 'addfeature',\n  \n  /**\n   * Triggered when a feature is removed.\n   */\n  REMOVE_FEATURE: 'removefeature',\n  \n  /**\n   * Triggered when all features are removed.\n   */\n  CLEAR: 'clear',\n  \n  /**\n   * Triggered when the feature collection has been changed.\n   */\n  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/featureevent.js","/**\n * Created by zhangyong on 2017/3/23.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {Config} from '../meek/config'\n\nimport {linearFindNearest} from '../utils/array'\nimport {clamp} from '../utils/math'\n\n/**\n * View 视图类\n *\n * @class View\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class View extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options) {\n    super()\n    \n    const _innerOptions = Object.assign({}, options)\n    \n    this._applyOptions(_innerOptions)\n  }\n  \n  /**\n   * Parse options and apply to view\n   * @param options\n   * @private\n   */\n  _applyOptions (options) {\n    \n    const resolutionConstraint = this._createResolutionConstraint(options)\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._maxResolution = resolutionConstraint.maxResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minResolution = resolutionConstraint.minResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._zoomFactor = resolutionConstraint.zoomFactor\n  \n    /**\n     * @private\n     * @type {Array.<number>|undefined}\n     */\n    this._resolutions = options.resolutions\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minZoom = resolutionConstraint.minZoom\n  \n    const centerConstraint = this._createCenterConstraint(options)\n    const constraint = resolutionConstraint.constraint\n    const rotationConstraint = this._createRotationConstraint(options)\n  \n    /**\n     * center、resolution、ratation\n     * @private\n     */\n    this._constraints = {\n      center: centerConstraint,\n      resolution: constraint,\n      rotation: rotationConstraint\n    }\n  \n    this.center = options.center !== undefined ?\n         options.center : this._calculateCenter()\n\n    this.resolution = options.resolution !== undefined ?\n        options.resolution : this.constrainResolution(this._maxResolution, options.zoom - this._minZoom)\n\n    // 记录原始 view 参数\n    this._originalCenter = this.center\n    this._originalResolution = this.resolution\n    \n    this.rotation = 0\n    \n    this.dataExtent = resolutionConstraint.extent\n    \n    this._options = options\n  }\n  \n  \n  _createRotationConstraint () {\n    return 0\n  }\n  \n  /**\n   * 创建视图中心限制条件\n   *\n   * @method createCenterConstraint\n   * @param options\n   * @returns {Function}\n   * @private\n   */\n  _createCenterConstraint () {\n    return function (center) {\n      return center\n    }\n  }\n  \n  /**\n   * 创建分辨率限制条件\n   *\n   * @method createResolutionConstraint\n   * @param options\n   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n   * @private\n   */\n  _createResolutionConstraint (options) {\n    let resolutionConstraint\n    let maxResolution\n    let minResolution\n    let extent\n  \n    const defaultMaxZoom = Config.DEFAULT_MAX_ZOOM\n    const defaultZoomFactor = Config.DEFAULT_ZOOM_FACTOR\n    const defaultMinZoom = Config.DEFAULT_MIN_ZOOM\n    const defaultTileSize = Config.DEFAULT_TILE_SIZE\n  \n    let minZoom = options.minZoom !== undefined ?\n      options.minZoom : defaultMinZoom\n  \n    let maxZoom = options.maxZoom !== undefined ?\n      options.maxZoom : defaultMaxZoom\n  \n    const zoomFactor = options.zoomFactor !== undefined ?\n      options.zoomFactor : defaultZoomFactor\n  \n    const projection = options.projection\n    extent = projection.extent\n    \n    if (options.resolutions !== undefined) {\n      const resolutions = options.resolutions\n      maxResolution = resolutions[0]\n      minResolution = resolutions[resolutions.length - 1]\n      resolutionConstraint = this.createSnapToResolutions(resolutions)\n    } else {\n      // calculate the default min and max resolution\n      const size = Math.max(ExtentUtil.getWidth(extent), ExtentUtil.getHeight(extent))\n      const defaultMaxResolution = size / defaultTileSize / Math.pow(\n          defaultZoomFactor, defaultMinZoom)\n    \n      const defaultMinResolution = defaultMaxResolution / Math.pow(\n          defaultZoomFactor, defaultMaxZoom - defaultMinZoom)\n    \n      // user provided maxResolution takes precedence\n      maxResolution = options.maxResolution\n      if (maxResolution !== undefined) {\n        minZoom = 0\n      } else {\n        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom)\n      }\n    \n      // user provided minResolution takes precedence\n      minResolution = options.minResolution\n      if (minResolution === undefined) {\n        if (options.maxZoom !== undefined) {\n          if (options.maxResolution !== undefined) {\n            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom)\n          } else {\n            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom)\n          }\n        } else {\n          minResolution = defaultMinResolution\n        }\n      }\n    \n      // given discrete zoom levels, minResolution may be different than provided\n      maxZoom = minZoom + Math.floor(\n          Math.log(maxResolution / minResolution) / Math.log(zoomFactor))\n      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom)\n    \n      resolutionConstraint = this.createSnapToPower(\n        zoomFactor, maxResolution, maxZoom - minZoom)\n    }\n    \n    return {\n      constraint: resolutionConstraint,\n      maxResolution,\n      minResolution,\n      minZoom,\n      zoomFactor,\n      extent\n    }\n  }\n  \n  /**\n   *\n   * @param power\n   * @param maxResolution\n   * @param opt_maxLevel\n   * @returns {Function}\n   */\n  createSnapToPower (power, maxResolution, opt_maxLevel) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset)\n        let newLevel = Math.max(oldLevel + delta, 0)\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel)\n        }\n  \n        const reso = maxResolution / Math.pow(power, newLevel)\n        return reso\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  /**\n   *\n   * @param resolutions\n   * @returns {Function}\n   */\n  createSnapToResolutions (resolutions) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction)\n        z = clamp(z + delta, 0, resolutions.length - 1)\n        const index = Math.floor(z)\n        if (z != index && index < resolutions.length - 1) {\n          let power = resolutions[index] / resolutions[index + 1]\n          return resolutions[index] / Math.pow(power, z - index)\n        } else {\n          return resolutions[index]\n        }\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  _calculateCenter () {\n    return [500, 500]\n  }\n  \n  \n  /**\n   * 获取视图状态\n   *\n   * @method getViewState\n   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n   */\n  getViewState () {\n    const center = this.center\n    const resolution = this.resolution\n    const rotation = this.rotation\n    \n    return {\n      center: center.slice(),\n      resolution,\n      rotation\n    }\n  }\n  \n  /**\n   * 分辨率限制\n   *\n   * @method constrainResolution\n   * @param resolution\n   * @param opt_delta\n   * @param opt_direction\n   * @returns {*}\n   */\n  constrainResolution (resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0\n    const direction = opt_direction || 0\n    return this._constraints.resolution(resolution, delta, direction)\n  }\n  \n  /**\n   * 计算缩放中心点\n   *\n   * @method calculateCenterZoom\n   * @param resolution {Number}\n   * @param anchor {Number}\n   * @returns {Array}\n   */\n  calculateCenterZoom (resolution, anchor) {\n    let center\n    const currentCenter = this.center\n    const currentResolution = this.resolution\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] -\n        resolution * (anchor[0] - currentCenter[0]) / currentResolution\n      const y = anchor[1] -\n        resolution * (anchor[1] - currentCenter[1]) / currentResolution\n      center = [x, y]\n    }\n    \n    return center\n  }\n  \n  /**\n   * 是否限制视图中心\n   *\n   * @method constrainCenter\n   * @param center\n   * @returns {Boolean}\n   */\n  constrainCenter (center) {\n    this._constraints.center = center\n    this._center = center\n    return true\n  }\n\n  /**\n   * 视图中心点读写器\n   *\n   * @property center\n   * @return {*}\n   */\n  get center () { return this._center }\n  set center ( value ) {\n    this.constrainCenter(value)\n    this.changed()\n  }\n\n  /**\n   * 分辨率读写器\n   *\n   * @property resolution\n   * @return {*}\n   */\n  get resolution () { return this._resolution }\n  set resolution (value){\n    this._resolution = value\n  \n    this.changed()\n  }\n\n  /**\n   * 旋转率读写器\n   *\n   * @property rotation\n   * @return {*}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value){\n    this._rotation = value\n  }\n\n  /**\n   * dataExtent读写器\n   *\n   * @property dataExtent\n   * @return {*}\n   */\n  get dataExtent () { return this._dataExtent }\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * 获取最小分辨率\n   *\n   * @property minResolution\n   * @return {Number}\n   */\n  get minResolution () { return this._minResolution }\n\n  /**\n   * 获取最大分辨率\n   *\n   * @property maxResolution\n   * @returns {Number}\n   */\n  get maxResolution () { return this._maxResolution }\n  \n  \n  /**\n   * 获取初始设置的地图中心点\n   *\n   * @property originalCenter\n   * @type {Array}\n   */\n  get originalCenter () { return this._originalCenter }\n  \n  /**\n   * 获取初始设置的地图级别\n   *\n   * @property originalResolution\n   * @type {Number}\n   */\n  get originalResolution () { return this._originalResolution }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/view.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {ImageState} from '../../lyr/image/imagestate'\nimport {EventType} from '../../meek/eventtype'\nimport {Canvas} from '../../utils/canvas'\n\nimport {listen} from '../../core/eventmanager'\n\nexport default class LayerRenderer extends BaseObject {\n  \n  constructor (layer,context) {\n    super()\n    \n    this._context = context\n    this._layer = layer\n  \n    this.renderedResolution = undefined\n    \n    this._transform = ExtentUtil.createEmpty()\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param offsetX\n   * @returns {*|!Transform}\n   */\n  getTransform (frameState, offsetX) {\n    const viewState = frameState.viewState\n    const pixelRatio = 1\n    const dx1 = pixelRatio * frameState.size[0] / 2\n    const dy1 = pixelRatio * frameState.size[1] / 2\n    const sx = pixelRatio / viewState.resolution\n    const sy = sx\n    const angle = -viewState.rotation\n    const dx2 = -viewState.center[0] + offsetX\n    const dy2 = -viewState.center[1]\n    return Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2)\n  }\n  \n  /**\n   * Load the image\n   * @param image\n   * @returns {boolean}\n   */\n  loadImage (image) {\n    let imageState = image.state\n    if (imageState !== ImageState.LOADED &&\n        imageState !== ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this._handleImageChange, this)\n    }\n    \n    if (imageState === ImageState.IDLE) {\n      image.load()\n      imageState = image.state\n    }\n    \n    return imageState === ImageState.LOADED\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _handleImageChange (event) {\n    const image = event.target\n    if (image.state === ImageState.LOADED) {\n      this.renderIfReadyAndVisible()\n    }\n  }\n  \n  /**\n   *\n   */\n  renderIfReadyAndVisible () {\n    const layer = this.layer\n    // if (layer.visible && layer.getSourceState() == State.READY) {\n    if (layer.visible) {\n      layer.changed()\n      // this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param extent\n   */\n  clip (context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio\n    const width = frameState.size[0] * pixelRatio\n    const height = frameState.size[1] * pixelRatio\n    const rotation = frameState.viewState.rotation\n    const topLeft = ExtentUtil.getTopLeft((extent))\n    const topRight = ExtentUtil.getTopRight((extent))\n    const bottomRight = ExtentUtil.getBottomRight((extent))\n    const bottomLeft = ExtentUtil.getBottomLeft((extent))\n    \n    Transform.apply(frameState.toPixelTransform, topLeft)\n    Transform.apply(frameState.toPixelTransform, topRight)\n    Transform.apply(frameState.toPixelTransform, bottomRight)\n    Transform.apply(frameState.toPixelTransform, bottomLeft)\n    \n    context.save()\n    Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2)\n    context.beginPath()\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio)\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio)\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio)\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio)\n    context.clip()\n    Canvas.rotateAtOffset(context, rotation, width / 2, height / 2)\n  }\n  \n  \n  /**\n   *\n   * @returns {*}\n   */\n  get layer () { return this._layer }\n  get context () {return this._context}\n  \n  /**\n   *\n   * @param frameStateOpt\n   */\n  prepareFrame (frameStateOpt) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param frameStateOpt\n   * @param context\n   */\n  composeFrame (frameStateOpt, context) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  postCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  preCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/layerrenderer.js","/**\n * Created by zhangyong on 2017/5/15.\n */\n\n\nexport const RenderEventType = {}\n\n/**\n *\n * @type {string}\n */\nRenderEventType.PRERENDER =  'prerender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.POSTRENDER = 'postrender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.RENDER = 'render'\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/rendereventtype.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n *\n * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n * 需要分别设置\n *\n * @class FillStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var fillStyle = new mk.FillStyle([255,255,255],\n *         new mk.LineStyle([0,0,255],1,1.25),0.5)\n *\n */\nexport default class FillStyle extends BaseStyle {\n\n  /**\n   * 构建一个面样式\n   * 面样式由填充样式和边框样式组成\n   *\n   * @constructor\n   * @param style 备有接口，以后扩充面的填充样式\n   * @param color 面的填充颜色\n   * @param alpha 免得填充透明度\n   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n   */\n  constructor (color = [255,255,255], borderStyle = null, alpha = 1, style = FillStyle.SOLID) {\n    super(color, style, alpha)\n\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 边框样式对象\n   *\n   * @property borderStyle\n   * @type {mk.LineStyle}\n   */\n  get borderStyle () { return this._borderStyle}\n  set borderStyle (value) { return this._borderStyle = value }\n  \n  /**\n   * 克隆面样式\n   *\n   * @method clone\n   * @returns {FillStyle}\n   */\n  clone () {\n    const newStyle = new FillStyle(this.color, this.borderStyle.clone(),\n      this.alpha, this.style)\n    \n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n    \n    return newStyle\n  }\n  \n}\n\n/**\n * 实体填充\n * @static\n * @final\n * @property SOLID\n * @type {string}\n */\nFillStyle.SOLID = 'solid'\n\n\n// WEBPACK FOOTER //\n// ./src/style/fillstyle.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个点图形的样式\n *\n * @class PointStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *  // 定义一个点，包括外边框的样式\n *\n *  var pointStyle = new mk.PointStyle(10,[255, 255, 255],1,new mk.LineStyle([0, 0, 255],1,1))\n *\n */\nexport default class PointStyle extends BaseStyle {\n\n  /**\n   * 构建一个点样式对象\n   *\n   * @constructor\n   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n   * @param size 点的大小，默认15\n   * @param color\n   * @param alpha\n   * @param xoffset\n   * @param yoffset\n   * @param angle\n   */\n  constructor (size = 15, color = [255,0,0], alpha = 1,borderStyle = null,\n               xoffset = 0, yoffset = 0, angle = 0, style = PointStyle.CIRCLE) {\n    super(color, style, alpha)\n\n    this._size = size\n    this._xoffset = xoffset\n    this._yoffset = yoffset\n    this._angle = angle\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n\n  /**\n   * 克隆点的样式\n   *\n   * @method clone\n   * @returns {PointStyle}\n   */\n  clone () {\n    const newStyle = new PointStyle(this.size, this.color, this.alpha,\n       this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n  \n  /**\n   * 大小\n   *\n   * @property size\n   * @type {Number}\n   */\n  get size(){ return this._size }\n  set size(value){ this._size = value}\n  \n  /**\n   * X 轴偏移量\n   *\n   * @property xoffset\n   * @type {Number}\n   */\n  get xoffset(){ return this._xoffset }\n  set xoffset(value){ this._xoffset = value}\n  \n  /**\n   * Y 轴偏移量\n   *\n   * @property yoffset\n   * @type {Number}\n   */\n  get yoffset(){ return this._yoffset }\n  set yoffset(value){ this._yoffset = value}\n  \n  /**\n   * 样式显示的角度\n   *\n   * @property angle\n   * @type {Number}\n   */\n  get angle(){ return this._angle }\n  set angle(value){ this._angle = value}\n  \n  /**\n   * 边框样式\n   *\n   * @property borderStyle\n   * @type {LineStyle}\n   */\n  get borderStyle(){ return this._borderStyle }\n  set borderStyle(value){ this._borderStyle = value}\n  \n}\n\n/**\n * 圆形样式\n *\n * @static\n * @final\n * @property CIRCLE\n * @type {String}\n */\nPointStyle.CIRCLE = 'circle'\n\n/**\n * 方形样式\n *\n * @static\n * @final\n * @property SQUARE\n * @type {String}\n */\nPointStyle.SQUARE = 'square'\n\n/**\n * 十字样式\n *\n * @static\n * @final\n * @property CROSS\n * @type {string}\n */\nPointStyle.CROSS = 'cross'\n\n/**\n * X样式\n *\n * @static\n * @final\n * @property X\n * @type {string}\n */\nPointStyle.X = 'x'\n\n/**\n * 三角形样式\n *\n * @static\n * @final\n * @property TRIANGLE\n * @type {string}\n */\nPointStyle.TRIANGLE = 'triangle'\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/pointstyle.js","/**\n * Created by zhangyong on 2017/6/7.\n */\n\n\nexport const Canvas = {}\n\n\n/**\n *\n * @param context\n * @param rotation\n * @param offsetX\n * @param offsetY\n */\nCanvas.rotateAtOffset = function(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY)\n    context.rotate(rotation)\n    context.translate(-offsetX, -offsetY)\n  }\n}\n\n\n\nexport default {\n  Canvas\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/canvas.js","/**\n * Created by zypc on 2017/6/4.\n */\nexport const Coordinate = {}\n\nCoordinate.add = (coordinate, delta)  => {\n  coordinate[0] += delta[0]\n  coordinate[1] += delta[1]\n  return coordinate\n}\n\n\nCoordinate.rotate = (coordinate, angle) => {\n  const cosAngle = Math.cos(angle)\n  const sinAngle = Math.sin(angle)\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle\n  coordinate[0] = x\n  coordinate[1] = y\n  return coordinate\n}\n\nCoordinate.scale = (coordinate, scale) => {\n  coordinate[0] *= scale\n  coordinate[1] *= scale\n  return coordinate\n}\n\n\nexport default {\n  Coordinate\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/coordinate.js","/**\n * Created by zhangyong on 2017/8/30.\n */\n\n\nexport const functions = {}\n\n/**\n * 默认条件函数执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.TURE = () => true\n\n/**\n * 默认条件函数不执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.FALSE = () => false\n\nexport default {\n  functions\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/functions.js","/**\n * Created by zhangyong on 2017/6/15.\n */\n\n\nimport Kinetic from './kinetic'\nimport DragPan from './dragpan'\nimport MouseWheelZoom from './mousewheelzoom'\nimport KeyboardHome from './keyboardhome'\nimport KeyboardZoom from './keyboardzoom'\nimport KeyboardPan from './keyboardpan'\n\n/**\n *\n * @param options\n * @returns {Set}\n */\nexport function componentsDefaults (options = {}) {\n  const components = new Set()\n  \n  const kinetic = new Kinetic(-0.005, 0.05, 100)\n  \n  const dragPan = options.dragPan !== undefined ? options.dragPan : true\n  if (dragPan) {\n    components.add(new DragPan({\n      kinetic: kinetic\n    }))\n  }\n  \n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true\n  if (mouseWheelZoom) {\n    components.add(new MouseWheelZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }))\n  }\n  \n  const keyboard = options.keyboard !== undefined ? options.keyborad : true\n  if (keyboard) {\n    components.add(new KeyboardHome(options))\n    components.add(new KeyboardPan(options))\n    components.add(new KeyboardZoom({\n      delta: options.zoomDelta\n    }))\n  }\n  \n  return components\n}\n\n\nexport default {\n  componentsDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/componentdefaults.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport Component from './component'\nimport {Style} from '../style/style'\nimport FeaureLayer from '../lyr/featurelayer'\nimport Feature from '../meek/feature'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Line from '../geometry/line'\nimport Polygon from '../geometry/polygon'\nimport MultiPolygon from '../geometry/mutilpolygon'\nimport Extent from '../geometry/extent'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {simplify} from '../geometry/support/geometryutil'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from '../meek/browserevent'\nimport DrawEvent from './drawevent'\nimport Parallelogram from '../geometry/parallelogram'\nimport {functions} from '../utils/functions'\n\n/**\n * 图形绘制工具基础类\n *\n * @class Draw\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化绘图工具\n *      var drawTool = new mk.Draw({\n *        type: 'point',\n *        drawLayer: new mk.FeatureLayer()\n *      })\n *\n */\nexport default class Draw extends Component {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleMouseEvent: this.handleMouseEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n    \n    /**\n     * mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n    \n    /**\n     * 绘制作用图层;\n     * 需要给绘制工具一个绘制的图层\n     *\n     * @property drawLayer\n     * @type {null}\n     * @private\n     */\n    this._drawLayer = options.drawLayer ? options.drawLayer : null\n  \n    /**\n     * 鼠标按下时的坐标点\n     *\n     * @property downPointPx\n     * @type {null}\n     * @private\n     */\n    this._downPointPx = null\n    \n    /**\n     * 图形绘制结束条件\n     *\n     * @property finishCoordinate\n     * @type {null}\n     * @private\n     */\n    this._finishCoordinate = null\n  \n    /**\n     * 当前的绘图模式(点、线、多边形、矩形)\n     *\n     * @property drawMode\n     * @type {*}\n     */\n    this.drawMode = Draw.getDrawMode(options.type)\n  \n    /**\n     * 绘制多边形、线段时的临时坐标数据\n     *\n     * @property sketchCoords\n     * @type\n     * @private\n     */\n    this._sketchCoords = null\n  \n    /**\n     * 绘制多边的临时线段\n     *\n     * @property sketchLine\n     * @type {null}\n     * @private\n     */\n    this._sketchLine = null\n  \n    /**\n     * 绘制完成时的结束条件\n     *\n     * @property finishCondition\n     * @type {null}\n     * @private\n     *\n     */\n    this._finishCondition = options.finishCondition ?\n        options.finishCondition : functions.TURE\n\n    /**\n     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n     */\n    this._hasFinishConditionOptions = options.finishCondition ? \n        true : false\n        \n    /**\n     * 撤销条件\n     *\n     * @property undoCondition\n     * @type {Function}\n     * @private\n     */\n    this._undoCondition = options.undoCondition !== undefined ?\n        options.undoCondition : functions.TURE\n\n    /**\n     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n     */\n    this._hasUndoConditionOptions = options.undoCondition ?\n      true : false\n  \n    /**\n     * 设置默认回退的顶点数，默认1\n     * @TODO 需要完善\n     * @type {number}\n     * @private\n     */\n    this._undoStep = options.freehandUndoStep ?\n      options.freehandUndoStep : 2\n      \n    // add keyboard events\n    if (options.undoCondition || options.finishCondition) {\n      listen(document, 'keyup',\n        this._handleKeyboardEvent, this)\n    }\n  \n    /**\n     * 初始化草稿图层，用于临时显示绘制的图形\n     *\n     * @property sketchLayer\n     * @type {Object} featurelayer\n     * @private\n     */\n    this._sketchLayer = new FeaureLayer({name: 'sketch layer for draw component'})\n\n    /**\n     * 获取默认绘制渲染样式\n     *\n     * @property sketchLayer\n     * @private\n     * @type {Function}\n     */\n    this._sketchLayer.style = this.getDefaultStyleFunction()\n    \n    /**\n     * 临时点\n     *\n     * @property sketchPoint\n     * @type {null}\n     * @private\n     */\n    this._sketchPoint = null\n  \n    /**\n     * 绘制时，是否允许鼠标参考点\n     * @type {boolean}\n     * @private\n     */\n    this._enableSketchPoint = options.enableSketchPoint ?\n      options.enableSketchPoint : false\n  \n    /**\n     * 临时Feature\n     *\n     * @property sketchFeature\n     * @type {null}\n     * @private\n     */\n    this._sketchFeature = null\n  \n    /**\n     * 通过geometry的类型去构建一个geometry\n     *\n     * @property eometryFunction\n     * @type {null}\n     * @private\n     */\n    // The function that can build a geometry by the passed geometry type.\n    this._geometryFunction = null\n  \n    /**\n     * 临时的线段坐标数据\n     *\n     * @property sketchLineCoords\n     * @type {null}\n     * @private\n     */\n    this._sketchLineCoords = null\n  \n    /**\n     * freehand drawing\n     * @type {Boolean}\n     * @private\n     */\n    this._freehand = options.freehand ? options.freehand : false\n    \n    /**\n     * 公差像素距离\n     *\n     * @property snapTolerance\n     * @type {Number}\n     * @private\n     */\n    this._snapTolerance = options.snapTolerance ?\n        options.snapTolerance : 2\n  \n    /**\n     * 绘制线段时的最多点限制，默认没有限制\n     *\n     * @property maxLinePoints\n     * @type {Number}\n     * @private\n     */\n    this._maxLinePoints = options.maxLinePoints ?\n        options.maxLinePoints : Infinity\n\n    /**\n     * 绘制多边形时的顶点限制，默认没有限制\n     *\n     * @property maxPolygonPoints\n     * @type {Number}\n     * @private\n     */\n    this._maxPolygonPoints = options.maxPolygonPoints ?\n      options.maxPolygonPoints : Infinity\n  \n    /**\n     * 绘制线段的最少点为2，多边形为3\n     *\n     * @property minPoints\n     * @type {Number}\n     * @private\n     */\n    this._minPoints = options.minPoints ?\n      options.minPoints :\n      (this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2)\n  \n  \n    /**\n     *\n     * @type {condition}\n     * @private\n     */\n    this._condition = options.condition ?\n      options.condition : functions.TURE\n    \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._shouldHandle = false\n  \n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._squaredClickTolerance = options.clickUpTolerance ?\n      options.clickUpTolerance * options.clickUpTolerance : 36\n        \n      \n  }\n\n  _finishCheck() {\n    // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），小于4个不是多边形，return\n    if (this.drawMode === Draw.DrawMode.POLYGON) {\n      if (this._sketchFeature === null) {\n        return false\n      }\n\n      let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n      if (pcoordinates[0].length < 4) {\n        return false\n      }\n    }\n\n    // 判断线的顶点是否小于2个，小于2个不是线段，return\n    if (this.drawMode === Draw.DrawMode.LINE) {\n      if (this._sketchFeature === null) {\n        return false\n      }\n\n      let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n      if (pcoordinates.length <= 2) {\n        return false\n      }\n    }\n\n    return true\n  }\n  \n  /**\n   * 处理绘制结束事件\n   *\n   * handleKeyboardEvent\n   * @type {Function}\n   * @param event {event}\n   * @private\n   */\n  _handleKeyboardEvent (event) {\n    // If finish drawing\n    if (this._hasFinishConditionOptions && this._finishCondition(event)) {\n      if (this._finishCheck()) {\n        this._finishDrawing()\n      }\n    }\n    \n    // If undo drawing\n    if (this._hasUndoConditionOptions) {\n      if (this._undoCondition(event)) {\n        this.undoDrawing()\n      }\n    }\n  }\n  \n  /**\n   * 获取图形创建、修改的工厂方法\n   *\n   * @property geometryFunction\n   * @type {Function}\n   * @retruns geometryFunction {Function}\n   */\n  get geometryFunction () {\n    if(!this._geometryFunction){\n      this._geometryFunction = this._initGeometryFunction()\n    }\n    \n    return this._geometryFunction\n  }\n  \n  /**\n   * drawMode读写器，\n   * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n   *\n   * @type {Function}\n   * @property drawMode\n   * @type {mk.Draw.DrawMode}\n   */\n  get drawMode () { return this._drawMode }\n  set drawMode (value){\n    const isIn = this._existInDrawMode(value)\n    \n    this.active = isIn ? true : false\n    this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED\n    \n    this._sketchLineCoords = null\n    this._abortDrawing()\n  \n    this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2\n  }\n\n  /**\n   * 判断传入的绘制类型是否在绘制列表中\n   *\n   * @method existInDrawMode\n   * @param value {String}\n   * @returns {Boolean}\n   * @private\n   */\n  _existInDrawMode (value){\n    if ((typeof value === 'string') && (value.constructor === String)) {\n      const drawMode = Draw.DrawMode\n      const modeValue = value.toUpperCase()\n  \n      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n        return false\n      }\n      \n      for (let val in drawMode) {\n        if (modeValue === drawMode[val].toUpperCase()) {\n          return true\n        }\n      }\n    }\n    \n    return false\n  }\n\n  /**\n   * 图形生产工厂方法\n   *\n   * @method geometryFactory\n   * @returns {Object} 返回一个geometry对象\n   * @private\n   */\n  _geometryFactory () {\n    let Constructor\n    let mode = this.drawMode\n  \n    if (mode === Draw.DrawMode.POINT) {\n      Constructor = Point\n    } else if (mode === Draw.DrawMode.LINE) {\n      Constructor = Line\n    } else if(mode === Draw.DrawMode.POLYGON) {\n      Constructor = Polygon\n    } else if (mode === Draw.DrawMode.EXTENT) {\n      Constructor = Extent\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      Constructor = Parallelogram\n    }\n    \n    return Constructor\n  }\n  \n  /**\n   * 设置缺省 geometryfunction\n   *\n   * @method initGeometryFunction\n   * @returns {Function} Geometry\n   * @private\n   */\n  _initGeometryFunction () {\n    const geometryFunction = (coordinates, opt_geometry) => {\n      let mode = this.drawMode\n      let geometry = opt_geometry\n      \n      if (geometry) {\n        if (mode === Draw.DrawMode.POLYGON ||\n            mode === Draw.DrawMode.PARALLELOGRAM ||\n            mode === Draw.DrawMode.LINE ) {\n          geometry.setCoordinates(coordinates)\n        } else if(mode === Draw.DrawMode.EXTENT) {\n          geometry.setCoordinates(ExtentUtil.boundingExtent(coordinates))\n        }\n      } else {\n        let Constructor = this._geometryFactory()\n        geometry = new Constructor(coordinates[0],coordinates[1])\n      }\n      \n      return geometry\n    }\n    \n    return geometryFunction\n  }\n  \n  /**\n   * 或者 freehand draw 的执行条件\n   *\n   * @param event\n   * @returns {boolean|*}\n   * @private\n   */\n  _freehandEnable () {\n    const drawMode = this.drawMode\n    return (drawMode === Draw.DrawMode.POLYGON ||\n            drawMode === Draw.DrawMode.LINE ) && this._freehand\n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param event {event}\n   * @returns {*|Boolean}\n   */\n  handleMouseEvent (event) {\n    // 排除右键\n    const buttons = event.originalEvent.buttons\n    if (buttons === 2) {\n      return false\n    }\n    \n    // 越界限制\n    event.coordinate = this.coordinateBeyond(event.coordinate)\n  \n    const freehand = this._freehandEnable()\n    // this._freehand = this._freehandEnable()\n    // let pass = !this._freehand\n    let pass = true\n    const eventType = event.type\n    if (freehand &&\n        eventType === BrowserEvent.MOUSE_DRAG &&\n        this._sketchFeature !== null) {\n      this._addToDrawing(event)\n      // pass = false\n    } else if (eventType === BrowserEvent.MOUSE_MOVE) {\n      pass = this._handleMove(event)\n    } else if (eventType === BrowserEvent.DBLCLICK) {\n      pass = false\n    }\n    \n    return super.handleMouseEvent(event) && pass\n  }\n  \n  /**\n   * 处理移动事件\n   *\n   * handleMove\n   * @param {BrowserEvent} event A move event.\n   * @return {boolean} Pass the event to other compoments.\n   * @private\n   */\n  _handleMove (event) {\n    if (this._downPointPx &&\n      ((!this._freehand && this._shouldHandle) ||\n      (this._freehand && !this._shouldHandle))) {\n      const downPx = this._downPointPx\n      const clickPx = event.pixel\n      const dx = downPx[0] - clickPx[0]\n      const dy = downPx[1] - clickPx[1]\n      const squaredDistance = dx * dx + dy * dy\n      this._shouldHandle = this._freehand ?\n        squaredDistance > this._squaredClickTolerance :\n        squaredDistance <= this._squaredClickTolerance\n    }\n    \n    if (this._finishCoordinate) {\n      this._modifyDrawing(event)\n      // this._autoPan(event)\n    } else {\n      this._updateSketchPoint(event)\n    }\n    \n    return true\n  }\n  \n  /**\n   * 鼠标按下时，获取当前坐标点\n   *\n   * handleDownEvent\n   * @param event {BrowserEvent} event A up event.\n   * @returns {Boolean}\n   * @private\n   */\n  _handleDownEvent (event) {\n    this._shouldHandle = !this._freehand\n    \n    if (this._freehand) {\n      this._downPointPx = event.pixel\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n      }\n      \n      return false\n    } else if (this._condition(event)) {\n      this._downPointPx = event.pixel\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * 处理鼠标弹起事件\n   *\n   * handleUpEvent\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _handleUpEvent (event) {\n    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n      return\n    }\n    \n    let pass = true\n    const mode = this.drawMode\n    \n    this._handleMove(event)\n    \n    if (this._shouldHandle) {\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n    \n        // 点绘制在up的时候结束\n        if (this.drawMode === Draw.DrawMode.POINT) {\n          this._finishDrawing()\n        }\n      } else if (mode === Draw.DrawMode.CIRCLE ) {\n        //\n        //\n      } else if (mode === Draw.DrawMode.EXTENT) {\n        this._finishDrawing()\n      }\n      else if (this._atFinish(event)) {\n        if (this._finishCondition(event)) {\n          this._finishDrawing()\n        }\n      } else {\n        this._addToDrawing(event)\n      }\n    } else if (this._freehand && !this._finishCondition) {\n      this._finishCoordinate = null\n      this._abortDrawing()\n    }\n    \n    return pass\n  }\n  \n  /**\n   * 启动绘制，生成feature\n   *\n   * @method startDrawing\n   * @param event {Event}\n   * @private\n   */\n  _startDrawing (event) {\n    const startPoint = event.coordinate\n    this._finishCoordinate = startPoint\n    \n    const _drawMode = this.drawMode\n    \n    // 构造geometry数据\n    if (_drawMode === Draw.DrawMode.POINT) {\n      this._sketchCoords = startPoint.slice() // 缓存up的点\n    } else if (_drawMode === Draw.DrawMode.POLYGON ) {\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else if (_drawMode === Draw.DrawMode.PARALLELOGRAM) {// 平行四边形\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else {\n      this._sketchCoords = [startPoint.slice(),startPoint.slice()] // 缓存up的点，最后一个值，用于move的替换\n      \n      if (_drawMode === Draw.DrawMode.EXTENT) {\n        this._sketchLineCoords = this._sketchCoords\n      }\n    }\n  \n    if (this._sketchLineCoords) {\n      this._sketchLine = new Feature(new Line(this._sketchLineCoords))\n    }\n    \n    // Build a geometry uesed sketchCorrdds\n    const geometry = this.geometryFunction(this._sketchCoords)\n    \n    this._sketchFeature = new Feature()\n    this._sketchFeature.geometry = geometry\n    \n    // Redraw the sketch features\n    this._updateSketchFeatures()\n    \n    // 派发绘制开始事件\n    // Trigger the draw-strat event\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_START, this._sketchFeature))\n  }\n  \n  /**\n   * Modify the drawing\n   *\n   * @param event {Event}\n   * @private\n   */\n  _modifyDrawing (event) {\n    let coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates = null, last = null\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.POINT) {\n      last = this._sketchCoords\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      if (this._atFinish(event)) {\n        coordinate = this._finishCoordinate.slice()\n      }\n  \n      // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      \n      // 需要清理，第三个点应该为鼠标点\n      if (coordinates.length > 3) {\n        coordinates = coordinates.slice(0, 2)\n        coordinates.push(coordinate)\n      } else {\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n      }\n      \n      const lastSecondPoint = coordinates[coordinates.length - 2]\n  \n      // 平行四边形，如果有3个点，则直接生成平行四边形\n      if (lastSecondPoint[0] !== last[0] &&\n          lastSecondPoint[1] !== last[1] && coordinates.length === 3) {\n        const lstPoint = Parallelogram.getTheLastPoint(coordinates)\n        coordinates.push(lstPoint, coordinates[0])\n        this._sketchCoords = [coordinates]\n  \n        // 辅助效果线\n        this._sketchLineCoords = coordinates\n      }\n  \n    } else {\n      coordinates = this._sketchCoords // 获取up的点\n      last = coordinates[coordinates.length - 1]// 替换为当前MOve的点，形成一条path\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    }\n    \n    if (this._freehand) {\n      const tempLastRing = this._sketchCoords[0]\n      if (tempLastRing.length > 2) {\n        const lastPoint = tempLastRing[tempLastRing.length - 1]\n        const lastPoint2 = tempLastRing[tempLastRing.length - 2]\n  \n        if (lastPoint[0] === lastPoint2[0] && lastPoint[1] === lastPoint2[1]) {\n          tempLastRing.pop()\n        }\n      }\n    }\n    \n    // 给 geometry 赋值\n    this.geometryFunction(this._sketchCoords, geometry)\n    \n    // 更新点坐标\n    if (this._sketchPoint) {\n      const sketchPointGeom = this._sketchPoint.geometry\n      sketchPointGeom.update(coordinate[0],coordinate[1])\n    }\n    \n    let sketchLineGeom\n    if (mode === Draw.DrawMode.EXTENT) {\n      if (!this._sketchLine) {\n        this._sketchLine = new Feature(new Line(null))\n      }\n      \n      const rings = geometry.getCoordinates()\n      sketchLineGeom = this._sketchLine.geometry\n      sketchLineGeom.path = rings\n    } else if (this._sketchLineCoords) {\n      sketchLineGeom =  (this._sketchLine.geometry)\n      sketchLineGeom.path = this._sketchLineCoords\n    }\n    \n    this._updateSketchFeatures()\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAWING, this._sketchFeature))\n  }\n  \n  /**\n   * Add a new coordinate to the drawing\n   *\n   * @param event\n   * @private\n   */\n  _addToDrawing (event) {\n    const coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates,done\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.LINE) {\n      this._finishCoordinate = coordinate.slice()\n      coordinates = this._sketchCoords\n      \n      if (coordinates.length > this._maxLinePoints) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      if (this._freehand) {\n        if (coordinates.length > 1) {\n          const lastPoint = coordinates[coordinates.length - 1]\n          if (lastPoint[0] === coordinate[0] &&\n            lastPoint[1] === coordinate[1]) {\n            coordinates.pop()\n          }\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      this.geometryFunction(coordinates, geometry)\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      \n      if (coordinates.length > this._maxPolygonPoints ) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n  \n      // 当前坐标数组添加新点数组\n      coordinates.push(coordinate.slice())\n      done = coordinates.length > this._maxPolygonPoints\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    }\n    \n    this._updateSketchFeatures()\n    \n    if (done) {\n      this._finishDrawing()\n    }\n  }\n  \n  \n  /**\n   * 终止绘制，不会添加临时feature\n   *\n   * @method abortDrawing\n   * @returns {Feature|null|_Feature2.default}\n   * @private\n   */\n  _abortDrawing () {\n    this._finishCoordinate = null\n    const sketchFeature = this._sketchFeature\n    if (sketchFeature) {\n      this._sketchFeature = null\n      this._sketchPoint = null\n      this._sketchLine = null\n      this._sketchLayer.clear()\n    }\n    \n    return sketchFeature\n  }\n\n  finishDrawing () {\n    if (this._finishCheck()) {\n      this._finishDrawing()\n    }\n  }\n  \n  /**\n   * 绘制完成，形成正式feature\n   *\n   * @method finishDrawing\n   * @private\n   */\n  _finishDrawing () {\n    if (this._sketchFeature === null){\n      this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END))\n      return\n    }\n\n    const sketchFeature = this._abortDrawing()// 中止绘制，\n    const coordinates = this._sketchCoords\n    const geometry = (sketchFeature.geometry)\n    \n    const drawMode = this.drawMode\n  \n    if (drawMode === Draw.DrawMode.LINE) {\n      // remove the redundant last point\n      coordinates.pop()\n      this.geometryFunction(coordinates, geometry)\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      // When we finish drawing a polygon on the last point,\n      // the last coordinate is duplicated as for LineString\n      // we force the replacement by the first point\n      coordinates[0].pop()\n      coordinates[0].push(coordinates[0][0])\n      this.geometryFunction(coordinates, geometry)\n    }\n    \n    // 处理复合图形\n    if (drawMode === Geometry.MULTI_POINT) {\n      // sketchFeature.geometry = new MultiPoint([coordinates]))\n    } else if (drawMode === Geometry.MULTI_LINE) {\n      // sketchFeature.geometry = new MultiLineString([coordinates])\n    } else if (drawMode === Geometry.MULTI_POLYGON) {\n      sketchFeature.geometry = new MultiPolygon([coordinates])\n    }\n  \n    if (this._freehand) {\n      simplify(sketchFeature.geometry)\n    }\n    \n    // 最终放到shource中，形成正式feature\n    if (this._drawLayer) {\n      sketchFeature.style = undefined\n      this._drawLayer.addFeatures([sketchFeature])\n    }\n  \n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END, sketchFeature))\n  }\n  \n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   *\n   * @param event\n   * @returns {Boolean}\n   * @private\n   */\n  _atFinish (event) {\n    let at = false\n    if (this._sketchFeature) {\n      \n      if (this._freehand && this._finishCondition) {\n        return false\n      }\n      \n      let potentiallyDone = false\n      let potentiallyFinishCoordinates = [this._finishCoordinate]\n      \n      const drawMode = this.drawMode\n      if (drawMode === Draw.DrawMode.LINE) {\n        potentiallyDone = this._sketchCoords.length > this._minPoints\n      } else if (drawMode === Draw.DrawMode.POLYGON) {\n        potentiallyDone = this._sketchCoords[0].length > this._minPoints\n        potentiallyFinishCoordinates = [this._sketchCoords[0][0],\n          this._sketchCoords[0][this._sketchCoords[0].length - 2]]\n      } else if (drawMode === Draw.DrawMode.PARALLELOGRAM) {\n        at = this._sketchCoords[0].length === 5 ? true : false\n      }\n      \n      if (potentiallyDone) {\n        const map = this.map\n        for (let  i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          const finishCoordinate = potentiallyFinishCoordinates[i]\n          const finishPixel = map.getPixelFromCoordinate(finishCoordinate)\n          const pixel = event.pixel\n          const dx = pixel[0] - finishPixel[0]\n          const dy = pixel[1] - finishPixel[1]\n          const freehand = this._freehand\n          const snapTolerance = freehand ? 1 : this._snapTolerance\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance\n          if (at) {\n            this._finishCoordinate = finishCoordinate\n            break\n          }\n        }\n      }\n    }\n    \n    return at\n  }\n  \n  /**\n   * Create or update the sketch point\n   *\n   * updateSketchPoint\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _updateSketchPoint (event) {\n    let coordinates = event.coordinate\n\n    if (!this._enableSketchPoint) {\n      return\n    }\n    \n    if (this._sketchPoint === null) {\n      const geom = new Point(coordinates[0], coordinates[1])\n      this._sketchPoint = new Feature(geom)\n      this._updateSketchFeatures()\n    } else {\n      const sketchPointgeom = this._sketchPoint.geometry\n      sketchPointgeom.setCoordinates(coordinates)\n    }\n  }\n  \n  _autoPan (event) {\n    const pixel = event.pixel\n    const size = this.map.size\n    const x = pixel[0]\n    const y = pixel[1]\n    \n    if (x <= 2 || y <= 2) {\n      // console.log('出界')\n      return\n    }\n    \n    if (x >= size[0] - 5 || y >= size[1] - 5) {\n      // console.log('出界')\n      return\n    }\n    \n  }\n  \n  /**\n   * Redraw the sketch featrues.\n   * updateSketchFeatures\n   * @private\n   */\n  _updateSketchFeatures () {\n    const features = []\n\n    if (this._sketchFeature){\n      features.push(this._sketchFeature)\n    }\n    \n    if (this._sketchLine) {\n      features.push(this._sketchLine)\n    }\n    \n    if (this._sketchPoint) {\n      features.push(this._sketchPoint)\n    }\n    \n    // 出发map的render\n    this._sketchLayer.clear()\n    this._sketchLayer.addFeatures(features)\n  }\n  \n  /**\n   * 执行撤销\n   *\n   * @method undoDrawing\n   * @private\n   */\n  undoDrawing () {\n    const drawMode = this.drawMode\n    let undoStep = 1\n    let polygonDeleteStep = 2\n    if (this._freehand) {\n      undoStep = this._undoStep\n      polygonDeleteStep = 3\n    }\n    \n    if (drawMode === Draw.DrawMode.LINE ) {\n      if (this._sketchFeature) {\n        const coordinates = this._sketchFeature.geometry.getCoordinates()\n        if (coordinates.length + undoStep > 2) {\n          coordinates.splice(coordinates.length - 2, undoStep)\n          if (coordinates.length === 1) {\n            this._abortDrawing()\n            this._finishDrawing()\n          } else {\n            this._sketchFeature.changed()\n          }\n        } else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      if (this._sketchFeature) {\n        const pcoordinates = this._sketchFeature.geometry.getCoordinates()[0]\n        \n        if (pcoordinates.length + undoStep > polygonDeleteStep ) {\n          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep)\n          if (pcoordinates.length === 1) {\n            this._abortDrawing()\n            this._finishDrawing()\n          } else {\n            this._sketchFeature.changed()\n          }\n        } else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    }\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} mk.map\n   */\n  get map (){ return this._map }\n  set map (mapValue) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (mapValue) {\n      this._map = mapValue\n      // this._mapRenderKey = listen(this, EventType.CHANGE, mapValue.render, mapValue)\n      \n      mapValue.addLayer(this._sketchLayer)\n    }\n    \n    this._updateState()\n  }\n\n  /**\n   * 更新绘制状态\n   *\n   * @method updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      this._abortDrawing()\n    }\n  \n    this._sketchLayer.map = map\n  }\n  \n  /**\n   * 获取默认绘制样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return function (feature) {\n      return styles[feature.geometry.geometryType]\n    }\n  }\n  \n  /**\n   *\n   * @returns {boolean}\n   */\n  shouldStopEvent () {\n    if (this._freehand) {\n      return true\n    }\n    \n    return false\n  }\n\n  /**\n   * 获取当前的Layer\n   *\n   * @method drawLayer\n   * @return {null}\n   */\n  get drawLayer () { return this._drawLayer }\n  \n  /**\n   * 设置当前自由、绘制模式\n   * @property freehand\n   * @type {Boolean}\n   */\n  get freehand () { return this._freehand }\n  set freehand (value) {\n    this._freehand = value\n  }\n\n  /**\n   * active读写器, 读取设置当前active非自由\n   *\n   * @type {Function}\n   * @property active\n   * @type {Boolean}\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n    if (this._active === false) {\n      if (this._sketchLayer) {\n        this._sketchLayer.clear()\n      }\n      \n      this._sketchPoint = null\n    }\n  }\n}\n\n/**\n * 获取当前绘制模式的静态方法\n *\n * @method getDrawMode\n * @param type {String}\n * @returns {Object}\n */\nDraw.getDrawMode = function(type) {\n  let drawMode = Draw.DrawMode.UNDEFINED\n  \n  switch (type){\n  case Geometry.POINT:\n  case Geometry.MULTI_POINT:\n    drawMode = Draw.DrawMode.POINT\n    break\n  case Geometry.LINE:\n  case Geometry.MULTI_LINE:\n    drawMode = Draw.DrawMode.LINE\n    break\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n    drawMode = Draw.DrawMode.POLYGON\n    break\n  case Geometry.EXTENT:\n    drawMode = Draw.DrawMode.EXTENT\n    break\n  case Geometry.PARALLELOGRAM:\n    drawMode = Draw.DrawMode.PARALLELOGRAM\n    break\n  }\n  \n  return drawMode\n}\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n *\n * 绘制模式：点、线、面、矩形(circle暂时不支持)\n * @enum {string}\n */\nDraw.DrawMode = {\n  POINT: 'Point',\n  LINE: 'Line',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle',\n  EXTENT: 'Extent',\n  PARALLELOGRAM :'Parallelogram',\n  UNDEFINED: 'undefined'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/draw.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Component from './component'\nimport {targetNotEditable, noModifierKeys} from '../utils/mousekey'\n\n/**\n *\n */\nexport default class KeyboardHome extends Component {\n  \n  constructor (options = {}) {\n    super()\n  \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n          (keyCode === 36))\n    }\n    \n    /**\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ? options.condition : this._defaultCondition\n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (this._condition(mapBrowserEvent)) {\n      this._goToHome()\n    }\n  \n    return !stopEvent\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardhome.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {noModifierKeys, targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardPan extends Component {\n  constructor (options = {}) {\n  \n    super()\n    \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n        (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38))\n    }\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition !== undefined ?\n      options.condition : this._defaultCondition\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._duration = options.duration !== undefined ? options.duration : 100\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._pixelDelta = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128\n  }\n  \n  /**\n   * \n   * @param event\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type === BrowserEvent.KEYDOWN) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const keyCode = keyEvent.keyCode\n      if (this._condition(mapBrowserEvent) ) {\n        const map = mapBrowserEvent.map\n        const view = map.view\n        const mapUnitsDelta = view.resolution * this._pixelDelta\n        let deltaX = 0, deltaY = 0\n        \n        if (keyCode === 40) {\n          deltaY = mapUnitsDelta\n        } else if (keyCode === 37) {\n          deltaX = -mapUnitsDelta\n        } else if (keyCode === 39) {\n          deltaX = mapUnitsDelta\n        } else {\n          deltaY = -mapUnitsDelta\n        }\n        \n        const delta = [deltaX, deltaY]\n        super.pan(view, delta, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardpan.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport {targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardZoom extends Component {\n  constructor (options = {}) {\n    super()\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition ? options.condition : targetNotEditable\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delta = options.delta ? options.delta : 1\n    \n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type == BrowserEvent.KEYDOWN ||\n        mapBrowserEvent.type == BrowserEvent.KEYPRESS) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const charCode = keyEvent.charCode\n      if (this._condition(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n        const map = mapBrowserEvent.map\n        const delta = (charCode == '+'.charCodeAt(0)) ? this._delta : -this._delta\n        const view = map.view\n        super.zoomByDelta(view, delta, undefined, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardzoom.js","\nimport BaseObject from '../core/baseobject'\n\nexport default class Kinetic extends BaseObject{\n  \n  constructor(decay, minVelocity, delay){\n  \n    super()\n    \n    /**\n     * @private\n     * @type {number}\n     */\n    this._decay = decay\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minVelocity = minVelocity\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delay = delay\n  \n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._points = []\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._angle = 0\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   */\n  begin () {\n    this._points.length = 0\n    this._angle = 0\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update (x, y) {\n    this._points.push(x, y, Date.now())\n  }\n  \n  \n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end () {\n    if (this._points.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false\n    }\n    const delay = Date.now() - this._delay\n    const lastIndex = this._points.length - 3\n    if (this._points[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false\n    }\n    \n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3\n    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n      firstIndex -= 3\n    }\n    \n    const duration = this._points[lastIndex + 2] - this._points[firstIndex + 2]\n    const dx = this._points[lastIndex] - this._points[firstIndex]\n    const dy = this._points[lastIndex + 1] - this._points[firstIndex + 1]\n    this._angle = Math.atan2(dy, dx)\n    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration\n    return this._initialVelocity > this._minVelocity\n  }\n  \n  \n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance () {\n    return (this._minVelocity - this._initialVelocity) / this._decay\n  }\n  \n  \n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  angle () {\n    return this._angle\n  }\n \n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/kinetic.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n\nimport Component from './component'\n\nimport BrowserEvent from '../meek/browserevent'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Parallelogram from '../geometry/parallelogram'\n\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nimport ModifyEvent from './modifyevent'\n\nimport Feature from '../meek/feature'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\nimport {closestOnSegment, squaredDistanceToSegment,\n        squaredDistance, distance} from '../geometry/support/geometryutil'\n\nimport {noModifierKeys, singleClick} from '../utils/mousekey'\nimport {functions} from '../utils/functions'\n\n/**\n * 编辑模式，启动后可以编辑图形\n *\n * @class Modify\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化编辑工具\n *      var modifyTool = new mk.Modify({\n *        features: selectedFeaturs\n *      })\n */\nexport default class Modify extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor(options = {}) {\n    super(options)\n    \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n  \n    /**\n     * 可以编辑的feature集合\n     *\n     * @property features\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n    \n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n     *\n     * @property pixelTolerance\n     * @type {number}\n     * @private\n     */\n    this._pixelTolerance = options.pixelTolerance ?\n        options.pixelTolerance : 10\n  \n    /**\n     * 可以整体移动图形，矩形默认可以整体移动\n     *\n     * @property movableGeometrys\n     * @type {[*]}\n     * @private\n     */\n    this._movableGeometrys = options.movableGeometrys ?\n        options.movableGeometrys : ['extent']\n  \n  \n    /**\n     *\n     * hasMoveableGeometrys\n     * @type {boolean}\n     * @private\n     */\n    this._hasMoveableGeometrys = true\n    \n    const movableGeometrys = this._movableGeometrys\n    if (movableGeometrys === null || movableGeometrys === undefined) {\n      this._hasMoveableGeometrys = false\n    }\n  \n    if (Array.isArray(movableGeometrys)) {\n      if (movableGeometrys.length === 0) {\n        this._hasMoveableGeometrys = false\n      }\n    }\n  \n    /**\n     *\n     * @type {Set}\n     * @private\n     */\n    this.movableGeometrySet\n    \n    if (this._hasMoveableGeometrys) {\n      this.movableGeometrySet = new Set(this._movableGeometrys)\n    }\n  \n    /**\n     * @private\n     */\n    this._deleteCondition = options.deleteCondition ?\n      options.deleteCondition : this._defaultDeleteCondition\n  \n    /**\n     * 允许顶点编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._vertexEditableCondition = options.vertexEditableCondition ?\n      options.vertexEditableCondition : functions.TURE\n  \n    /**\n     * 允许边编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._edgeEditableCondition = options.edgeEditableCondition ?\n      options.edgeEditableCondition : functions.TURE\n    \n    /**\n     * Determine if should snap to vertexs of gemetry\n     *\n     * snappedToVertex\n     * @type {boolean}\n     * @private\n     */\n    this._snappedToVertex = false\n  \n    /**\n     * @snapSegments\n     * @type {null}\n     * @private\n     */\n    this._snapSegments = null\n  \n    /**\n     * @vertexFeature\n     * @type {null}\n     * @private\n     */\n    this._vertexFeature = null\n  \n    /**\n     * The editable features\n     *\n     * 设置需要编辑图形的集合，\n     * 如果图形不允许编辑，请从该集合移除\n     *\n     * @property features\n     * @type {[]}\n     */\n    this.features = options.features || []\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._lastPixel = [0, 0]\n  \n  \n    /**\n     * 初始化草稿图层，用于临时高亮显示编辑的图形\n     *\n     * @property overLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._overLayer = new FeatureLayer({\n      style: options.style ? options.style : this.getDefaultStyleFunction(),\n      zIndex: 1000\n    })\n  \n    this.active = true\n  \n    \n    this._dragSegments = []\n  \n    /**\n     * 图形是否修改过，默认为false\n     *\n     * modified\n     * @type {boolean}\n     * @private\n     */\n    this._modified = false\n  \n    /**\n     * changingFeature\n     * @type {boolean}\n     * @private\n     */\n    this._changingFeature = true\n  \n    /**\n     * Tracks if the next `singleclick` event should be ignored to prevent\n     * accidental deletion right after vertex creation.\n     *\n     * ignoreNextSingleClick\n     * @type {boolean}\n     * @private\n     */\n    this._ignoreNextSingleClick = false\n  \n    /**\n     * shouldAddToVertexs\n     * @type {boolean}\n     * @private\n     */\n    this._shouldAddToVertexs = false\n  \n    /**\n     * insertVertices\n     * @type {Array}\n     * @private\n     */\n    this._insertVertices = []\n  \n    /**\n     * Keep the mouse-down point\n     *\n     * downPoint\n     * @type {null}\n     * @private\n     */\n    this._downPoint = null\n  \n    /**\n     * Keep the current moved geometry\n     *\n     * currentMovedGeometry\n     * @type {null}\n     * @private\n     */\n    this._currentMovedGeometry = null\n  \n    /**\n     * 记录上一次被编辑的点\n     * 一般指的是在边上的捕捉点或者顶点本身\n     * 只是用于平行四边形的编辑使用\n     * @type {null}\n     * @private\n     */\n    this._oldEditedVertex = null\n  }\n  \n  /**\n   * feature的读写器，读取设置当前的feature\n   *\n   * @property features\n   * @returns {Object} feature\n   */\n  get features () { return this._features }\n  set features (value = []) {\n    this._features = value\n    this._snapSegments = null\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._hasMoveableGeometrys =\n      value.length === 0 ? false : true\n    \n    this._dragSegments = []\n    this._snappedToVertex = false\n  }\n  \n  /**\n   * Handle the mouse events emitted from map.\n   *\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!(browserEvent instanceof BrowserEvent)) {\n      return true\n    }\n\n    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate)\n    \n    this.lastPointerEvent_ = browserEvent\n  \n    let handled = false\n    if ( browserEvent.type == BrowserEvent.MOUSE_MOVE &&\n      !this.handlingDownUpSequence) {\n      this._handlePointerMove(browserEvent)\n    }\n\n    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n      if (browserEvent.type !== BrowserEvent.SINGLE_CLICK ||\n        !this._ignoreNextSingleClick) {\n        handled = this.removePoint()\n      } else {\n        handled = true\n      }\n    }\n  \n    if (browserEvent.type == BrowserEvent.SINGLE_CLICK) {\n      this._ignoreNextSingleClick = false\n    }\n  \n    return super.handleMouseEvent(browserEvent) && !handled\n  }\n\n  /**\n   * Removes the vertex currently being pointed.\n   *\n   *\n   * removePoint\n   * @return {boolean} True when a vertex was removed.\n   * @api\n   */\n  removePoint () {\n    if (this._lastPointerEvent && this._lastPointerEvent.type != BrowserEvent.MOUSE_DRAG) {\n      let evt = this.lastPointerEvent_\n      this.willModifyFeatures_(evt)\n      this._removeVertex()\n      \n      this.dispatchEvent(new ModifyEvent(\n        ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n      return true\n    }\n    \n    return false\n  }\n  \n  /**\n   * compareIndexes\n   * @param a\n   * @param b\n   * @returns {number}\n   * @private\n   */\n  _compareIndexes (a, b) {\n    return a.index - b.index\n  }\n  \n  /**\n   * willModifyFeatures\n   * @param event\n   * @private\n   */\n  _willModifyFeatures (event) {\n    if (!this._modified) {\n      this._modified = true\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_START,\n        this.features, event))\n    }\n  }\n  \n  /**\n   * Handle poiner mouse down event\n   *\n   * handleDownEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDownEvent (evt) {\n    this._downPoint = evt.coordinate\n    this._dragSegments.length = 0\n    this._modified = false\n    const coordinate = evt.coordinate\n    const vertexFeature = this._vertexFeature\n    \n    if (vertexFeature) {\n      const insertVertices = [this._snapSegments]\n      // if (insertVertices.length) {\n      //   this._willModifyFeatures(evt)\n      // }\n  \n      this._shouldAddToVertexs = true\n      this._insertVertices = insertVertices\n  \n      return !!this._vertexFeature\n    }\n    // Move the selected geometry\n    else {\n      if (!this._hasMoveableGeometrys) {\n        return\n      }\n      \n      const filters = this.features.filter(feature => {\n        const geometry = feature.geometry\n        return this.movableGeometrySet.has(geometry.geometryType) &&\n               geometry.containsXY(coordinate[0], coordinate[1])\n      })\n      \n      // We get the first filter geometry to move\n      // Otherwise, you should reselect\n      if (filters.length > 0) {\n        this._currentMovedGeometry = filters[0]\n        return true\n      }\n      \n      return false\n    }\n  }\n  \n  /**\n   * Handle pointer move event\n   *\n   * 处理点移动事件\n   *\n   * handlePointerMove\n   * @param evt {Event}\n   * @private\n   */\n  _handlePointerMove (evt) {\n    this._lastPixel = evt.pixel\n    this._handlePointerAtPixel(evt.pixel, evt.map)\n  }\n  \n  /**\n   * @param pixel {Array}\n   * @param map {map}\n   * @private\n   */\n  _handlePointerAtPixel (pixel, map) {\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n    \n    const sortByDistance = (s1, s2) => {\n      const d1 = this._pointDistanceToSegment(pixelCoordinate, s1)\n      const d2 = this._pointDistanceToSegment(pixelCoordinate, s2)\n      return d1 - d2\n    }\n  \n    this._snapSegments = null\n    \n    if (this.features.length === 0) {\n      return\n    }\n    \n    // 与当前屏幕内图形做碰撞检测\n    const nodes = this._getInExtent(this.features, pixelCoordinate, this._pixelTolerance)\n    if (nodes.length > 0) {\n      nodes.sort(sortByDistance)\n      const node = nodes[0]\n      const geometry = node.geometry\n      const geometryType = geometry.geometryType\n      const closestSegment = node.segment\n      let vertex = this._closestOnSegment(pixelCoordinate, node)// 计算鼠标点在线段上的投影点\n      const vertexPixel = map.getPixelFromCoordinate(vertex)\n      \n      // 判断当前是否选中了边\n      let dist = distance(pixel, vertexPixel)\n      if (dist <= this._pixelTolerance) {\n        /**\n         *  已经选中了边\n         */\n        this._snapSegments = node\n        \n        let vertexEditable = false\n  \n        if (geometryType === Geometry.CIRCLE &&\n          node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n          this._snappedToVertex = true\n        } else {\n  \n          /**\n           * 再计算是否选中了线段的两个顶点\n           */\n          \n          // 判断是否允许顶点可编辑\n          if (this._vertexEditableCondition(node)) {\n            const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n            const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n            const squaredDist1 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n            const squaredDist2 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n  \n            // 判断当前是否选中了顶点\n            this._snappedToVertex = dist <= this._pixelTolerance\n            if (this._snappedToVertex) {\n              vertex = squaredDist1 > squaredDist2 ?\n                closestSegment[1] : closestSegment[0]\n    \n              const coordinateIndex = geometry.getCoordinateIndex(vertex)\n              if (geometryType === Geometry.POLYGON || geometryType === Geometry.PARALLELOGRAM) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n              } else if (geometryType === Geometry.MULTI_POLYGON) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n                this._snapSegments.polygonIndex = coordinateIndex.polygonIndex\n              } else {\n                this._snapSegments.index = coordinateIndex\n              }\n    \n              this._snapSegments.isVertex = true\n              vertexEditable = true\n            }\n          }\n\n          if (geometryType === Geometry.PARALLELOGRAM) {\n            this._snapSegments.index = node.index\n            this._snapSegments.ringIndex = node.ringIndex\n          }\n        }\n  \n        // 边可编辑，或者顶点可编辑\n        if (this._edgeEditableCondition(node) || vertexEditable) {\n          // draw the snapping point\n          this._createOrUpdateVertexFeature(vertex)\n        } else {\n          this._snapSegments = null\n        }\n        \n        return\n      }\n    }\n    \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  }\n  \n  /**\n   * Handle mouse drag event.\n   *\n   * handleDragEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDragEvent (evt) {\n    this._ignoreNextSingleClick = false\n    const vertex = evt.coordinate\n\n    if (this._shouldAddToVertexs) {\n      const vertexFeature = this._vertexFeature\n      const vertex = vertexFeature.geometry.getCoordinates()\n    \n      const insertVertices = this._insertVertices\n      for (let j = insertVertices.length - 1; j >= 0; --j) {\n        this._insertVertex(insertVertices[j], vertex)\n      }\n    \n      this._shouldAddToVertexs = false\n    }\n    \n    const dragSegments = this._dragSegments\n    const len = dragSegments.length\n  \n    // move the edge of selected geometry\n    if (len !== 0) {\n      this._willModifyFeatures(evt)\n      \n      for (let i = 0; i < len; ++i) {\n        const dragSegment = dragSegments[i]\n        const segmentData = dragSegment[0]\n        const depth = segmentData.depth\n        const geometry = segmentData.geometry\n        let coordinates = null\n        const segment = segmentData.segment\n        const index = dragSegment.index\n        \n        switch (geometry.geometryType) {\n        case Geometry.POINT:\n          coordinates = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.MULTI_POINT:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          // segment[index] = vertex\n          break\n        case Geometry.MULTI_LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[depth[0]][segmentData.index + index] = vertex\n          segment[index] = vertex\n          break\n        case Geometry.POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.ringIndex][coordinates[segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.PARALLELOGRAM:\n          // 重新计算平行四边的各个顶点\n          coordinates = Parallelogram.updateCoordinatesForModification(geometry,\n            vertex, this._oldEditedVertex, dragSegment)\n          this._oldEditedVertex = vertex\n          break\n        case Geometry.EXTENT:\n          coordinates = ExtentUtil.updateExtent(geometry, vertex, dragSegment)\n          break\n        case Geometry.MULTI_POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.polygonIndex][segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.polygonIndex][segmentData.ringIndex][coordinates[segmentData.polygonIndex][segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.CIRCLE:\n          segment[0] = segment[1] = vertex\n          if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n            this._changingFeature = true\n            geometry.setCenter(vertex)\n            this._changingFeature = false\n          } else { // We're dragging the circle's circumference:\n            this._changingFeature = true\n            geometry.setRadius(distance(geometry.getCenter(), vertex))\n            this._changingFeature = false\n          }\n          break\n        default:\n          // pass\n        }\n        \n        if (coordinates) {\n          this._setGeometryCoordinates(geometry, coordinates)\n        }\n      }\n      \n      this._createOrUpdateVertexFeature(vertex)\n    }\n    // move the whole selected geometry\n    else if (this._currentMovedGeometry) {\n      const downPoint = this._downPoint\n      const dx = vertex[0] - downPoint[0]\n      const dy = vertex[1] - downPoint[1]\n      \n      this._currentMovedGeometry.geometry.move(dx, dy, {\n        beyond: {\n          xmin: 0,\n          ymin: 0,\n          xmax: this.map.view.dataExtent[2],\n          ymax: this.map.view.dataExtent[3]\n        }\n      })\n\n      this.dispatchEvent(new ModifyEvent(\n        ModifyEvent.EventType.MODIFY_END, this._currentMovedGeometry.clone(), evt))\n      \n      this.changed()\n      this._downPoint = vertex\n    }\n  }\n  \n  /**\n   * handleUpEvent\n   * @param evt {Event}\n   * @returns {boolean}\n   * @private\n   */\n  _handleUpEvent (evt) {\n    let modifiedFeature = null\n    if(this._dragSegments.length > 0) {\n      modifiedFeature = this._dragSegments[0][0].feature.clone()\n    }\n\n    this._dragSegments.length = 0\n    this._shouldAddToVertexs = false\n    this._insertVertices = []\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  \n    this._oldEditedVertex = null\n    \n    this._downPoint = null\n    this._currentMovedGeometry = null\n    \n    if (this._modified) {\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_END, modifiedFeature, evt))\n      this._modified = false\n    }\n    \n    return false\n  }\n  \n  /**\n   *\n   * segmentData\n   * @param vertex\n   * @private\n   */\n  _insertVertex (segmentData, vertex) {\n    const segment = segmentData.segment\n    const feature = segmentData.feature\n    const geometry = segmentData.geometry\n    const depth = segmentData.depth\n    const isVertex = segmentData.isVertex\n    let index =  segmentData.index\n    let coordinates\n    \n    switch (geometry.geometryType) {\n    case Geometry.MULTI_LINE:\n      coordinates = geometry.getCoordinates()\n      coordinates[depth[0]].splice(index + 1, 0, vertex)\n      break\n    case Geometry.POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.MULTI_POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.polygonIndex][segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.LINE:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates.splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.POINT:\n      coordinates = geometry.getCoordinates()\n      coordinates = vertex\n      break \n    case Geometry.EXTENT:\n      coordinates = geometry.getCoordinates()\n      break\n    case Geometry.PARALLELOGRAM:\n      break\n    default:\n      return\n    }\n    \n    this._setGeometryCoordinates(geometry, coordinates)\n    \n    const newSegmentData = {\n      segment: [segment[0], vertex],\n      feature,\n      geometry,\n      depth,\n      index,\n      ringIndex: segmentData.ringIndex,\n      polygonIndex: segmentData.polygonIndex,\n      isVertex\n    }\n    \n    this._dragSegments.push([newSegmentData, 1])\n    this._ignoreNextSingleClick = true\n  }\n  \n  /**\n   * Calcalute geometrys within the current extent\n   * TODO 将来需要优化计算视图范围内的图形\n   *\n   * getInExtent\n   * @param geometry {Array}\n   * @param pixelCoordinate {Array}\n   * @param tolarance {Number}\n   * @returns {Array}\n   * @private\n   */\n  _getInExtent (features, pixelCoordinate, tolarance) {\n    let result = []\n    const _ExtentUtil = ExtentUtil\n  \n    // loop the passed features\n    features.forEach( feature => {\n      const geometry = feature.geometry\n      \n      // build an extent from the passed geometry with tolarance\n      const gometryExtent = geometry.extent\n      const bufferExtent = _ExtentUtil.buffer([gometryExtent.xmin, gometryExtent.ymin,\n        gometryExtent.xmax, gometryExtent.ymax], tolarance)\n  \n      // Exclude the moved point\n      if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n        \n        // Calculte if the moved point has insected a geometry\n        const geometryType = geometry.geometryType\n        \n        if (geometryType === Geometry.POINT) {\n          const points = geometry.getCoordinates()\n          const dist = distance(points, pixelCoordinate)\n          if (dist <= tolarance) {\n            result.push({\n              feature,\n              geometry: geometry,\n              segment: [points, points],\n              index: 0\n            })\n          }\n        } else if (geometryType === Geometry.POLYGON ||\n                  geometryType === Geometry.PARALLELOGRAM ) { // @todo 这一块需要重构\n          let coords = geometry.getCoordinates()\n          coords.forEach( (coordinates, ringIndex) => {\n            for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n              let points = coordinates[j]\n              let nextPoints = coordinates[j + 1]\n    \n              let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n              let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n    \n              if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                const segment = [points, nextPoints]\n                result.push({\n                  feature,\n                  geometry,\n                  segment,\n                  index: j,\n                  ringIndex\n                })\n              }\n            }\n          })\n        } else if (geometryType === Geometry.MULTI_POLYGON ){\n          let allCoords = geometry.getCoordinates()\n          allCoords.forEach( (coords, polygonIndex) => {\n            coords.forEach( (coordinates, ringIndex) => {\n              for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n                let points = coordinates[j]\n                let nextPoints = coordinates[j + 1]\n      \n                let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n                let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n                if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                  const segment = [points, nextPoints]\n                  result.push({\n                    feature,\n                    geometry,\n                    segment,\n                    polygonIndex,\n                    index: j,\n                    ringIndex\n                  })\n                }\n              }\n            })\n          })\n        } else if ( geometryType === Geometry.EXTENT ||\n                    geometryType === Geometry.LINE) {\n          let coordinates = geometry.getCoordinates()\n          \n          for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n            let points = coordinates[j]\n            let nextPoints = coordinates[j + 1]\n      \n            let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n            let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n            if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n              const segment = [points, nextPoints]\n              result.push({\n                feature,\n                geometry,\n                segment,\n                index: j\n              })\n            }\n          }\n        }\n      }\n    })\n    \n    return result\n  }\n  \n  /**\n   * 设置Ceometry的坐标数据\n   *\n   * @method setGeometryCoordinates\n   * @param geometry {Object}\n   * @param coordinates {Array}\n   * @private\n   */\n  _setGeometryCoordinates (geometry, coordinates) {\n    if (coordinates) {\n      this._changingFeature = true\n      geometry.setCoordinates(coordinates)\n      this._changingFeature = false\n    }\n  }\n  \n  /**\n   * @method pointDistanceToSegment\n   *\n   * coordinates {Array}\n   * @param segmentData\n   * @returns {number}\n   * @private\n   */\n  _pointDistanceToSegment (coordinates, segmentData) {\n    const geometry = segmentData.geometry\n    \n    if (geometry.geometryType === Geometry.CIRCLE) {\n      const circleGeometry = geometry\n      \n      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n        const distanceToCenterSquared =\n          squaredDistance(circleGeometry.getCenter(), coordinates)\n        const distanceToCircumference =\n          Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius()\n        return distanceToCircumference * distanceToCircumference\n      }\n    }\n    \n    \n    return squaredDistanceToSegment(coordinates, segmentData.segment)\n  }\n  \n  /**\n   * closestOnSegment\n   * @param coordinate\n   * @param segmentData\n   * @returns {*}\n   * @private\n   */\n  _closestOnSegment (coordinate, segmentData) {\n    return closestOnSegment(coordinate, segmentData.segment)\n  }\n  \n  /**\n   * Create or update the vertex feature while snapping a point\n   * on the edge of geometry\n   *\n   * createOrUpdateVertexFeature\n   * @param point {Array}\n   * @private\n   */\n  _createOrUpdateVertexFeature (point) {\n    let vertexFeature = this._vertexFeature\n    if (!vertexFeature) {\n      vertexFeature = new Feature(new Point(point[0], point[1]))\n      this._vertexFeature = vertexFeature\n      this._overLayer.addFeature(vertexFeature)\n    } else {\n      const geom = vertexFeature.geometry\n      geom.update(point[0], point[1])\n      this._overLayer.changed()\n    }\n  }\n  \n  /**\n   * 获取默认的图形编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const style = Style.createDefaultEditing()\n    return function () {\n      return style[Geometry.POINT]\n    }\n  }\n  \n  /**\n   *\n   * mapBrowserEvent\n   * @returns {*}\n   * @private\n   */\n  _defaultDeleteCondition (mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) &&\n           singleClick(mapBrowserEvent)\n  }\n  \n  /**\n   * active读写器，读取设置当前的active状态\n   *\n   * @property active\n   * @type {Function}\n   * @returns {*}\n   */\n  get active () { return this._active }\n  set active (isActive) {\n    if (this._vertexFeature && !isActive) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._active = isActive\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} mk.map\n   */\n  get map () {return this._map}\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n  \n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n      \n      map.addLayer(this._overLayer)\n    }\n  }\n}\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0\n\n\n// WEBPACK FOOTER //\n// ./src/components/modify.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport {Style} from '../style/style'\nimport SelectEvent from '../components/selectevent'\n\nlet hasMutilSelectedSymbol = Symbol('hasmutilselected')\n\n/**\n * 图形选择模式\n *\n * @class Select\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化选择工具\n *      selectTool = new mk.Select({\n *       selectMode: mk.BrowserEvent.CLICK,\n *       selectMultiMode: selectMultiMode\n *      });\n *\n *\n */\nexport default class Select extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n\n  constructor (options = {}) {\n    super()\n\n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n     *\n     * @property hitTolerance\n     * @type {number}\n     * @private\n     */\n    this._hitTolerance = options.hitTolerance ? options.hitTolerance : 6\n\n    /**\n     * 选择图层是否配置了样式\n     *\n     * @type {boolean}\n     * @private\n       */\n    this._hasSelectedStyle = false\n\n    /**\n     * 多选模式，默认为false\n     *\n     * @property multiSelectMode\n     * @type {boolean}\n     * @private\n     */\n    this._multiSelectMode = false\n    \n    /**\n     * 初始化草稿图层，用于临时高亮显示选中的图形\n     *\n     * @property selectLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._selectLayer = new FeatureLayer()\n\n    if (options.style) {\n      this._selectLayer.style = options.style\n      this._hasSelectedStyle = true\n    } else {\n      this._hasSelectedStyle = false\n    }\n    /**\n     * 选中图形的feature集合\n     *\n     * @property selectFeatures\n     * @type {Array}\n     * @private\n     */\n    this._selectFeatures = []\n\n    /**\n     * 选中的模式，默认为单击选中\n     *\n     * @property selectMode\n     * @type {string}\n     */\n    this.selectMode = options.selectMode ? options.selectMode : BrowserEvent.CLICK\n\n    this._selectMultiMode = options.selectMultiMode ?\n      options.selectMultiMode : function () { return true }\n\n    /**\n     * listen Ctrl key envet\n     */\n    if (options.selectMultiMode) {\n      listen(document, 'keydown', this._handleCtrlKeyDwon, this)\n    }\n    if (options.selectMultiMode) {\n      listen(document, 'keyup', this._handleCtrlKeyUp, this)\n    }\n\n  }\n\n  _condition (event) {\n    return this.selectMode === event.type\n  }\n\n  _keyPress () {}\n\n  /**\n   * handle Ctrl key down event\n   *\n   * 处理Ctrt键按下事件\n   *\n   * handleCtrlKeyDwon\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyDwon (event) {\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = true\n    }\n  }\n\n  /**\n   * handle Ctrl key up event\n   *\n   * 处理Ctrl键弹起事件\n   *\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyUp (event) {\n    // Ctrl button down\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = false\n    }\n  }\n\n  /**\n   * Handler mouse event\n   *\n   * 处理鼠标事件\n   * handleMouseEvent\n   * @method\n   * @param browserEvent {browserEvent}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!this._condition(browserEvent)) {\n      return true\n    }\n\n    const map = browserEvent.map\n    const pixel = browserEvent.pixel\n    const hitTolerance = this._hitTolerance\n\n    if (!this._multiSelectMode) {\n      this.clear()\n    }\n\n    map.forEachFeatureAtPiexl(pixel, (features) => {\n      if(features.length > 0){\n        // 赋值并填充到selectFeatures中\n        this.selectFeatures = features\n      }\n    }, hitTolerance)\n\n    if (this.selectFeatures.length > 0 ) {\n      this._forEachStyle()\n      // this._watchFeatures()\n      this._selectLayer.addFeatures(this.selectFeatures)\n    }\n\n    // 派发要素的选择事件\n    this.dispatchEvent(\n      new SelectEvent(SelectEvent.EventType.SELECT, this.selectFeatures,browserEvent))\n  }\n  \n  /**\n   * 清空选择的集合\n   *\n   * @method clear\n   */\n  clear () {\n    this._selectLayer.clear()\n    \n    this.selectFeatures.forEach(feature => {\n      feature.styleHighLight = false\n      feature.delete(hasMutilSelectedSymbol)\n    })\n\n    this.selectFeatures = []\n  }\n  \n  /**\n   * 当前选中feature的集合的读写器\n   *\n   * @property selectFeatures\n   * @type {Array}\n   */\n  get selectFeatures () { return this._selectFeatures }\n  set selectFeatures (features) {\n    if (features.length === 0 ) {\n      this._selectFeatures = []\n    } else {\n      features.forEach( feature => {\n        // 去掉重复的\n        if (!this._isInSelectFeatures(feature)) {\n          this._selectFeatures.push(feature)\n        }\n      })\n    }\n  }\n  \n  /**\n   * 判断当前选中的集合中是否包含指定的feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   * @private\n   */\n  _isInSelectFeatures (feature) {\n    const features = this.selectFeatures\n    const result = features.find( f => f.id === feature.id)\n    \n    return result === undefined ? false : true\n  }\n\n  /**\n   * Update the drawing state for aborting drawing if active is false\n   *\n   * updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      // this._abortDrawing()\n    }\n    \n    map.addLayer(this._selectLayer)\n  }\n\n  _watchFeatures() {\n    // const features = this.selectFeatures\n  }\n  \n  /**\n   * 高亮显示选中图形\n   *\n   * @method forEachStyle\n   * @private\n   */\n  _forEachStyle () {\n    if (this._hasSelectedStyle) {\n      return\n    }\n\n    const features = this.selectFeatures\n    features.forEach ( feature => {\n      if (!feature.get(hasMutilSelectedSymbol)) {\n        feature.styleHighLight = true\n        feature.set(hasMutilSelectedSymbol, true)\n      }\n    })\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} mk.map\n   */\n  get map (){ return this._map }\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n    }\n\n    this._updateState()\n  }\n\n  /**\n   * 选择方式读写器\n   *\n   * @property selectMode\n   * @type {Object} mk.BrowserEvent.CLICK\n   * @return {*}\n   */\n  get selectMode () { return this._selectMode }\n  set selectMode (value) {\n    if (this._selectMode !== value) {\n      this._selectMode = value\n      this.clear()\n    }\n  }\n\n  /**\n   * 获取默认编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return feature => styles[feature.geometry.geometryType]\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/select.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Zoom from './zoom'\nimport Home from './home'\nimport zoomPercentage from './zoompercentage'\n\nexport function controlDefaults (options = {}) {\n  \n  const controls = []\n  \n  const zoomControl = options.zoom !== undefined ? options.zoom : true\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions))\n  }\n  \n  const homeControl = options.home !== undefined ? options.home : true\n  if (homeControl) {\n    controls.push(new Home(options.homeOptions))\n  }\n  \n  const zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true\n  if (zoomPercentageControl) {\n    controls.push(new zoomPercentage(options.zoomPercentageOptions))\n  }\n  \n  return controls\n}\n\nexport default {\n  controlDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/controldefaults.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\n/**\n *\n */\nexport default class Home extends Control {\n  constructor (options = {}) {\n    const className = options.className ? options.className : 'dt-zoom-extent'\n    const homeLabel = options.homeLabel ? options.homeLabel : 'H'\n    const homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图'\n  \n    const homeElement = document.createElement('button')\n    homeElement.setAttribute('type', 'button')\n    homeElement.title = homeLabelTip\n    homeElement.appendChild(\n      typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(homeElement)\n  \n    super({\n      element,\n      target: options.target\n    })\n  \n    listen(homeElement, BrowserEvent.CLICK, this._handleClick, this)\n  }\n  \n  /**\n   * 处理按钮点击事件\n   * @param event\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._goToHome()\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/home.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\n\nimport Control from './control'\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey, listen} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nexport default class ZoomPercentage extends Control {\n  constructor (options = {}) {\n    super()\n    \n    this._map = undefined\n    \n    const className = options.className ? options.className : 'dt-scale-line'\n    \n    this._innerElement = document.createElement('DIV')\n    this._innerElement.className = `${className}-inner`\n    \n    this._element = document.createElement('DIV')\n    this._element.className = `${className} dt-unselectable`\n    this._element.appendChild(this._innerElement)\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      this._listenerKeys.push(listen(value, EventType.VIEW_CHANGED, this.render, this))\n      \n      this.render()\n    }\n  }\n  \n  render () {\n    const view = this.map.view\n    const resolution =  (1 / view.resolution).toFixed(2)\n    const html = `&#8195;缩放比${resolution * 100}% &#8195;`\n    this._innerElement.innerHTML = html\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoompercentage.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * The base class to represent a generic layer image,it has some basic properties.\n * such as extent,resolution,state<br/>\n *\n * 基础图片图层类，定义了一些用于加载图片的必要信息\n *\n * @class BaseImage\n * @extends BaseObject\n * @module core\n * @constructor\n */\nexport default class BaseImage extends BaseObject {\n  \n  /**\n   * Create a BaseImage\n   * @param extent the extent of layer\n   * @param resolution the resolution of layer\n   * @param pixelRatio the pixel ratio\n   * @param state the image loading status\n   * @param attributions\n   */\n  constructor (extent, resolution, pixelRatio,\n               state, attributions) {\n  \n    super()\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._attributions = attributions\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._extent = extent\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._pixelRatio = pixelRatio\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._resolution = resolution\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._state = state\n  }\n  \n  /**\n   * return the attributions of layer <br/>\n   * 返回图层的属性\n   * @property attributions\n   * @type Object\n   */\n  get attributions () {\n    return this._attributions\n  }\n  \n  /**\n   * return the extent of layer<br/>\n   * 返回图层的视图范围\n   * @property extent\n   * @type Object\n   */\n  get extent () {\n    return this._extent\n  }\n  \n  /**\n   * return the DOM image<br/>\n   * 返回DOM对象\n   * @param optContext options\n   * @method getDomImage\n   * @abstract\n   */\n  getDomImage (optContext) { return optContext }\n  \n  /**\n   * return the pixel ratio<br/>\n   * 返回像素因数\n   * @property pixelRatio\n   * @type Number\n   */\n  get pixelRatio () {\n    return this._pixelRatio\n  }\n  \n  /**\n   * return the resolution of layer<br/>\n   * 返回图层的分辨率\n   * @property resolution\n   * @type Number\n   */\n  get resolution () {\n    return this._resolution\n  }\n  set resolution (value) {\n    if (this._resolution !== value) {\n      this._resolution = value\n    }\n  }\n  \n  /**\n   * return the state of layer loading <br/>\n   * 获取图片下载状态\n   * @property state\n   * @type Number\n   */\n  get state () { return this._state }\n  set state (value) {\n    if (this.state !== value){\n      this._state = value\n    }\n  }\n  \n  /**\n   * Load not yet loaded URI. <br/>\n   * 抽象方法，下载图片\n   * @abstract\n   * @method load\n   */\n  load () {}\n  \n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseimage.js","/**\n * Created by zhangyong on 2017/7/12.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Point from '../../geometry/point'\nimport Polygon from '../../geometry/polygon'\nimport MutilPolygon from '../../geometry/mutilpolygon'\nimport Line from '../../geometry/line'\nimport Extent from '../../geometry/extent'\nimport Parallelogram from '../../geometry/parallelogram'\nimport Feature from '../../meek/feature'\nimport Obj from '../../utils/obj'\n\n/**\n *\n */\nexport default class GeoJSON {\n  \n  /**\n   * 解析 GeoJSON 并返回 Feature 的集合\n   *\n   * @static\n   * @method read\n   * @param json geojson格式的数据\n   * @returns {Array} 返回 features 的集合\n   */\n  static read (json) {\n    const features = []\n\n    if(!json) {\n      return\n    }\n    const featuresObj = json.features\n    featuresObj.forEach( featureObj => {\n      if (featureObj.type === 'Feature') {\n        if (featureObj.geometry) {\n          let constructor = undefined\n          const geometryObj = featureObj.geometry\n          const geometryType = geometryObj.type\n          if (geometryType === 'Point') {\n            constructor = Point\n          } else if (geometryType === 'LineString') {\n            constructor = Line\n          } else if (geometryType === 'Polygon') {\n            constructor = Polygon\n          } else if (geometryType === 'ExtentPolygon') {\n            constructor = Extent\n          } else if (geometryType === 'MutilPolygon') {\n            constructor = MutilPolygon\n          } else if (geometryType === 'ParallelogramPolygon') {\n            constructor = Parallelogram\n          }\n          \n          if (constructor === undefined) {\n            throw new Error('包含未定义的 Geometry 类型')\n          } else {\n            const coordinates = geometryObj.coordinates\n            const geometry = new constructor()\n            geometry.setCoordinates(coordinates)\n  \n            let propertiesObj\n            if (featureObj.properties) {\n              propertiesObj = featureObj.properties\n            }\n  \n            let title = featureObj.title\n            const feature = new Feature(geometry, propertiesObj, title)\n            features.push(feature)\n          }\n        }\n      }\n    })\n    \n    return features\n  }\n  \n  /**\n   *\n   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n   *\n   * @static\n   * @method write\n   * @param features Feature 集合\n   * @returns {Object} 返回 GeoJSON 格式的数据\n   */\n  static write (features) {\n    const featuresArr = []\n    \n    features.forEach( feature => {\n      const properties = Obj.mapToObject(feature._attributesMap)\n      Reflect.deleteProperty(properties, '_originStyle')\n      Reflect.deleteProperty(properties, 'Symbol(hasmutilselected)')\n\n      featuresArr.push({\n        type: 'Feature',\n        geometry: {\n          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n          coordinates: feature.geometry.getCoordinates()\n        },\n        properties,\n        title: feature.displayText\n      })\n    })\n    \n    return {\n      type: 'FeatureCollection',\n      features: featuresArr\n    }\n  }\n  \n  /**\n   * 获取Geometry的类型\n   *\n   * @static\n   * @method getGeoJSONGeometryType\n   * @param geometry\n   * @returns {*}\n   */\n  static getGeoJSONGeometryType (geometry) {\n    const type = geometry.geometryType\n    let jsonType\n    switch (type) {\n    case Geometry.POINT :\n      jsonType = 'Point'\n      break\n    case Geometry.LINE :\n      jsonType = 'LineString'\n      break\n    case Geometry.POLYGON :\n      jsonType = 'Polygon'\n      break\n    case Geometry.MULTI_POLYGON :\n      jsonType = 'MutilPolygon'\n      break\n    case Geometry.EXTENT :\n      jsonType = 'ExtentPolygon'\n      break\n    case Geometry.PARALLELOGRAM :\n      jsonType = 'ParallelogramPolygon'\n    }\n    \n    return jsonType\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/json/geojson.js","/**\n * Created by zhangyong on 2017/7/13.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport {ExtentUtil} from '../support/extentutil'\n\n/**\n * 判断任意图形是否相交\n * @TODO 算法返回的结果修改为：找到碰撞的图形或部分，而不是返回布尔值，\n * 这样可以避免二次寻找\n *\n * @method intersects\n * @param geometry1\n * @param geometry2\n * @returns {Boolean}\n */\nexport default function intersects (geometry1, geometry2) {\n  if ( (geometry1 === null || geometry1 === undefined ) ||\n       (geometry2 === null || geometry2 === undefined )) {\n    return false\n  }\n  \n  const extent1 = geometry1.extent\n  const extent2 = geometry2.extent\n  const ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax]\n  const ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax]\n  \n  // 如果两个图形的外界矩形不相交，则跳出判断\n  if (!ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n    return false\n  }\n  \n  const geometryType = geometry1.geometryType\n  \n  let result = false\n  switch (geometryType) {\n  case Geometry.POINT :\n    result = pointIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.LINE :\n    result = lineIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    if (geometry2.geometryType === Geometry.MULTI_POLYGON) {\n      result = mutilPolygonIntersectsGeometry(geometry2, geometry1)\n    } else {\n      result = polygonIntersectsGeometry(geometry1, geometry2)\n    }\n    break\n  case Geometry.MULTI_POLYGON:\n    result = mutilPolygonIntersectsGeometry(geometry1, geometry2)\n    break\n  }\n\n  \n  return result\n}\n\n/**\n * 点和图形相交判断\n * @param point\n * @param geometry\n * @returns {*}\n */\nconst pointIntersectsGeometry = function(point, geometry) {\n  const geometryType = geometry.geometryType\n  \n  switch (geometryType) {\n  case Geometry.POINT:\n  case Geometry.LINE:\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n  case Geometry.EXTENT:\n    return geometry.containsXY(point.x, point.y)\n  }\n  \n  return false\n}\n\n/**\n * 线和图形相交判断\n * @param line\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst lineIntersectsGeometry = function (line, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return line.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsLine(line, geometry)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return lineIntersectsPolygon(line, geometry)\n  }\n}\n\n/**\n * 线与线相交判断\n * @param line1\n * @param line2\n */\nconst lineIntersectsLine = function(line1, line2) {\n  const lineLinearRings1 = line1.getCoordinates()\n  const lineLinearRings2 = line2.getCoordinates()\n  \n  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2)\n}\n\n/**\n * 多边形和图形相交判断\n * @param poly\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst polygonIntersectsGeometry = function (poly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return poly.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsPolygon(geometry, poly)\n  case Geometry.POLYGON:\n  case Geometry.MUTIL_POLYGON:\n  case Geometry.EXTENT:\n    return polygonIntersectsPolygon(poly, geometry)\n  }\n}\n\nconst mutilPolygonIntersectsGeometry = function(mutilPoly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n    case Geometry.POINT:\n      return mutilPoly.containsXY(geometry.x, geometry.y)\n    // case Geometry.LINE:\n      // return lineIntersectsPolygon(geometry, poly);\n    case Geometry.POLYGON:\n    case Geometry.MULTI_POLYGON:\n    case Geometry.EXTENT:\n      return mutilPolygonIntersectsPolygon(mutilPoly, geometry)\n  }\n}\n\n/**\n * 线和多边形相交判断\n * @param line\n * @param polygon\n */\nconst lineIntersectsPolygon = function (line, polygon) {\n  const lineLinearRings = line.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()\n  \n  if (polygon.geometryType === Geometry.POLYGON ||\n      polygon.geometry === Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0] // 只获得外环\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  if (!intersect) {\n    // check if this poly contains points of the ring/linestring\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\n/**\n * 多边形和多边形相交判断\n * @param poly\n * @param polygon\n */\nconst polygonIntersectsPolygon = function (poly, polygon) {\n  let lineLinearRings = poly.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()// 只获得外环\n  \n  if (poly.geometryType === Geometry.POLYGON) {\n    lineLinearRings = lineLinearRings[0]\n  }\n  \n  if (polygon.geometryType === Geometry.POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0]\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  // 两个多边形要做相互内含关系的判断\n  \n  // 正向检查\n  if (!intersect) {\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  // 反向检查\n  if (!intersect) {\n    for (let i = 0, len = polygon2LinearRings.length; i < len; ++i) {\n      const point = polygon2LinearRings[i]\n      intersect = poly.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst mutilPolygonIntersectsPolygon = function(mutilPoly, polygon) {\n  const intersectsByLinearRingsFn = intersectsByLinearRings\n  let lineLinearRings = mutilPoly.getCoordinates()\n  let polygon2LinearRings = []\n\n  const polygonGeometryType = polygon.geometryType\n  if (polygonGeometryType == Geometry.EXTENT) {\n    polygon2LinearRings = [polygon.getCoordinates()]\n  } else if (polygonGeometryType == Geometry.POLYGON) {\n    polygon2LinearRings = [polygon.getCoordinates()[0]] // 取外环\n  } else if (polygonGeometryType == Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon.getCoordinates()\n  }\n\n  let result = lineLinearRings.find( ring => {\n    const oneRingIntersects = polygon2LinearRings.find( \n      linarRing => intersectsByLinearRingsFn(ring[0], linarRing))\n\n    return oneRingIntersects !== undefined ? true : false\n  })\n\n  return result !== undefined ? true : false\n}\n\nconst intersectsByLinearRings = function (LinearRing1, LinearRings2) {\n  let intersect = false\n  const segs1 = getSortedSegments(LinearRing1)\n  const segs2 = getSortedSegments(LinearRings2)\n  \n  let seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n    seg2, seg2y1, seg2y2\n  \n  // sweep right\n  for(let i = 0, len = segs1.length; i < len; ++i) {\n    seg1 = segs1[i]\n    seg1x1 = seg1.x1\n    seg1x2 = seg1.x2\n    seg1y1 = seg1.y1\n    seg1y2 = seg1.y2\n    \n    for(let j = 0, jlen = segs2.length; j < jlen; ++j) {\n      seg2 = segs2[j]\n      if(seg2.x1 > seg1x2) {\n        // seg1 still left of seg2\n        break\n      }\n      \n      if(seg2.x2 < seg1x1) {\n        // seg2 still left of seg1\n        continue\n      }\n      \n      seg2y1 = seg2.y1\n      seg2y2 = seg2.y2\n      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n        // seg2 above seg1\n        continue\n      }\n      \n      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n        // seg2 below seg1\n        continue\n      }\n      \n      if (segmentsIntersect(seg1, seg2)) {\n        intersect = true\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst getSortedSegments = function (points) {\n  const numSeg = points.length - 1\n  let segments = new Array(numSeg), point1, point2\n  \n  for (let i = 0; i < numSeg; ++i) {\n    point1 = points[i]\n    point2 = points[i + 1]\n    \n    if (point1[0] < point2[0]) {\n      segments[i] = {\n        x1: point1[0],\n        y1: point1[1],\n        x2: point2[0],\n        y2: point2[1]\n      }\n    } else {\n      segments[i] = {\n        x1: point2[0],\n        y1: point2[1],\n        x2: point1[0],\n        y2: point1[1]\n      }\n    }\n  }\n  \n  // more efficient to define this somewhere static\n  function byX1(seg1, seg2) {\n    return seg1.x1 - seg2.x1\n  }\n  \n  return segments.sort(byX1)\n}\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n        \n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x,\n    y,\n    along\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/intersects.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport MultiPolygon from '../../geometry/mutilpolygon'\nimport {linearRingIsClockwise} from '../support/orient'\nimport contains from './contains'\n\n/**\n *\n * @param polygon\n * @param holePolygon\n * @returns {*}\n */\nexport default function polygonWithHoles (polygon1, polygon2) {\n  \n  const polygon = polygon1.clone()\n  const holePolygon = polygon2.clone()\n  \n  let resultPolygon = polygon\n  const holeCoordinates = holePolygon.getCoordinates()\n  const polygonCoordinates = polygon.getCoordinates()\n  \n  const type = polygon.geometryType\n  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n  if (type === Geometry.POLYGON ) {\n    // 必须要被包含在多边形内\n    if (contains(polygon, holePolygon)) {\n      const holeOutRings = holeCoordinates[0]\n      const polygonOutRings = polygonCoordinates[0]\n      \n      let tempHoleOutRings = []\n      let tempPolygonOutRings = []\n  \n      holeOutRings.forEach( ring => {\n        tempHoleOutRings.push(ring[0], ring[1])\n      })\n  \n      polygonOutRings.forEach( ring => {\n        tempPolygonOutRings.push(ring[0], ring[1])\n      })\n      \n      const holeOriented = linearRingIsClockwise(tempHoleOutRings, 0, tempHoleOutRings.length, 2)\n      const polygonOutRingOriented = linearRingIsClockwise(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2)\n      \n      // 带洞多边形\n      if (polygonCoordinates.length > 1) {\n        // 如果有带洞多边形，需要处理的更多\n        // 这里只是简单的存储进去\n  \n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n        \n      } else {\n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n      }\n    }\n  } else if (type === Geometry.MULTI_POLYGON) {\n    const polygons = polygon.convertToPolygons()\n\n    const polygonsWithHole = []\n\n    polygons.forEach(poly => {\n      const polyWithHole = polygonWithHoles(poly, holePolygon)\n      polygonsWithHole.push(polyWithHole)\n    })\n\n    const coordinates = []\n    polygonsWithHole.forEach(poly => {\n      coordinates.push(poly.getCoordinates())\n    })\n\n    const multiPolygon = new MultiPolygon()\n    multiPolygon.setCoordinates(coordinates)\n\n    resultPolygon = multiPolygon\n  }\n  \n  return resultPolygon\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/polygonwithhole.js","/**\n * Created by zhangyong on 2017/7/17.\n */\n\nimport contains from './contains'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport Polygon from '../../geometry/polygon'\n\n\nlet isDividedPointSymbol = Symbol('isDividedPoint')\nlet alreadyUsedSymbol = Symbol('alreadyUsed')\nlet dividePointSymbol = Symbol('dividePoint')\n\n/**\n * 使用直线来切割多边形,\n * 暂时只支持不带洞的多边形的分割\n *\n * @method splitPolygonByLine\n * @param polygon {Geometry} 被切割多边形\n * @param line {Geometry} 切割直线\n * @returns {Array}\n */\nexport default function splitPolygonByPolyline(targetPolygon, splitLine) {\n  \n  // 不再原对象上处理\n  const polygon = targetPolygon.clone()\n  const line = splitLine.clone()\n  \n  const polygonCoordinates = polygon.getCoordinates()[0]\n  const lineCoordinates = line.getCoordinates()\n  \n  // 找到直线和面的相交点\n  let dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates)\n  \n  // 0交点或者交点为奇数，则认为非法输入\n  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n    return []\n  }\n  \n  // 参入到原来分割线中\n  const afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates)\n  \n  const allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords)\n  \n  // 按照顺序插入分割点到分割多边形顶多序列中\n  const vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates)\n  \n  // 重塑多边形\n  const results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords)\n  \n  const featureCollection = []\n  results.forEach( r=> {\n    const coords = []\n    r.forEach(arrs => {\n      coords.push([arrs[0], arrs[1]])\n    })\n    const polygon = new Polygon()\n    polygon.setCoordinates([coords])\n    featureCollection.push(polygon)\n  })\n  \n  // 处理带洞多边形\n  handleHolesForPolygon(polygon, featureCollection, line)\n  \n  return featureCollection\n}\n\n\nconst renewal = function(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n  \n  let i = 0\n  let len = vertexListAfterDivide.length\n  \n  const isInArray = (point, singlePolygonCoords) =>\n    singlePolygonCoords.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  \n  \n  // 找到分割点在同一分割边上的其他点\n  const findPartners = function(point) {\n    for (let j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n      const parts = allPartsScliedFromLineCoords[j]\n      const fp = parts[0]\n      const ep = parts[parts.length - 1]\n      \n      // 如果是首点\n      if (fp[0] === point[0] && fp[1] === point[1]) {\n        return parts\n      }\n      \n      if (ep[0] === point[0] && ep[1] === point[1]) {\n        const newParts = [].concat(parts)\n        return newParts.reverse()\n      }\n    }\n  }\n  \n  // 寻找点在多边形序列的下一点\n  const findNextPoint = function(point) {\n    for (let m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n      const item = vertexListAfterDivide[m]\n      if (item[0] === point[0] && item[1] === point[1]) {\n        if (m === vertexListAfterDivide.length - 1) {\n          return item\n        } else {\n          return vertexListAfterDivide[m + 1]\n        }\n      }\n    }\n  }\n  \n  let singlePolygonCoords = []\n  let allPolygonCoords = []\n  \n  // 递归分割\n  const goThrough = function(ePoint, singlePolygonCoords ) {\n    if (singlePolygonCoords.length > 1) {\n      const firstPoint = singlePolygonCoords[0]\n      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n        singlePolygonCoords.push(ePoint)\n        return true\n      }\n    }\n    \n    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n      const parts = findPartners(ePoint)\n      parts.forEach(p => {\n        singlePolygonCoords.push(p)\n      })\n  \n      // 判断此时是否已经完成绘制\n      const ffpoint = singlePolygonCoords[0]\n      const eepoint = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n        return true\n      }\n    \n      const endPoint = parts[parts.length - 1]\n      const nextPoint = findNextPoint(endPoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    } else if(ePoint.length === 2) {\n      singlePolygonCoords.push(ePoint)\n      \n      const nextPoint = findNextPoint(ePoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    }\n  }\n  \n  // 更新多边形顶点的状态\n  const updataStatus = function(singlePolygonCoords, vertexListAfterDivide) {\n    vertexListAfterDivide.forEach(vertex => {\n      if (isInArray(vertex, singlePolygonCoords)) {\n        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n        if (vertex.length === 2) {\n          vertex.push(alreadyUsedSymbol)\n        }\n        // 如果是分割点，则只能使用2次\n        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n          vertex.push('1')\n        }\n        //\n        else if(vertex.length === 4 ) {\n          if (vertex[3] === '1') {\n            vertex[3] = '2'\n          }\n        }\n      }\n    })\n  }\n  \n  // 检测这两个点是否是切割边\n  const isInOneSegment = function(onePoint, otherPoint) {\n    const allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords\n    let findCount = 0\n    \n    for (let i = 0, len = allPartsScliedFromLineCoordsTemp.length; i < len; i++) {\n      const group = allPartsScliedFromLineCoordsTemp[i]\n      findCount = 0\n      \n      for (let j = 0, jjlen = group.length; j < jjlen; j++) {\n        const item = group[j]\n        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n          findCount ++\n        }\n        \n        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n          findCount ++\n        }\n        \n        if (findCount === 2) {\n          return true\n        }\n      }\n    }\n  \n    return false\n  }\n\n  for (; i < len - 1; i++) {\n    const fPoint = vertexListAfterDivide[i]\n    // 如果是普通点\n    if (fPoint.length === 2) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n    // 如果是分割点\n    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    } else if (fPoint.length === 4 && fPoint[3] === '1') {\n      let ePoint = vertexListAfterDivide[i + 1]\n      \n      // 分割点，必须是构成同一边，不能是异边\n      if(ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol && isInOneSegment(fPoint, ePoint)) {\n        ePoint = fPoint\n      }\n      // 异边，则重新启动分割流程\n      else {\n        if (!isInArray(fPoint, singlePolygonCoords)) {\n          singlePolygonCoords.push(fPoint)\n        }\n      }\n  \n      goThrough(ePoint, singlePolygonCoords)\n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      const fp = singlePolygonCoords[0]\n      const tp = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n        singlePolygonCoords.push(fp)\n      }\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n  }\n  \n  return allPolygonCoords\n}\n\nconst sliceDividedPointFromLine = function(dividedPointList, afterInsertLineCoords) {\n  let allParts = []\n  let singleParts = []\n  let isDividePointStart = false\n  \n  for (let i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n    const item = afterInsertLineCoords[i]\n    \n    if (isDividePointStart === false && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = true\n      \n      continue\n    }\n    \n    if (isDividePointStart) {\n      if (item.length === 2) {\n        singleParts.push(item)\n        \n        continue\n      }\n    }\n    \n    if (isDividePointStart && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = false\n      \n      allParts.push(singleParts)\n      singleParts = []\n    }\n  }\n  \n  return allParts\n}\n\nconst insertDiveidePointsToSplitLineCoords = function(dividedPointList, lineCoordinates) {\n  \n  const getDividePoints = function (fP, eP) {\n    return dividedPointList.filter(dp => {\n      const dfPoint = dp.intersectFrom.fromPoint\n      const dePoint = dp.intersectFrom.endPoint\n      \n      return dfPoint[0] === fP[0] &&\n             dfPoint[1] === fP[1] &&\n             dePoint[0] === eP[0] &&\n             dePoint[1] === eP[1]\n    })\n  }\n  \n  const isInArray = function(point) {\n    return afterArr.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  }\n  \n  let len = lineCoordinates.length\n  let i = 0\n  const afterArr = []\n  for (;i < len - 1; i ++) {\n    const fPoint = lineCoordinates[i]\n    const ePoint = lineCoordinates[i + 1]\n  \n    if (!isInArray(fPoint)) {\n      afterArr.push(fPoint)\n    }\n    \n    const dividePoints = getDividePoints(fPoint, ePoint)\n    if (dividePoints.length !== 0) {\n      // 插入分割点\n      if (dividePoints.length === 1) {\n        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol])\n      } else {\n        // 多个分割点需要排序\n        \n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n        \n        dividePoints.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n  \n        dividePoints.forEach(item => {\n          afterArr.push([item.point.x, item.point.y, dividePointSymbol])\n        })\n      }\n    }\n  \n    if (!isInArray(ePoint)) {\n      afterArr.push(ePoint)\n    }\n  }\n  \n  return afterArr\n}\n\n\nconst distance = function(p1, p2) {\n  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n}\n\nconst insertDividePointsToCoordinates = function(dividedPointList, polygonCoordinates) {\n  const afterInserted = []\n  \n  const isInDividedPointList = function(firstPoint, endPoint) {\n    return dividedPointList.filter(item => {\n      const orialPoint = item.originPoint\n      const ofPoint = orialPoint.fromPoint\n      const oePoint = orialPoint.toPoint\n      \n      return firstPoint[0] === ofPoint[0] &&\n        firstPoint[1] === ofPoint[1] &&\n        endPoint[0] === oePoint[0] &&\n        endPoint[1] === oePoint[1]\n    })\n  }\n  \n  const len = polygonCoordinates.length\n  let i = 0\n  \n  for (; i < len - 1; i++) {\n    const fPoint = polygonCoordinates[i]\n    const ePoint = polygonCoordinates[i + 1]\n    \n    afterInserted.push(fPoint)\n    const itemDividedPoint = isInDividedPointList(fPoint, ePoint)\n    \n    if (itemDividedPoint.length > 0) {\n      if (itemDividedPoint.length > 1) {\n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n    \n        itemDividedPoint.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n      }\n  \n      itemDividedPoint.forEach(item => {\n        const point = item.point\n        afterInserted.push([point.x, point.y, isDividedPointSymbol])\n      })\n    }\n  }\n  \n  afterInserted.push(afterInserted[0])\n  return afterInserted\n}\n\nconst findOneIntersectionPoints = function(polygonCoordinates, lineCoordinates) {\n  const _ExtentUtil = ExtentUtil\n  const lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1])\n  const lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4)\n  \n  const seg2 = {\n    x1: lineCoordinates[0][0],\n    y1: lineCoordinates[0][1],\n    x2: lineCoordinates[1][0],\n    y2: lineCoordinates[1][1]\n  }\n  \n  const ntersectionPoints = []\n  \n  for (let j = 0, jj = polygonCoordinates.length - 1; j < jj; j ++) {\n    let points = polygonCoordinates[j]\n    let nextPoints = polygonCoordinates[j + 1]\n    \n    let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n    // 如果两边的extent相交，则判断他们是否相交\n    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n      \n      const seg1 = {\n        x1: points[0],\n        y1: points[1],\n        x2: nextPoints[0],\n        y2: nextPoints[1]\n      }\n      \n      const intersectPoint = segmentsIntersect(seg1, seg2, {point: true})\n      if (intersectPoint instanceof Object) {\n        ntersectionPoints.push({\n          point: intersectPoint,\n          originPoint:{\n            fromPoint: points,\n            toPoint: nextPoints\n          },\n          index: j\n        })\n      }\n    }\n  }\n  \n  return ntersectionPoints\n}\n\nconst findIntersectionPoints = function (polygonCoordinates, lineCoordinates) {\n  const _findOneIntersectionPoints = findOneIntersectionPoints\n  let ntersectionPoints = []\n  \n  for (let i = 0, len = lineCoordinates.length - 1; i < len ; i++) {\n    const firstPoint = lineCoordinates[i]\n    const endPoint = lineCoordinates[i + 1]\n    \n    const intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint])\n    intersectionPoints.forEach( ntp => {\n      ntp.intersectIndex = i\n      ntp.intersectFrom = {\n        fromPoint: firstPoint,\n        endPoint: endPoint\n      }\n    })\n    \n    ntersectionPoints = ntersectionPoints.concat(intersectionPoints)\n  }\n  \n  return ntersectionPoints\n}\n\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x: x, y: y,\n    along: along\n  }\n}\n\n/**\n * 处理带洞多边形\n * @param polygon\n * @param geometryCollection\n * @param splitLine\n */\nconst handleHolesForPolygon = function(polygon, geometryCollection, splitLine) {\n  if (!polygon.hasHoles()) {\n    return\n  }\n  \n  const addHoleToPolygon = function(polyCoods, geometryCollection) {\n    const poly = new Polygon([polyCoods])\n    const needPoly = geometryCollection.find( polygon => {\n      return contains(polygon, poly)\n    })\n    \n    if (needPoly) {\n      needPoly.getCoordinates().push(polyCoods)\n    }\n  }\n  \n  // 判断洞是否与切割线相交\n  const coords = polygon.getCoordinates()\n  const lineCoords = splitLine\n  \n  for (let i = 1, len = coords.length ;i < len ; i++) {\n    const dividedPoints = findIntersectionPoints(coords[i], lineCoords)\n    \n    // 如果分割线和洞不相交，需要判断洞的归属\n    if (dividedPoints.length === 0) {\n      // console.log('Find one need to appended to collection.')\n      addHoleToPolygon (coords[i], geometryCollection)\n    }\n  }\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/splitpolygon.js","/**\n * Created by zypc on 2016/11/21.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from './browserevent'\n\nexport default class BrowserEventHandler extends BaseObject {\n\n  constructor (map, element) {\n    super()\n\n    this.map = map\n\n    /**\n     *\n     * @private\n     */\n    this._element = element\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._dragging = false\n  \n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * @private\n     */\n    this._down = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._dragListenerKeys = []\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._clickTimeoutId = 0\n    \n\n    // 事件和对应的处理方法\n    // 映射关系\n    this._mapping = {\n      'mousedown': this._mousedown,\n      'mousemove': this._mousemove,\n      'mouseup': this._mouseup,\n      'mouseover': this._mouseover,\n      'mouseout': this._mouseout\n    }\n\n    this._registerSource()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _registerSource () {\n    // console.log('注册鼠标事件')\n    const events = this.getEvents()\n    events.forEach(eventName =>\n        listen(this._element, eventName, this._mapping[eventName], this))\n  }\n\n  /**\n   * 得到事件\n   *\n   * @method getEvents\n   * @return {Array}\n   */\n  getEvents () {\n    return Object.keys(this._mapping)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousedown (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DOWN)\n    this.dispatchEvent(event)\n  \n    this._dragging = false\n    this._down = e\n    \n    if (this._dragListenerKeys.length === 0) {\n      const documentDom = document\n  \n      this._dragListenerKeys.push(\n        listen(documentDom, BrowserEvent.MOUSE_MOVE, this._mousemove, this),\n        listen(documentDom, BrowserEvent.MOUSE_UP, this._mouseup, this)\n      )\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousemove (e) {\n  \n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_MOVE)\n  \n    if (event.coordinate === null) {\n      return\n    }\n    \n    this.dispatchEvent(event)\n    \n    if (this._isMoving(e)) {\n      this._dragging = true\n  \n      const newEvent = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DRAG, this._dragging)\n      this.dispatchEvent(newEvent)\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseup (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_UP)\n    this.dispatchEvent(event)\n  \n    if (!this._dragging && this._down) {\n      this._emulateClick(this._down)\n    }\n  \n    this._dragListenerKeys.forEach(unlistenByKey)\n    this._dragListenerKeys.length = 0\n    this._dragging = false\n    this._down = null\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseover (e) {\n    let event = new BrowserEvent(this.map, e,BrowserEvent.MOUSE_OVER)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseout (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_OUT)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param event\n   * @private\n   */\n  _emulateClick (event) {\n    let newEvent = new BrowserEvent(this.map,event,BrowserEvent.CLICK)\n    this.dispatchEvent(newEvent)\n  \n    // double click\n    if (this._clickTimeoutId !== 0) {\n      clearTimeout(this._clickTimeoutId)\n      this._clickTimeoutId = 0\n      newEvent = new BrowserEvent(this.map,event,BrowserEvent.DBLCLICK)\n      this.dispatchEvent(newEvent)\n    } else {\n      // single click\n      this._clickTimeoutId = setTimeout(function() {\n        this._clickTimeoutId = 0\n        let newEvent = new BrowserEvent(this.map,event,BrowserEvent.SINGLE_CLICK)\n        this.dispatchEvent(newEvent)\n      }.bind(this), 250)\n    }\n  }\n\n  /**\n   *\n   * @param event\n   * @return {boolean}\n   * @private\n   */\n  _isMoving (event) {\n    if (this._down === null) {\n      return false\n    }\n    \n    return event.clientX !== this._down.clientX ||\n           event.clientY !== this._down.clientY\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browsereventhandler.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport CanvasRenderer from '../renderer/canvas/canvasrenderer'\nimport BrowserEventHandler from './browsereventhandler'\nimport BrowserEvent from './browserevent'\nimport View from './view'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen} from '../core/eventmanager'\nimport {Transform} from '../data/matrix/transform'\nimport {EventType} from '../meek/eventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {componentsDefaults} from '../components/componentdefaults'\nimport {controlDefaults} from '../control/controldefaults'\n\n\n/**\n * Map类\n *\n * @class Map\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Map extends BaseObject {\n\n  /**\n   * @constructor\n   *\n   * @param options\n   */\n  constructor (options) {\n    super()\n\n    this._frameState = null\n    \n    /**\n     * 添加到map中的layers集合\n     * @private\n     */\n    this._layers = []\n  \n    /**\n     * 初始化矩阵转换器\n     * @type {*}\n     * @private\n     */\n    this._toPixelTransform = Transform.create()\n    this._toCoordinateTransform = Transform.create()\n\n    /**\n     *\n     * @private\n     */\n    this._animationDelayKey = undefined\n\n    /**\n     * The collection of components\n     * @private\n     */\n    this._components = []\n  \n    /**\n     * The collection of controls\n     * @type {Array}\n     * @private\n     */\n    this._controls = []\n\n    /**\n     * 默认比例\n     * @type {Number}\n     */\n    this._delta = 1\n  \n    // Create the viewport for map container\n    this._createViewport()\n  \n    this._overlayContainer = document.createElement('DIV')\n    this._overlayContainer.className = 'dt-overlaycontainer'\n    this.viewport.appendChild(this._overlayContainer)\n  \n    this._overlayContainerStopEvent = document.createElement('DIV')\n    this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent'\n  \n    // prevent event propagation from overlay\n    const overlayEvents = [\n      BrowserEvent.CLICK,\n      BrowserEvent.DBLCLICK,\n      BrowserEvent.MOUSE_DOWN,\n      BrowserEvent.MOUSE_UP,\n      BrowserEvent.MOUSE_WHEEL,\n      BrowserEvent.WHEEL\n    ]\n    overlayEvents.forEach(overlayEvent => {\n      listen(this._overlayContainerStopEvent, overlayEvent,\n        (evt) => {evt.stopPropagation() })\n    })\n    \n    this.viewport.appendChild(this._overlayContainerStopEvent)\n  \n    // Get the options inner\n    const optionsInner = Map.parseOptionsInner(options)\n    \n    // 是否允许图片坐标超出图片范围\n    this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false\n  \n    // Create the renderer\n    this._renderer = new optionsInner.rendererClass(this.viewport, this)\n    \n    // Create the browser events handler\n    this._createBrowserEventHandler()\n  \n    this._animationDelay = () => {\n      this._animationDelayKey = undefined\n      this._renderFrame(Date.now())\n    }\n    \n    // Set up the properties for map\n    this.layers = optionsInner.values['layers']\n    this.target = optionsInner.values['target']\n    this.view = optionsInner.values['view']\n    \n    // add default components to map\n    optionsInner.components.forEach(component =>\n      this.addComponents(component))\n    \n    // add default controls to map\n    optionsInner.controls.forEach(control => this.addControl(control))\n  \n    this._overlayIdIndex = {}\n    this._overlays = optionsInner.overlays\n    this._overlays.forEach(overlay => this._addOverlayInternal(overlay))\n    \n    // 监听view视图缩放事件\n    listen(this.view, EventType.CHANGE, this._handleViewChange, this)\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n    \n    // add mouse wheel events listener\n    listen(this.viewport, BrowserEvent.MOUSE_WHEEL, this._handleMouseWheelEvent, this)\n    listen(this.viewport, BrowserEvent.WHEEL, this._handleMouseWheelEvent, this)\n  }\n\n  /**\n   * 设置map的父容器,\n   * 所有的图层对象、组件对象的父容器\n   *\n   * @method createViewport\n   * @private\n   */\n  _createViewport () {\n    const viewport = document.createElement('DIV')\n    viewport.className = 'dt-viewport'\n    viewport.style.position = 'relative'\n    viewport.style.overflow = 'hidden'\n    viewport.style.width = '100%'\n    viewport.style.height = '100%'\n\n    this._viewport = viewport\n  }\n  \n  /**\n   * 获取overlay的容器\n   *\n   * @property overlayContainer\n   * @returns {Element|*}\n   */\n  get overlayContainer () { return this._overlayContainer }\n  \n  /**\n   * 获取overlay容器的结束事件\n   *\n   * @property overlayContainerStopEvent\n   * @returns {Element|*}\n   */\n  get overlayContainerStopEvent () { return this._overlayContainerStopEvent }\n  \n  /**\n   * 获取viewport\n   *\n   * @property viewport\n   * @returns {Element|*}\n   */\n  get viewport () { return this._viewport }\n\n  /**\n   * 地图渲染器对象;默认渲染方式为canvas方式\n   *\n   * @method createRenderer\n   * @private\n   */\n  _createRenderer () {\n    this._renderer = new CanvasRenderer(this.viewport, this)\n  }\n\n  /**\n   * 创建浏览器事件的监听器\n   *\n   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n   *\n   * @method createBrowserEventHandler\n   * @private\n   */\n  _createBrowserEventHandler () {\n    this._browserEventHandler = new BrowserEventHandler(this, this.viewport)\n\n    /**\n     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n     * 并处理浏览器事件\n     */\n    for (let key in BrowserEvent) {\n      listen(this._browserEventHandler, BrowserEvent[key],\n        this._handleBrowserEvent, this)\n    }\n  }\n  \n  /**\n   * Handle the mouse wheel event\n   * @param wheelEvent\n   * @private\n   */\n  _handleMouseWheelEvent (wheelEvent) {\n    const type = wheelEvent.type\n    const browserEvent = new BrowserEvent(this, wheelEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   *\n   * @param keyboardEvent\n   * @private\n   */\n  _handleKeyboardEvent (keyboardEvent) {\n    const type = keyboardEvent.type\n    const browserEvent = new BrowserEvent(this, keyboardEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   * Handle browser events\n   * @param browserEvent\n   * @private\n   */\n  _handleBrowserEvent (browserEvent) {\n    const cpts = this.components\n    let i\n\n    if (this.dispatchEvent(browserEvent) !== false) {\n      for (i = cpts.length - 1; i >= 0; i--) {\n        let cpt = cpts[i]\n\n        if (!cpt.active) {\n          continue\n        }\n\n        let cont = cpt.handleMouseEvent(browserEvent)\n\n        if (!cont) {\n          break\n        }\n      }\n    }\n  }\n  \n  /**\n   * 渲染map\n   *\n   * @method renderFrame\n   * @private\n   */\n  _renderFrame () {\n    const size = this.size\n    const view = this.view\n    let frameState = null\n\n    const extent = ExtentUtil.createEmpty()\n    const viewState = view.getViewState()\n    frameState = {\n      size,\n      viewState,\n      pixelRatio: 1,\n      extent,\n      toPixelTransform: this._toPixelTransform,\n      toCoordinateTransform: this._toCoordinateTransform,\n    }\n    \n    if (frameState) {\n      frameState.extent = ExtentUtil.getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent)\n    }\n    \n    this._frameState = frameState\n    this._renderer.renderFrame(frameState)\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    if (this._animationDelayKey === undefined) {\n      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay)\n    }\n  }\n  \n  /**\n   * Render map while the view has been changed\n   * @private\n   */\n  _handleViewChange () {\n    this.render()\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n  }\n  \n  /**\n   * 是否渲染\n   *\n   * @method isRendered\n   * @returns {Boolean}\n   */\n  isRendered () {\n    return !!this._frameState\n  }\n\n  /**\n   * Size读写器,当前地图的大小\n   *\n   * @property size\n   * @returns {Number}\n   */\n  get size () { return this._size }\n  set size (value) {\n    this._size = value\n  }\n\n  /**\n   * 获取组件\n   *\n   * @method components\n   * @returns {Array}\n   */\n  get components () { return this._components }\n  \n  /**\n   * map中控件集合\n   * @property controls\n   * @type {[]}\n   */\n  get controls () { return this._controls }\n\n  /**\n   * 当前存储在Map中的图层集合\n   *\n   * @property layers\n   * @type {Array}\n   */\n  get layers () { return this._layers }\n  set layers (value) {\n    if (Array.isArray(value)) {\n      value.forEach( layer => {\n        this.addLayer(layer)\n      })\n    }\n  }\n\n  /**\n   * target 读写器\n   *\n   * @property target\n   * @type\n   */\n  get target () { return this._target }\n  set target (value) {\n    this._target = value\n    const targetElement = document.getElementById(this._target)\n    targetElement.appendChild(this.viewport)\n  \n    // 监听键盘点击和抬起事件\n    listen(document, BrowserEvent.KEYDOWN,\n      this._handleKeyboardEvent, this),\n    listen(document, BrowserEvent.KEYPRESS,\n        this._handleKeyboardEvent, this)\n  \n    // 监听浏览器窗口变化，并做自适应\n    const handleRize = this.updateSize.bind(this)\n    window.addEventListener(EventType.RESIZE, handleRize, false)\n    \n    this.updateSize()\n    this.render()\n  }\n\n  /**\n   * 用于添加一个Component的方法接口\n   *\n   * @method addComponents\n   * @param cpt {Component} Componnet的一个子类\n   */\n  addComponents (cpt) {\n    this.components.push(cpt)\n    cpt.map = this\n  }\n  \n  /**\n   * 添加一个控件到地图中\n   * @method addControl\n   * @param control\n   */\n  addControl (control) {\n    this.controls.push(control)\n    control.map = this\n  }\n\n  /**\n   * 添加layer\n   *\n   * @method addLayer\n   * @param layer\n   */\n  addLayer (layer) {\n    this.layers.push(layer)\n    layer.map = this\n  }\n  \n  /**\n   * 获取当前地图中的矢量图层\n   *\n   * @method getFeaturesLayer\n   * @return {Array}\n   */\n  getFeaturesLayer () {\n    return this.layers.filter( layer => layer instanceof FeatureLayer )\n  }\n  \n  /**\n   *\n   * @param overlay\n   * @private\n   */\n  _addOverlayInternal (overlay) {\n    const id = overlay.overlayId\n    if (id !== undefined) {\n      this._overlayIdIndex[id.toString()] = overlay\n    }\n    \n    overlay.map = this\n  }\n  \n  /**\n   *\n   * getTargetElement\n   * @returns {Object}\n   */\n  getTargetElement () {\n    const target = this.target\n    if(target !== undefined) {\n      return typeof target === 'string' ?\n        document.getElementById(target) :\n        target\n    }else{\n      return null\n    }\n  }\n  \n  /**\n   * 遍历鼠标点位置的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance\n   * @returns {eature}\n   */\n  forEachFeatureAtPiexl (piexl,callback,tolerance) {\n    if (!this._frameState) {\n      return\n    }\n    \n    const coordinate = this.getCoordinateFromPixel(piexl)\n    const hitTolerance = tolerance\n    \n    const layers = this.getFeaturesLayer()\n    let result = null\n    for (let i = 0, ii = layers.length; i < ii; i++){\n      let layer = layers[i]\n      if (layer.visible) {\n        result = layer.forEachFeatureAtPiexl(this._frameState,coordinate,callback,hitTolerance)\n        if (result) {\n          return callback(result, layer)\n        }\n      }\n    }\n    \n    return result\n  }\n  \n  /**\n   * 更新map viewport的大小\n   *\n   * @method updateSize\n   */\n  updateSize () {\n    const targetElement = this.getTargetElement()\n    if (!targetElement) {\n      this.size = undefined\n    } else {\n      const computedStyle = getComputedStyle(targetElement)\n      this.size = [\n        targetElement.offsetWidth -\n        Number.parseFloat(computedStyle['borderLeftWidth']) -\n        Number.parseFloat(computedStyle['paddingLeft']) -\n        Number.parseFloat(computedStyle['paddingRight']) -\n        Number.parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n        Number.parseFloat(computedStyle['borderTopWidth']) -\n        Number.parseFloat(computedStyle['paddingTop']) -\n        Number.parseFloat(computedStyle['paddingBottom']) -\n        Number.parseFloat(computedStyle['borderBottomWidth'])\n      ]\n    }\n  }\n\n  /**\n   * 获取当前视图鼠标的坐标\n   *\n   * @method getEventPixel\n   * @param {Event} event Event.\n   * @return {Array}\n   * @api stable\n   */\n  getEventPixel (event) {\n    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n    const viewportPosition = this.viewport.getBoundingClientRect()\n    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n    const eventPosition = event\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ]\n  }\n  \n  /**\n   * 把坐标数据转换到标准坐标系中\n   *\n   * @method getCoordinateFromPixel\n   * @param pixelPoint {Array}\n   * @returns {Array}\n   */\n  getCoordinateFromPixel (pixelPoint) {\n    // console.log('转换到标准坐标')\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply( frameState.toCoordinateTransform, pixelPoint.slice())\n    }\n  }\n  \n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   *\n   * getPixelFromCoordinate\n   * @param coordinate\n   * @returns {Array}\n   */\n  getPixelFromCoordinate (coordinate) {\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2))\n    }\n  }\n\n  /**\n   * 以地图中心点放大\n   * @return {[type]} [description]\n   */\n  zoomIn () {\n    this._zoomByDelta(this._delta)\n  }\n\n  /**\n   * 以地图中心点缩小\n   * @return {[type]} [description]\n   */\n  zoomOut () {\n    this._zoomByDelta(-this._delta)\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const view = this.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n\n  switchToOverview () {\n    const view = this.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n  /**\n   * Parse the options passed inner\n   * parseOptionsInner\n   * @param options\n   * @static\n   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n   */\n  static parseOptionsInner (options = {}) {\n    \n    const rendererClass = CanvasRenderer\n    \n    const values = {}\n    \n    values['view'] = options.view !== undefined ? options.view : new View()\n    values['target'] = options.target\n    values['layers'] = options.layers !== undefined ? options.layers : []\n    \n    let components\n    if (options.components) {\n      components = options.components\n    } else {\n      components = componentsDefaults()\n    }\n  \n    let controls\n    if (options.controls) {\n      controls = options.controls\n    } else {\n      controls = controlDefaults()\n    }\n    \n    let overlays\n    if (options.overlays !== undefined) {\n      if (Array.isArray(options.overlays)) {\n        overlays = [...options.overlays]\n      }\n    } else {\n      overlays = []\n    }\n    \n    return {\n      rendererClass,\n      components,\n      controls,\n      values,\n      overlays\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/map.js","/**\n * Created by zhangyong on 2017/6/26.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen} from '../core/eventmanager'\nimport {RenderEventType} from '../renderer/rendereventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {outerWidth, outerHeight, removeChildren} from '../utils/domutil'\n\n/**\n * Overlay类提供一个可以漂浮在map上的容器，\n * 凡是需要有和地图交互的表单，必须使用该容器承载\n *\n * @class Overlay\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Overlay extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._element = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._map = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._offset = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._position = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._positioning = undefined\n    \n    \n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this._overlay = options.id\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._stopEvent = options.stopEvent !== undefined ?\n      options.stopEvent : true\n  \n    /**\n     * @private\n     * @type {Element}\n     */\n    this._element = document.createElement('DIV')\n    this._element.className = 'dt-overlay-container dt-selectable'\n    this._element.style.position = 'absolute'\n  \n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false\n  \n    /**\n     * @private\n     */\n    this._autoPanAnimation = options.autoPanAnimation || {}\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20\n  \n    /**\n     * @private\n     * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n     */\n    this._rendered = {\n      _bottom: '',\n      _left: '',\n      _right: '',\n      _top: '',\n      _visible: true\n    }\n  \n    /**\n     * @private\n     * @type {EventsKey}\n     */\n    this._mapPostrenderListenerKey = null\n  \n    if (options.element !== undefined) {\n      this.popupEelement = options.element\n    }\n  \n    this.offset = options.offset !== undefined ?\n      options.offset : [0, 0]\n  \n    this.positioning = options.positioning !== undefined ? options.positioning :\n      OverlayPositioning.TOP_LEFT\n  \n    if (options.position !== undefined) {\n      this.position = options.position\n    }\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    this.updatePixelPosition()\n  }\n  \n  /**\n   * 更新鼠标点的位置信息\n   *\n   * @method updatePixelPosition\n   */\n  updatePixelPosition () {\n    const map = this.map\n    if (map) {\n      const position = this.position\n      if (!map || !map.isRendered() || !position) {\n        this.setVisible(false)\n        return\n      }\n  \n      const pixel = map.getPixelFromCoordinate(position)\n      const mapSize = map.size\n      this.updateRenderedPosition(pixel, mapSize)\n    }\n  }\n  \n  /**\n   * 更新渲染视图位置\n   *\n   * @param pixel {Array}\n   * @param mapSize {Number}\n   */\n  updateRenderedPosition (pixel, mapSize) {\n    const style = this._element.style\n    const offset = this.offset\n    const positioning = this.positioning\n    \n    this.setVisible(true)\n    \n    let offsetX = offset[0]\n    let offsetY = offset[1]\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n      positioning == OverlayPositioning.CENTER_RIGHT ||\n      positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this._rendered.left_ !== '') {\n        this._rendered.left_ = style.left = ''\n      }\n      \n      const right = `${Math.round(mapSize[0] - pixel[0] - offsetX)}px`\n      if (this._rendered.right_ != right) {\n        this._rendered.right_ = style.right = right\n      }\n    } else {\n      if (this._rendered.right_ !== '') {\n        this._rendered.right_ = style.right = ''\n      }\n      \n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this._element.offsetWidth / 2\n      }\n      \n      const left = `${Math.round(pixel[0] + offsetX)}px`\n      if (this._rendered.left_ != left) {\n        this._rendered.left_ = style.left = left\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n      positioning == OverlayPositioning.BOTTOM_CENTER ||\n      positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this._rendered.top_ !== '') {\n        this._rendered.top_ = style.top = ''\n      }\n      \n      const bottom = `${Math.round(mapSize[1] - pixel[1] - offsetY)}px`\n      if (this._rendered.bottom_ != bottom) {\n        this._rendered.bottom_ = style.bottom = bottom\n      }\n    } else {\n      if (this._rendered.bottom_ !== '') {\n        this._rendered.bottom_ = style.bottom = ''\n      }\n      \n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this._element.offsetHeight / 2\n      }\n      \n      const top = `${Math.round(pixel[1] + offsetY)}px`\n      if (this._rendered.top_ != top) {\n        this._rendered.top_ = style.top = top\n      }\n    }\n  }\n  \n  /**\n   * 设置浮云框是否可见\n   *\n   * @method setVisible\n   * @param visible\n   */\n  setVisible (visible) {\n    if (this._rendered.visible !== visible) {\n      this._element.style.display = visible ? '' : 'none'\n      this._rendered.visible = visible\n    }\n  }\n  \n  /**\n   * 表单自动适应视图范围\n   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n   * 可视范围内\n   *\n   * @private\n   */\n  _panIntoView () {\n    const map = this.map\n    \n    if (!map || !map.getTargetElement()) {\n      return\n    }\n    \n    const mapRect = this._getRect(map.getTargetElement(), map.size)\n    const element = this.popupEelement\n\n    if(element.clientHeight === 0 && element.clientWidth === 0){\n      return\n    }\n    const overlayRect = this._getRect(element,\n      [outerWidth(element), outerHeight(element)])\n    \n    const margin = this._autoPanMargin\n    if (!ExtentUtil.containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0]\n      const offsetRight = mapRect[2] - overlayRect[2]\n      const offsetTop = overlayRect[1] - mapRect[1]\n      const offsetBottom = mapRect[3] - overlayRect[3]\n      \n      const delta = [0, 0]\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin\n      }\n      \n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin\n      }\n      \n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = map.view.center\n        const centerPx = map.getPixelFromCoordinate(center)\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ]\n        \n        map.view.center = map.getCoordinateFromPixel(newCenterPx)\n      }\n    }\n  }\n\n  /**\n   *\n   * @param element\n   * @param size\n   * @return {*[]}\n   * @private\n   */\n  _getRect (element, size) {\n    const box = element.getBoundingClientRect()\n    const offsetX = box.left + window.pageXOffset\n    const offsetY = box.top + window.pageYOffset\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ]\n  }\n\n  /**\n   * 获取当前浮云框对象的 ID\n   *\n   * @property overlayId\n   * @type {number|string|undefined}\n   */\n  get overlayId () { return this._overlayId }\n\n  /**\n   * 获取表单元素\n   *\n   * @property popupEelement\n   * @type {DOM}\n   */\n  get popupEelement () { return this._popupEelement }\n  set popupEelement (value) {\n    this._popupEelement = value\n  \n    this._setElement()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _setElement () {\n    removeChildren(this._element)\n    const pelement = this.popupEelement\n    if (pelement) {\n      this._element.appendChild(pelement)\n    }\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @property map\n   * @type {mk.map}\n   */\n  get map () { return this._map }\n  set map (value) {\n    this._map = value\n    if (this._map) {\n      const map = this._map\n      this._mapPostrenderListenerKey = listen(map,\n        RenderEventType.POSTRENDER, this.render, this)\n      this.updatePixelPosition()\n      const container = this._stopEvent ?\n        map.overlayContainerStopEvent : map.overlayContainer\n      if (this._insertFirst) {\n        container.insertBefore(this._element, container.childNodes[0] || null)\n      } else {\n        container.appendChild(this._element)\n      }\n    }\n  }\n\n  /**\n   * 偏移量读写器\n   *\n   * @property offset\n   * @return {*|undefined}\n   */\n  get offset () { return this._offset }\n  set offset (value) {\n    this._offset = value\n    this.updatePixelPosition()\n  }\n\n  /**\n   * 鼠标点位置读写器\n   *\n   * @property position\n   * @return {undefined|*}\n   */\n  get position () { return this._position }\n  set position (value) {\n    this._position = value\n    \n    this.updatePixelPosition()\n    \n    if (this._position && this.autoPan) {\n      this._panIntoView()\n    }\n  }\n\n  /**\n   *\n   *\n   * positioning\n   * @return {undefined|*}\n   */\n  get positioning () { return this._positioning }\n  set positioning (value) {\n    this._positioning = value\n    this.updatePixelPosition()\n  }\n}\n\n\nconst OverlayPositioning = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/overlay.js","\nimport SingleImageLayer from '../../lyr/singleimagelayer'\nimport FeatureLayer from '../../lyr/featurelayer'\nimport Renderer from '../renderer'\nimport FeatureLayerRenderer from '../canvas/featurelayerrenderer'\nimport ImageLayerRenderer from '../canvas/imagelayerrenderer'\nimport {createCanvasContext2D} from '../../utils/domutil'\nimport {Transform} from '../../data/matrix/transform'\nimport {RenderEventType} from '../rendereventtype'\nimport {stableSort} from '../../utils/array'\n\nimport RenderEvent from '../renderevent'\n\n\n/**\n * 图形渲染调度器\n *\n */\nexport default class CanvasRenderer extends Renderer {\n\n  constructor (container, map) {\n    super(container, map)\n\n    this._context = null\n    this._canvas = null\n  \n    this._rendererVisible = true\n    this._layerRenderers = []\n    this._transform = Transform.create()\n    \n    this._addToContainer(container)\n  }\n  \n  /**\n   * Add the canvas dom to the container\n   * @param container\n   * @private\n   */\n  _addToContainer (container) {\n    /**\n     * 创建CANVAS元素，并将其添加到container中\n     * 该canvas层作为图形绘制层\n     */\n    let _context = this.context\n    this._canvas = _context.canvas\n    this._canvas.style.width = '100%'\n    this._canvas.style.height = '100%'\n    this._canvas.className = 'dt-unselectable'\n    container.insertBefore(this._canvas, container.childNodes[0] || null)\n  }\n  \n  /**\n   * Render frame\n   * @param frameState\n   */\n  renderFrame (frameState) {\n    if (this.map === null) {\n      return\n    }\n    \n    if (!frameState) {\n      if (this._rendererVisible) {\n        this._canvas.style.display = 'none'\n        this._rendererVisible = false\n    \n        return\n      }\n    }\n    \n    const context = this.context\n    \n    const canvasWidth = frameState.size[0]\n    const canvasHeight = frameState.size[1]\n    \n    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    } else {\n      // context.clearRect(0,0,canvasWidth,canvasHeight)\n\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    }\n\n    \n\n    // context.translate(0.5, 0.5)\n\n    const layers = this.map.layers\n  \n    // layers rendered in order\n    stableSort(layers, this.sortByZIndex)\n    \n    // 更新转化运算矩阵\n    this.updateTransform(frameState)\n  \n    this._dispatchComposeEvent(RenderEventType.PRERENDER, frameState)\n    \n    layers.forEach( layer => {\n      if (layer.visible) {\n        let layerRender = this.getLayerRenderer(layer)\n  \n        if (layerRender.prepareFrame(frameState)) {\n          layerRender.composeFrame(frameState,context)\n        }\n      }\n    })\n  \n    this._dispatchComposeEvent(RenderEventType.POSTRENDER, frameState)\n  }\n  \n  /**\n   * Get the layer renderer by the params layer object\n   * @param layer\n   * @returns {*}\n   */\n  getLayerRenderer (layer) {\n    const layerKey = layer.id.toString()\n    // 应用层缓存\n    if (layerKey in this._layerRenderers) {\n      return this._layerRenderers[layerKey]\n    } else {\n      const layerRenderer = this.createLayerRenderer(layer)\n      this._layerRenderers[layerKey] = layerRenderer\n      return layerRenderer\n    }\n  }\n  \n  /**\n   * Create the layer renderer\n   * @param layer\n   * @returns {*}\n   */\n  createLayerRenderer(layer){\n    if (layer instanceof SingleImageLayer) {\n      return new ImageLayerRenderer(layer,this.context)\n    } else if (layer instanceof FeatureLayer) {\n      return new FeatureLayerRenderer(layer, this.context, this.map)\n    } else {\n      return null\n    }\n  }\n  \n  /**\n   * Update the transform\n   * @param frameState\n   */\n  updateTransform (frameState){\n    const viewState = frameState.viewState\n    const coordinateToPixelTransform = frameState.toPixelTransform\n    const pixelToCoordinateTransform = frameState.toCoordinateTransform\n    const size = frameState.size\n    const resolution = viewState.resolution\n    const center = viewState.center\n    const rotation = viewState.rotation\n  \n    Transform.compose(coordinateToPixelTransform,\n          size[0] / 2, size[1] / 2,\n          1 / resolution,  1 / resolution,\n          - rotation,\n          - center[0], - center[1])\n  \n    Transform.invert(Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform))\n  }\n  \n  /**\n   *\n   * @param state1\n   * @param state2\n   * @returns {number}\n   */\n  sortByZIndex (state1, state2) {\n    return state1.zIndex - state2.zIndex\n  }\n  \n  get canvas(){ return this._canvas }\n  \n  get context(){\n    if(!this._context){\n      this._context = createCanvasContext2D()\n    }\n    \n    return this._context\n  }\n  \n  \n  /**\n   * \n   * @private\n   */\n  _dispatchComposeEvent (type, frameState) {\n    const map = this.map\n    const context = this.context\n    if (map.hasListener(type)) {\n    \n      // const transform = this.getTransform(frameState)\n    \n      const composeEvent = new RenderEvent(type,\n        frameState, context, null)\n      \n      map.dispatchEvent(composeEvent)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/canvasrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\nimport PointRender from '../render/pointrender'\nimport LineRender from '../render/linerender'\nimport PolygonRender from '../render/polygonrender'\nimport TextRender from '../render/textrender'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class FeatureLayerRenderer extends LayerRenderer {\n  \n  \n  constructor (layer, context, map) {\n    super(layer, context)\n\n    this._map = map\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._geometryRenderGroup = new Map()\n  \n    /**\n     *\n     * @type {TextRender}\n     * @private\n     */\n    this._textRender = new TextRender(this.context)\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._maxExtent = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._renderFeatures = []\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderResolution = Number.NaN\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity]\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderRevision = NaN\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._cacheableThisTime = true\n  \n  }\n  \n  /**\n   *  Get a renderer by geometry type\n   * @param geometry\n   * @returns {*}\n   * @private\n   */\n  _getGeometryRender (geometry) {\n    const type = geometry.geometryType\n    \n    if ( !this._geometryRenderGroup.has(type) ) {\n      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context))\n    }\n    \n    return this._geometryRenderGroup.get(type)\n  }\n \n  \n  _renderFeaturesInOrder (features) {\n    if (features === null || features === undefined) {\n      return features\n    }\n    \n    if (features.length === 0) {\n      return features\n    }\n    \n  }\n\n  _calculaterFeaturesFontSize(features) {\n    const view = this._map.view\n    const originResolution = view._originalResolution\n    const resolutions = view._resolutions\n    const resolution = view._resolution\n\n    if (!resolutions) {\n      return\n    }\n\n    const oriIndex = resolutions.findIndex(r => r == originResolution)\n    const curIndex = resolutions.findIndex(r => r == resolution)\n\n    let deep = curIndex-oriIndex\n    if (deep <= 0) {\n      deep = 0\n    }\n\n    let font = 12 + (deep * 2)\n    if (font >= 24) {\n      font = 24\n    }\n\n    // const fontStr = `normal ${font}px Arial`\n\n    features.forEach(feature => {\n      const style = feature.style[0]\n      const fontStr = style.textStyle.font\n      \n      const boldFont = `${fontStr.split(' ')[0]} ${font}px Arial`\n\n      style.textStyle.font = boldFont\n    })\n\n  }\n  \n  /**\n   * 1、对渲染对象需要做切割 （当前范围内）\n   */\n  prepareFrame (frameState) {\n    const layer = this.layer\n    const frameExtent = frameState.extent\n    const viewState = frameState.viewState\n    const resolution = viewState.resolution\n    const layerRevision = layer.revision\n    const featureLayerRenderBuffer = layer.renderBuffer\n    \n    const renderExtent = ExtentUtil.buffer(frameExtent,\n      featureLayerRenderBuffer * resolution)\n    \n    if (this._renderResolution === resolution &&\n        this._renderRevision === layerRevision &&\n        ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n      this._cacheableThisTime = true\n      \n      // return true\n    }\n  \n    // 加载当前屏的图形\n    const features = this.layer.loadFeature(renderExtent)\n\n    this._cacheableThisTime = false\n    this._renderFeatures = features\n    this._maxExtent = renderExtent\n    this._renderResolution = resolution\n    this._renderExtent = renderExtent\n    this._renderRevision = layerRevision\n    \n    if (features.length === 0) {\n      return false\n    }\n    \n    return true\n  }\n  \n  /**\n   *\n   */\n  composeFrame (frameStateOpt, context) {\n    const frameState = frameStateOpt\n    const viewState = frameState.viewState\n    const layer = this.layer\n    const features = this._renderFeatures\n    const resolution = viewState.resolution\n  \n    const transform = this.getTransform(frameState, 0)\n  \n    this.preCompose(context, frameState, transform)\n    \n    // Clip the current extent so that the parts of geometries\n    // will not be rendered\n    this._clipExtent(transform, context)\n    \n    features.forEach(feature => {\n      let renderStyle\n      \n      if (feature.style) {\n        renderStyle = feature.style\n      } else {\n        let styleFunction = layer.styleFunction\n        if (styleFunction) {\n          renderStyle = styleFunction(feature, resolution)\n  \n          // 应用图层样式\n          feature.style = this._cloneRenderStyle(renderStyle)\n        }\n      }\n      \n      let geomertyRender = this._getGeometryRender(feature.geometry)\n      this._resetRender(geomertyRender)\n      geomertyRender.render(feature, renderStyle, transform)\n  \n      /**\n       * Render text\n       */\n      if (feature.textDisplay) {\n        this._calculaterFeaturesFontSize([feature])\n        this._textRender.render(feature, feature.style, transform)\n      }\n    })\n  \n    context.restore()\n    \n    this.postCompose(context, frameState, transform)\n    \n    return true\n  }\n  \n  /**\n   *\n   * @param renderStyle\n   * @returns {*}\n   * @private\n   */\n  _cloneRenderStyle (renderStyle) {\n    if (renderStyle) {\n      const newStyle = []\n      renderStyle.forEach( rs => {\n        newStyle.push(rs.clone())\n      })\n      \n      return newStyle\n    }\n    \n    return null\n  }\n  \n  /**\n   * Clip the context\n   * @param transform\n   * @private\n   */\n  _clipExtent (transform, context) {\n    const flatClipCoords = this.getClipCoords(transform)\n    \n    context.save()\n    context.beginPath()\n    context.moveTo(flatClipCoords[0], flatClipCoords[1])\n    context.lineTo(flatClipCoords[2], flatClipCoords[3])\n    context.lineTo(flatClipCoords[4], flatClipCoords[5])\n    context.lineTo(flatClipCoords[6], flatClipCoords[7])\n    context.clip()\n  }\n  \n  /**\n   * Get clip coordinates\n   * @param transform\n   * @returns {[*,*,*,*,*,*,*,*]}\n   */\n  getClipCoords (transform) {\n    const maxExtent = this._maxExtent\n    const minX = maxExtent[0]\n    const minY = maxExtent[1]\n    const maxX = maxExtent[2]\n    const maxY = maxExtent[3]\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY]\n    Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords)\n    return flatClipCoords\n  }\n  \n  /**\n   *\n   * @param geomertyRender\n   * @private\n   */\n  _resetRender (geomertyRender) {\n    if (!this._cacheableThisTime) {\n      geomertyRender.resetRenderOption()\n    }\n  }\n  \n  preCompose () {\n    \n  }\n  \n  postCompose () {\n    \n  }\n  \n}\n\nFeatureLayerRenderer.GeometryRender = {}\n\nFeatureLayerRenderer.GeometryRender['point'] = PointRender\nFeatureLayerRenderer.GeometryRender['line'] = LineRender\nFeatureLayerRenderer.GeometryRender['polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['multi_polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['extent'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['parallelogram'] = PolygonRender\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/featurelayerrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class ImageLayerRenderer extends LayerRenderer {\n  constructor (layer) {\n    super(layer)\n    \n    this._image = null\n    \n    this._imageTransform = Transform.create()\n  \n    this.coordinateToCanvasPixelTransform = Transform.create()\n  }\n  \n  /**\n   * @inheritDoc\n   */\n  get image () {\n    return !this._image ? null : this._image.getDomImage()\n  }\n  \n  \n  /**\n   * @inheritDoc\n   */\n  get imageTransform () { return this._imageTransform }\n  \n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @returns {boolean}\n   */\n  prepareFrame (frameState) {\n    const pixelRatio = frameState.pixelRatio\n    const size = frameState.size\n    const viewState = frameState.viewState\n    const viewCenter = viewState.center\n    const viewResolution = viewState.resolution\n    \n    let image\n    const imageLayer = this.layer\n    let renderedExtent = frameState.extent\n    \n    if (!ExtentUtil.isEmpty(renderedExtent)) {\n      const projection = viewState.projection\n\n      image = imageLayer.getImageInternal(renderedExtent,\n        viewResolution, pixelRatio, projection)\n      \n      // Load the image\n      if (image) {\n        const loaded = this.loadImage(image)\n        if (loaded) {\n          this._image = image\n        }\n      }\n    }\n    \n    if (this._image) {\n      image = this._image\n      const imageExtent = image.extent\n      const imageResolution = image.resolution\n      const imagePixelRatio = image.pixelRatio\n      const scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio)\n      \n      const transform = Transform.compose(this.imageTransform,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, -scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution)\n      \n      Transform.compose(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1])\n    }\n    \n    return !!this.image\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @param context\n   */\n  composeFrame (frameState, context) {\n    this.preCompose(context, frameState)\n    const image = this.image\n    if (image) {\n      // clipped rendering if layer extent is set\n      const extent = undefined\n      const clipped = extent !== undefined &&\n        !ExtentUtil.containsExtent(extent, frameState.extent) &&\n         ExtentUtil.intersects(extent, frameState.extent)\n      \n      if (clipped) {\n        this.clip(context, frameState, extent)\n      }\n  \n      const imageLayer = this.layer\n      const imageTransform = this.imageTransform\n      const alpha = context.globalAlpha\n      context.globalAlpha = imageLayer.opacity\n      \n      const dx = imageTransform[4]\n      const dy = imageTransform[5]\n      const dw = image.width * imageTransform[0]\n      const dh = image.height * imageTransform[3]\n      context.imageSmoothingEnabled = false\n      context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh))\n      \n      context.globalAlpha = alpha\n      \n      if (clipped) {\n        context.restore()\n      }\n    }\n    \n    this.postCompose(context, frameState)\n  }\n  \n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/imagelayerrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class LineRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const transform2D =  Transform.transform2D\n    let coordinates = []\n    // TODO find a way to cache the rendered data\n    if (this._pixelCoordinates &&\n        this.equalsTransform(transform, this.renderedTransform)) {\n      coordinates = this._pixelCoordinates\n      // console.log('get the rendered data from chche for line')\n    } else {\n      const geometryCoordinates = geometry.getCoordinates()\n  \n      geometryCoordinates.forEach(function(points){\n        let coordinate = transform2D(\n          points, 0, points.length, 2,\n          transform)\n    \n        coordinate[0] = (coordinate[0] + 0.5 ) | 0\n        coordinate[1] = (coordinate[1] + 0.5 ) | 0\n    \n        coordinates.push(coordinate)\n      })\n  \n      this._pixelCoordinates = coordinates\n      Transform.setFromArray(this.renderedTransform, transform)\n      // console.log('caclulate the rendered data for line')\n    }\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: coordinates,\n        width: styleObj.width,\n        strokeStyle: colorToString(styleObj.color,styleObj.alpha),\n        lineCap: styleObj.lineCap,\n        lineJion: styleObj.lineJion,\n        miterLimit: styleObj.miterLimit,\n        hasDash: styleObj.style === LineStyle.DASH ? true : false\n      }\n      \n      this.drawLine(ctx, renderOptions)\n    }\n  }\n  \n  drawLine (ctx, renderOpt) {\n    ctx.save()\n    ctx.strokeStyle = renderOpt.strokeStyle\n    ctx.lineWidth = renderOpt.width\n  \n    ctx.lineCap = renderOpt.lineCap\n    ctx.lineJoin = renderOpt.lineJion\n    ctx.miterLimit = renderOpt.miterLimit\n  \n    ctx.beginPath()\n    const coordinates = renderOpt.coordinates\n    ctx.moveTo(coordinates[0][0], coordinates[0][1])\n    for (let i = 0,ii = coordinates.length ; i < ii - 1 ; i++) {\n      ctx.lineTo(coordinates[i+1][0],coordinates[i+1][1])\n    }\n  \n    if (renderOpt.hasDash) {\n      ctx.setLineDash([5, 5])\n    }\n  \n    ctx.stroke()\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/linerender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class PointRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   * Render a point\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if(!feature){\n      return\n    }\n    \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geomerty = feature.geometry\n  \n    const coordinates = [geomerty.x, geomerty.y]\n\n    // TODO  Should be cached\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    const x = pixelCoordinates[0]\n    const y = pixelCoordinates[1]\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n      \n      let renderOptions = {\n        centerX: (x + 0.5) | 0,\n        centerY: (y + 0.5) | 0,\n        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n      \n      this.drawCircle(ctx,renderOptions)\n    }\n    \n  }\n  \n  drawCircle (ctx,renderOptions) {\n    // console.log('类型为圆，开始绘制圆')\n    ctx.save()\n    ctx.beginPath()\n    ctx.arc(renderOptions.centerX, renderOptions.centerY,\n            renderOptions.radius, 0, 2 * Math.PI, true)\n  \n    if (renderOptions.fillStyle) {\n      ctx.fillStyle = renderOptions.fillStyle\n      ctx.fill()\n    }\n    \n    const borderStyle = renderOptions.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n\n      if (borderStyle.lineDash) {\n        ctx.setLineDash(borderStyle.lineDash)\n      }\n\n      ctx.stroke()\n    }\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/pointrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport Geometry from '../../geometry/geometry'\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n\nexport default class PolygonRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   * Render a polygon\n   * @param feature\n   * @param transform\n   * @returns {boolean}\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const  transform2D =  Transform.transform2D\n    let geometryCoordinages = geometry.getCoordinates()\n    if (geometry.geometryType === Geometry.EXTENT) {\n      geometryCoordinages = [geometryCoordinages]\n    }\n    \n    if (!geometryCoordinages) {\n      return false\n    }\n    \n    if (geometryCoordinages.length === 0) {\n      return false\n    }\n  \n    // TODO find a way to cache the rendered data\n    let coordinates = []\n    let renderCoords = []\n    \n    if (this._pixelCoordinates &&\n      this.equalsTransform(transform, this.renderedTransform)) {\n      renderCoords = this._pixelCoordinates\n    } else {\n      if (geometry.geometryType === Geometry.MULTI_POLYGON) {\n        let polygonCoords = []\n        // 遍历各个多边形\n        geometryCoordinages.forEach( polygon => {\n          polygon.forEach( rings => {\n            rings.forEach( points => {\n              let coordinate = transform2D(\n                points, 0, points.length, 2,\n                transform)\n  \n              coordinate[0] = (coordinate[0] + 0.5 ) | 0\n              coordinate[1] = (coordinate[1] + 0.5 ) | 0\n  \n              coordinates.push(coordinate)\n            })\n  \n            polygonCoords.push(coordinates)\n            coordinates = []\n          })\n          \n          renderCoords.push(polygonCoords)\n          polygonCoords = []\n        })\n        \n        this.renderMutilPolygon (ctx, styleArray, renderCoords)\n      } else {\n        // 遍历多边形各个环\n        geometryCoordinages.forEach( rings => {\n          rings.forEach(points => {\n            let coordinate = transform2D(\n              points, 0, points.length, 2,\n              transform)\n      \n            coordinate[0] = (coordinate[0] + 0.5 ) | 0\n            coordinate[1] = (coordinate[1] + 0.5 ) | 0\n      \n            coordinates.push(coordinate)\n          })\n    \n          renderCoords.push(coordinates)\n          coordinates = []\n        })\n      }\n      \n      this.renderPolygon(ctx, styleArray, renderCoords)\n    }\n  \n    this._pixelCoordinates = renderCoords\n    Transform.setFromArray(this.renderedTransform, transform)\n  \n    return true\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderMutilPolygon (ctx, styleArray, renderCoords) {\n    renderCoords.forEach( polygon => {\n      this.renderPolygon(ctx, styleArray, polygon)\n    })\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderPolygon (ctx, styleArray, renderCoords) {\n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: renderCoords,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n    \n      this.drawStylePolygon(ctx, renderOptions)\n    }\n  }\n  \n  /**\n   * 绘制多边形，需要注意多边形各个环的绘制\n   * @param ctx\n   * @param renderOpt\n   */\n  drawStylePolygon (ctx, renderOpt) {\n    ctx.save()\n    \n    if (renderOpt.fillStyle) {\n      ctx.fillStyle = renderOpt.fillStyle\n    }\n  \n    const borderStyle = renderOpt.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n    \n      if (borderStyle.style === LineStyle.DASH) {\n        ctx.setLineDash([5, 5])\n      }\n    }\n    \n    const coords = renderOpt.coordinates\n    coords.forEach( (coordinates, index) => {\n      if (index === 0) {\n        ctx.beginPath()\n      }\n      \n      ctx.moveTo(coordinates[0][0],coordinates[0][1])\n      for(let k = 1, kk = coordinates.length ; k < kk ; k ++){\n        let cd = coordinates[k]\n        ctx.lineTo(cd[0],cd[1])\n      }\n  \n      ctx.closePath()\n    })\n  \n    ctx.fill()\n    ctx.stroke()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/polygonrender.js","/**\n * Created by zhangyong on 2017/3/24.\n */\n\nimport GeometryRender from './geomertyrender'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n// import TextStyle from '../../style/textstyle'\n// import LineStyle from '../../style/linestyle'\n\nexport default class TextRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    let textStyle = renderStyle[0].textStyle\n    if (!feature.displayText || !textStyle) {\n      return\n    }\n    \n    const displayText = String(feature.displayText)\n    textStyle.text = displayText\n\n    const ctx = this.context\n    ctx.save()\n    \n    const geometry = feature.geometry\n    const coordinates = geometry.getFlatInteriorPoint()\n    \n    this._pixelCoordinates = []\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    for (let i = 0, len = pixelCoordinates.length ;i < len ; i += 2) {\n      const xValue = pixelCoordinates[i]\n      const yValue = pixelCoordinates[i + 1]\n      \n      // set the context text style\n      this._setTextStyle(ctx, textStyle)\n  \n      // const offsetX = textStyle.offsetX + 10\n      const offsetX = textStyle.offsetX\n      // const offsetY = textStyle.offsetY + 10\n      const offsetY = textStyle.offsetY - 3\n\n\n      const stroke = textStyle.stroke ? true : false\n      const fill = textStyle.fill ? true : false\n      const text = textStyle.text\n  \n      let x = xValue + offsetX\n      let y = yValue + offsetY\n  \n      let lines = text.split('\\n')\n      const numLines = lines.length\n      let fontSize, lineY\n      if (numLines > 1) {\n        fontSize = Math.round(ctx.measureText('M').width * 1.5)\n        lineY = y - (((numLines - 1) / 2) * fontSize)\n      } else {\n        fontSize = 0\n        lineY = y\n      }\n  \n      for (let lineIndex = 0; lineIndex < numLines; lineIndex++) {\n        const lineText = lines[lineIndex]\n        if (stroke) {\n          ctx.strokeText(lineText, x, lineY)\n        }\n\n        if (fill) {\n          ctx.fillText(lineText, x, lineY)\n        }\n    \n        lineY = lineY + fontSize\n      }\n    }\n  \n    ctx.restore()\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param textStyle\n   * @private\n   */\n  _setTextStyle (ctx, textStyle) {\n    const borderStyle = textStyle.stroke\n  \n    ctx.font = textStyle.font\n    ctx.strokeStyle = colorToString(borderStyle.color, 1)\n    ctx.fillStyle = colorToString(textStyle.fill, 1)\n    ctx.textBaseline = textStyle.textBaseline\n    ctx.textAlign = textStyle.textAlign\n    ctx.lineWidth = borderStyle.width\n    ctx.lineCap = borderStyle.lineCap\n    ctx.lineJoin = borderStyle.lineJion\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/textrender.js","/**\n * Created by zypc on 2016/11/15.\n */\n\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 地图渲染器基类，\n * @class Renderer\n * @extends BaseObject\n * @module renderer\n */\nexport default class Renderer extends BaseObject {\n\n  constructor (contianer, map) {\n    super()\n\n    this._map = map\n  }\n  \n  /**\n   * @property map\n   * @type {mk.Map}\n   */\n  get map () { return this._map }\n  \n  /**\n   *\n   * @method renderFrame\n   * @abstract\n   * @param frameState {Object}\n   */\n  renderFrame (frameState) {} // eslint-disable-line no-unused-vars\n\n  /**\n   * @method clear\n   * @abstract\n   */\n  clear () {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderer.js","/**\n * Created by zhangyong on 2017/6/27.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * @class RenderEvent\n * @extends BaseEvent\n * @module renderer\n * @constructor\n */\nexport default class RenderEvent extends BaseEvent {\n  \n  constructor (type, frameState, context, trasform) {\n    \n    super(type)\n  \n  \n    /**\n     * @property frameState\n     * @type {Object}\n     */\n    this.frameState = frameState\n  \n  \n    /**\n     * @property trasform\n     * @type {Object}\n     */\n    this.trasform = trasform\n  \n    /**\n     *@property context\n     *@type {HTML5.}\n     */\n    this.context = context\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderevent.js"],"sourceRoot":""}